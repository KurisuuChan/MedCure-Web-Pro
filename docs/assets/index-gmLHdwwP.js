(function(){const a=document.createElement("link").relList;if(a&&a.supports&&a.supports("modulepreload"))return;for(const c of document.querySelectorAll('link[rel="modulepreload"]'))i(c);new MutationObserver(c=>{for(const u of c)if(u.type==="childList")for(const h of u.addedNodes)h.tagName==="LINK"&&h.rel==="modulepreload"&&i(h)}).observe(document,{childList:!0,subtree:!0});function l(c){const u={};return c.integrity&&(u.integrity=c.integrity),c.referrerPolicy&&(u.referrerPolicy=c.referrerPolicy),c.crossOrigin==="use-credentials"?u.credentials="include":c.crossOrigin==="anonymous"?u.credentials="omit":u.credentials="same-origin",u}function i(c){if(c.ep)return;c.ep=!0;const u=l(c);fetch(c.href,u)}})();function md(n){return n&&n.__esModule&&Object.prototype.hasOwnProperty.call(n,"default")?n.default:n}function eb(n){if(Object.prototype.hasOwnProperty.call(n,"__esModule"))return n;var a=n.default;if(typeof a=="function"){var l=function i(){var c=!1;try{c=this instanceof i}catch{}return c?Reflect.construct(a,arguments,this.constructor):a.apply(this,arguments)};l.prototype=a.prototype}else l={};return Object.defineProperty(l,"__esModule",{value:!0}),Object.keys(n).forEach(function(i){var c=Object.getOwnPropertyDescriptor(n,i);Object.defineProperty(l,i,c.get?c:{enumerable:!0,get:function(){return n[i]}})}),l}var ju={exports:{}},Gn={};/**
 * @license React
 * react-jsx-runtime.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var E0;function tb(){if(E0)return Gn;E0=1;var n=Symbol.for("react.transitional.element"),a=Symbol.for("react.fragment");function l(i,c,u){var h=null;if(u!==void 0&&(h=""+u),c.key!==void 0&&(h=""+c.key),"key"in c){u={};for(var m in c)m!=="key"&&(u[m]=c[m])}else u=c;return c=u.ref,{$$typeof:n,type:i,key:h,ref:c!==void 0?c:null,props:u}}return Gn.Fragment=a,Gn.jsx=l,Gn.jsxs=l,Gn}var A0;function sb(){return A0||(A0=1,ju.exports=tb()),ju.exports}var s=sb(),wu={exports:{}},pe={};/**
 * @license React
 * react.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var T0;function ab(){if(T0)return pe;T0=1;var n=Symbol.for("react.transitional.element"),a=Symbol.for("react.portal"),l=Symbol.for("react.fragment"),i=Symbol.for("react.strict_mode"),c=Symbol.for("react.profiler"),u=Symbol.for("react.consumer"),h=Symbol.for("react.context"),m=Symbol.for("react.forward_ref"),x=Symbol.for("react.suspense"),g=Symbol.for("react.memo"),p=Symbol.for("react.lazy"),b=Symbol.iterator;function j(E){return E===null||typeof E!="object"?null:(E=b&&E[b]||E["@@iterator"],typeof E=="function"?E:null)}var w={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},S=Object.assign,_={};function C(E,I,F){this.props=E,this.context=I,this.refs=_,this.updater=F||w}C.prototype.isReactComponent={},C.prototype.setState=function(E,I){if(typeof E!="object"&&typeof E!="function"&&E!=null)throw Error("takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,E,I,"setState")},C.prototype.forceUpdate=function(E){this.updater.enqueueForceUpdate(this,E,"forceUpdate")};function L(){}L.prototype=C.prototype;function B(E,I,F){this.props=E,this.context=I,this.refs=_,this.updater=F||w}var z=B.prototype=new L;z.constructor=B,S(z,C.prototype),z.isPureReactComponent=!0;var U=Array.isArray,D={H:null,A:null,T:null,S:null,V:null},q=Object.prototype.hasOwnProperty;function H(E,I,F,Z,ie,Se){return F=Se.ref,{$$typeof:n,type:E,key:I,ref:F!==void 0?F:null,props:Se}}function ee(E,I){return H(E.type,I,void 0,void 0,void 0,E.props)}function K(E){return typeof E=="object"&&E!==null&&E.$$typeof===n}function te(E){var I={"=":"=0",":":"=2"};return"$"+E.replace(/[=:]/g,function(F){return I[F]})}var de=/\/+/g;function me(E,I){return typeof E=="object"&&E!==null&&E.key!=null?te(""+E.key):I.toString(36)}function oe(){}function Q(E){switch(E.status){case"fulfilled":return E.value;case"rejected":throw E.reason;default:switch(typeof E.status=="string"?E.then(oe,oe):(E.status="pending",E.then(function(I){E.status==="pending"&&(E.status="fulfilled",E.value=I)},function(I){E.status==="pending"&&(E.status="rejected",E.reason=I)})),E.status){case"fulfilled":return E.value;case"rejected":throw E.reason}}throw E}function X(E,I,F,Z,ie){var Se=typeof E;(Se==="undefined"||Se==="boolean")&&(E=null);var fe=!1;if(E===null)fe=!0;else switch(Se){case"bigint":case"string":case"number":fe=!0;break;case"object":switch(E.$$typeof){case n:case a:fe=!0;break;case p:return fe=E._init,X(fe(E._payload),I,F,Z,ie)}}if(fe)return ie=ie(E),fe=Z===""?"."+me(E,0):Z,U(ie)?(F="",fe!=null&&(F=fe.replace(de,"$&/")+"/"),X(ie,I,F,"",function(Ts){return Ts})):ie!=null&&(K(ie)&&(ie=ee(ie,F+(ie.key==null||E&&E.key===ie.key?"":(""+ie.key).replace(de,"$&/")+"/")+fe)),I.push(ie)),1;fe=0;var bt=Z===""?".":Z+":";if(U(E))for(var Le=0;Le<E.length;Le++)Z=E[Le],Se=bt+me(Z,Le),fe+=X(Z,I,F,Se,ie);else if(Le=j(E),typeof Le=="function")for(E=Le.call(E),Le=0;!(Z=E.next()).done;)Z=Z.value,Se=bt+me(Z,Le++),fe+=X(Z,I,F,Se,ie);else if(Se==="object"){if(typeof E.then=="function")return X(Q(E),I,F,Z,ie);throw I=String(E),Error("Objects are not valid as a React child (found: "+(I==="[object Object]"?"object with keys {"+Object.keys(E).join(", ")+"}":I)+"). If you meant to render a collection of children, use an array instead.")}return fe}function R(E,I,F){if(E==null)return E;var Z=[],ie=0;return X(E,Z,"","",function(Se){return I.call(F,Se,ie++)}),Z}function W(E){if(E._status===-1){var I=E._result;I=I(),I.then(function(F){(E._status===0||E._status===-1)&&(E._status=1,E._result=F)},function(F){(E._status===0||E._status===-1)&&(E._status=2,E._result=F)}),E._status===-1&&(E._status=0,E._result=I)}if(E._status===1)return E._result.default;throw E._result}var J=typeof reportError=="function"?reportError:function(E){if(typeof window=="object"&&typeof window.ErrorEvent=="function"){var I=new window.ErrorEvent("error",{bubbles:!0,cancelable:!0,message:typeof E=="object"&&E!==null&&typeof E.message=="string"?String(E.message):String(E),error:E});if(!window.dispatchEvent(I))return}else if(typeof process=="object"&&typeof process.emit=="function"){process.emit("uncaughtException",E);return}console.error(E)};function ye(){}return pe.Children={map:R,forEach:function(E,I,F){R(E,function(){I.apply(this,arguments)},F)},count:function(E){var I=0;return R(E,function(){I++}),I},toArray:function(E){return R(E,function(I){return I})||[]},only:function(E){if(!K(E))throw Error("React.Children.only expected to receive a single React element child.");return E}},pe.Component=C,pe.Fragment=l,pe.Profiler=c,pe.PureComponent=B,pe.StrictMode=i,pe.Suspense=x,pe.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE=D,pe.__COMPILER_RUNTIME={__proto__:null,c:function(E){return D.H.useMemoCache(E)}},pe.cache=function(E){return function(){return E.apply(null,arguments)}},pe.cloneElement=function(E,I,F){if(E==null)throw Error("The argument must be a React element, but you passed "+E+".");var Z=S({},E.props),ie=E.key,Se=void 0;if(I!=null)for(fe in I.ref!==void 0&&(Se=void 0),I.key!==void 0&&(ie=""+I.key),I)!q.call(I,fe)||fe==="key"||fe==="__self"||fe==="__source"||fe==="ref"&&I.ref===void 0||(Z[fe]=I[fe]);var fe=arguments.length-2;if(fe===1)Z.children=F;else if(1<fe){for(var bt=Array(fe),Le=0;Le<fe;Le++)bt[Le]=arguments[Le+2];Z.children=bt}return H(E.type,ie,void 0,void 0,Se,Z)},pe.createContext=function(E){return E={$$typeof:h,_currentValue:E,_currentValue2:E,_threadCount:0,Provider:null,Consumer:null},E.Provider=E,E.Consumer={$$typeof:u,_context:E},E},pe.createElement=function(E,I,F){var Z,ie={},Se=null;if(I!=null)for(Z in I.key!==void 0&&(Se=""+I.key),I)q.call(I,Z)&&Z!=="key"&&Z!=="__self"&&Z!=="__source"&&(ie[Z]=I[Z]);var fe=arguments.length-2;if(fe===1)ie.children=F;else if(1<fe){for(var bt=Array(fe),Le=0;Le<fe;Le++)bt[Le]=arguments[Le+2];ie.children=bt}if(E&&E.defaultProps)for(Z in fe=E.defaultProps,fe)ie[Z]===void 0&&(ie[Z]=fe[Z]);return H(E,Se,void 0,void 0,null,ie)},pe.createRef=function(){return{current:null}},pe.forwardRef=function(E){return{$$typeof:m,render:E}},pe.isValidElement=K,pe.lazy=function(E){return{$$typeof:p,_payload:{_status:-1,_result:E},_init:W}},pe.memo=function(E,I){return{$$typeof:g,type:E,compare:I===void 0?null:I}},pe.startTransition=function(E){var I=D.T,F={};D.T=F;try{var Z=E(),ie=D.S;ie!==null&&ie(F,Z),typeof Z=="object"&&Z!==null&&typeof Z.then=="function"&&Z.then(ye,J)}catch(Se){J(Se)}finally{D.T=I}},pe.unstable_useCacheRefresh=function(){return D.H.useCacheRefresh()},pe.use=function(E){return D.H.use(E)},pe.useActionState=function(E,I,F){return D.H.useActionState(E,I,F)},pe.useCallback=function(E,I){return D.H.useCallback(E,I)},pe.useContext=function(E){return D.H.useContext(E)},pe.useDebugValue=function(){},pe.useDeferredValue=function(E,I){return D.H.useDeferredValue(E,I)},pe.useEffect=function(E,I,F){var Z=D.H;if(typeof F=="function")throw Error("useEffect CRUD overload is not enabled in this build of React.");return Z.useEffect(E,I)},pe.useId=function(){return D.H.useId()},pe.useImperativeHandle=function(E,I,F){return D.H.useImperativeHandle(E,I,F)},pe.useInsertionEffect=function(E,I){return D.H.useInsertionEffect(E,I)},pe.useLayoutEffect=function(E,I){return D.H.useLayoutEffect(E,I)},pe.useMemo=function(E,I){return D.H.useMemo(E,I)},pe.useOptimistic=function(E,I){return D.H.useOptimistic(E,I)},pe.useReducer=function(E,I,F){return D.H.useReducer(E,I,F)},pe.useRef=function(E){return D.H.useRef(E)},pe.useState=function(E){return D.H.useState(E)},pe.useSyncExternalStore=function(E,I,F){return D.H.useSyncExternalStore(E,I,F)},pe.useTransition=function(){return D.H.useTransition()},pe.version="19.1.1",pe}var R0;function gd(){return R0||(R0=1,wu.exports=ab()),wu.exports}var N=gd();const rs=md(N);var _u={exports:{}},Vn={},Nu={exports:{}},Su={};/**
 * @license React
 * scheduler.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var O0;function rb(){return O0||(O0=1,(function(n){function a(R,W){var J=R.length;R.push(W);e:for(;0<J;){var ye=J-1>>>1,E=R[ye];if(0<c(E,W))R[ye]=W,R[J]=E,J=ye;else break e}}function l(R){return R.length===0?null:R[0]}function i(R){if(R.length===0)return null;var W=R[0],J=R.pop();if(J!==W){R[0]=J;e:for(var ye=0,E=R.length,I=E>>>1;ye<I;){var F=2*(ye+1)-1,Z=R[F],ie=F+1,Se=R[ie];if(0>c(Z,J))ie<E&&0>c(Se,Z)?(R[ye]=Se,R[ie]=J,ye=ie):(R[ye]=Z,R[F]=J,ye=F);else if(ie<E&&0>c(Se,J))R[ye]=Se,R[ie]=J,ye=ie;else break e}}return W}function c(R,W){var J=R.sortIndex-W.sortIndex;return J!==0?J:R.id-W.id}if(n.unstable_now=void 0,typeof performance=="object"&&typeof performance.now=="function"){var u=performance;n.unstable_now=function(){return u.now()}}else{var h=Date,m=h.now();n.unstable_now=function(){return h.now()-m}}var x=[],g=[],p=1,b=null,j=3,w=!1,S=!1,_=!1,C=!1,L=typeof setTimeout=="function"?setTimeout:null,B=typeof clearTimeout=="function"?clearTimeout:null,z=typeof setImmediate<"u"?setImmediate:null;function U(R){for(var W=l(g);W!==null;){if(W.callback===null)i(g);else if(W.startTime<=R)i(g),W.sortIndex=W.expirationTime,a(x,W);else break;W=l(g)}}function D(R){if(_=!1,U(R),!S)if(l(x)!==null)S=!0,q||(q=!0,me());else{var W=l(g);W!==null&&X(D,W.startTime-R)}}var q=!1,H=-1,ee=5,K=-1;function te(){return C?!0:!(n.unstable_now()-K<ee)}function de(){if(C=!1,q){var R=n.unstable_now();K=R;var W=!0;try{e:{S=!1,_&&(_=!1,B(H),H=-1),w=!0;var J=j;try{t:{for(U(R),b=l(x);b!==null&&!(b.expirationTime>R&&te());){var ye=b.callback;if(typeof ye=="function"){b.callback=null,j=b.priorityLevel;var E=ye(b.expirationTime<=R);if(R=n.unstable_now(),typeof E=="function"){b.callback=E,U(R),W=!0;break t}b===l(x)&&i(x),U(R)}else i(x);b=l(x)}if(b!==null)W=!0;else{var I=l(g);I!==null&&X(D,I.startTime-R),W=!1}}break e}finally{b=null,j=J,w=!1}W=void 0}}finally{W?me():q=!1}}}var me;if(typeof z=="function")me=function(){z(de)};else if(typeof MessageChannel<"u"){var oe=new MessageChannel,Q=oe.port2;oe.port1.onmessage=de,me=function(){Q.postMessage(null)}}else me=function(){L(de,0)};function X(R,W){H=L(function(){R(n.unstable_now())},W)}n.unstable_IdlePriority=5,n.unstable_ImmediatePriority=1,n.unstable_LowPriority=4,n.unstable_NormalPriority=3,n.unstable_Profiling=null,n.unstable_UserBlockingPriority=2,n.unstable_cancelCallback=function(R){R.callback=null},n.unstable_forceFrameRate=function(R){0>R||125<R?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):ee=0<R?Math.floor(1e3/R):5},n.unstable_getCurrentPriorityLevel=function(){return j},n.unstable_next=function(R){switch(j){case 1:case 2:case 3:var W=3;break;default:W=j}var J=j;j=W;try{return R()}finally{j=J}},n.unstable_requestPaint=function(){C=!0},n.unstable_runWithPriority=function(R,W){switch(R){case 1:case 2:case 3:case 4:case 5:break;default:R=3}var J=j;j=R;try{return W()}finally{j=J}},n.unstable_scheduleCallback=function(R,W,J){var ye=n.unstable_now();switch(typeof J=="object"&&J!==null?(J=J.delay,J=typeof J=="number"&&0<J?ye+J:ye):J=ye,R){case 1:var E=-1;break;case 2:E=250;break;case 5:E=1073741823;break;case 4:E=1e4;break;default:E=5e3}return E=J+E,R={id:p++,callback:W,priorityLevel:R,startTime:J,expirationTime:E,sortIndex:-1},J>ye?(R.sortIndex=J,a(g,R),l(x)===null&&R===l(g)&&(_?(B(H),H=-1):_=!0,X(D,J-ye))):(R.sortIndex=E,a(x,R),S||w||(S=!0,q||(q=!0,me()))),R},n.unstable_shouldYield=te,n.unstable_wrapCallback=function(R){var W=j;return function(){var J=j;j=W;try{return R.apply(this,arguments)}finally{j=J}}}})(Su)),Su}var D0;function nb(){return D0||(D0=1,Nu.exports=rb()),Nu.exports}var ku={exports:{}},ot={};/**
 * @license React
 * react-dom.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var M0;function lb(){if(M0)return ot;M0=1;var n=gd();function a(x){var g="https://react.dev/errors/"+x;if(1<arguments.length){g+="?args[]="+encodeURIComponent(arguments[1]);for(var p=2;p<arguments.length;p++)g+="&args[]="+encodeURIComponent(arguments[p])}return"Minified React error #"+x+"; visit "+g+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}function l(){}var i={d:{f:l,r:function(){throw Error(a(522))},D:l,C:l,L:l,m:l,X:l,S:l,M:l},p:0,findDOMNode:null},c=Symbol.for("react.portal");function u(x,g,p){var b=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:c,key:b==null?null:""+b,children:x,containerInfo:g,implementation:p}}var h=n.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE;function m(x,g){if(x==="font")return"";if(typeof g=="string")return g==="use-credentials"?g:""}return ot.__DOM_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE=i,ot.createPortal=function(x,g){var p=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!g||g.nodeType!==1&&g.nodeType!==9&&g.nodeType!==11)throw Error(a(299));return u(x,g,null,p)},ot.flushSync=function(x){var g=h.T,p=i.p;try{if(h.T=null,i.p=2,x)return x()}finally{h.T=g,i.p=p,i.d.f()}},ot.preconnect=function(x,g){typeof x=="string"&&(g?(g=g.crossOrigin,g=typeof g=="string"?g==="use-credentials"?g:"":void 0):g=null,i.d.C(x,g))},ot.prefetchDNS=function(x){typeof x=="string"&&i.d.D(x)},ot.preinit=function(x,g){if(typeof x=="string"&&g&&typeof g.as=="string"){var p=g.as,b=m(p,g.crossOrigin),j=typeof g.integrity=="string"?g.integrity:void 0,w=typeof g.fetchPriority=="string"?g.fetchPriority:void 0;p==="style"?i.d.S(x,typeof g.precedence=="string"?g.precedence:void 0,{crossOrigin:b,integrity:j,fetchPriority:w}):p==="script"&&i.d.X(x,{crossOrigin:b,integrity:j,fetchPriority:w,nonce:typeof g.nonce=="string"?g.nonce:void 0})}},ot.preinitModule=function(x,g){if(typeof x=="string")if(typeof g=="object"&&g!==null){if(g.as==null||g.as==="script"){var p=m(g.as,g.crossOrigin);i.d.M(x,{crossOrigin:p,integrity:typeof g.integrity=="string"?g.integrity:void 0,nonce:typeof g.nonce=="string"?g.nonce:void 0})}}else g==null&&i.d.M(x)},ot.preload=function(x,g){if(typeof x=="string"&&typeof g=="object"&&g!==null&&typeof g.as=="string"){var p=g.as,b=m(p,g.crossOrigin);i.d.L(x,p,{crossOrigin:b,integrity:typeof g.integrity=="string"?g.integrity:void 0,nonce:typeof g.nonce=="string"?g.nonce:void 0,type:typeof g.type=="string"?g.type:void 0,fetchPriority:typeof g.fetchPriority=="string"?g.fetchPriority:void 0,referrerPolicy:typeof g.referrerPolicy=="string"?g.referrerPolicy:void 0,imageSrcSet:typeof g.imageSrcSet=="string"?g.imageSrcSet:void 0,imageSizes:typeof g.imageSizes=="string"?g.imageSizes:void 0,media:typeof g.media=="string"?g.media:void 0})}},ot.preloadModule=function(x,g){if(typeof x=="string")if(g){var p=m(g.as,g.crossOrigin);i.d.m(x,{as:typeof g.as=="string"&&g.as!=="script"?g.as:void 0,crossOrigin:p,integrity:typeof g.integrity=="string"?g.integrity:void 0})}else i.d.m(x)},ot.requestFormReset=function(x){i.d.r(x)},ot.unstable_batchedUpdates=function(x,g){return x(g)},ot.useFormState=function(x,g,p){return h.H.useFormState(x,g,p)},ot.useFormStatus=function(){return h.H.useHostTransitionStatus()},ot.version="19.1.1",ot}var U0;function ib(){if(U0)return ku.exports;U0=1;function n(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(n)}catch(a){console.error(a)}}return n(),ku.exports=lb(),ku.exports}/**
 * @license React
 * react-dom-client.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var P0;function ob(){if(P0)return Vn;P0=1;var n=nb(),a=gd(),l=ib();function i(e){var t="https://react.dev/errors/"+e;if(1<arguments.length){t+="?args[]="+encodeURIComponent(arguments[1]);for(var r=2;r<arguments.length;r++)t+="&args[]="+encodeURIComponent(arguments[r])}return"Minified React error #"+e+"; visit "+t+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}function c(e){return!(!e||e.nodeType!==1&&e.nodeType!==9&&e.nodeType!==11)}function u(e){var t=e,r=e;if(e.alternate)for(;t.return;)t=t.return;else{e=t;do t=e,(t.flags&4098)!==0&&(r=t.return),e=t.return;while(e)}return t.tag===3?r:null}function h(e){if(e.tag===13){var t=e.memoizedState;if(t===null&&(e=e.alternate,e!==null&&(t=e.memoizedState)),t!==null)return t.dehydrated}return null}function m(e){if(u(e)!==e)throw Error(i(188))}function x(e){var t=e.alternate;if(!t){if(t=u(e),t===null)throw Error(i(188));return t!==e?null:e}for(var r=e,o=t;;){var d=r.return;if(d===null)break;var f=d.alternate;if(f===null){if(o=d.return,o!==null){r=o;continue}break}if(d.child===f.child){for(f=d.child;f;){if(f===r)return m(d),e;if(f===o)return m(d),t;f=f.sibling}throw Error(i(188))}if(r.return!==o.return)r=d,o=f;else{for(var y=!1,v=d.child;v;){if(v===r){y=!0,r=d,o=f;break}if(v===o){y=!0,o=d,r=f;break}v=v.sibling}if(!y){for(v=f.child;v;){if(v===r){y=!0,r=f,o=d;break}if(v===o){y=!0,o=f,r=d;break}v=v.sibling}if(!y)throw Error(i(189))}}if(r.alternate!==o)throw Error(i(190))}if(r.tag!==3)throw Error(i(188));return r.stateNode.current===r?e:t}function g(e){var t=e.tag;if(t===5||t===26||t===27||t===6)return e;for(e=e.child;e!==null;){if(t=g(e),t!==null)return t;e=e.sibling}return null}var p=Object.assign,b=Symbol.for("react.element"),j=Symbol.for("react.transitional.element"),w=Symbol.for("react.portal"),S=Symbol.for("react.fragment"),_=Symbol.for("react.strict_mode"),C=Symbol.for("react.profiler"),L=Symbol.for("react.provider"),B=Symbol.for("react.consumer"),z=Symbol.for("react.context"),U=Symbol.for("react.forward_ref"),D=Symbol.for("react.suspense"),q=Symbol.for("react.suspense_list"),H=Symbol.for("react.memo"),ee=Symbol.for("react.lazy"),K=Symbol.for("react.activity"),te=Symbol.for("react.memo_cache_sentinel"),de=Symbol.iterator;function me(e){return e===null||typeof e!="object"?null:(e=de&&e[de]||e["@@iterator"],typeof e=="function"?e:null)}var oe=Symbol.for("react.client.reference");function Q(e){if(e==null)return null;if(typeof e=="function")return e.$$typeof===oe?null:e.displayName||e.name||null;if(typeof e=="string")return e;switch(e){case S:return"Fragment";case C:return"Profiler";case _:return"StrictMode";case D:return"Suspense";case q:return"SuspenseList";case K:return"Activity"}if(typeof e=="object")switch(e.$$typeof){case w:return"Portal";case z:return(e.displayName||"Context")+".Provider";case B:return(e._context.displayName||"Context")+".Consumer";case U:var t=e.render;return e=e.displayName,e||(e=t.displayName||t.name||"",e=e!==""?"ForwardRef("+e+")":"ForwardRef"),e;case H:return t=e.displayName||null,t!==null?t:Q(e.type)||"Memo";case ee:t=e._payload,e=e._init;try{return Q(e(t))}catch{}}return null}var X=Array.isArray,R=a.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,W=l.__DOM_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,J={pending:!1,data:null,method:null,action:null},ye=[],E=-1;function I(e){return{current:e}}function F(e){0>E||(e.current=ye[E],ye[E]=null,E--)}function Z(e,t){E++,ye[E]=e.current,e.current=t}var ie=I(null),Se=I(null),fe=I(null),bt=I(null);function Le(e,t){switch(Z(fe,t),Z(Se,e),Z(ie,null),t.nodeType){case 9:case 11:e=(e=t.documentElement)&&(e=e.namespaceURI)?s0(e):0;break;default:if(e=t.tagName,t=t.namespaceURI)t=s0(t),e=a0(t,e);else switch(e){case"svg":e=1;break;case"math":e=2;break;default:e=0}}F(ie),Z(ie,e)}function Ts(){F(ie),F(Se),F(fe)}function no(e){e.memoizedState!==null&&Z(bt,e);var t=ie.current,r=a0(t,e.type);t!==r&&(Z(Se,e),Z(ie,r))}function dl(e){Se.current===e&&(F(ie),F(Se)),bt.current===e&&(F(bt),qn._currentValue=J)}var lo=Object.prototype.hasOwnProperty,io=n.unstable_scheduleCallback,oo=n.unstable_cancelCallback,Ox=n.unstable_shouldYield,Dx=n.unstable_requestPaint,Xt=n.unstable_now,Mx=n.unstable_getCurrentPriorityLevel,Ud=n.unstable_ImmediatePriority,Pd=n.unstable_UserBlockingPriority,hl=n.unstable_NormalPriority,Ux=n.unstable_LowPriority,Ld=n.unstable_IdlePriority,Px=n.log,Lx=n.unstable_setDisableYieldValue,Qr=null,vt=null;function Rs(e){if(typeof Px=="function"&&Lx(e),vt&&typeof vt.setStrictMode=="function")try{vt.setStrictMode(Qr,e)}catch{}}var jt=Math.clz32?Math.clz32:$x,qx=Math.log,zx=Math.LN2;function $x(e){return e>>>=0,e===0?32:31-(qx(e)/zx|0)|0}var fl=256,ml=4194304;function oa(e){var t=e&42;if(t!==0)return t;switch(e&-e){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:return 64;case 128:return 128;case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return e&4194048;case 4194304:case 8388608:case 16777216:case 33554432:return e&62914560;case 67108864:return 67108864;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 0;default:return e}}function gl(e,t,r){var o=e.pendingLanes;if(o===0)return 0;var d=0,f=e.suspendedLanes,y=e.pingedLanes;e=e.warmLanes;var v=o&134217727;return v!==0?(o=v&~f,o!==0?d=oa(o):(y&=v,y!==0?d=oa(y):r||(r=v&~e,r!==0&&(d=oa(r))))):(v=o&~f,v!==0?d=oa(v):y!==0?d=oa(y):r||(r=o&~e,r!==0&&(d=oa(r)))),d===0?0:t!==0&&t!==d&&(t&f)===0&&(f=d&-d,r=t&-t,f>=r||f===32&&(r&4194048)!==0)?t:d}function Yr(e,t){return(e.pendingLanes&~(e.suspendedLanes&~e.pingedLanes)&t)===0}function Bx(e,t){switch(e){case 1:case 2:case 4:case 8:case 64:return t+250;case 16:case 32:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return t+5e3;case 4194304:case 8388608:case 16777216:case 33554432:return-1;case 67108864:case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function qd(){var e=fl;return fl<<=1,(fl&4194048)===0&&(fl=256),e}function zd(){var e=ml;return ml<<=1,(ml&62914560)===0&&(ml=4194304),e}function co(e){for(var t=[],r=0;31>r;r++)t.push(e);return t}function Fr(e,t){e.pendingLanes|=t,t!==268435456&&(e.suspendedLanes=0,e.pingedLanes=0,e.warmLanes=0)}function Hx(e,t,r,o,d,f){var y=e.pendingLanes;e.pendingLanes=r,e.suspendedLanes=0,e.pingedLanes=0,e.warmLanes=0,e.expiredLanes&=r,e.entangledLanes&=r,e.errorRecoveryDisabledLanes&=r,e.shellSuspendCounter=0;var v=e.entanglements,k=e.expirationTimes,M=e.hiddenUpdates;for(r=y&~r;0<r;){var G=31-jt(r),Y=1<<G;v[G]=0,k[G]=-1;var P=M[G];if(P!==null)for(M[G]=null,G=0;G<P.length;G++){var $=P[G];$!==null&&($.lane&=-536870913)}r&=~Y}o!==0&&$d(e,o,0),f!==0&&d===0&&e.tag!==0&&(e.suspendedLanes|=f&~(y&~t))}function $d(e,t,r){e.pendingLanes|=t,e.suspendedLanes&=~t;var o=31-jt(t);e.entangledLanes|=t,e.entanglements[o]=e.entanglements[o]|1073741824|r&4194090}function Bd(e,t){var r=e.entangledLanes|=t;for(e=e.entanglements;r;){var o=31-jt(r),d=1<<o;d&t|e[o]&t&&(e[o]|=t),r&=~d}}function uo(e){switch(e){case 2:e=1;break;case 8:e=4;break;case 32:e=16;break;case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:e=128;break;case 268435456:e=134217728;break;default:e=0}return e}function ho(e){return e&=-e,2<e?8<e?(e&134217727)!==0?32:268435456:8:2}function Hd(){var e=W.p;return e!==0?e:(e=window.event,e===void 0?32:w0(e.type))}function Gx(e,t){var r=W.p;try{return W.p=e,t()}finally{W.p=r}}var Os=Math.random().toString(36).slice(2),lt="__reactFiber$"+Os,ht="__reactProps$"+Os,Pa="__reactContainer$"+Os,fo="__reactEvents$"+Os,Vx="__reactListeners$"+Os,Qx="__reactHandles$"+Os,Gd="__reactResources$"+Os,Ir="__reactMarker$"+Os;function mo(e){delete e[lt],delete e[ht],delete e[fo],delete e[Vx],delete e[Qx]}function La(e){var t=e[lt];if(t)return t;for(var r=e.parentNode;r;){if(t=r[Pa]||r[lt]){if(r=t.alternate,t.child!==null||r!==null&&r.child!==null)for(e=i0(e);e!==null;){if(r=e[lt])return r;e=i0(e)}return t}e=r,r=e.parentNode}return null}function qa(e){if(e=e[lt]||e[Pa]){var t=e.tag;if(t===5||t===6||t===13||t===26||t===27||t===3)return e}return null}function Kr(e){var t=e.tag;if(t===5||t===26||t===27||t===6)return e.stateNode;throw Error(i(33))}function za(e){var t=e[Gd];return t||(t=e[Gd]={hoistableStyles:new Map,hoistableScripts:new Map}),t}function Ze(e){e[Ir]=!0}var Vd=new Set,Qd={};function ca(e,t){$a(e,t),$a(e+"Capture",t)}function $a(e,t){for(Qd[e]=t,e=0;e<t.length;e++)Vd.add(t[e])}var Yx=RegExp("^[:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD][:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD\\-.0-9\\u00B7\\u0300-\\u036F\\u203F-\\u2040]*$"),Yd={},Fd={};function Fx(e){return lo.call(Fd,e)?!0:lo.call(Yd,e)?!1:Yx.test(e)?Fd[e]=!0:(Yd[e]=!0,!1)}function xl(e,t,r){if(Fx(t))if(r===null)e.removeAttribute(t);else{switch(typeof r){case"undefined":case"function":case"symbol":e.removeAttribute(t);return;case"boolean":var o=t.toLowerCase().slice(0,5);if(o!=="data-"&&o!=="aria-"){e.removeAttribute(t);return}}e.setAttribute(t,""+r)}}function pl(e,t,r){if(r===null)e.removeAttribute(t);else{switch(typeof r){case"undefined":case"function":case"symbol":case"boolean":e.removeAttribute(t);return}e.setAttribute(t,""+r)}}function is(e,t,r,o){if(o===null)e.removeAttribute(r);else{switch(typeof o){case"undefined":case"function":case"symbol":case"boolean":e.removeAttribute(r);return}e.setAttributeNS(t,r,""+o)}}var go,Id;function Ba(e){if(go===void 0)try{throw Error()}catch(r){var t=r.stack.trim().match(/\n( *(at )?)/);go=t&&t[1]||"",Id=-1<r.stack.indexOf(`
    at`)?" (<anonymous>)":-1<r.stack.indexOf("@")?"@unknown:0:0":""}return`
`+go+e+Id}var xo=!1;function po(e,t){if(!e||xo)return"";xo=!0;var r=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{var o={DetermineComponentFrameRoot:function(){try{if(t){var Y=function(){throw Error()};if(Object.defineProperty(Y.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(Y,[])}catch($){var P=$}Reflect.construct(e,[],Y)}else{try{Y.call()}catch($){P=$}e.call(Y.prototype)}}else{try{throw Error()}catch($){P=$}(Y=e())&&typeof Y.catch=="function"&&Y.catch(function(){})}}catch($){if($&&P&&typeof $.stack=="string")return[$.stack,P.stack]}return[null,null]}};o.DetermineComponentFrameRoot.displayName="DetermineComponentFrameRoot";var d=Object.getOwnPropertyDescriptor(o.DetermineComponentFrameRoot,"name");d&&d.configurable&&Object.defineProperty(o.DetermineComponentFrameRoot,"name",{value:"DetermineComponentFrameRoot"});var f=o.DetermineComponentFrameRoot(),y=f[0],v=f[1];if(y&&v){var k=y.split(`
`),M=v.split(`
`);for(d=o=0;o<k.length&&!k[o].includes("DetermineComponentFrameRoot");)o++;for(;d<M.length&&!M[d].includes("DetermineComponentFrameRoot");)d++;if(o===k.length||d===M.length)for(o=k.length-1,d=M.length-1;1<=o&&0<=d&&k[o]!==M[d];)d--;for(;1<=o&&0<=d;o--,d--)if(k[o]!==M[d]){if(o!==1||d!==1)do if(o--,d--,0>d||k[o]!==M[d]){var G=`
`+k[o].replace(" at new "," at ");return e.displayName&&G.includes("<anonymous>")&&(G=G.replace("<anonymous>",e.displayName)),G}while(1<=o&&0<=d);break}}}finally{xo=!1,Error.prepareStackTrace=r}return(r=e?e.displayName||e.name:"")?Ba(r):""}function Ix(e){switch(e.tag){case 26:case 27:case 5:return Ba(e.type);case 16:return Ba("Lazy");case 13:return Ba("Suspense");case 19:return Ba("SuspenseList");case 0:case 15:return po(e.type,!1);case 11:return po(e.type.render,!1);case 1:return po(e.type,!0);case 31:return Ba("Activity");default:return""}}function Kd(e){try{var t="";do t+=Ix(e),e=e.return;while(e);return t}catch(r){return`
Error generating stack: `+r.message+`
`+r.stack}}function At(e){switch(typeof e){case"bigint":case"boolean":case"number":case"string":case"undefined":return e;case"object":return e;default:return""}}function Xd(e){var t=e.type;return(e=e.nodeName)&&e.toLowerCase()==="input"&&(t==="checkbox"||t==="radio")}function Kx(e){var t=Xd(e)?"checked":"value",r=Object.getOwnPropertyDescriptor(e.constructor.prototype,t),o=""+e[t];if(!e.hasOwnProperty(t)&&typeof r<"u"&&typeof r.get=="function"&&typeof r.set=="function"){var d=r.get,f=r.set;return Object.defineProperty(e,t,{configurable:!0,get:function(){return d.call(this)},set:function(y){o=""+y,f.call(this,y)}}),Object.defineProperty(e,t,{enumerable:r.enumerable}),{getValue:function(){return o},setValue:function(y){o=""+y},stopTracking:function(){e._valueTracker=null,delete e[t]}}}}function yl(e){e._valueTracker||(e._valueTracker=Kx(e))}function Zd(e){if(!e)return!1;var t=e._valueTracker;if(!t)return!0;var r=t.getValue(),o="";return e&&(o=Xd(e)?e.checked?"true":"false":e.value),e=o,e!==r?(t.setValue(e),!0):!1}function bl(e){if(e=e||(typeof document<"u"?document:void 0),typeof e>"u")return null;try{return e.activeElement||e.body}catch{return e.body}}var Xx=/[\n"\\]/g;function Tt(e){return e.replace(Xx,function(t){return"\\"+t.charCodeAt(0).toString(16)+" "})}function yo(e,t,r,o,d,f,y,v){e.name="",y!=null&&typeof y!="function"&&typeof y!="symbol"&&typeof y!="boolean"?e.type=y:e.removeAttribute("type"),t!=null?y==="number"?(t===0&&e.value===""||e.value!=t)&&(e.value=""+At(t)):e.value!==""+At(t)&&(e.value=""+At(t)):y!=="submit"&&y!=="reset"||e.removeAttribute("value"),t!=null?bo(e,y,At(t)):r!=null?bo(e,y,At(r)):o!=null&&e.removeAttribute("value"),d==null&&f!=null&&(e.defaultChecked=!!f),d!=null&&(e.checked=d&&typeof d!="function"&&typeof d!="symbol"),v!=null&&typeof v!="function"&&typeof v!="symbol"&&typeof v!="boolean"?e.name=""+At(v):e.removeAttribute("name")}function Jd(e,t,r,o,d,f,y,v){if(f!=null&&typeof f!="function"&&typeof f!="symbol"&&typeof f!="boolean"&&(e.type=f),t!=null||r!=null){if(!(f!=="submit"&&f!=="reset"||t!=null))return;r=r!=null?""+At(r):"",t=t!=null?""+At(t):r,v||t===e.value||(e.value=t),e.defaultValue=t}o=o??d,o=typeof o!="function"&&typeof o!="symbol"&&!!o,e.checked=v?e.checked:!!o,e.defaultChecked=!!o,y!=null&&typeof y!="function"&&typeof y!="symbol"&&typeof y!="boolean"&&(e.name=y)}function bo(e,t,r){t==="number"&&bl(e.ownerDocument)===e||e.defaultValue===""+r||(e.defaultValue=""+r)}function Ha(e,t,r,o){if(e=e.options,t){t={};for(var d=0;d<r.length;d++)t["$"+r[d]]=!0;for(r=0;r<e.length;r++)d=t.hasOwnProperty("$"+e[r].value),e[r].selected!==d&&(e[r].selected=d),d&&o&&(e[r].defaultSelected=!0)}else{for(r=""+At(r),t=null,d=0;d<e.length;d++){if(e[d].value===r){e[d].selected=!0,o&&(e[d].defaultSelected=!0);return}t!==null||e[d].disabled||(t=e[d])}t!==null&&(t.selected=!0)}}function Wd(e,t,r){if(t!=null&&(t=""+At(t),t!==e.value&&(e.value=t),r==null)){e.defaultValue!==t&&(e.defaultValue=t);return}e.defaultValue=r!=null?""+At(r):""}function eh(e,t,r,o){if(t==null){if(o!=null){if(r!=null)throw Error(i(92));if(X(o)){if(1<o.length)throw Error(i(93));o=o[0]}r=o}r==null&&(r=""),t=r}r=At(t),e.defaultValue=r,o=e.textContent,o===r&&o!==""&&o!==null&&(e.value=o)}function Ga(e,t){if(t){var r=e.firstChild;if(r&&r===e.lastChild&&r.nodeType===3){r.nodeValue=t;return}}e.textContent=t}var Zx=new Set("animationIterationCount aspectRatio borderImageOutset borderImageSlice borderImageWidth boxFlex boxFlexGroup boxOrdinalGroup columnCount columns flex flexGrow flexPositive flexShrink flexNegative flexOrder gridArea gridRow gridRowEnd gridRowSpan gridRowStart gridColumn gridColumnEnd gridColumnSpan gridColumnStart fontWeight lineClamp lineHeight opacity order orphans scale tabSize widows zIndex zoom fillOpacity floodOpacity stopOpacity strokeDasharray strokeDashoffset strokeMiterlimit strokeOpacity strokeWidth MozAnimationIterationCount MozBoxFlex MozBoxFlexGroup MozLineClamp msAnimationIterationCount msFlex msZoom msFlexGrow msFlexNegative msFlexOrder msFlexPositive msFlexShrink msGridColumn msGridColumnSpan msGridRow msGridRowSpan WebkitAnimationIterationCount WebkitBoxFlex WebKitBoxFlexGroup WebkitBoxOrdinalGroup WebkitColumnCount WebkitColumns WebkitFlex WebkitFlexGrow WebkitFlexPositive WebkitFlexShrink WebkitLineClamp".split(" "));function th(e,t,r){var o=t.indexOf("--")===0;r==null||typeof r=="boolean"||r===""?o?e.setProperty(t,""):t==="float"?e.cssFloat="":e[t]="":o?e.setProperty(t,r):typeof r!="number"||r===0||Zx.has(t)?t==="float"?e.cssFloat=r:e[t]=(""+r).trim():e[t]=r+"px"}function sh(e,t,r){if(t!=null&&typeof t!="object")throw Error(i(62));if(e=e.style,r!=null){for(var o in r)!r.hasOwnProperty(o)||t!=null&&t.hasOwnProperty(o)||(o.indexOf("--")===0?e.setProperty(o,""):o==="float"?e.cssFloat="":e[o]="");for(var d in t)o=t[d],t.hasOwnProperty(d)&&r[d]!==o&&th(e,d,o)}else for(var f in t)t.hasOwnProperty(f)&&th(e,f,t[f])}function vo(e){if(e.indexOf("-")===-1)return!1;switch(e){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var Jx=new Map([["acceptCharset","accept-charset"],["htmlFor","for"],["httpEquiv","http-equiv"],["crossOrigin","crossorigin"],["accentHeight","accent-height"],["alignmentBaseline","alignment-baseline"],["arabicForm","arabic-form"],["baselineShift","baseline-shift"],["capHeight","cap-height"],["clipPath","clip-path"],["clipRule","clip-rule"],["colorInterpolation","color-interpolation"],["colorInterpolationFilters","color-interpolation-filters"],["colorProfile","color-profile"],["colorRendering","color-rendering"],["dominantBaseline","dominant-baseline"],["enableBackground","enable-background"],["fillOpacity","fill-opacity"],["fillRule","fill-rule"],["floodColor","flood-color"],["floodOpacity","flood-opacity"],["fontFamily","font-family"],["fontSize","font-size"],["fontSizeAdjust","font-size-adjust"],["fontStretch","font-stretch"],["fontStyle","font-style"],["fontVariant","font-variant"],["fontWeight","font-weight"],["glyphName","glyph-name"],["glyphOrientationHorizontal","glyph-orientation-horizontal"],["glyphOrientationVertical","glyph-orientation-vertical"],["horizAdvX","horiz-adv-x"],["horizOriginX","horiz-origin-x"],["imageRendering","image-rendering"],["letterSpacing","letter-spacing"],["lightingColor","lighting-color"],["markerEnd","marker-end"],["markerMid","marker-mid"],["markerStart","marker-start"],["overlinePosition","overline-position"],["overlineThickness","overline-thickness"],["paintOrder","paint-order"],["panose-1","panose-1"],["pointerEvents","pointer-events"],["renderingIntent","rendering-intent"],["shapeRendering","shape-rendering"],["stopColor","stop-color"],["stopOpacity","stop-opacity"],["strikethroughPosition","strikethrough-position"],["strikethroughThickness","strikethrough-thickness"],["strokeDasharray","stroke-dasharray"],["strokeDashoffset","stroke-dashoffset"],["strokeLinecap","stroke-linecap"],["strokeLinejoin","stroke-linejoin"],["strokeMiterlimit","stroke-miterlimit"],["strokeOpacity","stroke-opacity"],["strokeWidth","stroke-width"],["textAnchor","text-anchor"],["textDecoration","text-decoration"],["textRendering","text-rendering"],["transformOrigin","transform-origin"],["underlinePosition","underline-position"],["underlineThickness","underline-thickness"],["unicodeBidi","unicode-bidi"],["unicodeRange","unicode-range"],["unitsPerEm","units-per-em"],["vAlphabetic","v-alphabetic"],["vHanging","v-hanging"],["vIdeographic","v-ideographic"],["vMathematical","v-mathematical"],["vectorEffect","vector-effect"],["vertAdvY","vert-adv-y"],["vertOriginX","vert-origin-x"],["vertOriginY","vert-origin-y"],["wordSpacing","word-spacing"],["writingMode","writing-mode"],["xmlnsXlink","xmlns:xlink"],["xHeight","x-height"]]),Wx=/^[\u0000-\u001F ]*j[\r\n\t]*a[\r\n\t]*v[\r\n\t]*a[\r\n\t]*s[\r\n\t]*c[\r\n\t]*r[\r\n\t]*i[\r\n\t]*p[\r\n\t]*t[\r\n\t]*:/i;function vl(e){return Wx.test(""+e)?"javascript:throw new Error('React has blocked a javascript: URL as a security precaution.')":e}var jo=null;function wo(e){return e=e.target||e.srcElement||window,e.correspondingUseElement&&(e=e.correspondingUseElement),e.nodeType===3?e.parentNode:e}var Va=null,Qa=null;function ah(e){var t=qa(e);if(t&&(e=t.stateNode)){var r=e[ht]||null;e:switch(e=t.stateNode,t.type){case"input":if(yo(e,r.value,r.defaultValue,r.defaultValue,r.checked,r.defaultChecked,r.type,r.name),t=r.name,r.type==="radio"&&t!=null){for(r=e;r.parentNode;)r=r.parentNode;for(r=r.querySelectorAll('input[name="'+Tt(""+t)+'"][type="radio"]'),t=0;t<r.length;t++){var o=r[t];if(o!==e&&o.form===e.form){var d=o[ht]||null;if(!d)throw Error(i(90));yo(o,d.value,d.defaultValue,d.defaultValue,d.checked,d.defaultChecked,d.type,d.name)}}for(t=0;t<r.length;t++)o=r[t],o.form===e.form&&Zd(o)}break e;case"textarea":Wd(e,r.value,r.defaultValue);break e;case"select":t=r.value,t!=null&&Ha(e,!!r.multiple,t,!1)}}}var _o=!1;function rh(e,t,r){if(_o)return e(t,r);_o=!0;try{var o=e(t);return o}finally{if(_o=!1,(Va!==null||Qa!==null)&&(ni(),Va&&(t=Va,e=Qa,Qa=Va=null,ah(t),e)))for(t=0;t<e.length;t++)ah(e[t])}}function Xr(e,t){var r=e.stateNode;if(r===null)return null;var o=r[ht]||null;if(o===null)return null;r=o[t];e:switch(t){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(o=!o.disabled)||(e=e.type,o=!(e==="button"||e==="input"||e==="select"||e==="textarea")),e=!o;break e;default:e=!1}if(e)return null;if(r&&typeof r!="function")throw Error(i(231,t,typeof r));return r}var os=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),No=!1;if(os)try{var Zr={};Object.defineProperty(Zr,"passive",{get:function(){No=!0}}),window.addEventListener("test",Zr,Zr),window.removeEventListener("test",Zr,Zr)}catch{No=!1}var Ds=null,So=null,jl=null;function nh(){if(jl)return jl;var e,t=So,r=t.length,o,d="value"in Ds?Ds.value:Ds.textContent,f=d.length;for(e=0;e<r&&t[e]===d[e];e++);var y=r-e;for(o=1;o<=y&&t[r-o]===d[f-o];o++);return jl=d.slice(e,1<o?1-o:void 0)}function wl(e){var t=e.keyCode;return"charCode"in e?(e=e.charCode,e===0&&t===13&&(e=13)):e=t,e===10&&(e=13),32<=e||e===13?e:0}function _l(){return!0}function lh(){return!1}function ft(e){function t(r,o,d,f,y){this._reactName=r,this._targetInst=d,this.type=o,this.nativeEvent=f,this.target=y,this.currentTarget=null;for(var v in e)e.hasOwnProperty(v)&&(r=e[v],this[v]=r?r(f):f[v]);return this.isDefaultPrevented=(f.defaultPrevented!=null?f.defaultPrevented:f.returnValue===!1)?_l:lh,this.isPropagationStopped=lh,this}return p(t.prototype,{preventDefault:function(){this.defaultPrevented=!0;var r=this.nativeEvent;r&&(r.preventDefault?r.preventDefault():typeof r.returnValue!="unknown"&&(r.returnValue=!1),this.isDefaultPrevented=_l)},stopPropagation:function(){var r=this.nativeEvent;r&&(r.stopPropagation?r.stopPropagation():typeof r.cancelBubble!="unknown"&&(r.cancelBubble=!0),this.isPropagationStopped=_l)},persist:function(){},isPersistent:_l}),t}var ua={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(e){return e.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},Nl=ft(ua),Jr=p({},ua,{view:0,detail:0}),ep=ft(Jr),ko,Co,Wr,Sl=p({},Jr,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:Ao,button:0,buttons:0,relatedTarget:function(e){return e.relatedTarget===void 0?e.fromElement===e.srcElement?e.toElement:e.fromElement:e.relatedTarget},movementX:function(e){return"movementX"in e?e.movementX:(e!==Wr&&(Wr&&e.type==="mousemove"?(ko=e.screenX-Wr.screenX,Co=e.screenY-Wr.screenY):Co=ko=0,Wr=e),ko)},movementY:function(e){return"movementY"in e?e.movementY:Co}}),ih=ft(Sl),tp=p({},Sl,{dataTransfer:0}),sp=ft(tp),ap=p({},Jr,{relatedTarget:0}),Eo=ft(ap),rp=p({},ua,{animationName:0,elapsedTime:0,pseudoElement:0}),np=ft(rp),lp=p({},ua,{clipboardData:function(e){return"clipboardData"in e?e.clipboardData:window.clipboardData}}),ip=ft(lp),op=p({},ua,{data:0}),oh=ft(op),cp={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},up={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},dp={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function hp(e){var t=this.nativeEvent;return t.getModifierState?t.getModifierState(e):(e=dp[e])?!!t[e]:!1}function Ao(){return hp}var fp=p({},Jr,{key:function(e){if(e.key){var t=cp[e.key]||e.key;if(t!=="Unidentified")return t}return e.type==="keypress"?(e=wl(e),e===13?"Enter":String.fromCharCode(e)):e.type==="keydown"||e.type==="keyup"?up[e.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:Ao,charCode:function(e){return e.type==="keypress"?wl(e):0},keyCode:function(e){return e.type==="keydown"||e.type==="keyup"?e.keyCode:0},which:function(e){return e.type==="keypress"?wl(e):e.type==="keydown"||e.type==="keyup"?e.keyCode:0}}),mp=ft(fp),gp=p({},Sl,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),ch=ft(gp),xp=p({},Jr,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:Ao}),pp=ft(xp),yp=p({},ua,{propertyName:0,elapsedTime:0,pseudoElement:0}),bp=ft(yp),vp=p({},Sl,{deltaX:function(e){return"deltaX"in e?e.deltaX:"wheelDeltaX"in e?-e.wheelDeltaX:0},deltaY:function(e){return"deltaY"in e?e.deltaY:"wheelDeltaY"in e?-e.wheelDeltaY:"wheelDelta"in e?-e.wheelDelta:0},deltaZ:0,deltaMode:0}),jp=ft(vp),wp=p({},ua,{newState:0,oldState:0}),_p=ft(wp),Np=[9,13,27,32],To=os&&"CompositionEvent"in window,en=null;os&&"documentMode"in document&&(en=document.documentMode);var Sp=os&&"TextEvent"in window&&!en,uh=os&&(!To||en&&8<en&&11>=en),dh=" ",hh=!1;function fh(e,t){switch(e){case"keyup":return Np.indexOf(t.keyCode)!==-1;case"keydown":return t.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function mh(e){return e=e.detail,typeof e=="object"&&"data"in e?e.data:null}var Ya=!1;function kp(e,t){switch(e){case"compositionend":return mh(t);case"keypress":return t.which!==32?null:(hh=!0,dh);case"textInput":return e=t.data,e===dh&&hh?null:e;default:return null}}function Cp(e,t){if(Ya)return e==="compositionend"||!To&&fh(e,t)?(e=nh(),jl=So=Ds=null,Ya=!1,e):null;switch(e){case"paste":return null;case"keypress":if(!(t.ctrlKey||t.altKey||t.metaKey)||t.ctrlKey&&t.altKey){if(t.char&&1<t.char.length)return t.char;if(t.which)return String.fromCharCode(t.which)}return null;case"compositionend":return uh&&t.locale!=="ko"?null:t.data;default:return null}}var Ep={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function gh(e){var t=e&&e.nodeName&&e.nodeName.toLowerCase();return t==="input"?!!Ep[e.type]:t==="textarea"}function xh(e,t,r,o){Va?Qa?Qa.push(o):Qa=[o]:Va=o,t=di(t,"onChange"),0<t.length&&(r=new Nl("onChange","change",null,r,o),e.push({event:r,listeners:t}))}var tn=null,sn=null;function Ap(e){Zm(e,0)}function kl(e){var t=Kr(e);if(Zd(t))return e}function ph(e,t){if(e==="change")return t}var yh=!1;if(os){var Ro;if(os){var Oo="oninput"in document;if(!Oo){var bh=document.createElement("div");bh.setAttribute("oninput","return;"),Oo=typeof bh.oninput=="function"}Ro=Oo}else Ro=!1;yh=Ro&&(!document.documentMode||9<document.documentMode)}function vh(){tn&&(tn.detachEvent("onpropertychange",jh),sn=tn=null)}function jh(e){if(e.propertyName==="value"&&kl(sn)){var t=[];xh(t,sn,e,wo(e)),rh(Ap,t)}}function Tp(e,t,r){e==="focusin"?(vh(),tn=t,sn=r,tn.attachEvent("onpropertychange",jh)):e==="focusout"&&vh()}function Rp(e){if(e==="selectionchange"||e==="keyup"||e==="keydown")return kl(sn)}function Op(e,t){if(e==="click")return kl(t)}function Dp(e,t){if(e==="input"||e==="change")return kl(t)}function Mp(e,t){return e===t&&(e!==0||1/e===1/t)||e!==e&&t!==t}var wt=typeof Object.is=="function"?Object.is:Mp;function an(e,t){if(wt(e,t))return!0;if(typeof e!="object"||e===null||typeof t!="object"||t===null)return!1;var r=Object.keys(e),o=Object.keys(t);if(r.length!==o.length)return!1;for(o=0;o<r.length;o++){var d=r[o];if(!lo.call(t,d)||!wt(e[d],t[d]))return!1}return!0}function wh(e){for(;e&&e.firstChild;)e=e.firstChild;return e}function _h(e,t){var r=wh(e);e=0;for(var o;r;){if(r.nodeType===3){if(o=e+r.textContent.length,e<=t&&o>=t)return{node:r,offset:t-e};e=o}e:{for(;r;){if(r.nextSibling){r=r.nextSibling;break e}r=r.parentNode}r=void 0}r=wh(r)}}function Nh(e,t){return e&&t?e===t?!0:e&&e.nodeType===3?!1:t&&t.nodeType===3?Nh(e,t.parentNode):"contains"in e?e.contains(t):e.compareDocumentPosition?!!(e.compareDocumentPosition(t)&16):!1:!1}function Sh(e){e=e!=null&&e.ownerDocument!=null&&e.ownerDocument.defaultView!=null?e.ownerDocument.defaultView:window;for(var t=bl(e.document);t instanceof e.HTMLIFrameElement;){try{var r=typeof t.contentWindow.location.href=="string"}catch{r=!1}if(r)e=t.contentWindow;else break;t=bl(e.document)}return t}function Do(e){var t=e&&e.nodeName&&e.nodeName.toLowerCase();return t&&(t==="input"&&(e.type==="text"||e.type==="search"||e.type==="tel"||e.type==="url"||e.type==="password")||t==="textarea"||e.contentEditable==="true")}var Up=os&&"documentMode"in document&&11>=document.documentMode,Fa=null,Mo=null,rn=null,Uo=!1;function kh(e,t,r){var o=r.window===r?r.document:r.nodeType===9?r:r.ownerDocument;Uo||Fa==null||Fa!==bl(o)||(o=Fa,"selectionStart"in o&&Do(o)?o={start:o.selectionStart,end:o.selectionEnd}:(o=(o.ownerDocument&&o.ownerDocument.defaultView||window).getSelection(),o={anchorNode:o.anchorNode,anchorOffset:o.anchorOffset,focusNode:o.focusNode,focusOffset:o.focusOffset}),rn&&an(rn,o)||(rn=o,o=di(Mo,"onSelect"),0<o.length&&(t=new Nl("onSelect","select",null,t,r),e.push({event:t,listeners:o}),t.target=Fa)))}function da(e,t){var r={};return r[e.toLowerCase()]=t.toLowerCase(),r["Webkit"+e]="webkit"+t,r["Moz"+e]="moz"+t,r}var Ia={animationend:da("Animation","AnimationEnd"),animationiteration:da("Animation","AnimationIteration"),animationstart:da("Animation","AnimationStart"),transitionrun:da("Transition","TransitionRun"),transitionstart:da("Transition","TransitionStart"),transitioncancel:da("Transition","TransitionCancel"),transitionend:da("Transition","TransitionEnd")},Po={},Ch={};os&&(Ch=document.createElement("div").style,"AnimationEvent"in window||(delete Ia.animationend.animation,delete Ia.animationiteration.animation,delete Ia.animationstart.animation),"TransitionEvent"in window||delete Ia.transitionend.transition);function ha(e){if(Po[e])return Po[e];if(!Ia[e])return e;var t=Ia[e],r;for(r in t)if(t.hasOwnProperty(r)&&r in Ch)return Po[e]=t[r];return e}var Eh=ha("animationend"),Ah=ha("animationiteration"),Th=ha("animationstart"),Pp=ha("transitionrun"),Lp=ha("transitionstart"),qp=ha("transitioncancel"),Rh=ha("transitionend"),Oh=new Map,Lo="abort auxClick beforeToggle cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");Lo.push("scrollEnd");function qt(e,t){Oh.set(e,t),ca(t,[e])}var Dh=new WeakMap;function Rt(e,t){if(typeof e=="object"&&e!==null){var r=Dh.get(e);return r!==void 0?r:(t={value:e,source:t,stack:Kd(t)},Dh.set(e,t),t)}return{value:e,source:t,stack:Kd(t)}}var Ot=[],Ka=0,qo=0;function Cl(){for(var e=Ka,t=qo=Ka=0;t<e;){var r=Ot[t];Ot[t++]=null;var o=Ot[t];Ot[t++]=null;var d=Ot[t];Ot[t++]=null;var f=Ot[t];if(Ot[t++]=null,o!==null&&d!==null){var y=o.pending;y===null?d.next=d:(d.next=y.next,y.next=d),o.pending=d}f!==0&&Mh(r,d,f)}}function El(e,t,r,o){Ot[Ka++]=e,Ot[Ka++]=t,Ot[Ka++]=r,Ot[Ka++]=o,qo|=o,e.lanes|=o,e=e.alternate,e!==null&&(e.lanes|=o)}function zo(e,t,r,o){return El(e,t,r,o),Al(e)}function Xa(e,t){return El(e,null,null,t),Al(e)}function Mh(e,t,r){e.lanes|=r;var o=e.alternate;o!==null&&(o.lanes|=r);for(var d=!1,f=e.return;f!==null;)f.childLanes|=r,o=f.alternate,o!==null&&(o.childLanes|=r),f.tag===22&&(e=f.stateNode,e===null||e._visibility&1||(d=!0)),e=f,f=f.return;return e.tag===3?(f=e.stateNode,d&&t!==null&&(d=31-jt(r),e=f.hiddenUpdates,o=e[d],o===null?e[d]=[t]:o.push(t),t.lane=r|536870912),f):null}function Al(e){if(50<Tn)throw Tn=0,Qc=null,Error(i(185));for(var t=e.return;t!==null;)e=t,t=e.return;return e.tag===3?e.stateNode:null}var Za={};function zp(e,t,r,o){this.tag=e,this.key=r,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.refCleanup=this.ref=null,this.pendingProps=t,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=o,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function _t(e,t,r,o){return new zp(e,t,r,o)}function $o(e){return e=e.prototype,!(!e||!e.isReactComponent)}function cs(e,t){var r=e.alternate;return r===null?(r=_t(e.tag,t,e.key,e.mode),r.elementType=e.elementType,r.type=e.type,r.stateNode=e.stateNode,r.alternate=e,e.alternate=r):(r.pendingProps=t,r.type=e.type,r.flags=0,r.subtreeFlags=0,r.deletions=null),r.flags=e.flags&65011712,r.childLanes=e.childLanes,r.lanes=e.lanes,r.child=e.child,r.memoizedProps=e.memoizedProps,r.memoizedState=e.memoizedState,r.updateQueue=e.updateQueue,t=e.dependencies,r.dependencies=t===null?null:{lanes:t.lanes,firstContext:t.firstContext},r.sibling=e.sibling,r.index=e.index,r.ref=e.ref,r.refCleanup=e.refCleanup,r}function Uh(e,t){e.flags&=65011714;var r=e.alternate;return r===null?(e.childLanes=0,e.lanes=t,e.child=null,e.subtreeFlags=0,e.memoizedProps=null,e.memoizedState=null,e.updateQueue=null,e.dependencies=null,e.stateNode=null):(e.childLanes=r.childLanes,e.lanes=r.lanes,e.child=r.child,e.subtreeFlags=0,e.deletions=null,e.memoizedProps=r.memoizedProps,e.memoizedState=r.memoizedState,e.updateQueue=r.updateQueue,e.type=r.type,t=r.dependencies,e.dependencies=t===null?null:{lanes:t.lanes,firstContext:t.firstContext}),e}function Tl(e,t,r,o,d,f){var y=0;if(o=e,typeof e=="function")$o(e)&&(y=1);else if(typeof e=="string")y=By(e,r,ie.current)?26:e==="html"||e==="head"||e==="body"?27:5;else e:switch(e){case K:return e=_t(31,r,t,d),e.elementType=K,e.lanes=f,e;case S:return fa(r.children,d,f,t);case _:y=8,d|=24;break;case C:return e=_t(12,r,t,d|2),e.elementType=C,e.lanes=f,e;case D:return e=_t(13,r,t,d),e.elementType=D,e.lanes=f,e;case q:return e=_t(19,r,t,d),e.elementType=q,e.lanes=f,e;default:if(typeof e=="object"&&e!==null)switch(e.$$typeof){case L:case z:y=10;break e;case B:y=9;break e;case U:y=11;break e;case H:y=14;break e;case ee:y=16,o=null;break e}y=29,r=Error(i(130,e===null?"null":typeof e,"")),o=null}return t=_t(y,r,t,d),t.elementType=e,t.type=o,t.lanes=f,t}function fa(e,t,r,o){return e=_t(7,e,o,t),e.lanes=r,e}function Bo(e,t,r){return e=_t(6,e,null,t),e.lanes=r,e}function Ho(e,t,r){return t=_t(4,e.children!==null?e.children:[],e.key,t),t.lanes=r,t.stateNode={containerInfo:e.containerInfo,pendingChildren:null,implementation:e.implementation},t}var Ja=[],Wa=0,Rl=null,Ol=0,Dt=[],Mt=0,ma=null,us=1,ds="";function ga(e,t){Ja[Wa++]=Ol,Ja[Wa++]=Rl,Rl=e,Ol=t}function Ph(e,t,r){Dt[Mt++]=us,Dt[Mt++]=ds,Dt[Mt++]=ma,ma=e;var o=us;e=ds;var d=32-jt(o)-1;o&=~(1<<d),r+=1;var f=32-jt(t)+d;if(30<f){var y=d-d%5;f=(o&(1<<y)-1).toString(32),o>>=y,d-=y,us=1<<32-jt(t)+d|r<<d|o,ds=f+e}else us=1<<f|r<<d|o,ds=e}function Go(e){e.return!==null&&(ga(e,1),Ph(e,1,0))}function Vo(e){for(;e===Rl;)Rl=Ja[--Wa],Ja[Wa]=null,Ol=Ja[--Wa],Ja[Wa]=null;for(;e===ma;)ma=Dt[--Mt],Dt[Mt]=null,ds=Dt[--Mt],Dt[Mt]=null,us=Dt[--Mt],Dt[Mt]=null}var ct=null,Be=null,Ce=!1,xa=null,Zt=!1,Qo=Error(i(519));function pa(e){var t=Error(i(418,""));throw on(Rt(t,e)),Qo}function Lh(e){var t=e.stateNode,r=e.type,o=e.memoizedProps;switch(t[lt]=e,t[ht]=o,r){case"dialog":we("cancel",t),we("close",t);break;case"iframe":case"object":case"embed":we("load",t);break;case"video":case"audio":for(r=0;r<On.length;r++)we(On[r],t);break;case"source":we("error",t);break;case"img":case"image":case"link":we("error",t),we("load",t);break;case"details":we("toggle",t);break;case"input":we("invalid",t),Jd(t,o.value,o.defaultValue,o.checked,o.defaultChecked,o.type,o.name,!0),yl(t);break;case"select":we("invalid",t);break;case"textarea":we("invalid",t),eh(t,o.value,o.defaultValue,o.children),yl(t)}r=o.children,typeof r!="string"&&typeof r!="number"&&typeof r!="bigint"||t.textContent===""+r||o.suppressHydrationWarning===!0||t0(t.textContent,r)?(o.popover!=null&&(we("beforetoggle",t),we("toggle",t)),o.onScroll!=null&&we("scroll",t),o.onScrollEnd!=null&&we("scrollend",t),o.onClick!=null&&(t.onclick=hi),t=!0):t=!1,t||pa(e)}function qh(e){for(ct=e.return;ct;)switch(ct.tag){case 5:case 13:Zt=!1;return;case 27:case 3:Zt=!0;return;default:ct=ct.return}}function nn(e){if(e!==ct)return!1;if(!Ce)return qh(e),Ce=!0,!1;var t=e.tag,r;if((r=t!==3&&t!==27)&&((r=t===5)&&(r=e.type,r=!(r!=="form"&&r!=="button")||iu(e.type,e.memoizedProps)),r=!r),r&&Be&&pa(e),qh(e),t===13){if(e=e.memoizedState,e=e!==null?e.dehydrated:null,!e)throw Error(i(317));e:{for(e=e.nextSibling,t=0;e;){if(e.nodeType===8)if(r=e.data,r==="/$"){if(t===0){Be=$t(e.nextSibling);break e}t--}else r!=="$"&&r!=="$!"&&r!=="$?"||t++;e=e.nextSibling}Be=null}}else t===27?(t=Be,Ks(e.type)?(e=du,du=null,Be=e):Be=t):Be=ct?$t(e.stateNode.nextSibling):null;return!0}function ln(){Be=ct=null,Ce=!1}function zh(){var e=xa;return e!==null&&(xt===null?xt=e:xt.push.apply(xt,e),xa=null),e}function on(e){xa===null?xa=[e]:xa.push(e)}var Yo=I(null),ya=null,hs=null;function Ms(e,t,r){Z(Yo,t._currentValue),t._currentValue=r}function fs(e){e._currentValue=Yo.current,F(Yo)}function Fo(e,t,r){for(;e!==null;){var o=e.alternate;if((e.childLanes&t)!==t?(e.childLanes|=t,o!==null&&(o.childLanes|=t)):o!==null&&(o.childLanes&t)!==t&&(o.childLanes|=t),e===r)break;e=e.return}}function Io(e,t,r,o){var d=e.child;for(d!==null&&(d.return=e);d!==null;){var f=d.dependencies;if(f!==null){var y=d.child;f=f.firstContext;e:for(;f!==null;){var v=f;f=d;for(var k=0;k<t.length;k++)if(v.context===t[k]){f.lanes|=r,v=f.alternate,v!==null&&(v.lanes|=r),Fo(f.return,r,e),o||(y=null);break e}f=v.next}}else if(d.tag===18){if(y=d.return,y===null)throw Error(i(341));y.lanes|=r,f=y.alternate,f!==null&&(f.lanes|=r),Fo(y,r,e),y=null}else y=d.child;if(y!==null)y.return=d;else for(y=d;y!==null;){if(y===e){y=null;break}if(d=y.sibling,d!==null){d.return=y.return,y=d;break}y=y.return}d=y}}function cn(e,t,r,o){e=null;for(var d=t,f=!1;d!==null;){if(!f){if((d.flags&524288)!==0)f=!0;else if((d.flags&262144)!==0)break}if(d.tag===10){var y=d.alternate;if(y===null)throw Error(i(387));if(y=y.memoizedProps,y!==null){var v=d.type;wt(d.pendingProps.value,y.value)||(e!==null?e.push(v):e=[v])}}else if(d===bt.current){if(y=d.alternate,y===null)throw Error(i(387));y.memoizedState.memoizedState!==d.memoizedState.memoizedState&&(e!==null?e.push(qn):e=[qn])}d=d.return}e!==null&&Io(t,e,r,o),t.flags|=262144}function Dl(e){for(e=e.firstContext;e!==null;){if(!wt(e.context._currentValue,e.memoizedValue))return!0;e=e.next}return!1}function ba(e){ya=e,hs=null,e=e.dependencies,e!==null&&(e.firstContext=null)}function it(e){return $h(ya,e)}function Ml(e,t){return ya===null&&ba(e),$h(e,t)}function $h(e,t){var r=t._currentValue;if(t={context:t,memoizedValue:r,next:null},hs===null){if(e===null)throw Error(i(308));hs=t,e.dependencies={lanes:0,firstContext:t},e.flags|=524288}else hs=hs.next=t;return r}var $p=typeof AbortController<"u"?AbortController:function(){var e=[],t=this.signal={aborted:!1,addEventListener:function(r,o){e.push(o)}};this.abort=function(){t.aborted=!0,e.forEach(function(r){return r()})}},Bp=n.unstable_scheduleCallback,Hp=n.unstable_NormalPriority,Fe={$$typeof:z,Consumer:null,Provider:null,_currentValue:null,_currentValue2:null,_threadCount:0};function Ko(){return{controller:new $p,data:new Map,refCount:0}}function un(e){e.refCount--,e.refCount===0&&Bp(Hp,function(){e.controller.abort()})}var dn=null,Xo=0,er=0,tr=null;function Gp(e,t){if(dn===null){var r=dn=[];Xo=0,er=Jc(),tr={status:"pending",value:void 0,then:function(o){r.push(o)}}}return Xo++,t.then(Bh,Bh),t}function Bh(){if(--Xo===0&&dn!==null){tr!==null&&(tr.status="fulfilled");var e=dn;dn=null,er=0,tr=null;for(var t=0;t<e.length;t++)(0,e[t])()}}function Vp(e,t){var r=[],o={status:"pending",value:null,reason:null,then:function(d){r.push(d)}};return e.then(function(){o.status="fulfilled",o.value=t;for(var d=0;d<r.length;d++)(0,r[d])(t)},function(d){for(o.status="rejected",o.reason=d,d=0;d<r.length;d++)(0,r[d])(void 0)}),o}var Hh=R.S;R.S=function(e,t){typeof t=="object"&&t!==null&&typeof t.then=="function"&&Gp(e,t),Hh!==null&&Hh(e,t)};var va=I(null);function Zo(){var e=va.current;return e!==null?e:Ue.pooledCache}function Ul(e,t){t===null?Z(va,va.current):Z(va,t.pool)}function Gh(){var e=Zo();return e===null?null:{parent:Fe._currentValue,pool:e}}var hn=Error(i(460)),Vh=Error(i(474)),Pl=Error(i(542)),Jo={then:function(){}};function Qh(e){return e=e.status,e==="fulfilled"||e==="rejected"}function Ll(){}function Yh(e,t,r){switch(r=e[r],r===void 0?e.push(t):r!==t&&(t.then(Ll,Ll),t=r),t.status){case"fulfilled":return t.value;case"rejected":throw e=t.reason,Ih(e),e;default:if(typeof t.status=="string")t.then(Ll,Ll);else{if(e=Ue,e!==null&&100<e.shellSuspendCounter)throw Error(i(482));e=t,e.status="pending",e.then(function(o){if(t.status==="pending"){var d=t;d.status="fulfilled",d.value=o}},function(o){if(t.status==="pending"){var d=t;d.status="rejected",d.reason=o}})}switch(t.status){case"fulfilled":return t.value;case"rejected":throw e=t.reason,Ih(e),e}throw fn=t,hn}}var fn=null;function Fh(){if(fn===null)throw Error(i(459));var e=fn;return fn=null,e}function Ih(e){if(e===hn||e===Pl)throw Error(i(483))}var Us=!1;function Wo(e){e.updateQueue={baseState:e.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,lanes:0,hiddenCallbacks:null},callbacks:null}}function ec(e,t){e=e.updateQueue,t.updateQueue===e&&(t.updateQueue={baseState:e.baseState,firstBaseUpdate:e.firstBaseUpdate,lastBaseUpdate:e.lastBaseUpdate,shared:e.shared,callbacks:null})}function Ps(e){return{lane:e,tag:0,payload:null,callback:null,next:null}}function Ls(e,t,r){var o=e.updateQueue;if(o===null)return null;if(o=o.shared,(Ee&2)!==0){var d=o.pending;return d===null?t.next=t:(t.next=d.next,d.next=t),o.pending=t,t=Al(e),Mh(e,null,r),t}return El(e,o,t,r),Al(e)}function mn(e,t,r){if(t=t.updateQueue,t!==null&&(t=t.shared,(r&4194048)!==0)){var o=t.lanes;o&=e.pendingLanes,r|=o,t.lanes=r,Bd(e,r)}}function tc(e,t){var r=e.updateQueue,o=e.alternate;if(o!==null&&(o=o.updateQueue,r===o)){var d=null,f=null;if(r=r.firstBaseUpdate,r!==null){do{var y={lane:r.lane,tag:r.tag,payload:r.payload,callback:null,next:null};f===null?d=f=y:f=f.next=y,r=r.next}while(r!==null);f===null?d=f=t:f=f.next=t}else d=f=t;r={baseState:o.baseState,firstBaseUpdate:d,lastBaseUpdate:f,shared:o.shared,callbacks:o.callbacks},e.updateQueue=r;return}e=r.lastBaseUpdate,e===null?r.firstBaseUpdate=t:e.next=t,r.lastBaseUpdate=t}var sc=!1;function gn(){if(sc){var e=tr;if(e!==null)throw e}}function xn(e,t,r,o){sc=!1;var d=e.updateQueue;Us=!1;var f=d.firstBaseUpdate,y=d.lastBaseUpdate,v=d.shared.pending;if(v!==null){d.shared.pending=null;var k=v,M=k.next;k.next=null,y===null?f=M:y.next=M,y=k;var G=e.alternate;G!==null&&(G=G.updateQueue,v=G.lastBaseUpdate,v!==y&&(v===null?G.firstBaseUpdate=M:v.next=M,G.lastBaseUpdate=k))}if(f!==null){var Y=d.baseState;y=0,G=M=k=null,v=f;do{var P=v.lane&-536870913,$=P!==v.lane;if($?(Ne&P)===P:(o&P)===P){P!==0&&P===er&&(sc=!0),G!==null&&(G=G.next={lane:0,tag:v.tag,payload:v.payload,callback:null,next:null});e:{var he=e,ce=v;P=t;var Oe=r;switch(ce.tag){case 1:if(he=ce.payload,typeof he=="function"){Y=he.call(Oe,Y,P);break e}Y=he;break e;case 3:he.flags=he.flags&-65537|128;case 0:if(he=ce.payload,P=typeof he=="function"?he.call(Oe,Y,P):he,P==null)break e;Y=p({},Y,P);break e;case 2:Us=!0}}P=v.callback,P!==null&&(e.flags|=64,$&&(e.flags|=8192),$=d.callbacks,$===null?d.callbacks=[P]:$.push(P))}else $={lane:P,tag:v.tag,payload:v.payload,callback:v.callback,next:null},G===null?(M=G=$,k=Y):G=G.next=$,y|=P;if(v=v.next,v===null){if(v=d.shared.pending,v===null)break;$=v,v=$.next,$.next=null,d.lastBaseUpdate=$,d.shared.pending=null}}while(!0);G===null&&(k=Y),d.baseState=k,d.firstBaseUpdate=M,d.lastBaseUpdate=G,f===null&&(d.shared.lanes=0),Qs|=y,e.lanes=y,e.memoizedState=Y}}function Kh(e,t){if(typeof e!="function")throw Error(i(191,e));e.call(t)}function Xh(e,t){var r=e.callbacks;if(r!==null)for(e.callbacks=null,e=0;e<r.length;e++)Kh(r[e],t)}var sr=I(null),ql=I(0);function Zh(e,t){e=vs,Z(ql,e),Z(sr,t),vs=e|t.baseLanes}function ac(){Z(ql,vs),Z(sr,sr.current)}function rc(){vs=ql.current,F(sr),F(ql)}var qs=0,be=null,Te=null,Qe=null,zl=!1,ar=!1,ja=!1,$l=0,pn=0,rr=null,Qp=0;function Ge(){throw Error(i(321))}function nc(e,t){if(t===null)return!1;for(var r=0;r<t.length&&r<e.length;r++)if(!wt(e[r],t[r]))return!1;return!0}function lc(e,t,r,o,d,f){return qs=f,be=t,t.memoizedState=null,t.updateQueue=null,t.lanes=0,R.H=e===null||e.memoizedState===null?Uf:Pf,ja=!1,f=r(o,d),ja=!1,ar&&(f=Wh(t,r,o,d)),Jh(e),f}function Jh(e){R.H=Yl;var t=Te!==null&&Te.next!==null;if(qs=0,Qe=Te=be=null,zl=!1,pn=0,rr=null,t)throw Error(i(300));e===null||Je||(e=e.dependencies,e!==null&&Dl(e)&&(Je=!0))}function Wh(e,t,r,o){be=e;var d=0;do{if(ar&&(rr=null),pn=0,ar=!1,25<=d)throw Error(i(301));if(d+=1,Qe=Te=null,e.updateQueue!=null){var f=e.updateQueue;f.lastEffect=null,f.events=null,f.stores=null,f.memoCache!=null&&(f.memoCache.index=0)}R.H=Jp,f=t(r,o)}while(ar);return f}function Yp(){var e=R.H,t=e.useState()[0];return t=typeof t.then=="function"?yn(t):t,e=e.useState()[0],(Te!==null?Te.memoizedState:null)!==e&&(be.flags|=1024),t}function ic(){var e=$l!==0;return $l=0,e}function oc(e,t,r){t.updateQueue=e.updateQueue,t.flags&=-2053,e.lanes&=~r}function cc(e){if(zl){for(e=e.memoizedState;e!==null;){var t=e.queue;t!==null&&(t.pending=null),e=e.next}zl=!1}qs=0,Qe=Te=be=null,ar=!1,pn=$l=0,rr=null}function mt(){var e={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return Qe===null?be.memoizedState=Qe=e:Qe=Qe.next=e,Qe}function Ye(){if(Te===null){var e=be.alternate;e=e!==null?e.memoizedState:null}else e=Te.next;var t=Qe===null?be.memoizedState:Qe.next;if(t!==null)Qe=t,Te=e;else{if(e===null)throw be.alternate===null?Error(i(467)):Error(i(310));Te=e,e={memoizedState:Te.memoizedState,baseState:Te.baseState,baseQueue:Te.baseQueue,queue:Te.queue,next:null},Qe===null?be.memoizedState=Qe=e:Qe=Qe.next=e}return Qe}function uc(){return{lastEffect:null,events:null,stores:null,memoCache:null}}function yn(e){var t=pn;return pn+=1,rr===null&&(rr=[]),e=Yh(rr,e,t),t=be,(Qe===null?t.memoizedState:Qe.next)===null&&(t=t.alternate,R.H=t===null||t.memoizedState===null?Uf:Pf),e}function Bl(e){if(e!==null&&typeof e=="object"){if(typeof e.then=="function")return yn(e);if(e.$$typeof===z)return it(e)}throw Error(i(438,String(e)))}function dc(e){var t=null,r=be.updateQueue;if(r!==null&&(t=r.memoCache),t==null){var o=be.alternate;o!==null&&(o=o.updateQueue,o!==null&&(o=o.memoCache,o!=null&&(t={data:o.data.map(function(d){return d.slice()}),index:0})))}if(t==null&&(t={data:[],index:0}),r===null&&(r=uc(),be.updateQueue=r),r.memoCache=t,r=t.data[t.index],r===void 0)for(r=t.data[t.index]=Array(e),o=0;o<e;o++)r[o]=te;return t.index++,r}function ms(e,t){return typeof t=="function"?t(e):t}function Hl(e){var t=Ye();return hc(t,Te,e)}function hc(e,t,r){var o=e.queue;if(o===null)throw Error(i(311));o.lastRenderedReducer=r;var d=e.baseQueue,f=o.pending;if(f!==null){if(d!==null){var y=d.next;d.next=f.next,f.next=y}t.baseQueue=d=f,o.pending=null}if(f=e.baseState,d===null)e.memoizedState=f;else{t=d.next;var v=y=null,k=null,M=t,G=!1;do{var Y=M.lane&-536870913;if(Y!==M.lane?(Ne&Y)===Y:(qs&Y)===Y){var P=M.revertLane;if(P===0)k!==null&&(k=k.next={lane:0,revertLane:0,action:M.action,hasEagerState:M.hasEagerState,eagerState:M.eagerState,next:null}),Y===er&&(G=!0);else if((qs&P)===P){M=M.next,P===er&&(G=!0);continue}else Y={lane:0,revertLane:M.revertLane,action:M.action,hasEagerState:M.hasEagerState,eagerState:M.eagerState,next:null},k===null?(v=k=Y,y=f):k=k.next=Y,be.lanes|=P,Qs|=P;Y=M.action,ja&&r(f,Y),f=M.hasEagerState?M.eagerState:r(f,Y)}else P={lane:Y,revertLane:M.revertLane,action:M.action,hasEagerState:M.hasEagerState,eagerState:M.eagerState,next:null},k===null?(v=k=P,y=f):k=k.next=P,be.lanes|=Y,Qs|=Y;M=M.next}while(M!==null&&M!==t);if(k===null?y=f:k.next=v,!wt(f,e.memoizedState)&&(Je=!0,G&&(r=tr,r!==null)))throw r;e.memoizedState=f,e.baseState=y,e.baseQueue=k,o.lastRenderedState=f}return d===null&&(o.lanes=0),[e.memoizedState,o.dispatch]}function fc(e){var t=Ye(),r=t.queue;if(r===null)throw Error(i(311));r.lastRenderedReducer=e;var o=r.dispatch,d=r.pending,f=t.memoizedState;if(d!==null){r.pending=null;var y=d=d.next;do f=e(f,y.action),y=y.next;while(y!==d);wt(f,t.memoizedState)||(Je=!0),t.memoizedState=f,t.baseQueue===null&&(t.baseState=f),r.lastRenderedState=f}return[f,o]}function ef(e,t,r){var o=be,d=Ye(),f=Ce;if(f){if(r===void 0)throw Error(i(407));r=r()}else r=t();var y=!wt((Te||d).memoizedState,r);y&&(d.memoizedState=r,Je=!0),d=d.queue;var v=af.bind(null,o,d,e);if(bn(2048,8,v,[e]),d.getSnapshot!==t||y||Qe!==null&&Qe.memoizedState.tag&1){if(o.flags|=2048,nr(9,Gl(),sf.bind(null,o,d,r,t),null),Ue===null)throw Error(i(349));f||(qs&124)!==0||tf(o,t,r)}return r}function tf(e,t,r){e.flags|=16384,e={getSnapshot:t,value:r},t=be.updateQueue,t===null?(t=uc(),be.updateQueue=t,t.stores=[e]):(r=t.stores,r===null?t.stores=[e]:r.push(e))}function sf(e,t,r,o){t.value=r,t.getSnapshot=o,rf(t)&&nf(e)}function af(e,t,r){return r(function(){rf(t)&&nf(e)})}function rf(e){var t=e.getSnapshot;e=e.value;try{var r=t();return!wt(e,r)}catch{return!0}}function nf(e){var t=Xa(e,2);t!==null&&Et(t,e,2)}function mc(e){var t=mt();if(typeof e=="function"){var r=e;if(e=r(),ja){Rs(!0);try{r()}finally{Rs(!1)}}}return t.memoizedState=t.baseState=e,t.queue={pending:null,lanes:0,dispatch:null,lastRenderedReducer:ms,lastRenderedState:e},t}function lf(e,t,r,o){return e.baseState=r,hc(e,Te,typeof o=="function"?o:ms)}function Fp(e,t,r,o,d){if(Ql(e))throw Error(i(485));if(e=t.action,e!==null){var f={payload:d,action:e,next:null,isTransition:!0,status:"pending",value:null,reason:null,listeners:[],then:function(y){f.listeners.push(y)}};R.T!==null?r(!0):f.isTransition=!1,o(f),r=t.pending,r===null?(f.next=t.pending=f,of(t,f)):(f.next=r.next,t.pending=r.next=f)}}function of(e,t){var r=t.action,o=t.payload,d=e.state;if(t.isTransition){var f=R.T,y={};R.T=y;try{var v=r(d,o),k=R.S;k!==null&&k(y,v),cf(e,t,v)}catch(M){gc(e,t,M)}finally{R.T=f}}else try{f=r(d,o),cf(e,t,f)}catch(M){gc(e,t,M)}}function cf(e,t,r){r!==null&&typeof r=="object"&&typeof r.then=="function"?r.then(function(o){uf(e,t,o)},function(o){return gc(e,t,o)}):uf(e,t,r)}function uf(e,t,r){t.status="fulfilled",t.value=r,df(t),e.state=r,t=e.pending,t!==null&&(r=t.next,r===t?e.pending=null:(r=r.next,t.next=r,of(e,r)))}function gc(e,t,r){var o=e.pending;if(e.pending=null,o!==null){o=o.next;do t.status="rejected",t.reason=r,df(t),t=t.next;while(t!==o)}e.action=null}function df(e){e=e.listeners;for(var t=0;t<e.length;t++)(0,e[t])()}function hf(e,t){return t}function ff(e,t){if(Ce){var r=Ue.formState;if(r!==null){e:{var o=be;if(Ce){if(Be){t:{for(var d=Be,f=Zt;d.nodeType!==8;){if(!f){d=null;break t}if(d=$t(d.nextSibling),d===null){d=null;break t}}f=d.data,d=f==="F!"||f==="F"?d:null}if(d){Be=$t(d.nextSibling),o=d.data==="F!";break e}}pa(o)}o=!1}o&&(t=r[0])}}return r=mt(),r.memoizedState=r.baseState=t,o={pending:null,lanes:0,dispatch:null,lastRenderedReducer:hf,lastRenderedState:t},r.queue=o,r=Of.bind(null,be,o),o.dispatch=r,o=mc(!1),f=vc.bind(null,be,!1,o.queue),o=mt(),d={state:t,dispatch:null,action:e,pending:null},o.queue=d,r=Fp.bind(null,be,d,f,r),d.dispatch=r,o.memoizedState=e,[t,r,!1]}function mf(e){var t=Ye();return gf(t,Te,e)}function gf(e,t,r){if(t=hc(e,t,hf)[0],e=Hl(ms)[0],typeof t=="object"&&t!==null&&typeof t.then=="function")try{var o=yn(t)}catch(y){throw y===hn?Pl:y}else o=t;t=Ye();var d=t.queue,f=d.dispatch;return r!==t.memoizedState&&(be.flags|=2048,nr(9,Gl(),Ip.bind(null,d,r),null)),[o,f,e]}function Ip(e,t){e.action=t}function xf(e){var t=Ye(),r=Te;if(r!==null)return gf(t,r,e);Ye(),t=t.memoizedState,r=Ye();var o=r.queue.dispatch;return r.memoizedState=e,[t,o,!1]}function nr(e,t,r,o){return e={tag:e,create:r,deps:o,inst:t,next:null},t=be.updateQueue,t===null&&(t=uc(),be.updateQueue=t),r=t.lastEffect,r===null?t.lastEffect=e.next=e:(o=r.next,r.next=e,e.next=o,t.lastEffect=e),e}function Gl(){return{destroy:void 0,resource:void 0}}function pf(){return Ye().memoizedState}function Vl(e,t,r,o){var d=mt();o=o===void 0?null:o,be.flags|=e,d.memoizedState=nr(1|t,Gl(),r,o)}function bn(e,t,r,o){var d=Ye();o=o===void 0?null:o;var f=d.memoizedState.inst;Te!==null&&o!==null&&nc(o,Te.memoizedState.deps)?d.memoizedState=nr(t,f,r,o):(be.flags|=e,d.memoizedState=nr(1|t,f,r,o))}function yf(e,t){Vl(8390656,8,e,t)}function bf(e,t){bn(2048,8,e,t)}function vf(e,t){return bn(4,2,e,t)}function jf(e,t){return bn(4,4,e,t)}function wf(e,t){if(typeof t=="function"){e=e();var r=t(e);return function(){typeof r=="function"?r():t(null)}}if(t!=null)return e=e(),t.current=e,function(){t.current=null}}function _f(e,t,r){r=r!=null?r.concat([e]):null,bn(4,4,wf.bind(null,t,e),r)}function xc(){}function Nf(e,t){var r=Ye();t=t===void 0?null:t;var o=r.memoizedState;return t!==null&&nc(t,o[1])?o[0]:(r.memoizedState=[e,t],e)}function Sf(e,t){var r=Ye();t=t===void 0?null:t;var o=r.memoizedState;if(t!==null&&nc(t,o[1]))return o[0];if(o=e(),ja){Rs(!0);try{e()}finally{Rs(!1)}}return r.memoizedState=[o,t],o}function pc(e,t,r){return r===void 0||(qs&1073741824)!==0?e.memoizedState=t:(e.memoizedState=r,e=Em(),be.lanes|=e,Qs|=e,r)}function kf(e,t,r,o){return wt(r,t)?r:sr.current!==null?(e=pc(e,r,o),wt(e,t)||(Je=!0),e):(qs&42)===0?(Je=!0,e.memoizedState=r):(e=Em(),be.lanes|=e,Qs|=e,t)}function Cf(e,t,r,o,d){var f=W.p;W.p=f!==0&&8>f?f:8;var y=R.T,v={};R.T=v,vc(e,!1,t,r);try{var k=d(),M=R.S;if(M!==null&&M(v,k),k!==null&&typeof k=="object"&&typeof k.then=="function"){var G=Vp(k,o);vn(e,t,G,Ct(e))}else vn(e,t,o,Ct(e))}catch(Y){vn(e,t,{then:function(){},status:"rejected",reason:Y},Ct())}finally{W.p=f,R.T=y}}function Kp(){}function yc(e,t,r,o){if(e.tag!==5)throw Error(i(476));var d=Ef(e).queue;Cf(e,d,t,J,r===null?Kp:function(){return Af(e),r(o)})}function Ef(e){var t=e.memoizedState;if(t!==null)return t;t={memoizedState:J,baseState:J,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:ms,lastRenderedState:J},next:null};var r={};return t.next={memoizedState:r,baseState:r,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:ms,lastRenderedState:r},next:null},e.memoizedState=t,e=e.alternate,e!==null&&(e.memoizedState=t),t}function Af(e){var t=Ef(e).next.queue;vn(e,t,{},Ct())}function bc(){return it(qn)}function Tf(){return Ye().memoizedState}function Rf(){return Ye().memoizedState}function Xp(e){for(var t=e.return;t!==null;){switch(t.tag){case 24:case 3:var r=Ct();e=Ps(r);var o=Ls(t,e,r);o!==null&&(Et(o,t,r),mn(o,t,r)),t={cache:Ko()},e.payload=t;return}t=t.return}}function Zp(e,t,r){var o=Ct();r={lane:o,revertLane:0,action:r,hasEagerState:!1,eagerState:null,next:null},Ql(e)?Df(t,r):(r=zo(e,t,r,o),r!==null&&(Et(r,e,o),Mf(r,t,o)))}function Of(e,t,r){var o=Ct();vn(e,t,r,o)}function vn(e,t,r,o){var d={lane:o,revertLane:0,action:r,hasEagerState:!1,eagerState:null,next:null};if(Ql(e))Df(t,d);else{var f=e.alternate;if(e.lanes===0&&(f===null||f.lanes===0)&&(f=t.lastRenderedReducer,f!==null))try{var y=t.lastRenderedState,v=f(y,r);if(d.hasEagerState=!0,d.eagerState=v,wt(v,y))return El(e,t,d,0),Ue===null&&Cl(),!1}catch{}finally{}if(r=zo(e,t,d,o),r!==null)return Et(r,e,o),Mf(r,t,o),!0}return!1}function vc(e,t,r,o){if(o={lane:2,revertLane:Jc(),action:o,hasEagerState:!1,eagerState:null,next:null},Ql(e)){if(t)throw Error(i(479))}else t=zo(e,r,o,2),t!==null&&Et(t,e,2)}function Ql(e){var t=e.alternate;return e===be||t!==null&&t===be}function Df(e,t){ar=zl=!0;var r=e.pending;r===null?t.next=t:(t.next=r.next,r.next=t),e.pending=t}function Mf(e,t,r){if((r&4194048)!==0){var o=t.lanes;o&=e.pendingLanes,r|=o,t.lanes=r,Bd(e,r)}}var Yl={readContext:it,use:Bl,useCallback:Ge,useContext:Ge,useEffect:Ge,useImperativeHandle:Ge,useLayoutEffect:Ge,useInsertionEffect:Ge,useMemo:Ge,useReducer:Ge,useRef:Ge,useState:Ge,useDebugValue:Ge,useDeferredValue:Ge,useTransition:Ge,useSyncExternalStore:Ge,useId:Ge,useHostTransitionStatus:Ge,useFormState:Ge,useActionState:Ge,useOptimistic:Ge,useMemoCache:Ge,useCacheRefresh:Ge},Uf={readContext:it,use:Bl,useCallback:function(e,t){return mt().memoizedState=[e,t===void 0?null:t],e},useContext:it,useEffect:yf,useImperativeHandle:function(e,t,r){r=r!=null?r.concat([e]):null,Vl(4194308,4,wf.bind(null,t,e),r)},useLayoutEffect:function(e,t){return Vl(4194308,4,e,t)},useInsertionEffect:function(e,t){Vl(4,2,e,t)},useMemo:function(e,t){var r=mt();t=t===void 0?null:t;var o=e();if(ja){Rs(!0);try{e()}finally{Rs(!1)}}return r.memoizedState=[o,t],o},useReducer:function(e,t,r){var o=mt();if(r!==void 0){var d=r(t);if(ja){Rs(!0);try{r(t)}finally{Rs(!1)}}}else d=t;return o.memoizedState=o.baseState=d,e={pending:null,lanes:0,dispatch:null,lastRenderedReducer:e,lastRenderedState:d},o.queue=e,e=e.dispatch=Zp.bind(null,be,e),[o.memoizedState,e]},useRef:function(e){var t=mt();return e={current:e},t.memoizedState=e},useState:function(e){e=mc(e);var t=e.queue,r=Of.bind(null,be,t);return t.dispatch=r,[e.memoizedState,r]},useDebugValue:xc,useDeferredValue:function(e,t){var r=mt();return pc(r,e,t)},useTransition:function(){var e=mc(!1);return e=Cf.bind(null,be,e.queue,!0,!1),mt().memoizedState=e,[!1,e]},useSyncExternalStore:function(e,t,r){var o=be,d=mt();if(Ce){if(r===void 0)throw Error(i(407));r=r()}else{if(r=t(),Ue===null)throw Error(i(349));(Ne&124)!==0||tf(o,t,r)}d.memoizedState=r;var f={value:r,getSnapshot:t};return d.queue=f,yf(af.bind(null,o,f,e),[e]),o.flags|=2048,nr(9,Gl(),sf.bind(null,o,f,r,t),null),r},useId:function(){var e=mt(),t=Ue.identifierPrefix;if(Ce){var r=ds,o=us;r=(o&~(1<<32-jt(o)-1)).toString(32)+r,t="«"+t+"R"+r,r=$l++,0<r&&(t+="H"+r.toString(32)),t+="»"}else r=Qp++,t="«"+t+"r"+r.toString(32)+"»";return e.memoizedState=t},useHostTransitionStatus:bc,useFormState:ff,useActionState:ff,useOptimistic:function(e){var t=mt();t.memoizedState=t.baseState=e;var r={pending:null,lanes:0,dispatch:null,lastRenderedReducer:null,lastRenderedState:null};return t.queue=r,t=vc.bind(null,be,!0,r),r.dispatch=t,[e,t]},useMemoCache:dc,useCacheRefresh:function(){return mt().memoizedState=Xp.bind(null,be)}},Pf={readContext:it,use:Bl,useCallback:Nf,useContext:it,useEffect:bf,useImperativeHandle:_f,useInsertionEffect:vf,useLayoutEffect:jf,useMemo:Sf,useReducer:Hl,useRef:pf,useState:function(){return Hl(ms)},useDebugValue:xc,useDeferredValue:function(e,t){var r=Ye();return kf(r,Te.memoizedState,e,t)},useTransition:function(){var e=Hl(ms)[0],t=Ye().memoizedState;return[typeof e=="boolean"?e:yn(e),t]},useSyncExternalStore:ef,useId:Tf,useHostTransitionStatus:bc,useFormState:mf,useActionState:mf,useOptimistic:function(e,t){var r=Ye();return lf(r,Te,e,t)},useMemoCache:dc,useCacheRefresh:Rf},Jp={readContext:it,use:Bl,useCallback:Nf,useContext:it,useEffect:bf,useImperativeHandle:_f,useInsertionEffect:vf,useLayoutEffect:jf,useMemo:Sf,useReducer:fc,useRef:pf,useState:function(){return fc(ms)},useDebugValue:xc,useDeferredValue:function(e,t){var r=Ye();return Te===null?pc(r,e,t):kf(r,Te.memoizedState,e,t)},useTransition:function(){var e=fc(ms)[0],t=Ye().memoizedState;return[typeof e=="boolean"?e:yn(e),t]},useSyncExternalStore:ef,useId:Tf,useHostTransitionStatus:bc,useFormState:xf,useActionState:xf,useOptimistic:function(e,t){var r=Ye();return Te!==null?lf(r,Te,e,t):(r.baseState=e,[e,r.queue.dispatch])},useMemoCache:dc,useCacheRefresh:Rf},lr=null,jn=0;function Fl(e){var t=jn;return jn+=1,lr===null&&(lr=[]),Yh(lr,e,t)}function wn(e,t){t=t.props.ref,e.ref=t!==void 0?t:null}function Il(e,t){throw t.$$typeof===b?Error(i(525)):(e=Object.prototype.toString.call(t),Error(i(31,e==="[object Object]"?"object with keys {"+Object.keys(t).join(", ")+"}":e)))}function Lf(e){var t=e._init;return t(e._payload)}function qf(e){function t(T,A){if(e){var O=T.deletions;O===null?(T.deletions=[A],T.flags|=16):O.push(A)}}function r(T,A){if(!e)return null;for(;A!==null;)t(T,A),A=A.sibling;return null}function o(T){for(var A=new Map;T!==null;)T.key!==null?A.set(T.key,T):A.set(T.index,T),T=T.sibling;return A}function d(T,A){return T=cs(T,A),T.index=0,T.sibling=null,T}function f(T,A,O){return T.index=O,e?(O=T.alternate,O!==null?(O=O.index,O<A?(T.flags|=67108866,A):O):(T.flags|=67108866,A)):(T.flags|=1048576,A)}function y(T){return e&&T.alternate===null&&(T.flags|=67108866),T}function v(T,A,O,V){return A===null||A.tag!==6?(A=Bo(O,T.mode,V),A.return=T,A):(A=d(A,O),A.return=T,A)}function k(T,A,O,V){var ae=O.type;return ae===S?G(T,A,O.props.children,V,O.key):A!==null&&(A.elementType===ae||typeof ae=="object"&&ae!==null&&ae.$$typeof===ee&&Lf(ae)===A.type)?(A=d(A,O.props),wn(A,O),A.return=T,A):(A=Tl(O.type,O.key,O.props,null,T.mode,V),wn(A,O),A.return=T,A)}function M(T,A,O,V){return A===null||A.tag!==4||A.stateNode.containerInfo!==O.containerInfo||A.stateNode.implementation!==O.implementation?(A=Ho(O,T.mode,V),A.return=T,A):(A=d(A,O.children||[]),A.return=T,A)}function G(T,A,O,V,ae){return A===null||A.tag!==7?(A=fa(O,T.mode,V,ae),A.return=T,A):(A=d(A,O),A.return=T,A)}function Y(T,A,O){if(typeof A=="string"&&A!==""||typeof A=="number"||typeof A=="bigint")return A=Bo(""+A,T.mode,O),A.return=T,A;if(typeof A=="object"&&A!==null){switch(A.$$typeof){case j:return O=Tl(A.type,A.key,A.props,null,T.mode,O),wn(O,A),O.return=T,O;case w:return A=Ho(A,T.mode,O),A.return=T,A;case ee:var V=A._init;return A=V(A._payload),Y(T,A,O)}if(X(A)||me(A))return A=fa(A,T.mode,O,null),A.return=T,A;if(typeof A.then=="function")return Y(T,Fl(A),O);if(A.$$typeof===z)return Y(T,Ml(T,A),O);Il(T,A)}return null}function P(T,A,O,V){var ae=A!==null?A.key:null;if(typeof O=="string"&&O!==""||typeof O=="number"||typeof O=="bigint")return ae!==null?null:v(T,A,""+O,V);if(typeof O=="object"&&O!==null){switch(O.$$typeof){case j:return O.key===ae?k(T,A,O,V):null;case w:return O.key===ae?M(T,A,O,V):null;case ee:return ae=O._init,O=ae(O._payload),P(T,A,O,V)}if(X(O)||me(O))return ae!==null?null:G(T,A,O,V,null);if(typeof O.then=="function")return P(T,A,Fl(O),V);if(O.$$typeof===z)return P(T,A,Ml(T,O),V);Il(T,O)}return null}function $(T,A,O,V,ae){if(typeof V=="string"&&V!==""||typeof V=="number"||typeof V=="bigint")return T=T.get(O)||null,v(A,T,""+V,ae);if(typeof V=="object"&&V!==null){switch(V.$$typeof){case j:return T=T.get(V.key===null?O:V.key)||null,k(A,T,V,ae);case w:return T=T.get(V.key===null?O:V.key)||null,M(A,T,V,ae);case ee:var ve=V._init;return V=ve(V._payload),$(T,A,O,V,ae)}if(X(V)||me(V))return T=T.get(O)||null,G(A,T,V,ae,null);if(typeof V.then=="function")return $(T,A,O,Fl(V),ae);if(V.$$typeof===z)return $(T,A,O,Ml(A,V),ae);Il(A,V)}return null}function he(T,A,O,V){for(var ae=null,ve=null,le=A,ue=A=0,et=null;le!==null&&ue<O.length;ue++){le.index>ue?(et=le,le=null):et=le.sibling;var ke=P(T,le,O[ue],V);if(ke===null){le===null&&(le=et);break}e&&le&&ke.alternate===null&&t(T,le),A=f(ke,A,ue),ve===null?ae=ke:ve.sibling=ke,ve=ke,le=et}if(ue===O.length)return r(T,le),Ce&&ga(T,ue),ae;if(le===null){for(;ue<O.length;ue++)le=Y(T,O[ue],V),le!==null&&(A=f(le,A,ue),ve===null?ae=le:ve.sibling=le,ve=le);return Ce&&ga(T,ue),ae}for(le=o(le);ue<O.length;ue++)et=$(le,T,ue,O[ue],V),et!==null&&(e&&et.alternate!==null&&le.delete(et.key===null?ue:et.key),A=f(et,A,ue),ve===null?ae=et:ve.sibling=et,ve=et);return e&&le.forEach(function(ea){return t(T,ea)}),Ce&&ga(T,ue),ae}function ce(T,A,O,V){if(O==null)throw Error(i(151));for(var ae=null,ve=null,le=A,ue=A=0,et=null,ke=O.next();le!==null&&!ke.done;ue++,ke=O.next()){le.index>ue?(et=le,le=null):et=le.sibling;var ea=P(T,le,ke.value,V);if(ea===null){le===null&&(le=et);break}e&&le&&ea.alternate===null&&t(T,le),A=f(ea,A,ue),ve===null?ae=ea:ve.sibling=ea,ve=ea,le=et}if(ke.done)return r(T,le),Ce&&ga(T,ue),ae;if(le===null){for(;!ke.done;ue++,ke=O.next())ke=Y(T,ke.value,V),ke!==null&&(A=f(ke,A,ue),ve===null?ae=ke:ve.sibling=ke,ve=ke);return Ce&&ga(T,ue),ae}for(le=o(le);!ke.done;ue++,ke=O.next())ke=$(le,T,ue,ke.value,V),ke!==null&&(e&&ke.alternate!==null&&le.delete(ke.key===null?ue:ke.key),A=f(ke,A,ue),ve===null?ae=ke:ve.sibling=ke,ve=ke);return e&&le.forEach(function(Wy){return t(T,Wy)}),Ce&&ga(T,ue),ae}function Oe(T,A,O,V){if(typeof O=="object"&&O!==null&&O.type===S&&O.key===null&&(O=O.props.children),typeof O=="object"&&O!==null){switch(O.$$typeof){case j:e:{for(var ae=O.key;A!==null;){if(A.key===ae){if(ae=O.type,ae===S){if(A.tag===7){r(T,A.sibling),V=d(A,O.props.children),V.return=T,T=V;break e}}else if(A.elementType===ae||typeof ae=="object"&&ae!==null&&ae.$$typeof===ee&&Lf(ae)===A.type){r(T,A.sibling),V=d(A,O.props),wn(V,O),V.return=T,T=V;break e}r(T,A);break}else t(T,A);A=A.sibling}O.type===S?(V=fa(O.props.children,T.mode,V,O.key),V.return=T,T=V):(V=Tl(O.type,O.key,O.props,null,T.mode,V),wn(V,O),V.return=T,T=V)}return y(T);case w:e:{for(ae=O.key;A!==null;){if(A.key===ae)if(A.tag===4&&A.stateNode.containerInfo===O.containerInfo&&A.stateNode.implementation===O.implementation){r(T,A.sibling),V=d(A,O.children||[]),V.return=T,T=V;break e}else{r(T,A);break}else t(T,A);A=A.sibling}V=Ho(O,T.mode,V),V.return=T,T=V}return y(T);case ee:return ae=O._init,O=ae(O._payload),Oe(T,A,O,V)}if(X(O))return he(T,A,O,V);if(me(O)){if(ae=me(O),typeof ae!="function")throw Error(i(150));return O=ae.call(O),ce(T,A,O,V)}if(typeof O.then=="function")return Oe(T,A,Fl(O),V);if(O.$$typeof===z)return Oe(T,A,Ml(T,O),V);Il(T,O)}return typeof O=="string"&&O!==""||typeof O=="number"||typeof O=="bigint"?(O=""+O,A!==null&&A.tag===6?(r(T,A.sibling),V=d(A,O),V.return=T,T=V):(r(T,A),V=Bo(O,T.mode,V),V.return=T,T=V),y(T)):r(T,A)}return function(T,A,O,V){try{jn=0;var ae=Oe(T,A,O,V);return lr=null,ae}catch(le){if(le===hn||le===Pl)throw le;var ve=_t(29,le,null,T.mode);return ve.lanes=V,ve.return=T,ve}finally{}}}var ir=qf(!0),zf=qf(!1),Ut=I(null),Jt=null;function zs(e){var t=e.alternate;Z(Ie,Ie.current&1),Z(Ut,e),Jt===null&&(t===null||sr.current!==null||t.memoizedState!==null)&&(Jt=e)}function $f(e){if(e.tag===22){if(Z(Ie,Ie.current),Z(Ut,e),Jt===null){var t=e.alternate;t!==null&&t.memoizedState!==null&&(Jt=e)}}else $s()}function $s(){Z(Ie,Ie.current),Z(Ut,Ut.current)}function gs(e){F(Ut),Jt===e&&(Jt=null),F(Ie)}var Ie=I(0);function Kl(e){for(var t=e;t!==null;){if(t.tag===13){var r=t.memoizedState;if(r!==null&&(r=r.dehydrated,r===null||r.data==="$?"||uu(r)))return t}else if(t.tag===19&&t.memoizedProps.revealOrder!==void 0){if((t.flags&128)!==0)return t}else if(t.child!==null){t.child.return=t,t=t.child;continue}if(t===e)break;for(;t.sibling===null;){if(t.return===null||t.return===e)return null;t=t.return}t.sibling.return=t.return,t=t.sibling}return null}function jc(e,t,r,o){t=e.memoizedState,r=r(o,t),r=r==null?t:p({},t,r),e.memoizedState=r,e.lanes===0&&(e.updateQueue.baseState=r)}var wc={enqueueSetState:function(e,t,r){e=e._reactInternals;var o=Ct(),d=Ps(o);d.payload=t,r!=null&&(d.callback=r),t=Ls(e,d,o),t!==null&&(Et(t,e,o),mn(t,e,o))},enqueueReplaceState:function(e,t,r){e=e._reactInternals;var o=Ct(),d=Ps(o);d.tag=1,d.payload=t,r!=null&&(d.callback=r),t=Ls(e,d,o),t!==null&&(Et(t,e,o),mn(t,e,o))},enqueueForceUpdate:function(e,t){e=e._reactInternals;var r=Ct(),o=Ps(r);o.tag=2,t!=null&&(o.callback=t),t=Ls(e,o,r),t!==null&&(Et(t,e,r),mn(t,e,r))}};function Bf(e,t,r,o,d,f,y){return e=e.stateNode,typeof e.shouldComponentUpdate=="function"?e.shouldComponentUpdate(o,f,y):t.prototype&&t.prototype.isPureReactComponent?!an(r,o)||!an(d,f):!0}function Hf(e,t,r,o){e=t.state,typeof t.componentWillReceiveProps=="function"&&t.componentWillReceiveProps(r,o),typeof t.UNSAFE_componentWillReceiveProps=="function"&&t.UNSAFE_componentWillReceiveProps(r,o),t.state!==e&&wc.enqueueReplaceState(t,t.state,null)}function wa(e,t){var r=t;if("ref"in t){r={};for(var o in t)o!=="ref"&&(r[o]=t[o])}if(e=e.defaultProps){r===t&&(r=p({},r));for(var d in e)r[d]===void 0&&(r[d]=e[d])}return r}var Xl=typeof reportError=="function"?reportError:function(e){if(typeof window=="object"&&typeof window.ErrorEvent=="function"){var t=new window.ErrorEvent("error",{bubbles:!0,cancelable:!0,message:typeof e=="object"&&e!==null&&typeof e.message=="string"?String(e.message):String(e),error:e});if(!window.dispatchEvent(t))return}else if(typeof process=="object"&&typeof process.emit=="function"){process.emit("uncaughtException",e);return}console.error(e)};function Gf(e){Xl(e)}function Vf(e){console.error(e)}function Qf(e){Xl(e)}function Zl(e,t){try{var r=e.onUncaughtError;r(t.value,{componentStack:t.stack})}catch(o){setTimeout(function(){throw o})}}function Yf(e,t,r){try{var o=e.onCaughtError;o(r.value,{componentStack:r.stack,errorBoundary:t.tag===1?t.stateNode:null})}catch(d){setTimeout(function(){throw d})}}function _c(e,t,r){return r=Ps(r),r.tag=3,r.payload={element:null},r.callback=function(){Zl(e,t)},r}function Ff(e){return e=Ps(e),e.tag=3,e}function If(e,t,r,o){var d=r.type.getDerivedStateFromError;if(typeof d=="function"){var f=o.value;e.payload=function(){return d(f)},e.callback=function(){Yf(t,r,o)}}var y=r.stateNode;y!==null&&typeof y.componentDidCatch=="function"&&(e.callback=function(){Yf(t,r,o),typeof d!="function"&&(Ys===null?Ys=new Set([this]):Ys.add(this));var v=o.stack;this.componentDidCatch(o.value,{componentStack:v!==null?v:""})})}function Wp(e,t,r,o,d){if(r.flags|=32768,o!==null&&typeof o=="object"&&typeof o.then=="function"){if(t=r.alternate,t!==null&&cn(t,r,d,!0),r=Ut.current,r!==null){switch(r.tag){case 13:return Jt===null?Fc():r.alternate===null&&He===0&&(He=3),r.flags&=-257,r.flags|=65536,r.lanes=d,o===Jo?r.flags|=16384:(t=r.updateQueue,t===null?r.updateQueue=new Set([o]):t.add(o),Kc(e,o,d)),!1;case 22:return r.flags|=65536,o===Jo?r.flags|=16384:(t=r.updateQueue,t===null?(t={transitions:null,markerInstances:null,retryQueue:new Set([o])},r.updateQueue=t):(r=t.retryQueue,r===null?t.retryQueue=new Set([o]):r.add(o)),Kc(e,o,d)),!1}throw Error(i(435,r.tag))}return Kc(e,o,d),Fc(),!1}if(Ce)return t=Ut.current,t!==null?((t.flags&65536)===0&&(t.flags|=256),t.flags|=65536,t.lanes=d,o!==Qo&&(e=Error(i(422),{cause:o}),on(Rt(e,r)))):(o!==Qo&&(t=Error(i(423),{cause:o}),on(Rt(t,r))),e=e.current.alternate,e.flags|=65536,d&=-d,e.lanes|=d,o=Rt(o,r),d=_c(e.stateNode,o,d),tc(e,d),He!==4&&(He=2)),!1;var f=Error(i(520),{cause:o});if(f=Rt(f,r),An===null?An=[f]:An.push(f),He!==4&&(He=2),t===null)return!0;o=Rt(o,r),r=t;do{switch(r.tag){case 3:return r.flags|=65536,e=d&-d,r.lanes|=e,e=_c(r.stateNode,o,e),tc(r,e),!1;case 1:if(t=r.type,f=r.stateNode,(r.flags&128)===0&&(typeof t.getDerivedStateFromError=="function"||f!==null&&typeof f.componentDidCatch=="function"&&(Ys===null||!Ys.has(f))))return r.flags|=65536,d&=-d,r.lanes|=d,d=Ff(d),If(d,e,r,o),tc(r,d),!1}r=r.return}while(r!==null);return!1}var Kf=Error(i(461)),Je=!1;function at(e,t,r,o){t.child=e===null?zf(t,null,r,o):ir(t,e.child,r,o)}function Xf(e,t,r,o,d){r=r.render;var f=t.ref;if("ref"in o){var y={};for(var v in o)v!=="ref"&&(y[v]=o[v])}else y=o;return ba(t),o=lc(e,t,r,y,f,d),v=ic(),e!==null&&!Je?(oc(e,t,d),xs(e,t,d)):(Ce&&v&&Go(t),t.flags|=1,at(e,t,o,d),t.child)}function Zf(e,t,r,o,d){if(e===null){var f=r.type;return typeof f=="function"&&!$o(f)&&f.defaultProps===void 0&&r.compare===null?(t.tag=15,t.type=f,Jf(e,t,f,o,d)):(e=Tl(r.type,null,o,t,t.mode,d),e.ref=t.ref,e.return=t,t.child=e)}if(f=e.child,!Rc(e,d)){var y=f.memoizedProps;if(r=r.compare,r=r!==null?r:an,r(y,o)&&e.ref===t.ref)return xs(e,t,d)}return t.flags|=1,e=cs(f,o),e.ref=t.ref,e.return=t,t.child=e}function Jf(e,t,r,o,d){if(e!==null){var f=e.memoizedProps;if(an(f,o)&&e.ref===t.ref)if(Je=!1,t.pendingProps=o=f,Rc(e,d))(e.flags&131072)!==0&&(Je=!0);else return t.lanes=e.lanes,xs(e,t,d)}return Nc(e,t,r,o,d)}function Wf(e,t,r){var o=t.pendingProps,d=o.children,f=e!==null?e.memoizedState:null;if(o.mode==="hidden"){if((t.flags&128)!==0){if(o=f!==null?f.baseLanes|r:r,e!==null){for(d=t.child=e.child,f=0;d!==null;)f=f|d.lanes|d.childLanes,d=d.sibling;t.childLanes=f&~o}else t.childLanes=0,t.child=null;return em(e,t,o,r)}if((r&536870912)!==0)t.memoizedState={baseLanes:0,cachePool:null},e!==null&&Ul(t,f!==null?f.cachePool:null),f!==null?Zh(t,f):ac(),$f(t);else return t.lanes=t.childLanes=536870912,em(e,t,f!==null?f.baseLanes|r:r,r)}else f!==null?(Ul(t,f.cachePool),Zh(t,f),$s(),t.memoizedState=null):(e!==null&&Ul(t,null),ac(),$s());return at(e,t,d,r),t.child}function em(e,t,r,o){var d=Zo();return d=d===null?null:{parent:Fe._currentValue,pool:d},t.memoizedState={baseLanes:r,cachePool:d},e!==null&&Ul(t,null),ac(),$f(t),e!==null&&cn(e,t,o,!0),null}function Jl(e,t){var r=t.ref;if(r===null)e!==null&&e.ref!==null&&(t.flags|=4194816);else{if(typeof r!="function"&&typeof r!="object")throw Error(i(284));(e===null||e.ref!==r)&&(t.flags|=4194816)}}function Nc(e,t,r,o,d){return ba(t),r=lc(e,t,r,o,void 0,d),o=ic(),e!==null&&!Je?(oc(e,t,d),xs(e,t,d)):(Ce&&o&&Go(t),t.flags|=1,at(e,t,r,d),t.child)}function tm(e,t,r,o,d,f){return ba(t),t.updateQueue=null,r=Wh(t,o,r,d),Jh(e),o=ic(),e!==null&&!Je?(oc(e,t,f),xs(e,t,f)):(Ce&&o&&Go(t),t.flags|=1,at(e,t,r,f),t.child)}function sm(e,t,r,o,d){if(ba(t),t.stateNode===null){var f=Za,y=r.contextType;typeof y=="object"&&y!==null&&(f=it(y)),f=new r(o,f),t.memoizedState=f.state!==null&&f.state!==void 0?f.state:null,f.updater=wc,t.stateNode=f,f._reactInternals=t,f=t.stateNode,f.props=o,f.state=t.memoizedState,f.refs={},Wo(t),y=r.contextType,f.context=typeof y=="object"&&y!==null?it(y):Za,f.state=t.memoizedState,y=r.getDerivedStateFromProps,typeof y=="function"&&(jc(t,r,y,o),f.state=t.memoizedState),typeof r.getDerivedStateFromProps=="function"||typeof f.getSnapshotBeforeUpdate=="function"||typeof f.UNSAFE_componentWillMount!="function"&&typeof f.componentWillMount!="function"||(y=f.state,typeof f.componentWillMount=="function"&&f.componentWillMount(),typeof f.UNSAFE_componentWillMount=="function"&&f.UNSAFE_componentWillMount(),y!==f.state&&wc.enqueueReplaceState(f,f.state,null),xn(t,o,f,d),gn(),f.state=t.memoizedState),typeof f.componentDidMount=="function"&&(t.flags|=4194308),o=!0}else if(e===null){f=t.stateNode;var v=t.memoizedProps,k=wa(r,v);f.props=k;var M=f.context,G=r.contextType;y=Za,typeof G=="object"&&G!==null&&(y=it(G));var Y=r.getDerivedStateFromProps;G=typeof Y=="function"||typeof f.getSnapshotBeforeUpdate=="function",v=t.pendingProps!==v,G||typeof f.UNSAFE_componentWillReceiveProps!="function"&&typeof f.componentWillReceiveProps!="function"||(v||M!==y)&&Hf(t,f,o,y),Us=!1;var P=t.memoizedState;f.state=P,xn(t,o,f,d),gn(),M=t.memoizedState,v||P!==M||Us?(typeof Y=="function"&&(jc(t,r,Y,o),M=t.memoizedState),(k=Us||Bf(t,r,k,o,P,M,y))?(G||typeof f.UNSAFE_componentWillMount!="function"&&typeof f.componentWillMount!="function"||(typeof f.componentWillMount=="function"&&f.componentWillMount(),typeof f.UNSAFE_componentWillMount=="function"&&f.UNSAFE_componentWillMount()),typeof f.componentDidMount=="function"&&(t.flags|=4194308)):(typeof f.componentDidMount=="function"&&(t.flags|=4194308),t.memoizedProps=o,t.memoizedState=M),f.props=o,f.state=M,f.context=y,o=k):(typeof f.componentDidMount=="function"&&(t.flags|=4194308),o=!1)}else{f=t.stateNode,ec(e,t),y=t.memoizedProps,G=wa(r,y),f.props=G,Y=t.pendingProps,P=f.context,M=r.contextType,k=Za,typeof M=="object"&&M!==null&&(k=it(M)),v=r.getDerivedStateFromProps,(M=typeof v=="function"||typeof f.getSnapshotBeforeUpdate=="function")||typeof f.UNSAFE_componentWillReceiveProps!="function"&&typeof f.componentWillReceiveProps!="function"||(y!==Y||P!==k)&&Hf(t,f,o,k),Us=!1,P=t.memoizedState,f.state=P,xn(t,o,f,d),gn();var $=t.memoizedState;y!==Y||P!==$||Us||e!==null&&e.dependencies!==null&&Dl(e.dependencies)?(typeof v=="function"&&(jc(t,r,v,o),$=t.memoizedState),(G=Us||Bf(t,r,G,o,P,$,k)||e!==null&&e.dependencies!==null&&Dl(e.dependencies))?(M||typeof f.UNSAFE_componentWillUpdate!="function"&&typeof f.componentWillUpdate!="function"||(typeof f.componentWillUpdate=="function"&&f.componentWillUpdate(o,$,k),typeof f.UNSAFE_componentWillUpdate=="function"&&f.UNSAFE_componentWillUpdate(o,$,k)),typeof f.componentDidUpdate=="function"&&(t.flags|=4),typeof f.getSnapshotBeforeUpdate=="function"&&(t.flags|=1024)):(typeof f.componentDidUpdate!="function"||y===e.memoizedProps&&P===e.memoizedState||(t.flags|=4),typeof f.getSnapshotBeforeUpdate!="function"||y===e.memoizedProps&&P===e.memoizedState||(t.flags|=1024),t.memoizedProps=o,t.memoizedState=$),f.props=o,f.state=$,f.context=k,o=G):(typeof f.componentDidUpdate!="function"||y===e.memoizedProps&&P===e.memoizedState||(t.flags|=4),typeof f.getSnapshotBeforeUpdate!="function"||y===e.memoizedProps&&P===e.memoizedState||(t.flags|=1024),o=!1)}return f=o,Jl(e,t),o=(t.flags&128)!==0,f||o?(f=t.stateNode,r=o&&typeof r.getDerivedStateFromError!="function"?null:f.render(),t.flags|=1,e!==null&&o?(t.child=ir(t,e.child,null,d),t.child=ir(t,null,r,d)):at(e,t,r,d),t.memoizedState=f.state,e=t.child):e=xs(e,t,d),e}function am(e,t,r,o){return ln(),t.flags|=256,at(e,t,r,o),t.child}var Sc={dehydrated:null,treeContext:null,retryLane:0,hydrationErrors:null};function kc(e){return{baseLanes:e,cachePool:Gh()}}function Cc(e,t,r){return e=e!==null?e.childLanes&~r:0,t&&(e|=Pt),e}function rm(e,t,r){var o=t.pendingProps,d=!1,f=(t.flags&128)!==0,y;if((y=f)||(y=e!==null&&e.memoizedState===null?!1:(Ie.current&2)!==0),y&&(d=!0,t.flags&=-129),y=(t.flags&32)!==0,t.flags&=-33,e===null){if(Ce){if(d?zs(t):$s(),Ce){var v=Be,k;if(k=v){e:{for(k=v,v=Zt;k.nodeType!==8;){if(!v){v=null;break e}if(k=$t(k.nextSibling),k===null){v=null;break e}}v=k}v!==null?(t.memoizedState={dehydrated:v,treeContext:ma!==null?{id:us,overflow:ds}:null,retryLane:536870912,hydrationErrors:null},k=_t(18,null,null,0),k.stateNode=v,k.return=t,t.child=k,ct=t,Be=null,k=!0):k=!1}k||pa(t)}if(v=t.memoizedState,v!==null&&(v=v.dehydrated,v!==null))return uu(v)?t.lanes=32:t.lanes=536870912,null;gs(t)}return v=o.children,o=o.fallback,d?($s(),d=t.mode,v=Wl({mode:"hidden",children:v},d),o=fa(o,d,r,null),v.return=t,o.return=t,v.sibling=o,t.child=v,d=t.child,d.memoizedState=kc(r),d.childLanes=Cc(e,y,r),t.memoizedState=Sc,o):(zs(t),Ec(t,v))}if(k=e.memoizedState,k!==null&&(v=k.dehydrated,v!==null)){if(f)t.flags&256?(zs(t),t.flags&=-257,t=Ac(e,t,r)):t.memoizedState!==null?($s(),t.child=e.child,t.flags|=128,t=null):($s(),d=o.fallback,v=t.mode,o=Wl({mode:"visible",children:o.children},v),d=fa(d,v,r,null),d.flags|=2,o.return=t,d.return=t,o.sibling=d,t.child=o,ir(t,e.child,null,r),o=t.child,o.memoizedState=kc(r),o.childLanes=Cc(e,y,r),t.memoizedState=Sc,t=d);else if(zs(t),uu(v)){if(y=v.nextSibling&&v.nextSibling.dataset,y)var M=y.dgst;y=M,o=Error(i(419)),o.stack="",o.digest=y,on({value:o,source:null,stack:null}),t=Ac(e,t,r)}else if(Je||cn(e,t,r,!1),y=(r&e.childLanes)!==0,Je||y){if(y=Ue,y!==null&&(o=r&-r,o=(o&42)!==0?1:uo(o),o=(o&(y.suspendedLanes|r))!==0?0:o,o!==0&&o!==k.retryLane))throw k.retryLane=o,Xa(e,o),Et(y,e,o),Kf;v.data==="$?"||Fc(),t=Ac(e,t,r)}else v.data==="$?"?(t.flags|=192,t.child=e.child,t=null):(e=k.treeContext,Be=$t(v.nextSibling),ct=t,Ce=!0,xa=null,Zt=!1,e!==null&&(Dt[Mt++]=us,Dt[Mt++]=ds,Dt[Mt++]=ma,us=e.id,ds=e.overflow,ma=t),t=Ec(t,o.children),t.flags|=4096);return t}return d?($s(),d=o.fallback,v=t.mode,k=e.child,M=k.sibling,o=cs(k,{mode:"hidden",children:o.children}),o.subtreeFlags=k.subtreeFlags&65011712,M!==null?d=cs(M,d):(d=fa(d,v,r,null),d.flags|=2),d.return=t,o.return=t,o.sibling=d,t.child=o,o=d,d=t.child,v=e.child.memoizedState,v===null?v=kc(r):(k=v.cachePool,k!==null?(M=Fe._currentValue,k=k.parent!==M?{parent:M,pool:M}:k):k=Gh(),v={baseLanes:v.baseLanes|r,cachePool:k}),d.memoizedState=v,d.childLanes=Cc(e,y,r),t.memoizedState=Sc,o):(zs(t),r=e.child,e=r.sibling,r=cs(r,{mode:"visible",children:o.children}),r.return=t,r.sibling=null,e!==null&&(y=t.deletions,y===null?(t.deletions=[e],t.flags|=16):y.push(e)),t.child=r,t.memoizedState=null,r)}function Ec(e,t){return t=Wl({mode:"visible",children:t},e.mode),t.return=e,e.child=t}function Wl(e,t){return e=_t(22,e,null,t),e.lanes=0,e.stateNode={_visibility:1,_pendingMarkers:null,_retryCache:null,_transitions:null},e}function Ac(e,t,r){return ir(t,e.child,null,r),e=Ec(t,t.pendingProps.children),e.flags|=2,t.memoizedState=null,e}function nm(e,t,r){e.lanes|=t;var o=e.alternate;o!==null&&(o.lanes|=t),Fo(e.return,t,r)}function Tc(e,t,r,o,d){var f=e.memoizedState;f===null?e.memoizedState={isBackwards:t,rendering:null,renderingStartTime:0,last:o,tail:r,tailMode:d}:(f.isBackwards=t,f.rendering=null,f.renderingStartTime=0,f.last=o,f.tail=r,f.tailMode=d)}function lm(e,t,r){var o=t.pendingProps,d=o.revealOrder,f=o.tail;if(at(e,t,o.children,r),o=Ie.current,(o&2)!==0)o=o&1|2,t.flags|=128;else{if(e!==null&&(e.flags&128)!==0)e:for(e=t.child;e!==null;){if(e.tag===13)e.memoizedState!==null&&nm(e,r,t);else if(e.tag===19)nm(e,r,t);else if(e.child!==null){e.child.return=e,e=e.child;continue}if(e===t)break e;for(;e.sibling===null;){if(e.return===null||e.return===t)break e;e=e.return}e.sibling.return=e.return,e=e.sibling}o&=1}switch(Z(Ie,o),d){case"forwards":for(r=t.child,d=null;r!==null;)e=r.alternate,e!==null&&Kl(e)===null&&(d=r),r=r.sibling;r=d,r===null?(d=t.child,t.child=null):(d=r.sibling,r.sibling=null),Tc(t,!1,d,r,f);break;case"backwards":for(r=null,d=t.child,t.child=null;d!==null;){if(e=d.alternate,e!==null&&Kl(e)===null){t.child=d;break}e=d.sibling,d.sibling=r,r=d,d=e}Tc(t,!0,r,null,f);break;case"together":Tc(t,!1,null,null,void 0);break;default:t.memoizedState=null}return t.child}function xs(e,t,r){if(e!==null&&(t.dependencies=e.dependencies),Qs|=t.lanes,(r&t.childLanes)===0)if(e!==null){if(cn(e,t,r,!1),(r&t.childLanes)===0)return null}else return null;if(e!==null&&t.child!==e.child)throw Error(i(153));if(t.child!==null){for(e=t.child,r=cs(e,e.pendingProps),t.child=r,r.return=t;e.sibling!==null;)e=e.sibling,r=r.sibling=cs(e,e.pendingProps),r.return=t;r.sibling=null}return t.child}function Rc(e,t){return(e.lanes&t)!==0?!0:(e=e.dependencies,!!(e!==null&&Dl(e)))}function ey(e,t,r){switch(t.tag){case 3:Le(t,t.stateNode.containerInfo),Ms(t,Fe,e.memoizedState.cache),ln();break;case 27:case 5:no(t);break;case 4:Le(t,t.stateNode.containerInfo);break;case 10:Ms(t,t.type,t.memoizedProps.value);break;case 13:var o=t.memoizedState;if(o!==null)return o.dehydrated!==null?(zs(t),t.flags|=128,null):(r&t.child.childLanes)!==0?rm(e,t,r):(zs(t),e=xs(e,t,r),e!==null?e.sibling:null);zs(t);break;case 19:var d=(e.flags&128)!==0;if(o=(r&t.childLanes)!==0,o||(cn(e,t,r,!1),o=(r&t.childLanes)!==0),d){if(o)return lm(e,t,r);t.flags|=128}if(d=t.memoizedState,d!==null&&(d.rendering=null,d.tail=null,d.lastEffect=null),Z(Ie,Ie.current),o)break;return null;case 22:case 23:return t.lanes=0,Wf(e,t,r);case 24:Ms(t,Fe,e.memoizedState.cache)}return xs(e,t,r)}function im(e,t,r){if(e!==null)if(e.memoizedProps!==t.pendingProps)Je=!0;else{if(!Rc(e,r)&&(t.flags&128)===0)return Je=!1,ey(e,t,r);Je=(e.flags&131072)!==0}else Je=!1,Ce&&(t.flags&1048576)!==0&&Ph(t,Ol,t.index);switch(t.lanes=0,t.tag){case 16:e:{e=t.pendingProps;var o=t.elementType,d=o._init;if(o=d(o._payload),t.type=o,typeof o=="function")$o(o)?(e=wa(o,e),t.tag=1,t=sm(null,t,o,e,r)):(t.tag=0,t=Nc(null,t,o,e,r));else{if(o!=null){if(d=o.$$typeof,d===U){t.tag=11,t=Xf(null,t,o,e,r);break e}else if(d===H){t.tag=14,t=Zf(null,t,o,e,r);break e}}throw t=Q(o)||o,Error(i(306,t,""))}}return t;case 0:return Nc(e,t,t.type,t.pendingProps,r);case 1:return o=t.type,d=wa(o,t.pendingProps),sm(e,t,o,d,r);case 3:e:{if(Le(t,t.stateNode.containerInfo),e===null)throw Error(i(387));o=t.pendingProps;var f=t.memoizedState;d=f.element,ec(e,t),xn(t,o,null,r);var y=t.memoizedState;if(o=y.cache,Ms(t,Fe,o),o!==f.cache&&Io(t,[Fe],r,!0),gn(),o=y.element,f.isDehydrated)if(f={element:o,isDehydrated:!1,cache:y.cache},t.updateQueue.baseState=f,t.memoizedState=f,t.flags&256){t=am(e,t,o,r);break e}else if(o!==d){d=Rt(Error(i(424)),t),on(d),t=am(e,t,o,r);break e}else{switch(e=t.stateNode.containerInfo,e.nodeType){case 9:e=e.body;break;default:e=e.nodeName==="HTML"?e.ownerDocument.body:e}for(Be=$t(e.firstChild),ct=t,Ce=!0,xa=null,Zt=!0,r=zf(t,null,o,r),t.child=r;r;)r.flags=r.flags&-3|4096,r=r.sibling}else{if(ln(),o===d){t=xs(e,t,r);break e}at(e,t,o,r)}t=t.child}return t;case 26:return Jl(e,t),e===null?(r=d0(t.type,null,t.pendingProps,null))?t.memoizedState=r:Ce||(r=t.type,e=t.pendingProps,o=fi(fe.current).createElement(r),o[lt]=t,o[ht]=e,nt(o,r,e),Ze(o),t.stateNode=o):t.memoizedState=d0(t.type,e.memoizedProps,t.pendingProps,e.memoizedState),null;case 27:return no(t),e===null&&Ce&&(o=t.stateNode=o0(t.type,t.pendingProps,fe.current),ct=t,Zt=!0,d=Be,Ks(t.type)?(du=d,Be=$t(o.firstChild)):Be=d),at(e,t,t.pendingProps.children,r),Jl(e,t),e===null&&(t.flags|=4194304),t.child;case 5:return e===null&&Ce&&((d=o=Be)&&(o=Ey(o,t.type,t.pendingProps,Zt),o!==null?(t.stateNode=o,ct=t,Be=$t(o.firstChild),Zt=!1,d=!0):d=!1),d||pa(t)),no(t),d=t.type,f=t.pendingProps,y=e!==null?e.memoizedProps:null,o=f.children,iu(d,f)?o=null:y!==null&&iu(d,y)&&(t.flags|=32),t.memoizedState!==null&&(d=lc(e,t,Yp,null,null,r),qn._currentValue=d),Jl(e,t),at(e,t,o,r),t.child;case 6:return e===null&&Ce&&((e=r=Be)&&(r=Ay(r,t.pendingProps,Zt),r!==null?(t.stateNode=r,ct=t,Be=null,e=!0):e=!1),e||pa(t)),null;case 13:return rm(e,t,r);case 4:return Le(t,t.stateNode.containerInfo),o=t.pendingProps,e===null?t.child=ir(t,null,o,r):at(e,t,o,r),t.child;case 11:return Xf(e,t,t.type,t.pendingProps,r);case 7:return at(e,t,t.pendingProps,r),t.child;case 8:return at(e,t,t.pendingProps.children,r),t.child;case 12:return at(e,t,t.pendingProps.children,r),t.child;case 10:return o=t.pendingProps,Ms(t,t.type,o.value),at(e,t,o.children,r),t.child;case 9:return d=t.type._context,o=t.pendingProps.children,ba(t),d=it(d),o=o(d),t.flags|=1,at(e,t,o,r),t.child;case 14:return Zf(e,t,t.type,t.pendingProps,r);case 15:return Jf(e,t,t.type,t.pendingProps,r);case 19:return lm(e,t,r);case 31:return o=t.pendingProps,r=t.mode,o={mode:o.mode,children:o.children},e===null?(r=Wl(o,r),r.ref=t.ref,t.child=r,r.return=t,t=r):(r=cs(e.child,o),r.ref=t.ref,t.child=r,r.return=t,t=r),t;case 22:return Wf(e,t,r);case 24:return ba(t),o=it(Fe),e===null?(d=Zo(),d===null&&(d=Ue,f=Ko(),d.pooledCache=f,f.refCount++,f!==null&&(d.pooledCacheLanes|=r),d=f),t.memoizedState={parent:o,cache:d},Wo(t),Ms(t,Fe,d)):((e.lanes&r)!==0&&(ec(e,t),xn(t,null,null,r),gn()),d=e.memoizedState,f=t.memoizedState,d.parent!==o?(d={parent:o,cache:o},t.memoizedState=d,t.lanes===0&&(t.memoizedState=t.updateQueue.baseState=d),Ms(t,Fe,o)):(o=f.cache,Ms(t,Fe,o),o!==d.cache&&Io(t,[Fe],r,!0))),at(e,t,t.pendingProps.children,r),t.child;case 29:throw t.pendingProps}throw Error(i(156,t.tag))}function ps(e){e.flags|=4}function om(e,t){if(t.type!=="stylesheet"||(t.state.loading&4)!==0)e.flags&=-16777217;else if(e.flags|=16777216,!x0(t)){if(t=Ut.current,t!==null&&((Ne&4194048)===Ne?Jt!==null:(Ne&62914560)!==Ne&&(Ne&536870912)===0||t!==Jt))throw fn=Jo,Vh;e.flags|=8192}}function ei(e,t){t!==null&&(e.flags|=4),e.flags&16384&&(t=e.tag!==22?zd():536870912,e.lanes|=t,dr|=t)}function _n(e,t){if(!Ce)switch(e.tailMode){case"hidden":t=e.tail;for(var r=null;t!==null;)t.alternate!==null&&(r=t),t=t.sibling;r===null?e.tail=null:r.sibling=null;break;case"collapsed":r=e.tail;for(var o=null;r!==null;)r.alternate!==null&&(o=r),r=r.sibling;o===null?t||e.tail===null?e.tail=null:e.tail.sibling=null:o.sibling=null}}function $e(e){var t=e.alternate!==null&&e.alternate.child===e.child,r=0,o=0;if(t)for(var d=e.child;d!==null;)r|=d.lanes|d.childLanes,o|=d.subtreeFlags&65011712,o|=d.flags&65011712,d.return=e,d=d.sibling;else for(d=e.child;d!==null;)r|=d.lanes|d.childLanes,o|=d.subtreeFlags,o|=d.flags,d.return=e,d=d.sibling;return e.subtreeFlags|=o,e.childLanes=r,t}function ty(e,t,r){var o=t.pendingProps;switch(Vo(t),t.tag){case 31:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return $e(t),null;case 1:return $e(t),null;case 3:return r=t.stateNode,o=null,e!==null&&(o=e.memoizedState.cache),t.memoizedState.cache!==o&&(t.flags|=2048),fs(Fe),Ts(),r.pendingContext&&(r.context=r.pendingContext,r.pendingContext=null),(e===null||e.child===null)&&(nn(t)?ps(t):e===null||e.memoizedState.isDehydrated&&(t.flags&256)===0||(t.flags|=1024,zh())),$e(t),null;case 26:return r=t.memoizedState,e===null?(ps(t),r!==null?($e(t),om(t,r)):($e(t),t.flags&=-16777217)):r?r!==e.memoizedState?(ps(t),$e(t),om(t,r)):($e(t),t.flags&=-16777217):(e.memoizedProps!==o&&ps(t),$e(t),t.flags&=-16777217),null;case 27:dl(t),r=fe.current;var d=t.type;if(e!==null&&t.stateNode!=null)e.memoizedProps!==o&&ps(t);else{if(!o){if(t.stateNode===null)throw Error(i(166));return $e(t),null}e=ie.current,nn(t)?Lh(t):(e=o0(d,o,r),t.stateNode=e,ps(t))}return $e(t),null;case 5:if(dl(t),r=t.type,e!==null&&t.stateNode!=null)e.memoizedProps!==o&&ps(t);else{if(!o){if(t.stateNode===null)throw Error(i(166));return $e(t),null}if(e=ie.current,nn(t))Lh(t);else{switch(d=fi(fe.current),e){case 1:e=d.createElementNS("http://www.w3.org/2000/svg",r);break;case 2:e=d.createElementNS("http://www.w3.org/1998/Math/MathML",r);break;default:switch(r){case"svg":e=d.createElementNS("http://www.w3.org/2000/svg",r);break;case"math":e=d.createElementNS("http://www.w3.org/1998/Math/MathML",r);break;case"script":e=d.createElement("div"),e.innerHTML="<script><\/script>",e=e.removeChild(e.firstChild);break;case"select":e=typeof o.is=="string"?d.createElement("select",{is:o.is}):d.createElement("select"),o.multiple?e.multiple=!0:o.size&&(e.size=o.size);break;default:e=typeof o.is=="string"?d.createElement(r,{is:o.is}):d.createElement(r)}}e[lt]=t,e[ht]=o;e:for(d=t.child;d!==null;){if(d.tag===5||d.tag===6)e.appendChild(d.stateNode);else if(d.tag!==4&&d.tag!==27&&d.child!==null){d.child.return=d,d=d.child;continue}if(d===t)break e;for(;d.sibling===null;){if(d.return===null||d.return===t)break e;d=d.return}d.sibling.return=d.return,d=d.sibling}t.stateNode=e;e:switch(nt(e,r,o),r){case"button":case"input":case"select":case"textarea":e=!!o.autoFocus;break e;case"img":e=!0;break e;default:e=!1}e&&ps(t)}}return $e(t),t.flags&=-16777217,null;case 6:if(e&&t.stateNode!=null)e.memoizedProps!==o&&ps(t);else{if(typeof o!="string"&&t.stateNode===null)throw Error(i(166));if(e=fe.current,nn(t)){if(e=t.stateNode,r=t.memoizedProps,o=null,d=ct,d!==null)switch(d.tag){case 27:case 5:o=d.memoizedProps}e[lt]=t,e=!!(e.nodeValue===r||o!==null&&o.suppressHydrationWarning===!0||t0(e.nodeValue,r)),e||pa(t)}else e=fi(e).createTextNode(o),e[lt]=t,t.stateNode=e}return $e(t),null;case 13:if(o=t.memoizedState,e===null||e.memoizedState!==null&&e.memoizedState.dehydrated!==null){if(d=nn(t),o!==null&&o.dehydrated!==null){if(e===null){if(!d)throw Error(i(318));if(d=t.memoizedState,d=d!==null?d.dehydrated:null,!d)throw Error(i(317));d[lt]=t}else ln(),(t.flags&128)===0&&(t.memoizedState=null),t.flags|=4;$e(t),d=!1}else d=zh(),e!==null&&e.memoizedState!==null&&(e.memoizedState.hydrationErrors=d),d=!0;if(!d)return t.flags&256?(gs(t),t):(gs(t),null)}if(gs(t),(t.flags&128)!==0)return t.lanes=r,t;if(r=o!==null,e=e!==null&&e.memoizedState!==null,r){o=t.child,d=null,o.alternate!==null&&o.alternate.memoizedState!==null&&o.alternate.memoizedState.cachePool!==null&&(d=o.alternate.memoizedState.cachePool.pool);var f=null;o.memoizedState!==null&&o.memoizedState.cachePool!==null&&(f=o.memoizedState.cachePool.pool),f!==d&&(o.flags|=2048)}return r!==e&&r&&(t.child.flags|=8192),ei(t,t.updateQueue),$e(t),null;case 4:return Ts(),e===null&&su(t.stateNode.containerInfo),$e(t),null;case 10:return fs(t.type),$e(t),null;case 19:if(F(Ie),d=t.memoizedState,d===null)return $e(t),null;if(o=(t.flags&128)!==0,f=d.rendering,f===null)if(o)_n(d,!1);else{if(He!==0||e!==null&&(e.flags&128)!==0)for(e=t.child;e!==null;){if(f=Kl(e),f!==null){for(t.flags|=128,_n(d,!1),e=f.updateQueue,t.updateQueue=e,ei(t,e),t.subtreeFlags=0,e=r,r=t.child;r!==null;)Uh(r,e),r=r.sibling;return Z(Ie,Ie.current&1|2),t.child}e=e.sibling}d.tail!==null&&Xt()>ai&&(t.flags|=128,o=!0,_n(d,!1),t.lanes=4194304)}else{if(!o)if(e=Kl(f),e!==null){if(t.flags|=128,o=!0,e=e.updateQueue,t.updateQueue=e,ei(t,e),_n(d,!0),d.tail===null&&d.tailMode==="hidden"&&!f.alternate&&!Ce)return $e(t),null}else 2*Xt()-d.renderingStartTime>ai&&r!==536870912&&(t.flags|=128,o=!0,_n(d,!1),t.lanes=4194304);d.isBackwards?(f.sibling=t.child,t.child=f):(e=d.last,e!==null?e.sibling=f:t.child=f,d.last=f)}return d.tail!==null?(t=d.tail,d.rendering=t,d.tail=t.sibling,d.renderingStartTime=Xt(),t.sibling=null,e=Ie.current,Z(Ie,o?e&1|2:e&1),t):($e(t),null);case 22:case 23:return gs(t),rc(),o=t.memoizedState!==null,e!==null?e.memoizedState!==null!==o&&(t.flags|=8192):o&&(t.flags|=8192),o?(r&536870912)!==0&&(t.flags&128)===0&&($e(t),t.subtreeFlags&6&&(t.flags|=8192)):$e(t),r=t.updateQueue,r!==null&&ei(t,r.retryQueue),r=null,e!==null&&e.memoizedState!==null&&e.memoizedState.cachePool!==null&&(r=e.memoizedState.cachePool.pool),o=null,t.memoizedState!==null&&t.memoizedState.cachePool!==null&&(o=t.memoizedState.cachePool.pool),o!==r&&(t.flags|=2048),e!==null&&F(va),null;case 24:return r=null,e!==null&&(r=e.memoizedState.cache),t.memoizedState.cache!==r&&(t.flags|=2048),fs(Fe),$e(t),null;case 25:return null;case 30:return null}throw Error(i(156,t.tag))}function sy(e,t){switch(Vo(t),t.tag){case 1:return e=t.flags,e&65536?(t.flags=e&-65537|128,t):null;case 3:return fs(Fe),Ts(),e=t.flags,(e&65536)!==0&&(e&128)===0?(t.flags=e&-65537|128,t):null;case 26:case 27:case 5:return dl(t),null;case 13:if(gs(t),e=t.memoizedState,e!==null&&e.dehydrated!==null){if(t.alternate===null)throw Error(i(340));ln()}return e=t.flags,e&65536?(t.flags=e&-65537|128,t):null;case 19:return F(Ie),null;case 4:return Ts(),null;case 10:return fs(t.type),null;case 22:case 23:return gs(t),rc(),e!==null&&F(va),e=t.flags,e&65536?(t.flags=e&-65537|128,t):null;case 24:return fs(Fe),null;case 25:return null;default:return null}}function cm(e,t){switch(Vo(t),t.tag){case 3:fs(Fe),Ts();break;case 26:case 27:case 5:dl(t);break;case 4:Ts();break;case 13:gs(t);break;case 19:F(Ie);break;case 10:fs(t.type);break;case 22:case 23:gs(t),rc(),e!==null&&F(va);break;case 24:fs(Fe)}}function Nn(e,t){try{var r=t.updateQueue,o=r!==null?r.lastEffect:null;if(o!==null){var d=o.next;r=d;do{if((r.tag&e)===e){o=void 0;var f=r.create,y=r.inst;o=f(),y.destroy=o}r=r.next}while(r!==d)}}catch(v){De(t,t.return,v)}}function Bs(e,t,r){try{var o=t.updateQueue,d=o!==null?o.lastEffect:null;if(d!==null){var f=d.next;o=f;do{if((o.tag&e)===e){var y=o.inst,v=y.destroy;if(v!==void 0){y.destroy=void 0,d=t;var k=r,M=v;try{M()}catch(G){De(d,k,G)}}}o=o.next}while(o!==f)}}catch(G){De(t,t.return,G)}}function um(e){var t=e.updateQueue;if(t!==null){var r=e.stateNode;try{Xh(t,r)}catch(o){De(e,e.return,o)}}}function dm(e,t,r){r.props=wa(e.type,e.memoizedProps),r.state=e.memoizedState;try{r.componentWillUnmount()}catch(o){De(e,t,o)}}function Sn(e,t){try{var r=e.ref;if(r!==null){switch(e.tag){case 26:case 27:case 5:var o=e.stateNode;break;case 30:o=e.stateNode;break;default:o=e.stateNode}typeof r=="function"?e.refCleanup=r(o):r.current=o}}catch(d){De(e,t,d)}}function Wt(e,t){var r=e.ref,o=e.refCleanup;if(r!==null)if(typeof o=="function")try{o()}catch(d){De(e,t,d)}finally{e.refCleanup=null,e=e.alternate,e!=null&&(e.refCleanup=null)}else if(typeof r=="function")try{r(null)}catch(d){De(e,t,d)}else r.current=null}function hm(e){var t=e.type,r=e.memoizedProps,o=e.stateNode;try{e:switch(t){case"button":case"input":case"select":case"textarea":r.autoFocus&&o.focus();break e;case"img":r.src?o.src=r.src:r.srcSet&&(o.srcset=r.srcSet)}}catch(d){De(e,e.return,d)}}function Oc(e,t,r){try{var o=e.stateNode;_y(o,e.type,r,t),o[ht]=t}catch(d){De(e,e.return,d)}}function fm(e){return e.tag===5||e.tag===3||e.tag===26||e.tag===27&&Ks(e.type)||e.tag===4}function Dc(e){e:for(;;){for(;e.sibling===null;){if(e.return===null||fm(e.return))return null;e=e.return}for(e.sibling.return=e.return,e=e.sibling;e.tag!==5&&e.tag!==6&&e.tag!==18;){if(e.tag===27&&Ks(e.type)||e.flags&2||e.child===null||e.tag===4)continue e;e.child.return=e,e=e.child}if(!(e.flags&2))return e.stateNode}}function Mc(e,t,r){var o=e.tag;if(o===5||o===6)e=e.stateNode,t?(r.nodeType===9?r.body:r.nodeName==="HTML"?r.ownerDocument.body:r).insertBefore(e,t):(t=r.nodeType===9?r.body:r.nodeName==="HTML"?r.ownerDocument.body:r,t.appendChild(e),r=r._reactRootContainer,r!=null||t.onclick!==null||(t.onclick=hi));else if(o!==4&&(o===27&&Ks(e.type)&&(r=e.stateNode,t=null),e=e.child,e!==null))for(Mc(e,t,r),e=e.sibling;e!==null;)Mc(e,t,r),e=e.sibling}function ti(e,t,r){var o=e.tag;if(o===5||o===6)e=e.stateNode,t?r.insertBefore(e,t):r.appendChild(e);else if(o!==4&&(o===27&&Ks(e.type)&&(r=e.stateNode),e=e.child,e!==null))for(ti(e,t,r),e=e.sibling;e!==null;)ti(e,t,r),e=e.sibling}function mm(e){var t=e.stateNode,r=e.memoizedProps;try{for(var o=e.type,d=t.attributes;d.length;)t.removeAttributeNode(d[0]);nt(t,o,r),t[lt]=e,t[ht]=r}catch(f){De(e,e.return,f)}}var ys=!1,Ve=!1,Uc=!1,gm=typeof WeakSet=="function"?WeakSet:Set,We=null;function ay(e,t){if(e=e.containerInfo,nu=bi,e=Sh(e),Do(e)){if("selectionStart"in e)var r={start:e.selectionStart,end:e.selectionEnd};else e:{r=(r=e.ownerDocument)&&r.defaultView||window;var o=r.getSelection&&r.getSelection();if(o&&o.rangeCount!==0){r=o.anchorNode;var d=o.anchorOffset,f=o.focusNode;o=o.focusOffset;try{r.nodeType,f.nodeType}catch{r=null;break e}var y=0,v=-1,k=-1,M=0,G=0,Y=e,P=null;t:for(;;){for(var $;Y!==r||d!==0&&Y.nodeType!==3||(v=y+d),Y!==f||o!==0&&Y.nodeType!==3||(k=y+o),Y.nodeType===3&&(y+=Y.nodeValue.length),($=Y.firstChild)!==null;)P=Y,Y=$;for(;;){if(Y===e)break t;if(P===r&&++M===d&&(v=y),P===f&&++G===o&&(k=y),($=Y.nextSibling)!==null)break;Y=P,P=Y.parentNode}Y=$}r=v===-1||k===-1?null:{start:v,end:k}}else r=null}r=r||{start:0,end:0}}else r=null;for(lu={focusedElem:e,selectionRange:r},bi=!1,We=t;We!==null;)if(t=We,e=t.child,(t.subtreeFlags&1024)!==0&&e!==null)e.return=t,We=e;else for(;We!==null;){switch(t=We,f=t.alternate,e=t.flags,t.tag){case 0:break;case 11:case 15:break;case 1:if((e&1024)!==0&&f!==null){e=void 0,r=t,d=f.memoizedProps,f=f.memoizedState,o=r.stateNode;try{var he=wa(r.type,d,r.elementType===r.type);e=o.getSnapshotBeforeUpdate(he,f),o.__reactInternalSnapshotBeforeUpdate=e}catch(ce){De(r,r.return,ce)}}break;case 3:if((e&1024)!==0){if(e=t.stateNode.containerInfo,r=e.nodeType,r===9)cu(e);else if(r===1)switch(e.nodeName){case"HEAD":case"HTML":case"BODY":cu(e);break;default:e.textContent=""}}break;case 5:case 26:case 27:case 6:case 4:case 17:break;default:if((e&1024)!==0)throw Error(i(163))}if(e=t.sibling,e!==null){e.return=t.return,We=e;break}We=t.return}}function xm(e,t,r){var o=r.flags;switch(r.tag){case 0:case 11:case 15:Hs(e,r),o&4&&Nn(5,r);break;case 1:if(Hs(e,r),o&4)if(e=r.stateNode,t===null)try{e.componentDidMount()}catch(y){De(r,r.return,y)}else{var d=wa(r.type,t.memoizedProps);t=t.memoizedState;try{e.componentDidUpdate(d,t,e.__reactInternalSnapshotBeforeUpdate)}catch(y){De(r,r.return,y)}}o&64&&um(r),o&512&&Sn(r,r.return);break;case 3:if(Hs(e,r),o&64&&(e=r.updateQueue,e!==null)){if(t=null,r.child!==null)switch(r.child.tag){case 27:case 5:t=r.child.stateNode;break;case 1:t=r.child.stateNode}try{Xh(e,t)}catch(y){De(r,r.return,y)}}break;case 27:t===null&&o&4&&mm(r);case 26:case 5:Hs(e,r),t===null&&o&4&&hm(r),o&512&&Sn(r,r.return);break;case 12:Hs(e,r);break;case 13:Hs(e,r),o&4&&bm(e,r),o&64&&(e=r.memoizedState,e!==null&&(e=e.dehydrated,e!==null&&(r=hy.bind(null,r),Ty(e,r))));break;case 22:if(o=r.memoizedState!==null||ys,!o){t=t!==null&&t.memoizedState!==null||Ve,d=ys;var f=Ve;ys=o,(Ve=t)&&!f?Gs(e,r,(r.subtreeFlags&8772)!==0):Hs(e,r),ys=d,Ve=f}break;case 30:break;default:Hs(e,r)}}function pm(e){var t=e.alternate;t!==null&&(e.alternate=null,pm(t)),e.child=null,e.deletions=null,e.sibling=null,e.tag===5&&(t=e.stateNode,t!==null&&mo(t)),e.stateNode=null,e.return=null,e.dependencies=null,e.memoizedProps=null,e.memoizedState=null,e.pendingProps=null,e.stateNode=null,e.updateQueue=null}var qe=null,gt=!1;function bs(e,t,r){for(r=r.child;r!==null;)ym(e,t,r),r=r.sibling}function ym(e,t,r){if(vt&&typeof vt.onCommitFiberUnmount=="function")try{vt.onCommitFiberUnmount(Qr,r)}catch{}switch(r.tag){case 26:Ve||Wt(r,t),bs(e,t,r),r.memoizedState?r.memoizedState.count--:r.stateNode&&(r=r.stateNode,r.parentNode.removeChild(r));break;case 27:Ve||Wt(r,t);var o=qe,d=gt;Ks(r.type)&&(qe=r.stateNode,gt=!1),bs(e,t,r),Mn(r.stateNode),qe=o,gt=d;break;case 5:Ve||Wt(r,t);case 6:if(o=qe,d=gt,qe=null,bs(e,t,r),qe=o,gt=d,qe!==null)if(gt)try{(qe.nodeType===9?qe.body:qe.nodeName==="HTML"?qe.ownerDocument.body:qe).removeChild(r.stateNode)}catch(f){De(r,t,f)}else try{qe.removeChild(r.stateNode)}catch(f){De(r,t,f)}break;case 18:qe!==null&&(gt?(e=qe,l0(e.nodeType===9?e.body:e.nodeName==="HTML"?e.ownerDocument.body:e,r.stateNode),Hn(e)):l0(qe,r.stateNode));break;case 4:o=qe,d=gt,qe=r.stateNode.containerInfo,gt=!0,bs(e,t,r),qe=o,gt=d;break;case 0:case 11:case 14:case 15:Ve||Bs(2,r,t),Ve||Bs(4,r,t),bs(e,t,r);break;case 1:Ve||(Wt(r,t),o=r.stateNode,typeof o.componentWillUnmount=="function"&&dm(r,t,o)),bs(e,t,r);break;case 21:bs(e,t,r);break;case 22:Ve=(o=Ve)||r.memoizedState!==null,bs(e,t,r),Ve=o;break;default:bs(e,t,r)}}function bm(e,t){if(t.memoizedState===null&&(e=t.alternate,e!==null&&(e=e.memoizedState,e!==null&&(e=e.dehydrated,e!==null))))try{Hn(e)}catch(r){De(t,t.return,r)}}function ry(e){switch(e.tag){case 13:case 19:var t=e.stateNode;return t===null&&(t=e.stateNode=new gm),t;case 22:return e=e.stateNode,t=e._retryCache,t===null&&(t=e._retryCache=new gm),t;default:throw Error(i(435,e.tag))}}function Pc(e,t){var r=ry(e);t.forEach(function(o){var d=fy.bind(null,e,o);r.has(o)||(r.add(o),o.then(d,d))})}function Nt(e,t){var r=t.deletions;if(r!==null)for(var o=0;o<r.length;o++){var d=r[o],f=e,y=t,v=y;e:for(;v!==null;){switch(v.tag){case 27:if(Ks(v.type)){qe=v.stateNode,gt=!1;break e}break;case 5:qe=v.stateNode,gt=!1;break e;case 3:case 4:qe=v.stateNode.containerInfo,gt=!0;break e}v=v.return}if(qe===null)throw Error(i(160));ym(f,y,d),qe=null,gt=!1,f=d.alternate,f!==null&&(f.return=null),d.return=null}if(t.subtreeFlags&13878)for(t=t.child;t!==null;)vm(t,e),t=t.sibling}var zt=null;function vm(e,t){var r=e.alternate,o=e.flags;switch(e.tag){case 0:case 11:case 14:case 15:Nt(t,e),St(e),o&4&&(Bs(3,e,e.return),Nn(3,e),Bs(5,e,e.return));break;case 1:Nt(t,e),St(e),o&512&&(Ve||r===null||Wt(r,r.return)),o&64&&ys&&(e=e.updateQueue,e!==null&&(o=e.callbacks,o!==null&&(r=e.shared.hiddenCallbacks,e.shared.hiddenCallbacks=r===null?o:r.concat(o))));break;case 26:var d=zt;if(Nt(t,e),St(e),o&512&&(Ve||r===null||Wt(r,r.return)),o&4){var f=r!==null?r.memoizedState:null;if(o=e.memoizedState,r===null)if(o===null)if(e.stateNode===null){e:{o=e.type,r=e.memoizedProps,d=d.ownerDocument||d;t:switch(o){case"title":f=d.getElementsByTagName("title")[0],(!f||f[Ir]||f[lt]||f.namespaceURI==="http://www.w3.org/2000/svg"||f.hasAttribute("itemprop"))&&(f=d.createElement(o),d.head.insertBefore(f,d.querySelector("head > title"))),nt(f,o,r),f[lt]=e,Ze(f),o=f;break e;case"link":var y=m0("link","href",d).get(o+(r.href||""));if(y){for(var v=0;v<y.length;v++)if(f=y[v],f.getAttribute("href")===(r.href==null||r.href===""?null:r.href)&&f.getAttribute("rel")===(r.rel==null?null:r.rel)&&f.getAttribute("title")===(r.title==null?null:r.title)&&f.getAttribute("crossorigin")===(r.crossOrigin==null?null:r.crossOrigin)){y.splice(v,1);break t}}f=d.createElement(o),nt(f,o,r),d.head.appendChild(f);break;case"meta":if(y=m0("meta","content",d).get(o+(r.content||""))){for(v=0;v<y.length;v++)if(f=y[v],f.getAttribute("content")===(r.content==null?null:""+r.content)&&f.getAttribute("name")===(r.name==null?null:r.name)&&f.getAttribute("property")===(r.property==null?null:r.property)&&f.getAttribute("http-equiv")===(r.httpEquiv==null?null:r.httpEquiv)&&f.getAttribute("charset")===(r.charSet==null?null:r.charSet)){y.splice(v,1);break t}}f=d.createElement(o),nt(f,o,r),d.head.appendChild(f);break;default:throw Error(i(468,o))}f[lt]=e,Ze(f),o=f}e.stateNode=o}else g0(d,e.type,e.stateNode);else e.stateNode=f0(d,o,e.memoizedProps);else f!==o?(f===null?r.stateNode!==null&&(r=r.stateNode,r.parentNode.removeChild(r)):f.count--,o===null?g0(d,e.type,e.stateNode):f0(d,o,e.memoizedProps)):o===null&&e.stateNode!==null&&Oc(e,e.memoizedProps,r.memoizedProps)}break;case 27:Nt(t,e),St(e),o&512&&(Ve||r===null||Wt(r,r.return)),r!==null&&o&4&&Oc(e,e.memoizedProps,r.memoizedProps);break;case 5:if(Nt(t,e),St(e),o&512&&(Ve||r===null||Wt(r,r.return)),e.flags&32){d=e.stateNode;try{Ga(d,"")}catch($){De(e,e.return,$)}}o&4&&e.stateNode!=null&&(d=e.memoizedProps,Oc(e,d,r!==null?r.memoizedProps:d)),o&1024&&(Uc=!0);break;case 6:if(Nt(t,e),St(e),o&4){if(e.stateNode===null)throw Error(i(162));o=e.memoizedProps,r=e.stateNode;try{r.nodeValue=o}catch($){De(e,e.return,$)}}break;case 3:if(xi=null,d=zt,zt=mi(t.containerInfo),Nt(t,e),zt=d,St(e),o&4&&r!==null&&r.memoizedState.isDehydrated)try{Hn(t.containerInfo)}catch($){De(e,e.return,$)}Uc&&(Uc=!1,jm(e));break;case 4:o=zt,zt=mi(e.stateNode.containerInfo),Nt(t,e),St(e),zt=o;break;case 12:Nt(t,e),St(e);break;case 13:Nt(t,e),St(e),e.child.flags&8192&&e.memoizedState!==null!=(r!==null&&r.memoizedState!==null)&&(Hc=Xt()),o&4&&(o=e.updateQueue,o!==null&&(e.updateQueue=null,Pc(e,o)));break;case 22:d=e.memoizedState!==null;var k=r!==null&&r.memoizedState!==null,M=ys,G=Ve;if(ys=M||d,Ve=G||k,Nt(t,e),Ve=G,ys=M,St(e),o&8192)e:for(t=e.stateNode,t._visibility=d?t._visibility&-2:t._visibility|1,d&&(r===null||k||ys||Ve||_a(e)),r=null,t=e;;){if(t.tag===5||t.tag===26){if(r===null){k=r=t;try{if(f=k.stateNode,d)y=f.style,typeof y.setProperty=="function"?y.setProperty("display","none","important"):y.display="none";else{v=k.stateNode;var Y=k.memoizedProps.style,P=Y!=null&&Y.hasOwnProperty("display")?Y.display:null;v.style.display=P==null||typeof P=="boolean"?"":(""+P).trim()}}catch($){De(k,k.return,$)}}}else if(t.tag===6){if(r===null){k=t;try{k.stateNode.nodeValue=d?"":k.memoizedProps}catch($){De(k,k.return,$)}}}else if((t.tag!==22&&t.tag!==23||t.memoizedState===null||t===e)&&t.child!==null){t.child.return=t,t=t.child;continue}if(t===e)break e;for(;t.sibling===null;){if(t.return===null||t.return===e)break e;r===t&&(r=null),t=t.return}r===t&&(r=null),t.sibling.return=t.return,t=t.sibling}o&4&&(o=e.updateQueue,o!==null&&(r=o.retryQueue,r!==null&&(o.retryQueue=null,Pc(e,r))));break;case 19:Nt(t,e),St(e),o&4&&(o=e.updateQueue,o!==null&&(e.updateQueue=null,Pc(e,o)));break;case 30:break;case 21:break;default:Nt(t,e),St(e)}}function St(e){var t=e.flags;if(t&2){try{for(var r,o=e.return;o!==null;){if(fm(o)){r=o;break}o=o.return}if(r==null)throw Error(i(160));switch(r.tag){case 27:var d=r.stateNode,f=Dc(e);ti(e,f,d);break;case 5:var y=r.stateNode;r.flags&32&&(Ga(y,""),r.flags&=-33);var v=Dc(e);ti(e,v,y);break;case 3:case 4:var k=r.stateNode.containerInfo,M=Dc(e);Mc(e,M,k);break;default:throw Error(i(161))}}catch(G){De(e,e.return,G)}e.flags&=-3}t&4096&&(e.flags&=-4097)}function jm(e){if(e.subtreeFlags&1024)for(e=e.child;e!==null;){var t=e;jm(t),t.tag===5&&t.flags&1024&&t.stateNode.reset(),e=e.sibling}}function Hs(e,t){if(t.subtreeFlags&8772)for(t=t.child;t!==null;)xm(e,t.alternate,t),t=t.sibling}function _a(e){for(e=e.child;e!==null;){var t=e;switch(t.tag){case 0:case 11:case 14:case 15:Bs(4,t,t.return),_a(t);break;case 1:Wt(t,t.return);var r=t.stateNode;typeof r.componentWillUnmount=="function"&&dm(t,t.return,r),_a(t);break;case 27:Mn(t.stateNode);case 26:case 5:Wt(t,t.return),_a(t);break;case 22:t.memoizedState===null&&_a(t);break;case 30:_a(t);break;default:_a(t)}e=e.sibling}}function Gs(e,t,r){for(r=r&&(t.subtreeFlags&8772)!==0,t=t.child;t!==null;){var o=t.alternate,d=e,f=t,y=f.flags;switch(f.tag){case 0:case 11:case 15:Gs(d,f,r),Nn(4,f);break;case 1:if(Gs(d,f,r),o=f,d=o.stateNode,typeof d.componentDidMount=="function")try{d.componentDidMount()}catch(M){De(o,o.return,M)}if(o=f,d=o.updateQueue,d!==null){var v=o.stateNode;try{var k=d.shared.hiddenCallbacks;if(k!==null)for(d.shared.hiddenCallbacks=null,d=0;d<k.length;d++)Kh(k[d],v)}catch(M){De(o,o.return,M)}}r&&y&64&&um(f),Sn(f,f.return);break;case 27:mm(f);case 26:case 5:Gs(d,f,r),r&&o===null&&y&4&&hm(f),Sn(f,f.return);break;case 12:Gs(d,f,r);break;case 13:Gs(d,f,r),r&&y&4&&bm(d,f);break;case 22:f.memoizedState===null&&Gs(d,f,r),Sn(f,f.return);break;case 30:break;default:Gs(d,f,r)}t=t.sibling}}function Lc(e,t){var r=null;e!==null&&e.memoizedState!==null&&e.memoizedState.cachePool!==null&&(r=e.memoizedState.cachePool.pool),e=null,t.memoizedState!==null&&t.memoizedState.cachePool!==null&&(e=t.memoizedState.cachePool.pool),e!==r&&(e!=null&&e.refCount++,r!=null&&un(r))}function qc(e,t){e=null,t.alternate!==null&&(e=t.alternate.memoizedState.cache),t=t.memoizedState.cache,t!==e&&(t.refCount++,e!=null&&un(e))}function es(e,t,r,o){if(t.subtreeFlags&10256)for(t=t.child;t!==null;)wm(e,t,r,o),t=t.sibling}function wm(e,t,r,o){var d=t.flags;switch(t.tag){case 0:case 11:case 15:es(e,t,r,o),d&2048&&Nn(9,t);break;case 1:es(e,t,r,o);break;case 3:es(e,t,r,o),d&2048&&(e=null,t.alternate!==null&&(e=t.alternate.memoizedState.cache),t=t.memoizedState.cache,t!==e&&(t.refCount++,e!=null&&un(e)));break;case 12:if(d&2048){es(e,t,r,o),e=t.stateNode;try{var f=t.memoizedProps,y=f.id,v=f.onPostCommit;typeof v=="function"&&v(y,t.alternate===null?"mount":"update",e.passiveEffectDuration,-0)}catch(k){De(t,t.return,k)}}else es(e,t,r,o);break;case 13:es(e,t,r,o);break;case 23:break;case 22:f=t.stateNode,y=t.alternate,t.memoizedState!==null?f._visibility&2?es(e,t,r,o):kn(e,t):f._visibility&2?es(e,t,r,o):(f._visibility|=2,or(e,t,r,o,(t.subtreeFlags&10256)!==0)),d&2048&&Lc(y,t);break;case 24:es(e,t,r,o),d&2048&&qc(t.alternate,t);break;default:es(e,t,r,o)}}function or(e,t,r,o,d){for(d=d&&(t.subtreeFlags&10256)!==0,t=t.child;t!==null;){var f=e,y=t,v=r,k=o,M=y.flags;switch(y.tag){case 0:case 11:case 15:or(f,y,v,k,d),Nn(8,y);break;case 23:break;case 22:var G=y.stateNode;y.memoizedState!==null?G._visibility&2?or(f,y,v,k,d):kn(f,y):(G._visibility|=2,or(f,y,v,k,d)),d&&M&2048&&Lc(y.alternate,y);break;case 24:or(f,y,v,k,d),d&&M&2048&&qc(y.alternate,y);break;default:or(f,y,v,k,d)}t=t.sibling}}function kn(e,t){if(t.subtreeFlags&10256)for(t=t.child;t!==null;){var r=e,o=t,d=o.flags;switch(o.tag){case 22:kn(r,o),d&2048&&Lc(o.alternate,o);break;case 24:kn(r,o),d&2048&&qc(o.alternate,o);break;default:kn(r,o)}t=t.sibling}}var Cn=8192;function cr(e){if(e.subtreeFlags&Cn)for(e=e.child;e!==null;)_m(e),e=e.sibling}function _m(e){switch(e.tag){case 26:cr(e),e.flags&Cn&&e.memoizedState!==null&&Gy(zt,e.memoizedState,e.memoizedProps);break;case 5:cr(e);break;case 3:case 4:var t=zt;zt=mi(e.stateNode.containerInfo),cr(e),zt=t;break;case 22:e.memoizedState===null&&(t=e.alternate,t!==null&&t.memoizedState!==null?(t=Cn,Cn=16777216,cr(e),Cn=t):cr(e));break;default:cr(e)}}function Nm(e){var t=e.alternate;if(t!==null&&(e=t.child,e!==null)){t.child=null;do t=e.sibling,e.sibling=null,e=t;while(e!==null)}}function En(e){var t=e.deletions;if((e.flags&16)!==0){if(t!==null)for(var r=0;r<t.length;r++){var o=t[r];We=o,km(o,e)}Nm(e)}if(e.subtreeFlags&10256)for(e=e.child;e!==null;)Sm(e),e=e.sibling}function Sm(e){switch(e.tag){case 0:case 11:case 15:En(e),e.flags&2048&&Bs(9,e,e.return);break;case 3:En(e);break;case 12:En(e);break;case 22:var t=e.stateNode;e.memoizedState!==null&&t._visibility&2&&(e.return===null||e.return.tag!==13)?(t._visibility&=-3,si(e)):En(e);break;default:En(e)}}function si(e){var t=e.deletions;if((e.flags&16)!==0){if(t!==null)for(var r=0;r<t.length;r++){var o=t[r];We=o,km(o,e)}Nm(e)}for(e=e.child;e!==null;){switch(t=e,t.tag){case 0:case 11:case 15:Bs(8,t,t.return),si(t);break;case 22:r=t.stateNode,r._visibility&2&&(r._visibility&=-3,si(t));break;default:si(t)}e=e.sibling}}function km(e,t){for(;We!==null;){var r=We;switch(r.tag){case 0:case 11:case 15:Bs(8,r,t);break;case 23:case 22:if(r.memoizedState!==null&&r.memoizedState.cachePool!==null){var o=r.memoizedState.cachePool.pool;o!=null&&o.refCount++}break;case 24:un(r.memoizedState.cache)}if(o=r.child,o!==null)o.return=r,We=o;else e:for(r=e;We!==null;){o=We;var d=o.sibling,f=o.return;if(pm(o),o===r){We=null;break e}if(d!==null){d.return=f,We=d;break e}We=f}}}var ny={getCacheForType:function(e){var t=it(Fe),r=t.data.get(e);return r===void 0&&(r=e(),t.data.set(e,r)),r}},ly=typeof WeakMap=="function"?WeakMap:Map,Ee=0,Ue=null,je=null,Ne=0,Ae=0,kt=null,Vs=!1,ur=!1,zc=!1,vs=0,He=0,Qs=0,Na=0,$c=0,Pt=0,dr=0,An=null,xt=null,Bc=!1,Hc=0,ai=1/0,ri=null,Ys=null,rt=0,Fs=null,hr=null,fr=0,Gc=0,Vc=null,Cm=null,Tn=0,Qc=null;function Ct(){if((Ee&2)!==0&&Ne!==0)return Ne&-Ne;if(R.T!==null){var e=er;return e!==0?e:Jc()}return Hd()}function Em(){Pt===0&&(Pt=(Ne&536870912)===0||Ce?qd():536870912);var e=Ut.current;return e!==null&&(e.flags|=32),Pt}function Et(e,t,r){(e===Ue&&(Ae===2||Ae===9)||e.cancelPendingCommit!==null)&&(mr(e,0),Is(e,Ne,Pt,!1)),Fr(e,r),((Ee&2)===0||e!==Ue)&&(e===Ue&&((Ee&2)===0&&(Na|=r),He===4&&Is(e,Ne,Pt,!1)),ts(e))}function Am(e,t,r){if((Ee&6)!==0)throw Error(i(327));var o=!r&&(t&124)===0&&(t&e.expiredLanes)===0||Yr(e,t),d=o?cy(e,t):Ic(e,t,!0),f=o;do{if(d===0){ur&&!o&&Is(e,t,0,!1);break}else{if(r=e.current.alternate,f&&!iy(r)){d=Ic(e,t,!1),f=!1;continue}if(d===2){if(f=t,e.errorRecoveryDisabledLanes&f)var y=0;else y=e.pendingLanes&-536870913,y=y!==0?y:y&536870912?536870912:0;if(y!==0){t=y;e:{var v=e;d=An;var k=v.current.memoizedState.isDehydrated;if(k&&(mr(v,y).flags|=256),y=Ic(v,y,!1),y!==2){if(zc&&!k){v.errorRecoveryDisabledLanes|=f,Na|=f,d=4;break e}f=xt,xt=d,f!==null&&(xt===null?xt=f:xt.push.apply(xt,f))}d=y}if(f=!1,d!==2)continue}}if(d===1){mr(e,0),Is(e,t,0,!0);break}e:{switch(o=e,f=d,f){case 0:case 1:throw Error(i(345));case 4:if((t&4194048)!==t)break;case 6:Is(o,t,Pt,!Vs);break e;case 2:xt=null;break;case 3:case 5:break;default:throw Error(i(329))}if((t&62914560)===t&&(d=Hc+300-Xt(),10<d)){if(Is(o,t,Pt,!Vs),gl(o,0,!0)!==0)break e;o.timeoutHandle=r0(Tm.bind(null,o,r,xt,ri,Bc,t,Pt,Na,dr,Vs,f,2,-0,0),d);break e}Tm(o,r,xt,ri,Bc,t,Pt,Na,dr,Vs,f,0,-0,0)}}break}while(!0);ts(e)}function Tm(e,t,r,o,d,f,y,v,k,M,G,Y,P,$){if(e.timeoutHandle=-1,Y=t.subtreeFlags,(Y&8192||(Y&16785408)===16785408)&&(Ln={stylesheets:null,count:0,unsuspend:Hy},_m(t),Y=Vy(),Y!==null)){e.cancelPendingCommit=Y(Lm.bind(null,e,t,f,r,o,d,y,v,k,G,1,P,$)),Is(e,f,y,!M);return}Lm(e,t,f,r,o,d,y,v,k)}function iy(e){for(var t=e;;){var r=t.tag;if((r===0||r===11||r===15)&&t.flags&16384&&(r=t.updateQueue,r!==null&&(r=r.stores,r!==null)))for(var o=0;o<r.length;o++){var d=r[o],f=d.getSnapshot;d=d.value;try{if(!wt(f(),d))return!1}catch{return!1}}if(r=t.child,t.subtreeFlags&16384&&r!==null)r.return=t,t=r;else{if(t===e)break;for(;t.sibling===null;){if(t.return===null||t.return===e)return!0;t=t.return}t.sibling.return=t.return,t=t.sibling}}return!0}function Is(e,t,r,o){t&=~$c,t&=~Na,e.suspendedLanes|=t,e.pingedLanes&=~t,o&&(e.warmLanes|=t),o=e.expirationTimes;for(var d=t;0<d;){var f=31-jt(d),y=1<<f;o[f]=-1,d&=~y}r!==0&&$d(e,r,t)}function ni(){return(Ee&6)===0?(Rn(0),!1):!0}function Yc(){if(je!==null){if(Ae===0)var e=je.return;else e=je,hs=ya=null,cc(e),lr=null,jn=0,e=je;for(;e!==null;)cm(e.alternate,e),e=e.return;je=null}}function mr(e,t){var r=e.timeoutHandle;r!==-1&&(e.timeoutHandle=-1,Sy(r)),r=e.cancelPendingCommit,r!==null&&(e.cancelPendingCommit=null,r()),Yc(),Ue=e,je=r=cs(e.current,null),Ne=t,Ae=0,kt=null,Vs=!1,ur=Yr(e,t),zc=!1,dr=Pt=$c=Na=Qs=He=0,xt=An=null,Bc=!1,(t&8)!==0&&(t|=t&32);var o=e.entangledLanes;if(o!==0)for(e=e.entanglements,o&=t;0<o;){var d=31-jt(o),f=1<<d;t|=e[d],o&=~f}return vs=t,Cl(),r}function Rm(e,t){be=null,R.H=Yl,t===hn||t===Pl?(t=Fh(),Ae=3):t===Vh?(t=Fh(),Ae=4):Ae=t===Kf?8:t!==null&&typeof t=="object"&&typeof t.then=="function"?6:1,kt=t,je===null&&(He=1,Zl(e,Rt(t,e.current)))}function Om(){var e=R.H;return R.H=Yl,e===null?Yl:e}function Dm(){var e=R.A;return R.A=ny,e}function Fc(){He=4,Vs||(Ne&4194048)!==Ne&&Ut.current!==null||(ur=!0),(Qs&134217727)===0&&(Na&134217727)===0||Ue===null||Is(Ue,Ne,Pt,!1)}function Ic(e,t,r){var o=Ee;Ee|=2;var d=Om(),f=Dm();(Ue!==e||Ne!==t)&&(ri=null,mr(e,t)),t=!1;var y=He;e:do try{if(Ae!==0&&je!==null){var v=je,k=kt;switch(Ae){case 8:Yc(),y=6;break e;case 3:case 2:case 9:case 6:Ut.current===null&&(t=!0);var M=Ae;if(Ae=0,kt=null,gr(e,v,k,M),r&&ur){y=0;break e}break;default:M=Ae,Ae=0,kt=null,gr(e,v,k,M)}}oy(),y=He;break}catch(G){Rm(e,G)}while(!0);return t&&e.shellSuspendCounter++,hs=ya=null,Ee=o,R.H=d,R.A=f,je===null&&(Ue=null,Ne=0,Cl()),y}function oy(){for(;je!==null;)Mm(je)}function cy(e,t){var r=Ee;Ee|=2;var o=Om(),d=Dm();Ue!==e||Ne!==t?(ri=null,ai=Xt()+500,mr(e,t)):ur=Yr(e,t);e:do try{if(Ae!==0&&je!==null){t=je;var f=kt;t:switch(Ae){case 1:Ae=0,kt=null,gr(e,t,f,1);break;case 2:case 9:if(Qh(f)){Ae=0,kt=null,Um(t);break}t=function(){Ae!==2&&Ae!==9||Ue!==e||(Ae=7),ts(e)},f.then(t,t);break e;case 3:Ae=7;break e;case 4:Ae=5;break e;case 7:Qh(f)?(Ae=0,kt=null,Um(t)):(Ae=0,kt=null,gr(e,t,f,7));break;case 5:var y=null;switch(je.tag){case 26:y=je.memoizedState;case 5:case 27:var v=je;if(!y||x0(y)){Ae=0,kt=null;var k=v.sibling;if(k!==null)je=k;else{var M=v.return;M!==null?(je=M,li(M)):je=null}break t}}Ae=0,kt=null,gr(e,t,f,5);break;case 6:Ae=0,kt=null,gr(e,t,f,6);break;case 8:Yc(),He=6;break e;default:throw Error(i(462))}}uy();break}catch(G){Rm(e,G)}while(!0);return hs=ya=null,R.H=o,R.A=d,Ee=r,je!==null?0:(Ue=null,Ne=0,Cl(),He)}function uy(){for(;je!==null&&!Ox();)Mm(je)}function Mm(e){var t=im(e.alternate,e,vs);e.memoizedProps=e.pendingProps,t===null?li(e):je=t}function Um(e){var t=e,r=t.alternate;switch(t.tag){case 15:case 0:t=tm(r,t,t.pendingProps,t.type,void 0,Ne);break;case 11:t=tm(r,t,t.pendingProps,t.type.render,t.ref,Ne);break;case 5:cc(t);default:cm(r,t),t=je=Uh(t,vs),t=im(r,t,vs)}e.memoizedProps=e.pendingProps,t===null?li(e):je=t}function gr(e,t,r,o){hs=ya=null,cc(t),lr=null,jn=0;var d=t.return;try{if(Wp(e,d,t,r,Ne)){He=1,Zl(e,Rt(r,e.current)),je=null;return}}catch(f){if(d!==null)throw je=d,f;He=1,Zl(e,Rt(r,e.current)),je=null;return}t.flags&32768?(Ce||o===1?e=!0:ur||(Ne&536870912)!==0?e=!1:(Vs=e=!0,(o===2||o===9||o===3||o===6)&&(o=Ut.current,o!==null&&o.tag===13&&(o.flags|=16384))),Pm(t,e)):li(t)}function li(e){var t=e;do{if((t.flags&32768)!==0){Pm(t,Vs);return}e=t.return;var r=ty(t.alternate,t,vs);if(r!==null){je=r;return}if(t=t.sibling,t!==null){je=t;return}je=t=e}while(t!==null);He===0&&(He=5)}function Pm(e,t){do{var r=sy(e.alternate,e);if(r!==null){r.flags&=32767,je=r;return}if(r=e.return,r!==null&&(r.flags|=32768,r.subtreeFlags=0,r.deletions=null),!t&&(e=e.sibling,e!==null)){je=e;return}je=e=r}while(e!==null);He=6,je=null}function Lm(e,t,r,o,d,f,y,v,k){e.cancelPendingCommit=null;do ii();while(rt!==0);if((Ee&6)!==0)throw Error(i(327));if(t!==null){if(t===e.current)throw Error(i(177));if(f=t.lanes|t.childLanes,f|=qo,Hx(e,r,f,y,v,k),e===Ue&&(je=Ue=null,Ne=0),hr=t,Fs=e,fr=r,Gc=f,Vc=d,Cm=o,(t.subtreeFlags&10256)!==0||(t.flags&10256)!==0?(e.callbackNode=null,e.callbackPriority=0,my(hl,function(){return Hm(),null})):(e.callbackNode=null,e.callbackPriority=0),o=(t.flags&13878)!==0,(t.subtreeFlags&13878)!==0||o){o=R.T,R.T=null,d=W.p,W.p=2,y=Ee,Ee|=4;try{ay(e,t,r)}finally{Ee=y,W.p=d,R.T=o}}rt=1,qm(),zm(),$m()}}function qm(){if(rt===1){rt=0;var e=Fs,t=hr,r=(t.flags&13878)!==0;if((t.subtreeFlags&13878)!==0||r){r=R.T,R.T=null;var o=W.p;W.p=2;var d=Ee;Ee|=4;try{vm(t,e);var f=lu,y=Sh(e.containerInfo),v=f.focusedElem,k=f.selectionRange;if(y!==v&&v&&v.ownerDocument&&Nh(v.ownerDocument.documentElement,v)){if(k!==null&&Do(v)){var M=k.start,G=k.end;if(G===void 0&&(G=M),"selectionStart"in v)v.selectionStart=M,v.selectionEnd=Math.min(G,v.value.length);else{var Y=v.ownerDocument||document,P=Y&&Y.defaultView||window;if(P.getSelection){var $=P.getSelection(),he=v.textContent.length,ce=Math.min(k.start,he),Oe=k.end===void 0?ce:Math.min(k.end,he);!$.extend&&ce>Oe&&(y=Oe,Oe=ce,ce=y);var T=_h(v,ce),A=_h(v,Oe);if(T&&A&&($.rangeCount!==1||$.anchorNode!==T.node||$.anchorOffset!==T.offset||$.focusNode!==A.node||$.focusOffset!==A.offset)){var O=Y.createRange();O.setStart(T.node,T.offset),$.removeAllRanges(),ce>Oe?($.addRange(O),$.extend(A.node,A.offset)):(O.setEnd(A.node,A.offset),$.addRange(O))}}}}for(Y=[],$=v;$=$.parentNode;)$.nodeType===1&&Y.push({element:$,left:$.scrollLeft,top:$.scrollTop});for(typeof v.focus=="function"&&v.focus(),v=0;v<Y.length;v++){var V=Y[v];V.element.scrollLeft=V.left,V.element.scrollTop=V.top}}bi=!!nu,lu=nu=null}finally{Ee=d,W.p=o,R.T=r}}e.current=t,rt=2}}function zm(){if(rt===2){rt=0;var e=Fs,t=hr,r=(t.flags&8772)!==0;if((t.subtreeFlags&8772)!==0||r){r=R.T,R.T=null;var o=W.p;W.p=2;var d=Ee;Ee|=4;try{xm(e,t.alternate,t)}finally{Ee=d,W.p=o,R.T=r}}rt=3}}function $m(){if(rt===4||rt===3){rt=0,Dx();var e=Fs,t=hr,r=fr,o=Cm;(t.subtreeFlags&10256)!==0||(t.flags&10256)!==0?rt=5:(rt=0,hr=Fs=null,Bm(e,e.pendingLanes));var d=e.pendingLanes;if(d===0&&(Ys=null),ho(r),t=t.stateNode,vt&&typeof vt.onCommitFiberRoot=="function")try{vt.onCommitFiberRoot(Qr,t,void 0,(t.current.flags&128)===128)}catch{}if(o!==null){t=R.T,d=W.p,W.p=2,R.T=null;try{for(var f=e.onRecoverableError,y=0;y<o.length;y++){var v=o[y];f(v.value,{componentStack:v.stack})}}finally{R.T=t,W.p=d}}(fr&3)!==0&&ii(),ts(e),d=e.pendingLanes,(r&4194090)!==0&&(d&42)!==0?e===Qc?Tn++:(Tn=0,Qc=e):Tn=0,Rn(0)}}function Bm(e,t){(e.pooledCacheLanes&=t)===0&&(t=e.pooledCache,t!=null&&(e.pooledCache=null,un(t)))}function ii(e){return qm(),zm(),$m(),Hm()}function Hm(){if(rt!==5)return!1;var e=Fs,t=Gc;Gc=0;var r=ho(fr),o=R.T,d=W.p;try{W.p=32>r?32:r,R.T=null,r=Vc,Vc=null;var f=Fs,y=fr;if(rt=0,hr=Fs=null,fr=0,(Ee&6)!==0)throw Error(i(331));var v=Ee;if(Ee|=4,Sm(f.current),wm(f,f.current,y,r),Ee=v,Rn(0,!1),vt&&typeof vt.onPostCommitFiberRoot=="function")try{vt.onPostCommitFiberRoot(Qr,f)}catch{}return!0}finally{W.p=d,R.T=o,Bm(e,t)}}function Gm(e,t,r){t=Rt(r,t),t=_c(e.stateNode,t,2),e=Ls(e,t,2),e!==null&&(Fr(e,2),ts(e))}function De(e,t,r){if(e.tag===3)Gm(e,e,r);else for(;t!==null;){if(t.tag===3){Gm(t,e,r);break}else if(t.tag===1){var o=t.stateNode;if(typeof t.type.getDerivedStateFromError=="function"||typeof o.componentDidCatch=="function"&&(Ys===null||!Ys.has(o))){e=Rt(r,e),r=Ff(2),o=Ls(t,r,2),o!==null&&(If(r,o,t,e),Fr(o,2),ts(o));break}}t=t.return}}function Kc(e,t,r){var o=e.pingCache;if(o===null){o=e.pingCache=new ly;var d=new Set;o.set(t,d)}else d=o.get(t),d===void 0&&(d=new Set,o.set(t,d));d.has(r)||(zc=!0,d.add(r),e=dy.bind(null,e,t,r),t.then(e,e))}function dy(e,t,r){var o=e.pingCache;o!==null&&o.delete(t),e.pingedLanes|=e.suspendedLanes&r,e.warmLanes&=~r,Ue===e&&(Ne&r)===r&&(He===4||He===3&&(Ne&62914560)===Ne&&300>Xt()-Hc?(Ee&2)===0&&mr(e,0):$c|=r,dr===Ne&&(dr=0)),ts(e)}function Vm(e,t){t===0&&(t=zd()),e=Xa(e,t),e!==null&&(Fr(e,t),ts(e))}function hy(e){var t=e.memoizedState,r=0;t!==null&&(r=t.retryLane),Vm(e,r)}function fy(e,t){var r=0;switch(e.tag){case 13:var o=e.stateNode,d=e.memoizedState;d!==null&&(r=d.retryLane);break;case 19:o=e.stateNode;break;case 22:o=e.stateNode._retryCache;break;default:throw Error(i(314))}o!==null&&o.delete(t),Vm(e,r)}function my(e,t){return io(e,t)}var oi=null,xr=null,Xc=!1,ci=!1,Zc=!1,Sa=0;function ts(e){e!==xr&&e.next===null&&(xr===null?oi=xr=e:xr=xr.next=e),ci=!0,Xc||(Xc=!0,xy())}function Rn(e,t){if(!Zc&&ci){Zc=!0;do for(var r=!1,o=oi;o!==null;){if(e!==0){var d=o.pendingLanes;if(d===0)var f=0;else{var y=o.suspendedLanes,v=o.pingedLanes;f=(1<<31-jt(42|e)+1)-1,f&=d&~(y&~v),f=f&201326741?f&201326741|1:f?f|2:0}f!==0&&(r=!0,Im(o,f))}else f=Ne,f=gl(o,o===Ue?f:0,o.cancelPendingCommit!==null||o.timeoutHandle!==-1),(f&3)===0||Yr(o,f)||(r=!0,Im(o,f));o=o.next}while(r);Zc=!1}}function gy(){Qm()}function Qm(){ci=Xc=!1;var e=0;Sa!==0&&(Ny()&&(e=Sa),Sa=0);for(var t=Xt(),r=null,o=oi;o!==null;){var d=o.next,f=Ym(o,t);f===0?(o.next=null,r===null?oi=d:r.next=d,d===null&&(xr=r)):(r=o,(e!==0||(f&3)!==0)&&(ci=!0)),o=d}Rn(e)}function Ym(e,t){for(var r=e.suspendedLanes,o=e.pingedLanes,d=e.expirationTimes,f=e.pendingLanes&-62914561;0<f;){var y=31-jt(f),v=1<<y,k=d[y];k===-1?((v&r)===0||(v&o)!==0)&&(d[y]=Bx(v,t)):k<=t&&(e.expiredLanes|=v),f&=~v}if(t=Ue,r=Ne,r=gl(e,e===t?r:0,e.cancelPendingCommit!==null||e.timeoutHandle!==-1),o=e.callbackNode,r===0||e===t&&(Ae===2||Ae===9)||e.cancelPendingCommit!==null)return o!==null&&o!==null&&oo(o),e.callbackNode=null,e.callbackPriority=0;if((r&3)===0||Yr(e,r)){if(t=r&-r,t===e.callbackPriority)return t;switch(o!==null&&oo(o),ho(r)){case 2:case 8:r=Pd;break;case 32:r=hl;break;case 268435456:r=Ld;break;default:r=hl}return o=Fm.bind(null,e),r=io(r,o),e.callbackPriority=t,e.callbackNode=r,t}return o!==null&&o!==null&&oo(o),e.callbackPriority=2,e.callbackNode=null,2}function Fm(e,t){if(rt!==0&&rt!==5)return e.callbackNode=null,e.callbackPriority=0,null;var r=e.callbackNode;if(ii()&&e.callbackNode!==r)return null;var o=Ne;return o=gl(e,e===Ue?o:0,e.cancelPendingCommit!==null||e.timeoutHandle!==-1),o===0?null:(Am(e,o,t),Ym(e,Xt()),e.callbackNode!=null&&e.callbackNode===r?Fm.bind(null,e):null)}function Im(e,t){if(ii())return null;Am(e,t,!0)}function xy(){ky(function(){(Ee&6)!==0?io(Ud,gy):Qm()})}function Jc(){return Sa===0&&(Sa=qd()),Sa}function Km(e){return e==null||typeof e=="symbol"||typeof e=="boolean"?null:typeof e=="function"?e:vl(""+e)}function Xm(e,t){var r=t.ownerDocument.createElement("input");return r.name=t.name,r.value=t.value,e.id&&r.setAttribute("form",e.id),t.parentNode.insertBefore(r,t),e=new FormData(e),r.parentNode.removeChild(r),e}function py(e,t,r,o,d){if(t==="submit"&&r&&r.stateNode===d){var f=Km((d[ht]||null).action),y=o.submitter;y&&(t=(t=y[ht]||null)?Km(t.formAction):y.getAttribute("formAction"),t!==null&&(f=t,y=null));var v=new Nl("action","action",null,o,d);e.push({event:v,listeners:[{instance:null,listener:function(){if(o.defaultPrevented){if(Sa!==0){var k=y?Xm(d,y):new FormData(d);yc(r,{pending:!0,data:k,method:d.method,action:f},null,k)}}else typeof f=="function"&&(v.preventDefault(),k=y?Xm(d,y):new FormData(d),yc(r,{pending:!0,data:k,method:d.method,action:f},f,k))},currentTarget:d}]})}}for(var Wc=0;Wc<Lo.length;Wc++){var eu=Lo[Wc],yy=eu.toLowerCase(),by=eu[0].toUpperCase()+eu.slice(1);qt(yy,"on"+by)}qt(Eh,"onAnimationEnd"),qt(Ah,"onAnimationIteration"),qt(Th,"onAnimationStart"),qt("dblclick","onDoubleClick"),qt("focusin","onFocus"),qt("focusout","onBlur"),qt(Pp,"onTransitionRun"),qt(Lp,"onTransitionStart"),qt(qp,"onTransitionCancel"),qt(Rh,"onTransitionEnd"),$a("onMouseEnter",["mouseout","mouseover"]),$a("onMouseLeave",["mouseout","mouseover"]),$a("onPointerEnter",["pointerout","pointerover"]),$a("onPointerLeave",["pointerout","pointerover"]),ca("onChange","change click focusin focusout input keydown keyup selectionchange".split(" ")),ca("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" ")),ca("onBeforeInput",["compositionend","keypress","textInput","paste"]),ca("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" ")),ca("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" ")),ca("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var On="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),vy=new Set("beforetoggle cancel close invalid load scroll scrollend toggle".split(" ").concat(On));function Zm(e,t){t=(t&4)!==0;for(var r=0;r<e.length;r++){var o=e[r],d=o.event;o=o.listeners;e:{var f=void 0;if(t)for(var y=o.length-1;0<=y;y--){var v=o[y],k=v.instance,M=v.currentTarget;if(v=v.listener,k!==f&&d.isPropagationStopped())break e;f=v,d.currentTarget=M;try{f(d)}catch(G){Xl(G)}d.currentTarget=null,f=k}else for(y=0;y<o.length;y++){if(v=o[y],k=v.instance,M=v.currentTarget,v=v.listener,k!==f&&d.isPropagationStopped())break e;f=v,d.currentTarget=M;try{f(d)}catch(G){Xl(G)}d.currentTarget=null,f=k}}}}function we(e,t){var r=t[fo];r===void 0&&(r=t[fo]=new Set);var o=e+"__bubble";r.has(o)||(Jm(t,e,2,!1),r.add(o))}function tu(e,t,r){var o=0;t&&(o|=4),Jm(r,e,o,t)}var ui="_reactListening"+Math.random().toString(36).slice(2);function su(e){if(!e[ui]){e[ui]=!0,Vd.forEach(function(r){r!=="selectionchange"&&(vy.has(r)||tu(r,!1,e),tu(r,!0,e))});var t=e.nodeType===9?e:e.ownerDocument;t===null||t[ui]||(t[ui]=!0,tu("selectionchange",!1,t))}}function Jm(e,t,r,o){switch(w0(t)){case 2:var d=Fy;break;case 8:d=Iy;break;default:d=xu}r=d.bind(null,t,r,e),d=void 0,!No||t!=="touchstart"&&t!=="touchmove"&&t!=="wheel"||(d=!0),o?d!==void 0?e.addEventListener(t,r,{capture:!0,passive:d}):e.addEventListener(t,r,!0):d!==void 0?e.addEventListener(t,r,{passive:d}):e.addEventListener(t,r,!1)}function au(e,t,r,o,d){var f=o;if((t&1)===0&&(t&2)===0&&o!==null)e:for(;;){if(o===null)return;var y=o.tag;if(y===3||y===4){var v=o.stateNode.containerInfo;if(v===d)break;if(y===4)for(y=o.return;y!==null;){var k=y.tag;if((k===3||k===4)&&y.stateNode.containerInfo===d)return;y=y.return}for(;v!==null;){if(y=La(v),y===null)return;if(k=y.tag,k===5||k===6||k===26||k===27){o=f=y;continue e}v=v.parentNode}}o=o.return}rh(function(){var M=f,G=wo(r),Y=[];e:{var P=Oh.get(e);if(P!==void 0){var $=Nl,he=e;switch(e){case"keypress":if(wl(r)===0)break e;case"keydown":case"keyup":$=mp;break;case"focusin":he="focus",$=Eo;break;case"focusout":he="blur",$=Eo;break;case"beforeblur":case"afterblur":$=Eo;break;case"click":if(r.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":$=ih;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":$=sp;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":$=pp;break;case Eh:case Ah:case Th:$=np;break;case Rh:$=bp;break;case"scroll":case"scrollend":$=ep;break;case"wheel":$=jp;break;case"copy":case"cut":case"paste":$=ip;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":$=ch;break;case"toggle":case"beforetoggle":$=_p}var ce=(t&4)!==0,Oe=!ce&&(e==="scroll"||e==="scrollend"),T=ce?P!==null?P+"Capture":null:P;ce=[];for(var A=M,O;A!==null;){var V=A;if(O=V.stateNode,V=V.tag,V!==5&&V!==26&&V!==27||O===null||T===null||(V=Xr(A,T),V!=null&&ce.push(Dn(A,V,O))),Oe)break;A=A.return}0<ce.length&&(P=new $(P,he,null,r,G),Y.push({event:P,listeners:ce}))}}if((t&7)===0){e:{if(P=e==="mouseover"||e==="pointerover",$=e==="mouseout"||e==="pointerout",P&&r!==jo&&(he=r.relatedTarget||r.fromElement)&&(La(he)||he[Pa]))break e;if(($||P)&&(P=G.window===G?G:(P=G.ownerDocument)?P.defaultView||P.parentWindow:window,$?(he=r.relatedTarget||r.toElement,$=M,he=he?La(he):null,he!==null&&(Oe=u(he),ce=he.tag,he!==Oe||ce!==5&&ce!==27&&ce!==6)&&(he=null)):($=null,he=M),$!==he)){if(ce=ih,V="onMouseLeave",T="onMouseEnter",A="mouse",(e==="pointerout"||e==="pointerover")&&(ce=ch,V="onPointerLeave",T="onPointerEnter",A="pointer"),Oe=$==null?P:Kr($),O=he==null?P:Kr(he),P=new ce(V,A+"leave",$,r,G),P.target=Oe,P.relatedTarget=O,V=null,La(G)===M&&(ce=new ce(T,A+"enter",he,r,G),ce.target=O,ce.relatedTarget=Oe,V=ce),Oe=V,$&&he)t:{for(ce=$,T=he,A=0,O=ce;O;O=pr(O))A++;for(O=0,V=T;V;V=pr(V))O++;for(;0<A-O;)ce=pr(ce),A--;for(;0<O-A;)T=pr(T),O--;for(;A--;){if(ce===T||T!==null&&ce===T.alternate)break t;ce=pr(ce),T=pr(T)}ce=null}else ce=null;$!==null&&Wm(Y,P,$,ce,!1),he!==null&&Oe!==null&&Wm(Y,Oe,he,ce,!0)}}e:{if(P=M?Kr(M):window,$=P.nodeName&&P.nodeName.toLowerCase(),$==="select"||$==="input"&&P.type==="file")var ae=ph;else if(gh(P))if(yh)ae=Dp;else{ae=Rp;var ve=Tp}else $=P.nodeName,!$||$.toLowerCase()!=="input"||P.type!=="checkbox"&&P.type!=="radio"?M&&vo(M.elementType)&&(ae=ph):ae=Op;if(ae&&(ae=ae(e,M))){xh(Y,ae,r,G);break e}ve&&ve(e,P,M),e==="focusout"&&M&&P.type==="number"&&M.memoizedProps.value!=null&&bo(P,"number",P.value)}switch(ve=M?Kr(M):window,e){case"focusin":(gh(ve)||ve.contentEditable==="true")&&(Fa=ve,Mo=M,rn=null);break;case"focusout":rn=Mo=Fa=null;break;case"mousedown":Uo=!0;break;case"contextmenu":case"mouseup":case"dragend":Uo=!1,kh(Y,r,G);break;case"selectionchange":if(Up)break;case"keydown":case"keyup":kh(Y,r,G)}var le;if(To)e:{switch(e){case"compositionstart":var ue="onCompositionStart";break e;case"compositionend":ue="onCompositionEnd";break e;case"compositionupdate":ue="onCompositionUpdate";break e}ue=void 0}else Ya?fh(e,r)&&(ue="onCompositionEnd"):e==="keydown"&&r.keyCode===229&&(ue="onCompositionStart");ue&&(uh&&r.locale!=="ko"&&(Ya||ue!=="onCompositionStart"?ue==="onCompositionEnd"&&Ya&&(le=nh()):(Ds=G,So="value"in Ds?Ds.value:Ds.textContent,Ya=!0)),ve=di(M,ue),0<ve.length&&(ue=new oh(ue,e,null,r,G),Y.push({event:ue,listeners:ve}),le?ue.data=le:(le=mh(r),le!==null&&(ue.data=le)))),(le=Sp?kp(e,r):Cp(e,r))&&(ue=di(M,"onBeforeInput"),0<ue.length&&(ve=new oh("onBeforeInput","beforeinput",null,r,G),Y.push({event:ve,listeners:ue}),ve.data=le)),py(Y,e,M,r,G)}Zm(Y,t)})}function Dn(e,t,r){return{instance:e,listener:t,currentTarget:r}}function di(e,t){for(var r=t+"Capture",o=[];e!==null;){var d=e,f=d.stateNode;if(d=d.tag,d!==5&&d!==26&&d!==27||f===null||(d=Xr(e,r),d!=null&&o.unshift(Dn(e,d,f)),d=Xr(e,t),d!=null&&o.push(Dn(e,d,f))),e.tag===3)return o;e=e.return}return[]}function pr(e){if(e===null)return null;do e=e.return;while(e&&e.tag!==5&&e.tag!==27);return e||null}function Wm(e,t,r,o,d){for(var f=t._reactName,y=[];r!==null&&r!==o;){var v=r,k=v.alternate,M=v.stateNode;if(v=v.tag,k!==null&&k===o)break;v!==5&&v!==26&&v!==27||M===null||(k=M,d?(M=Xr(r,f),M!=null&&y.unshift(Dn(r,M,k))):d||(M=Xr(r,f),M!=null&&y.push(Dn(r,M,k)))),r=r.return}y.length!==0&&e.push({event:t,listeners:y})}var jy=/\r\n?/g,wy=/\u0000|\uFFFD/g;function e0(e){return(typeof e=="string"?e:""+e).replace(jy,`
`).replace(wy,"")}function t0(e,t){return t=e0(t),e0(e)===t}function hi(){}function Re(e,t,r,o,d,f){switch(r){case"children":typeof o=="string"?t==="body"||t==="textarea"&&o===""||Ga(e,o):(typeof o=="number"||typeof o=="bigint")&&t!=="body"&&Ga(e,""+o);break;case"className":pl(e,"class",o);break;case"tabIndex":pl(e,"tabindex",o);break;case"dir":case"role":case"viewBox":case"width":case"height":pl(e,r,o);break;case"style":sh(e,o,f);break;case"data":if(t!=="object"){pl(e,"data",o);break}case"src":case"href":if(o===""&&(t!=="a"||r!=="href")){e.removeAttribute(r);break}if(o==null||typeof o=="function"||typeof o=="symbol"||typeof o=="boolean"){e.removeAttribute(r);break}o=vl(""+o),e.setAttribute(r,o);break;case"action":case"formAction":if(typeof o=="function"){e.setAttribute(r,"javascript:throw new Error('A React form was unexpectedly submitted. If you called form.submit() manually, consider using form.requestSubmit() instead. If you\\'re trying to use event.stopPropagation() in a submit event handler, consider also calling event.preventDefault().')");break}else typeof f=="function"&&(r==="formAction"?(t!=="input"&&Re(e,t,"name",d.name,d,null),Re(e,t,"formEncType",d.formEncType,d,null),Re(e,t,"formMethod",d.formMethod,d,null),Re(e,t,"formTarget",d.formTarget,d,null)):(Re(e,t,"encType",d.encType,d,null),Re(e,t,"method",d.method,d,null),Re(e,t,"target",d.target,d,null)));if(o==null||typeof o=="symbol"||typeof o=="boolean"){e.removeAttribute(r);break}o=vl(""+o),e.setAttribute(r,o);break;case"onClick":o!=null&&(e.onclick=hi);break;case"onScroll":o!=null&&we("scroll",e);break;case"onScrollEnd":o!=null&&we("scrollend",e);break;case"dangerouslySetInnerHTML":if(o!=null){if(typeof o!="object"||!("__html"in o))throw Error(i(61));if(r=o.__html,r!=null){if(d.children!=null)throw Error(i(60));e.innerHTML=r}}break;case"multiple":e.multiple=o&&typeof o!="function"&&typeof o!="symbol";break;case"muted":e.muted=o&&typeof o!="function"&&typeof o!="symbol";break;case"suppressContentEditableWarning":case"suppressHydrationWarning":case"defaultValue":case"defaultChecked":case"innerHTML":case"ref":break;case"autoFocus":break;case"xlinkHref":if(o==null||typeof o=="function"||typeof o=="boolean"||typeof o=="symbol"){e.removeAttribute("xlink:href");break}r=vl(""+o),e.setAttributeNS("http://www.w3.org/1999/xlink","xlink:href",r);break;case"contentEditable":case"spellCheck":case"draggable":case"value":case"autoReverse":case"externalResourcesRequired":case"focusable":case"preserveAlpha":o!=null&&typeof o!="function"&&typeof o!="symbol"?e.setAttribute(r,""+o):e.removeAttribute(r);break;case"inert":case"allowFullScreen":case"async":case"autoPlay":case"controls":case"default":case"defer":case"disabled":case"disablePictureInPicture":case"disableRemotePlayback":case"formNoValidate":case"hidden":case"loop":case"noModule":case"noValidate":case"open":case"playsInline":case"readOnly":case"required":case"reversed":case"scoped":case"seamless":case"itemScope":o&&typeof o!="function"&&typeof o!="symbol"?e.setAttribute(r,""):e.removeAttribute(r);break;case"capture":case"download":o===!0?e.setAttribute(r,""):o!==!1&&o!=null&&typeof o!="function"&&typeof o!="symbol"?e.setAttribute(r,o):e.removeAttribute(r);break;case"cols":case"rows":case"size":case"span":o!=null&&typeof o!="function"&&typeof o!="symbol"&&!isNaN(o)&&1<=o?e.setAttribute(r,o):e.removeAttribute(r);break;case"rowSpan":case"start":o==null||typeof o=="function"||typeof o=="symbol"||isNaN(o)?e.removeAttribute(r):e.setAttribute(r,o);break;case"popover":we("beforetoggle",e),we("toggle",e),xl(e,"popover",o);break;case"xlinkActuate":is(e,"http://www.w3.org/1999/xlink","xlink:actuate",o);break;case"xlinkArcrole":is(e,"http://www.w3.org/1999/xlink","xlink:arcrole",o);break;case"xlinkRole":is(e,"http://www.w3.org/1999/xlink","xlink:role",o);break;case"xlinkShow":is(e,"http://www.w3.org/1999/xlink","xlink:show",o);break;case"xlinkTitle":is(e,"http://www.w3.org/1999/xlink","xlink:title",o);break;case"xlinkType":is(e,"http://www.w3.org/1999/xlink","xlink:type",o);break;case"xmlBase":is(e,"http://www.w3.org/XML/1998/namespace","xml:base",o);break;case"xmlLang":is(e,"http://www.w3.org/XML/1998/namespace","xml:lang",o);break;case"xmlSpace":is(e,"http://www.w3.org/XML/1998/namespace","xml:space",o);break;case"is":xl(e,"is",o);break;case"innerText":case"textContent":break;default:(!(2<r.length)||r[0]!=="o"&&r[0]!=="O"||r[1]!=="n"&&r[1]!=="N")&&(r=Jx.get(r)||r,xl(e,r,o))}}function ru(e,t,r,o,d,f){switch(r){case"style":sh(e,o,f);break;case"dangerouslySetInnerHTML":if(o!=null){if(typeof o!="object"||!("__html"in o))throw Error(i(61));if(r=o.__html,r!=null){if(d.children!=null)throw Error(i(60));e.innerHTML=r}}break;case"children":typeof o=="string"?Ga(e,o):(typeof o=="number"||typeof o=="bigint")&&Ga(e,""+o);break;case"onScroll":o!=null&&we("scroll",e);break;case"onScrollEnd":o!=null&&we("scrollend",e);break;case"onClick":o!=null&&(e.onclick=hi);break;case"suppressContentEditableWarning":case"suppressHydrationWarning":case"innerHTML":case"ref":break;case"innerText":case"textContent":break;default:if(!Qd.hasOwnProperty(r))e:{if(r[0]==="o"&&r[1]==="n"&&(d=r.endsWith("Capture"),t=r.slice(2,d?r.length-7:void 0),f=e[ht]||null,f=f!=null?f[r]:null,typeof f=="function"&&e.removeEventListener(t,f,d),typeof o=="function")){typeof f!="function"&&f!==null&&(r in e?e[r]=null:e.hasAttribute(r)&&e.removeAttribute(r)),e.addEventListener(t,o,d);break e}r in e?e[r]=o:o===!0?e.setAttribute(r,""):xl(e,r,o)}}}function nt(e,t,r){switch(t){case"div":case"span":case"svg":case"path":case"a":case"g":case"p":case"li":break;case"img":we("error",e),we("load",e);var o=!1,d=!1,f;for(f in r)if(r.hasOwnProperty(f)){var y=r[f];if(y!=null)switch(f){case"src":o=!0;break;case"srcSet":d=!0;break;case"children":case"dangerouslySetInnerHTML":throw Error(i(137,t));default:Re(e,t,f,y,r,null)}}d&&Re(e,t,"srcSet",r.srcSet,r,null),o&&Re(e,t,"src",r.src,r,null);return;case"input":we("invalid",e);var v=f=y=d=null,k=null,M=null;for(o in r)if(r.hasOwnProperty(o)){var G=r[o];if(G!=null)switch(o){case"name":d=G;break;case"type":y=G;break;case"checked":k=G;break;case"defaultChecked":M=G;break;case"value":f=G;break;case"defaultValue":v=G;break;case"children":case"dangerouslySetInnerHTML":if(G!=null)throw Error(i(137,t));break;default:Re(e,t,o,G,r,null)}}Jd(e,f,v,k,M,y,d,!1),yl(e);return;case"select":we("invalid",e),o=y=f=null;for(d in r)if(r.hasOwnProperty(d)&&(v=r[d],v!=null))switch(d){case"value":f=v;break;case"defaultValue":y=v;break;case"multiple":o=v;default:Re(e,t,d,v,r,null)}t=f,r=y,e.multiple=!!o,t!=null?Ha(e,!!o,t,!1):r!=null&&Ha(e,!!o,r,!0);return;case"textarea":we("invalid",e),f=d=o=null;for(y in r)if(r.hasOwnProperty(y)&&(v=r[y],v!=null))switch(y){case"value":o=v;break;case"defaultValue":d=v;break;case"children":f=v;break;case"dangerouslySetInnerHTML":if(v!=null)throw Error(i(91));break;default:Re(e,t,y,v,r,null)}eh(e,o,d,f),yl(e);return;case"option":for(k in r)if(r.hasOwnProperty(k)&&(o=r[k],o!=null))switch(k){case"selected":e.selected=o&&typeof o!="function"&&typeof o!="symbol";break;default:Re(e,t,k,o,r,null)}return;case"dialog":we("beforetoggle",e),we("toggle",e),we("cancel",e),we("close",e);break;case"iframe":case"object":we("load",e);break;case"video":case"audio":for(o=0;o<On.length;o++)we(On[o],e);break;case"image":we("error",e),we("load",e);break;case"details":we("toggle",e);break;case"embed":case"source":case"link":we("error",e),we("load",e);case"area":case"base":case"br":case"col":case"hr":case"keygen":case"meta":case"param":case"track":case"wbr":case"menuitem":for(M in r)if(r.hasOwnProperty(M)&&(o=r[M],o!=null))switch(M){case"children":case"dangerouslySetInnerHTML":throw Error(i(137,t));default:Re(e,t,M,o,r,null)}return;default:if(vo(t)){for(G in r)r.hasOwnProperty(G)&&(o=r[G],o!==void 0&&ru(e,t,G,o,r,void 0));return}}for(v in r)r.hasOwnProperty(v)&&(o=r[v],o!=null&&Re(e,t,v,o,r,null))}function _y(e,t,r,o){switch(t){case"div":case"span":case"svg":case"path":case"a":case"g":case"p":case"li":break;case"input":var d=null,f=null,y=null,v=null,k=null,M=null,G=null;for($ in r){var Y=r[$];if(r.hasOwnProperty($)&&Y!=null)switch($){case"checked":break;case"value":break;case"defaultValue":k=Y;default:o.hasOwnProperty($)||Re(e,t,$,null,o,Y)}}for(var P in o){var $=o[P];if(Y=r[P],o.hasOwnProperty(P)&&($!=null||Y!=null))switch(P){case"type":f=$;break;case"name":d=$;break;case"checked":M=$;break;case"defaultChecked":G=$;break;case"value":y=$;break;case"defaultValue":v=$;break;case"children":case"dangerouslySetInnerHTML":if($!=null)throw Error(i(137,t));break;default:$!==Y&&Re(e,t,P,$,o,Y)}}yo(e,y,v,k,M,G,f,d);return;case"select":$=y=v=P=null;for(f in r)if(k=r[f],r.hasOwnProperty(f)&&k!=null)switch(f){case"value":break;case"multiple":$=k;default:o.hasOwnProperty(f)||Re(e,t,f,null,o,k)}for(d in o)if(f=o[d],k=r[d],o.hasOwnProperty(d)&&(f!=null||k!=null))switch(d){case"value":P=f;break;case"defaultValue":v=f;break;case"multiple":y=f;default:f!==k&&Re(e,t,d,f,o,k)}t=v,r=y,o=$,P!=null?Ha(e,!!r,P,!1):!!o!=!!r&&(t!=null?Ha(e,!!r,t,!0):Ha(e,!!r,r?[]:"",!1));return;case"textarea":$=P=null;for(v in r)if(d=r[v],r.hasOwnProperty(v)&&d!=null&&!o.hasOwnProperty(v))switch(v){case"value":break;case"children":break;default:Re(e,t,v,null,o,d)}for(y in o)if(d=o[y],f=r[y],o.hasOwnProperty(y)&&(d!=null||f!=null))switch(y){case"value":P=d;break;case"defaultValue":$=d;break;case"children":break;case"dangerouslySetInnerHTML":if(d!=null)throw Error(i(91));break;default:d!==f&&Re(e,t,y,d,o,f)}Wd(e,P,$);return;case"option":for(var he in r)if(P=r[he],r.hasOwnProperty(he)&&P!=null&&!o.hasOwnProperty(he))switch(he){case"selected":e.selected=!1;break;default:Re(e,t,he,null,o,P)}for(k in o)if(P=o[k],$=r[k],o.hasOwnProperty(k)&&P!==$&&(P!=null||$!=null))switch(k){case"selected":e.selected=P&&typeof P!="function"&&typeof P!="symbol";break;default:Re(e,t,k,P,o,$)}return;case"img":case"link":case"area":case"base":case"br":case"col":case"embed":case"hr":case"keygen":case"meta":case"param":case"source":case"track":case"wbr":case"menuitem":for(var ce in r)P=r[ce],r.hasOwnProperty(ce)&&P!=null&&!o.hasOwnProperty(ce)&&Re(e,t,ce,null,o,P);for(M in o)if(P=o[M],$=r[M],o.hasOwnProperty(M)&&P!==$&&(P!=null||$!=null))switch(M){case"children":case"dangerouslySetInnerHTML":if(P!=null)throw Error(i(137,t));break;default:Re(e,t,M,P,o,$)}return;default:if(vo(t)){for(var Oe in r)P=r[Oe],r.hasOwnProperty(Oe)&&P!==void 0&&!o.hasOwnProperty(Oe)&&ru(e,t,Oe,void 0,o,P);for(G in o)P=o[G],$=r[G],!o.hasOwnProperty(G)||P===$||P===void 0&&$===void 0||ru(e,t,G,P,o,$);return}}for(var T in r)P=r[T],r.hasOwnProperty(T)&&P!=null&&!o.hasOwnProperty(T)&&Re(e,t,T,null,o,P);for(Y in o)P=o[Y],$=r[Y],!o.hasOwnProperty(Y)||P===$||P==null&&$==null||Re(e,t,Y,P,o,$)}var nu=null,lu=null;function fi(e){return e.nodeType===9?e:e.ownerDocument}function s0(e){switch(e){case"http://www.w3.org/2000/svg":return 1;case"http://www.w3.org/1998/Math/MathML":return 2;default:return 0}}function a0(e,t){if(e===0)switch(t){case"svg":return 1;case"math":return 2;default:return 0}return e===1&&t==="foreignObject"?0:e}function iu(e,t){return e==="textarea"||e==="noscript"||typeof t.children=="string"||typeof t.children=="number"||typeof t.children=="bigint"||typeof t.dangerouslySetInnerHTML=="object"&&t.dangerouslySetInnerHTML!==null&&t.dangerouslySetInnerHTML.__html!=null}var ou=null;function Ny(){var e=window.event;return e&&e.type==="popstate"?e===ou?!1:(ou=e,!0):(ou=null,!1)}var r0=typeof setTimeout=="function"?setTimeout:void 0,Sy=typeof clearTimeout=="function"?clearTimeout:void 0,n0=typeof Promise=="function"?Promise:void 0,ky=typeof queueMicrotask=="function"?queueMicrotask:typeof n0<"u"?function(e){return n0.resolve(null).then(e).catch(Cy)}:r0;function Cy(e){setTimeout(function(){throw e})}function Ks(e){return e==="head"}function l0(e,t){var r=t,o=0,d=0;do{var f=r.nextSibling;if(e.removeChild(r),f&&f.nodeType===8)if(r=f.data,r==="/$"){if(0<o&&8>o){r=o;var y=e.ownerDocument;if(r&1&&Mn(y.documentElement),r&2&&Mn(y.body),r&4)for(r=y.head,Mn(r),y=r.firstChild;y;){var v=y.nextSibling,k=y.nodeName;y[Ir]||k==="SCRIPT"||k==="STYLE"||k==="LINK"&&y.rel.toLowerCase()==="stylesheet"||r.removeChild(y),y=v}}if(d===0){e.removeChild(f),Hn(t);return}d--}else r==="$"||r==="$?"||r==="$!"?d++:o=r.charCodeAt(0)-48;else o=0;r=f}while(r);Hn(t)}function cu(e){var t=e.firstChild;for(t&&t.nodeType===10&&(t=t.nextSibling);t;){var r=t;switch(t=t.nextSibling,r.nodeName){case"HTML":case"HEAD":case"BODY":cu(r),mo(r);continue;case"SCRIPT":case"STYLE":continue;case"LINK":if(r.rel.toLowerCase()==="stylesheet")continue}e.removeChild(r)}}function Ey(e,t,r,o){for(;e.nodeType===1;){var d=r;if(e.nodeName.toLowerCase()!==t.toLowerCase()){if(!o&&(e.nodeName!=="INPUT"||e.type!=="hidden"))break}else if(o){if(!e[Ir])switch(t){case"meta":if(!e.hasAttribute("itemprop"))break;return e;case"link":if(f=e.getAttribute("rel"),f==="stylesheet"&&e.hasAttribute("data-precedence"))break;if(f!==d.rel||e.getAttribute("href")!==(d.href==null||d.href===""?null:d.href)||e.getAttribute("crossorigin")!==(d.crossOrigin==null?null:d.crossOrigin)||e.getAttribute("title")!==(d.title==null?null:d.title))break;return e;case"style":if(e.hasAttribute("data-precedence"))break;return e;case"script":if(f=e.getAttribute("src"),(f!==(d.src==null?null:d.src)||e.getAttribute("type")!==(d.type==null?null:d.type)||e.getAttribute("crossorigin")!==(d.crossOrigin==null?null:d.crossOrigin))&&f&&e.hasAttribute("async")&&!e.hasAttribute("itemprop"))break;return e;default:return e}}else if(t==="input"&&e.type==="hidden"){var f=d.name==null?null:""+d.name;if(d.type==="hidden"&&e.getAttribute("name")===f)return e}else return e;if(e=$t(e.nextSibling),e===null)break}return null}function Ay(e,t,r){if(t==="")return null;for(;e.nodeType!==3;)if((e.nodeType!==1||e.nodeName!=="INPUT"||e.type!=="hidden")&&!r||(e=$t(e.nextSibling),e===null))return null;return e}function uu(e){return e.data==="$!"||e.data==="$?"&&e.ownerDocument.readyState==="complete"}function Ty(e,t){var r=e.ownerDocument;if(e.data!=="$?"||r.readyState==="complete")t();else{var o=function(){t(),r.removeEventListener("DOMContentLoaded",o)};r.addEventListener("DOMContentLoaded",o),e._reactRetry=o}}function $t(e){for(;e!=null;e=e.nextSibling){var t=e.nodeType;if(t===1||t===3)break;if(t===8){if(t=e.data,t==="$"||t==="$!"||t==="$?"||t==="F!"||t==="F")break;if(t==="/$")return null}}return e}var du=null;function i0(e){e=e.previousSibling;for(var t=0;e;){if(e.nodeType===8){var r=e.data;if(r==="$"||r==="$!"||r==="$?"){if(t===0)return e;t--}else r==="/$"&&t++}e=e.previousSibling}return null}function o0(e,t,r){switch(t=fi(r),e){case"html":if(e=t.documentElement,!e)throw Error(i(452));return e;case"head":if(e=t.head,!e)throw Error(i(453));return e;case"body":if(e=t.body,!e)throw Error(i(454));return e;default:throw Error(i(451))}}function Mn(e){for(var t=e.attributes;t.length;)e.removeAttributeNode(t[0]);mo(e)}var Lt=new Map,c0=new Set;function mi(e){return typeof e.getRootNode=="function"?e.getRootNode():e.nodeType===9?e:e.ownerDocument}var js=W.d;W.d={f:Ry,r:Oy,D:Dy,C:My,L:Uy,m:Py,X:qy,S:Ly,M:zy};function Ry(){var e=js.f(),t=ni();return e||t}function Oy(e){var t=qa(e);t!==null&&t.tag===5&&t.type==="form"?Af(t):js.r(e)}var yr=typeof document>"u"?null:document;function u0(e,t,r){var o=yr;if(o&&typeof t=="string"&&t){var d=Tt(t);d='link[rel="'+e+'"][href="'+d+'"]',typeof r=="string"&&(d+='[crossorigin="'+r+'"]'),c0.has(d)||(c0.add(d),e={rel:e,crossOrigin:r,href:t},o.querySelector(d)===null&&(t=o.createElement("link"),nt(t,"link",e),Ze(t),o.head.appendChild(t)))}}function Dy(e){js.D(e),u0("dns-prefetch",e,null)}function My(e,t){js.C(e,t),u0("preconnect",e,t)}function Uy(e,t,r){js.L(e,t,r);var o=yr;if(o&&e&&t){var d='link[rel="preload"][as="'+Tt(t)+'"]';t==="image"&&r&&r.imageSrcSet?(d+='[imagesrcset="'+Tt(r.imageSrcSet)+'"]',typeof r.imageSizes=="string"&&(d+='[imagesizes="'+Tt(r.imageSizes)+'"]')):d+='[href="'+Tt(e)+'"]';var f=d;switch(t){case"style":f=br(e);break;case"script":f=vr(e)}Lt.has(f)||(e=p({rel:"preload",href:t==="image"&&r&&r.imageSrcSet?void 0:e,as:t},r),Lt.set(f,e),o.querySelector(d)!==null||t==="style"&&o.querySelector(Un(f))||t==="script"&&o.querySelector(Pn(f))||(t=o.createElement("link"),nt(t,"link",e),Ze(t),o.head.appendChild(t)))}}function Py(e,t){js.m(e,t);var r=yr;if(r&&e){var o=t&&typeof t.as=="string"?t.as:"script",d='link[rel="modulepreload"][as="'+Tt(o)+'"][href="'+Tt(e)+'"]',f=d;switch(o){case"audioworklet":case"paintworklet":case"serviceworker":case"sharedworker":case"worker":case"script":f=vr(e)}if(!Lt.has(f)&&(e=p({rel:"modulepreload",href:e},t),Lt.set(f,e),r.querySelector(d)===null)){switch(o){case"audioworklet":case"paintworklet":case"serviceworker":case"sharedworker":case"worker":case"script":if(r.querySelector(Pn(f)))return}o=r.createElement("link"),nt(o,"link",e),Ze(o),r.head.appendChild(o)}}}function Ly(e,t,r){js.S(e,t,r);var o=yr;if(o&&e){var d=za(o).hoistableStyles,f=br(e);t=t||"default";var y=d.get(f);if(!y){var v={loading:0,preload:null};if(y=o.querySelector(Un(f)))v.loading=5;else{e=p({rel:"stylesheet",href:e,"data-precedence":t},r),(r=Lt.get(f))&&hu(e,r);var k=y=o.createElement("link");Ze(k),nt(k,"link",e),k._p=new Promise(function(M,G){k.onload=M,k.onerror=G}),k.addEventListener("load",function(){v.loading|=1}),k.addEventListener("error",function(){v.loading|=2}),v.loading|=4,gi(y,t,o)}y={type:"stylesheet",instance:y,count:1,state:v},d.set(f,y)}}}function qy(e,t){js.X(e,t);var r=yr;if(r&&e){var o=za(r).hoistableScripts,d=vr(e),f=o.get(d);f||(f=r.querySelector(Pn(d)),f||(e=p({src:e,async:!0},t),(t=Lt.get(d))&&fu(e,t),f=r.createElement("script"),Ze(f),nt(f,"link",e),r.head.appendChild(f)),f={type:"script",instance:f,count:1,state:null},o.set(d,f))}}function zy(e,t){js.M(e,t);var r=yr;if(r&&e){var o=za(r).hoistableScripts,d=vr(e),f=o.get(d);f||(f=r.querySelector(Pn(d)),f||(e=p({src:e,async:!0,type:"module"},t),(t=Lt.get(d))&&fu(e,t),f=r.createElement("script"),Ze(f),nt(f,"link",e),r.head.appendChild(f)),f={type:"script",instance:f,count:1,state:null},o.set(d,f))}}function d0(e,t,r,o){var d=(d=fe.current)?mi(d):null;if(!d)throw Error(i(446));switch(e){case"meta":case"title":return null;case"style":return typeof r.precedence=="string"&&typeof r.href=="string"?(t=br(r.href),r=za(d).hoistableStyles,o=r.get(t),o||(o={type:"style",instance:null,count:0,state:null},r.set(t,o)),o):{type:"void",instance:null,count:0,state:null};case"link":if(r.rel==="stylesheet"&&typeof r.href=="string"&&typeof r.precedence=="string"){e=br(r.href);var f=za(d).hoistableStyles,y=f.get(e);if(y||(d=d.ownerDocument||d,y={type:"stylesheet",instance:null,count:0,state:{loading:0,preload:null}},f.set(e,y),(f=d.querySelector(Un(e)))&&!f._p&&(y.instance=f,y.state.loading=5),Lt.has(e)||(r={rel:"preload",as:"style",href:r.href,crossOrigin:r.crossOrigin,integrity:r.integrity,media:r.media,hrefLang:r.hrefLang,referrerPolicy:r.referrerPolicy},Lt.set(e,r),f||$y(d,e,r,y.state))),t&&o===null)throw Error(i(528,""));return y}if(t&&o!==null)throw Error(i(529,""));return null;case"script":return t=r.async,r=r.src,typeof r=="string"&&t&&typeof t!="function"&&typeof t!="symbol"?(t=vr(r),r=za(d).hoistableScripts,o=r.get(t),o||(o={type:"script",instance:null,count:0,state:null},r.set(t,o)),o):{type:"void",instance:null,count:0,state:null};default:throw Error(i(444,e))}}function br(e){return'href="'+Tt(e)+'"'}function Un(e){return'link[rel="stylesheet"]['+e+"]"}function h0(e){return p({},e,{"data-precedence":e.precedence,precedence:null})}function $y(e,t,r,o){e.querySelector('link[rel="preload"][as="style"]['+t+"]")?o.loading=1:(t=e.createElement("link"),o.preload=t,t.addEventListener("load",function(){return o.loading|=1}),t.addEventListener("error",function(){return o.loading|=2}),nt(t,"link",r),Ze(t),e.head.appendChild(t))}function vr(e){return'[src="'+Tt(e)+'"]'}function Pn(e){return"script[async]"+e}function f0(e,t,r){if(t.count++,t.instance===null)switch(t.type){case"style":var o=e.querySelector('style[data-href~="'+Tt(r.href)+'"]');if(o)return t.instance=o,Ze(o),o;var d=p({},r,{"data-href":r.href,"data-precedence":r.precedence,href:null,precedence:null});return o=(e.ownerDocument||e).createElement("style"),Ze(o),nt(o,"style",d),gi(o,r.precedence,e),t.instance=o;case"stylesheet":d=br(r.href);var f=e.querySelector(Un(d));if(f)return t.state.loading|=4,t.instance=f,Ze(f),f;o=h0(r),(d=Lt.get(d))&&hu(o,d),f=(e.ownerDocument||e).createElement("link"),Ze(f);var y=f;return y._p=new Promise(function(v,k){y.onload=v,y.onerror=k}),nt(f,"link",o),t.state.loading|=4,gi(f,r.precedence,e),t.instance=f;case"script":return f=vr(r.src),(d=e.querySelector(Pn(f)))?(t.instance=d,Ze(d),d):(o=r,(d=Lt.get(f))&&(o=p({},r),fu(o,d)),e=e.ownerDocument||e,d=e.createElement("script"),Ze(d),nt(d,"link",o),e.head.appendChild(d),t.instance=d);case"void":return null;default:throw Error(i(443,t.type))}else t.type==="stylesheet"&&(t.state.loading&4)===0&&(o=t.instance,t.state.loading|=4,gi(o,r.precedence,e));return t.instance}function gi(e,t,r){for(var o=r.querySelectorAll('link[rel="stylesheet"][data-precedence],style[data-precedence]'),d=o.length?o[o.length-1]:null,f=d,y=0;y<o.length;y++){var v=o[y];if(v.dataset.precedence===t)f=v;else if(f!==d)break}f?f.parentNode.insertBefore(e,f.nextSibling):(t=r.nodeType===9?r.head:r,t.insertBefore(e,t.firstChild))}function hu(e,t){e.crossOrigin==null&&(e.crossOrigin=t.crossOrigin),e.referrerPolicy==null&&(e.referrerPolicy=t.referrerPolicy),e.title==null&&(e.title=t.title)}function fu(e,t){e.crossOrigin==null&&(e.crossOrigin=t.crossOrigin),e.referrerPolicy==null&&(e.referrerPolicy=t.referrerPolicy),e.integrity==null&&(e.integrity=t.integrity)}var xi=null;function m0(e,t,r){if(xi===null){var o=new Map,d=xi=new Map;d.set(r,o)}else d=xi,o=d.get(r),o||(o=new Map,d.set(r,o));if(o.has(e))return o;for(o.set(e,null),r=r.getElementsByTagName(e),d=0;d<r.length;d++){var f=r[d];if(!(f[Ir]||f[lt]||e==="link"&&f.getAttribute("rel")==="stylesheet")&&f.namespaceURI!=="http://www.w3.org/2000/svg"){var y=f.getAttribute(t)||"";y=e+y;var v=o.get(y);v?v.push(f):o.set(y,[f])}}return o}function g0(e,t,r){e=e.ownerDocument||e,e.head.insertBefore(r,t==="title"?e.querySelector("head > title"):null)}function By(e,t,r){if(r===1||t.itemProp!=null)return!1;switch(e){case"meta":case"title":return!0;case"style":if(typeof t.precedence!="string"||typeof t.href!="string"||t.href==="")break;return!0;case"link":if(typeof t.rel!="string"||typeof t.href!="string"||t.href===""||t.onLoad||t.onError)break;switch(t.rel){case"stylesheet":return e=t.disabled,typeof t.precedence=="string"&&e==null;default:return!0}case"script":if(t.async&&typeof t.async!="function"&&typeof t.async!="symbol"&&!t.onLoad&&!t.onError&&t.src&&typeof t.src=="string")return!0}return!1}function x0(e){return!(e.type==="stylesheet"&&(e.state.loading&3)===0)}var Ln=null;function Hy(){}function Gy(e,t,r){if(Ln===null)throw Error(i(475));var o=Ln;if(t.type==="stylesheet"&&(typeof r.media!="string"||matchMedia(r.media).matches!==!1)&&(t.state.loading&4)===0){if(t.instance===null){var d=br(r.href),f=e.querySelector(Un(d));if(f){e=f._p,e!==null&&typeof e=="object"&&typeof e.then=="function"&&(o.count++,o=pi.bind(o),e.then(o,o)),t.state.loading|=4,t.instance=f,Ze(f);return}f=e.ownerDocument||e,r=h0(r),(d=Lt.get(d))&&hu(r,d),f=f.createElement("link"),Ze(f);var y=f;y._p=new Promise(function(v,k){y.onload=v,y.onerror=k}),nt(f,"link",r),t.instance=f}o.stylesheets===null&&(o.stylesheets=new Map),o.stylesheets.set(t,e),(e=t.state.preload)&&(t.state.loading&3)===0&&(o.count++,t=pi.bind(o),e.addEventListener("load",t),e.addEventListener("error",t))}}function Vy(){if(Ln===null)throw Error(i(475));var e=Ln;return e.stylesheets&&e.count===0&&mu(e,e.stylesheets),0<e.count?function(t){var r=setTimeout(function(){if(e.stylesheets&&mu(e,e.stylesheets),e.unsuspend){var o=e.unsuspend;e.unsuspend=null,o()}},6e4);return e.unsuspend=t,function(){e.unsuspend=null,clearTimeout(r)}}:null}function pi(){if(this.count--,this.count===0){if(this.stylesheets)mu(this,this.stylesheets);else if(this.unsuspend){var e=this.unsuspend;this.unsuspend=null,e()}}}var yi=null;function mu(e,t){e.stylesheets=null,e.unsuspend!==null&&(e.count++,yi=new Map,t.forEach(Qy,e),yi=null,pi.call(e))}function Qy(e,t){if(!(t.state.loading&4)){var r=yi.get(e);if(r)var o=r.get(null);else{r=new Map,yi.set(e,r);for(var d=e.querySelectorAll("link[data-precedence],style[data-precedence]"),f=0;f<d.length;f++){var y=d[f];(y.nodeName==="LINK"||y.getAttribute("media")!=="not all")&&(r.set(y.dataset.precedence,y),o=y)}o&&r.set(null,o)}d=t.instance,y=d.getAttribute("data-precedence"),f=r.get(y)||o,f===o&&r.set(null,d),r.set(y,d),this.count++,o=pi.bind(this),d.addEventListener("load",o),d.addEventListener("error",o),f?f.parentNode.insertBefore(d,f.nextSibling):(e=e.nodeType===9?e.head:e,e.insertBefore(d,e.firstChild)),t.state.loading|=4}}var qn={$$typeof:z,Provider:null,Consumer:null,_currentValue:J,_currentValue2:J,_threadCount:0};function Yy(e,t,r,o,d,f,y,v){this.tag=1,this.containerInfo=e,this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.next=this.pendingContext=this.context=this.cancelPendingCommit=null,this.callbackPriority=0,this.expirationTimes=co(-1),this.entangledLanes=this.shellSuspendCounter=this.errorRecoveryDisabledLanes=this.expiredLanes=this.warmLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=co(0),this.hiddenUpdates=co(null),this.identifierPrefix=o,this.onUncaughtError=d,this.onCaughtError=f,this.onRecoverableError=y,this.pooledCache=null,this.pooledCacheLanes=0,this.formState=v,this.incompleteTransitions=new Map}function p0(e,t,r,o,d,f,y,v,k,M,G,Y){return e=new Yy(e,t,r,y,v,k,M,Y),t=1,f===!0&&(t|=24),f=_t(3,null,null,t),e.current=f,f.stateNode=e,t=Ko(),t.refCount++,e.pooledCache=t,t.refCount++,f.memoizedState={element:o,isDehydrated:r,cache:t},Wo(f),e}function y0(e){return e?(e=Za,e):Za}function b0(e,t,r,o,d,f){d=y0(d),o.context===null?o.context=d:o.pendingContext=d,o=Ps(t),o.payload={element:r},f=f===void 0?null:f,f!==null&&(o.callback=f),r=Ls(e,o,t),r!==null&&(Et(r,e,t),mn(r,e,t))}function v0(e,t){if(e=e.memoizedState,e!==null&&e.dehydrated!==null){var r=e.retryLane;e.retryLane=r!==0&&r<t?r:t}}function gu(e,t){v0(e,t),(e=e.alternate)&&v0(e,t)}function j0(e){if(e.tag===13){var t=Xa(e,67108864);t!==null&&Et(t,e,67108864),gu(e,67108864)}}var bi=!0;function Fy(e,t,r,o){var d=R.T;R.T=null;var f=W.p;try{W.p=2,xu(e,t,r,o)}finally{W.p=f,R.T=d}}function Iy(e,t,r,o){var d=R.T;R.T=null;var f=W.p;try{W.p=8,xu(e,t,r,o)}finally{W.p=f,R.T=d}}function xu(e,t,r,o){if(bi){var d=pu(o);if(d===null)au(e,t,o,vi,r),_0(e,o);else if(Xy(d,e,t,r,o))o.stopPropagation();else if(_0(e,o),t&4&&-1<Ky.indexOf(e)){for(;d!==null;){var f=qa(d);if(f!==null)switch(f.tag){case 3:if(f=f.stateNode,f.current.memoizedState.isDehydrated){var y=oa(f.pendingLanes);if(y!==0){var v=f;for(v.pendingLanes|=2,v.entangledLanes|=2;y;){var k=1<<31-jt(y);v.entanglements[1]|=k,y&=~k}ts(f),(Ee&6)===0&&(ai=Xt()+500,Rn(0))}}break;case 13:v=Xa(f,2),v!==null&&Et(v,f,2),ni(),gu(f,2)}if(f=pu(o),f===null&&au(e,t,o,vi,r),f===d)break;d=f}d!==null&&o.stopPropagation()}else au(e,t,o,null,r)}}function pu(e){return e=wo(e),yu(e)}var vi=null;function yu(e){if(vi=null,e=La(e),e!==null){var t=u(e);if(t===null)e=null;else{var r=t.tag;if(r===13){if(e=h(t),e!==null)return e;e=null}else if(r===3){if(t.stateNode.current.memoizedState.isDehydrated)return t.tag===3?t.stateNode.containerInfo:null;e=null}else t!==e&&(e=null)}}return vi=e,null}function w0(e){switch(e){case"beforetoggle":case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"toggle":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 2;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 8;case"message":switch(Mx()){case Ud:return 2;case Pd:return 8;case hl:case Ux:return 32;case Ld:return 268435456;default:return 32}default:return 32}}var bu=!1,Xs=null,Zs=null,Js=null,zn=new Map,$n=new Map,Ws=[],Ky="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset".split(" ");function _0(e,t){switch(e){case"focusin":case"focusout":Xs=null;break;case"dragenter":case"dragleave":Zs=null;break;case"mouseover":case"mouseout":Js=null;break;case"pointerover":case"pointerout":zn.delete(t.pointerId);break;case"gotpointercapture":case"lostpointercapture":$n.delete(t.pointerId)}}function Bn(e,t,r,o,d,f){return e===null||e.nativeEvent!==f?(e={blockedOn:t,domEventName:r,eventSystemFlags:o,nativeEvent:f,targetContainers:[d]},t!==null&&(t=qa(t),t!==null&&j0(t)),e):(e.eventSystemFlags|=o,t=e.targetContainers,d!==null&&t.indexOf(d)===-1&&t.push(d),e)}function Xy(e,t,r,o,d){switch(t){case"focusin":return Xs=Bn(Xs,e,t,r,o,d),!0;case"dragenter":return Zs=Bn(Zs,e,t,r,o,d),!0;case"mouseover":return Js=Bn(Js,e,t,r,o,d),!0;case"pointerover":var f=d.pointerId;return zn.set(f,Bn(zn.get(f)||null,e,t,r,o,d)),!0;case"gotpointercapture":return f=d.pointerId,$n.set(f,Bn($n.get(f)||null,e,t,r,o,d)),!0}return!1}function N0(e){var t=La(e.target);if(t!==null){var r=u(t);if(r!==null){if(t=r.tag,t===13){if(t=h(r),t!==null){e.blockedOn=t,Gx(e.priority,function(){if(r.tag===13){var o=Ct();o=uo(o);var d=Xa(r,o);d!==null&&Et(d,r,o),gu(r,o)}});return}}else if(t===3&&r.stateNode.current.memoizedState.isDehydrated){e.blockedOn=r.tag===3?r.stateNode.containerInfo:null;return}}}e.blockedOn=null}function ji(e){if(e.blockedOn!==null)return!1;for(var t=e.targetContainers;0<t.length;){var r=pu(e.nativeEvent);if(r===null){r=e.nativeEvent;var o=new r.constructor(r.type,r);jo=o,r.target.dispatchEvent(o),jo=null}else return t=qa(r),t!==null&&j0(t),e.blockedOn=r,!1;t.shift()}return!0}function S0(e,t,r){ji(e)&&r.delete(t)}function Zy(){bu=!1,Xs!==null&&ji(Xs)&&(Xs=null),Zs!==null&&ji(Zs)&&(Zs=null),Js!==null&&ji(Js)&&(Js=null),zn.forEach(S0),$n.forEach(S0)}function wi(e,t){e.blockedOn===t&&(e.blockedOn=null,bu||(bu=!0,n.unstable_scheduleCallback(n.unstable_NormalPriority,Zy)))}var _i=null;function k0(e){_i!==e&&(_i=e,n.unstable_scheduleCallback(n.unstable_NormalPriority,function(){_i===e&&(_i=null);for(var t=0;t<e.length;t+=3){var r=e[t],o=e[t+1],d=e[t+2];if(typeof o!="function"){if(yu(o||r)===null)continue;break}var f=qa(r);f!==null&&(e.splice(t,3),t-=3,yc(f,{pending:!0,data:d,method:r.method,action:o},o,d))}}))}function Hn(e){function t(k){return wi(k,e)}Xs!==null&&wi(Xs,e),Zs!==null&&wi(Zs,e),Js!==null&&wi(Js,e),zn.forEach(t),$n.forEach(t);for(var r=0;r<Ws.length;r++){var o=Ws[r];o.blockedOn===e&&(o.blockedOn=null)}for(;0<Ws.length&&(r=Ws[0],r.blockedOn===null);)N0(r),r.blockedOn===null&&Ws.shift();if(r=(e.ownerDocument||e).$$reactFormReplay,r!=null)for(o=0;o<r.length;o+=3){var d=r[o],f=r[o+1],y=d[ht]||null;if(typeof f=="function")y||k0(r);else if(y){var v=null;if(f&&f.hasAttribute("formAction")){if(d=f,y=f[ht]||null)v=y.formAction;else if(yu(d)!==null)continue}else v=y.action;typeof v=="function"?r[o+1]=v:(r.splice(o,3),o-=3),k0(r)}}}function vu(e){this._internalRoot=e}Ni.prototype.render=vu.prototype.render=function(e){var t=this._internalRoot;if(t===null)throw Error(i(409));var r=t.current,o=Ct();b0(r,o,e,t,null,null)},Ni.prototype.unmount=vu.prototype.unmount=function(){var e=this._internalRoot;if(e!==null){this._internalRoot=null;var t=e.containerInfo;b0(e.current,2,null,e,null,null),ni(),t[Pa]=null}};function Ni(e){this._internalRoot=e}Ni.prototype.unstable_scheduleHydration=function(e){if(e){var t=Hd();e={blockedOn:null,target:e,priority:t};for(var r=0;r<Ws.length&&t!==0&&t<Ws[r].priority;r++);Ws.splice(r,0,e),r===0&&N0(e)}};var C0=a.version;if(C0!=="19.1.1")throw Error(i(527,C0,"19.1.1"));W.findDOMNode=function(e){var t=e._reactInternals;if(t===void 0)throw typeof e.render=="function"?Error(i(188)):(e=Object.keys(e).join(","),Error(i(268,e)));return e=x(t),e=e!==null?g(e):null,e=e===null?null:e.stateNode,e};var Jy={bundleType:0,version:"19.1.1",rendererPackageName:"react-dom",currentDispatcherRef:R,reconcilerVersion:"19.1.1"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var Si=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!Si.isDisabled&&Si.supportsFiber)try{Qr=Si.inject(Jy),vt=Si}catch{}}return Vn.createRoot=function(e,t){if(!c(e))throw Error(i(299));var r=!1,o="",d=Gf,f=Vf,y=Qf,v=null;return t!=null&&(t.unstable_strictMode===!0&&(r=!0),t.identifierPrefix!==void 0&&(o=t.identifierPrefix),t.onUncaughtError!==void 0&&(d=t.onUncaughtError),t.onCaughtError!==void 0&&(f=t.onCaughtError),t.onRecoverableError!==void 0&&(y=t.onRecoverableError),t.unstable_transitionCallbacks!==void 0&&(v=t.unstable_transitionCallbacks)),t=p0(e,1,!1,null,null,r,o,d,f,y,v,null),e[Pa]=t.current,su(e),new vu(t)},Vn.hydrateRoot=function(e,t,r){if(!c(e))throw Error(i(299));var o=!1,d="",f=Gf,y=Vf,v=Qf,k=null,M=null;return r!=null&&(r.unstable_strictMode===!0&&(o=!0),r.identifierPrefix!==void 0&&(d=r.identifierPrefix),r.onUncaughtError!==void 0&&(f=r.onUncaughtError),r.onCaughtError!==void 0&&(y=r.onCaughtError),r.onRecoverableError!==void 0&&(v=r.onRecoverableError),r.unstable_transitionCallbacks!==void 0&&(k=r.unstable_transitionCallbacks),r.formState!==void 0&&(M=r.formState)),t=p0(e,1,!0,t,r??null,o,d,f,y,v,k,M),t.context=y0(null),r=t.current,o=Ct(),o=uo(o),d=Ps(o),d.callback=null,Ls(r,d,o),r=o,t.current.lanes=r,Fr(t,r),ts(t),e[Pa]=t.current,su(e),new Ni(t)},Vn.version="19.1.1",Vn}var L0;function cb(){if(L0)return _u.exports;L0=1;function n(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(n)}catch(a){console.error(a)}}return n(),_u.exports=ob(),_u.exports}var ub=cb();/**
 * react-router v7.8.2
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */var q0="popstate";function db(n={}){function a(i,c){let{pathname:u,search:h,hash:m}=i.location;return Qu("",{pathname:u,search:h,hash:m},c.state&&c.state.usr||null,c.state&&c.state.key||"default")}function l(i,c){return typeof c=="string"?c:Zn(c)}return fb(a,l,null,n)}function ze(n,a){if(n===!1||n===null||typeof n>"u")throw new Error(a)}function Yt(n,a){if(!n){typeof console<"u"&&console.warn(a);try{throw new Error(a)}catch{}}}function hb(){return Math.random().toString(36).substring(2,10)}function z0(n,a){return{usr:n.state,key:n.key,idx:a}}function Qu(n,a,l=null,i){return{pathname:typeof n=="string"?n:n.pathname,search:"",hash:"",...typeof a=="string"?zr(a):a,state:l,key:a&&a.key||i||hb()}}function Zn({pathname:n="/",search:a="",hash:l=""}){return a&&a!=="?"&&(n+=a.charAt(0)==="?"?a:"?"+a),l&&l!=="#"&&(n+=l.charAt(0)==="#"?l:"#"+l),n}function zr(n){let a={};if(n){let l=n.indexOf("#");l>=0&&(a.hash=n.substring(l),n=n.substring(0,l));let i=n.indexOf("?");i>=0&&(a.search=n.substring(i),n=n.substring(0,i)),n&&(a.pathname=n)}return a}function fb(n,a,l,i={}){let{window:c=document.defaultView,v5Compat:u=!1}=i,h=c.history,m="POP",x=null,g=p();g==null&&(g=0,h.replaceState({...h.state,idx:g},""));function p(){return(h.state||{idx:null}).idx}function b(){m="POP";let C=p(),L=C==null?null:C-g;g=C,x&&x({action:m,location:_.location,delta:L})}function j(C,L){m="PUSH";let B=Qu(_.location,C,L);g=p()+1;let z=z0(B,g),U=_.createHref(B);try{h.pushState(z,"",U)}catch(D){if(D instanceof DOMException&&D.name==="DataCloneError")throw D;c.location.assign(U)}u&&x&&x({action:m,location:_.location,delta:1})}function w(C,L){m="REPLACE";let B=Qu(_.location,C,L);g=p();let z=z0(B,g),U=_.createHref(B);h.replaceState(z,"",U),u&&x&&x({action:m,location:_.location,delta:0})}function S(C){return mb(C)}let _={get action(){return m},get location(){return n(c,h)},listen(C){if(x)throw new Error("A history only accepts one active listener");return c.addEventListener(q0,b),x=C,()=>{c.removeEventListener(q0,b),x=null}},createHref(C){return a(c,C)},createURL:S,encodeLocation(C){let L=S(C);return{pathname:L.pathname,search:L.search,hash:L.hash}},push:j,replace:w,go(C){return h.go(C)}};return _}function mb(n,a=!1){let l="http://localhost";typeof window<"u"&&(l=window.location.origin!=="null"?window.location.origin:window.location.href),ze(l,"No window.location.(origin|href) available to create URL");let i=typeof n=="string"?n:Zn(n);return i=i.replace(/ $/,"%20"),!a&&i.startsWith("//")&&(i=l+i),new URL(i,l)}function Og(n,a,l="/"){return gb(n,a,l,!1)}function gb(n,a,l,i){let c=typeof a=="string"?zr(a):a,u=Es(c.pathname||"/",l);if(u==null)return null;let h=Dg(n);xb(h);let m=null;for(let x=0;m==null&&x<h.length;++x){let g=Cb(u);m=Sb(h[x],g,i)}return m}function Dg(n,a=[],l=[],i="",c=!1){let u=(h,m,x=c,g)=>{let p={relativePath:g===void 0?h.path||"":g,caseSensitive:h.caseSensitive===!0,childrenIndex:m,route:h};if(p.relativePath.startsWith("/")){if(!p.relativePath.startsWith(i)&&x)return;ze(p.relativePath.startsWith(i),`Absolute route path "${p.relativePath}" nested under path "${i}" is not valid. An absolute child route path must start with the combined path of all its parent routes.`),p.relativePath=p.relativePath.slice(i.length)}let b=Ns([i,p.relativePath]),j=l.concat(p);h.children&&h.children.length>0&&(ze(h.index!==!0,`Index routes must not have child routes. Please remove all child routes from route path "${b}".`),Dg(h.children,a,j,b,x)),!(h.path==null&&!h.index)&&a.push({path:b,score:_b(b,h.index),routesMeta:j})};return n.forEach((h,m)=>{if(h.path===""||!h.path?.includes("?"))u(h,m);else for(let x of Mg(h.path))u(h,m,!0,x)}),a}function Mg(n){let a=n.split("/");if(a.length===0)return[];let[l,...i]=a,c=l.endsWith("?"),u=l.replace(/\?$/,"");if(i.length===0)return c?[u,""]:[u];let h=Mg(i.join("/")),m=[];return m.push(...h.map(x=>x===""?u:[u,x].join("/"))),c&&m.push(...h),m.map(x=>n.startsWith("/")&&x===""?"/":x)}function xb(n){n.sort((a,l)=>a.score!==l.score?l.score-a.score:Nb(a.routesMeta.map(i=>i.childrenIndex),l.routesMeta.map(i=>i.childrenIndex)))}var pb=/^:[\w-]+$/,yb=3,bb=2,vb=1,jb=10,wb=-2,$0=n=>n==="*";function _b(n,a){let l=n.split("/"),i=l.length;return l.some($0)&&(i+=wb),a&&(i+=bb),l.filter(c=>!$0(c)).reduce((c,u)=>c+(pb.test(u)?yb:u===""?vb:jb),i)}function Nb(n,a){return n.length===a.length&&n.slice(0,-1).every((i,c)=>i===a[c])?n[n.length-1]-a[a.length-1]:0}function Sb(n,a,l=!1){let{routesMeta:i}=n,c={},u="/",h=[];for(let m=0;m<i.length;++m){let x=i[m],g=m===i.length-1,p=u==="/"?a:a.slice(u.length)||"/",b=Vi({path:x.relativePath,caseSensitive:x.caseSensitive,end:g},p),j=x.route;if(!b&&g&&l&&!i[i.length-1].route.index&&(b=Vi({path:x.relativePath,caseSensitive:x.caseSensitive,end:!1},p)),!b)return null;Object.assign(c,b.params),h.push({params:c,pathname:Ns([u,b.pathname]),pathnameBase:Rb(Ns([u,b.pathnameBase])),route:j}),b.pathnameBase!=="/"&&(u=Ns([u,b.pathnameBase]))}return h}function Vi(n,a){typeof n=="string"&&(n={path:n,caseSensitive:!1,end:!0});let[l,i]=kb(n.path,n.caseSensitive,n.end),c=a.match(l);if(!c)return null;let u=c[0],h=u.replace(/(.)\/+$/,"$1"),m=c.slice(1);return{params:i.reduce((g,{paramName:p,isOptional:b},j)=>{if(p==="*"){let S=m[j]||"";h=u.slice(0,u.length-S.length).replace(/(.)\/+$/,"$1")}const w=m[j];return b&&!w?g[p]=void 0:g[p]=(w||"").replace(/%2F/g,"/"),g},{}),pathname:u,pathnameBase:h,pattern:n}}function kb(n,a=!1,l=!0){Yt(n==="*"||!n.endsWith("*")||n.endsWith("/*"),`Route path "${n}" will be treated as if it were "${n.replace(/\*$/,"/*")}" because the \`*\` character must always follow a \`/\` in the pattern. To get rid of this warning, please change the route path to "${n.replace(/\*$/,"/*")}".`);let i=[],c="^"+n.replace(/\/*\*?$/,"").replace(/^\/*/,"/").replace(/[\\.*+^${}|()[\]]/g,"\\$&").replace(/\/:([\w-]+)(\?)?/g,(h,m,x)=>(i.push({paramName:m,isOptional:x!=null}),x?"/?([^\\/]+)?":"/([^\\/]+)")).replace(/\/([\w-]+)\?(\/|$)/g,"(/$1)?$2");return n.endsWith("*")?(i.push({paramName:"*"}),c+=n==="*"||n==="/*"?"(.*)$":"(?:\\/(.+)|\\/*)$"):l?c+="\\/*$":n!==""&&n!=="/"&&(c+="(?:(?=\\/|$))"),[new RegExp(c,a?void 0:"i"),i]}function Cb(n){try{return n.split("/").map(a=>decodeURIComponent(a).replace(/\//g,"%2F")).join("/")}catch(a){return Yt(!1,`The URL path "${n}" could not be decoded because it is a malformed URL segment. This is probably due to a bad percent encoding (${a}).`),n}}function Es(n,a){if(a==="/")return n;if(!n.toLowerCase().startsWith(a.toLowerCase()))return null;let l=a.endsWith("/")?a.length-1:a.length,i=n.charAt(l);return i&&i!=="/"?null:n.slice(l)||"/"}function Eb(n,a="/"){let{pathname:l,search:i="",hash:c=""}=typeof n=="string"?zr(n):n;return{pathname:l?l.startsWith("/")?l:Ab(l,a):a,search:Ob(i),hash:Db(c)}}function Ab(n,a){let l=a.replace(/\/+$/,"").split("/");return n.split("/").forEach(c=>{c===".."?l.length>1&&l.pop():c!=="."&&l.push(c)}),l.length>1?l.join("/"):"/"}function Cu(n,a,l,i){return`Cannot include a '${n}' character in a manually specified \`to.${a}\` field [${JSON.stringify(i)}].  Please separate it out to the \`to.${l}\` field. Alternatively you may provide the full path as a string in <Link to="..."> and the router will parse it for you.`}function Tb(n){return n.filter((a,l)=>l===0||a.route.path&&a.route.path.length>0)}function xd(n){let a=Tb(n);return a.map((l,i)=>i===a.length-1?l.pathname:l.pathnameBase)}function pd(n,a,l,i=!1){let c;typeof n=="string"?c=zr(n):(c={...n},ze(!c.pathname||!c.pathname.includes("?"),Cu("?","pathname","search",c)),ze(!c.pathname||!c.pathname.includes("#"),Cu("#","pathname","hash",c)),ze(!c.search||!c.search.includes("#"),Cu("#","search","hash",c)));let u=n===""||c.pathname==="",h=u?"/":c.pathname,m;if(h==null)m=l;else{let b=a.length-1;if(!i&&h.startsWith("..")){let j=h.split("/");for(;j[0]==="..";)j.shift(),b-=1;c.pathname=j.join("/")}m=b>=0?a[b]:"/"}let x=Eb(c,m),g=h&&h!=="/"&&h.endsWith("/"),p=(u||h===".")&&l.endsWith("/");return!x.pathname.endsWith("/")&&(g||p)&&(x.pathname+="/"),x}var Ns=n=>n.join("/").replace(/\/\/+/g,"/"),Rb=n=>n.replace(/\/+$/,"").replace(/^\/*/,"/"),Ob=n=>!n||n==="?"?"":n.startsWith("?")?n:"?"+n,Db=n=>!n||n==="#"?"":n.startsWith("#")?n:"#"+n;function Mb(n){return n!=null&&typeof n.status=="number"&&typeof n.statusText=="string"&&typeof n.internal=="boolean"&&"data"in n}var Ug=["POST","PUT","PATCH","DELETE"];new Set(Ug);var Ub=["GET",...Ug];new Set(Ub);var $r=N.createContext(null);$r.displayName="DataRouter";var Zi=N.createContext(null);Zi.displayName="DataRouterState";N.createContext(!1);var Pg=N.createContext({isTransitioning:!1});Pg.displayName="ViewTransition";var Pb=N.createContext(new Map);Pb.displayName="Fetchers";var Lb=N.createContext(null);Lb.displayName="Await";var It=N.createContext(null);It.displayName="Navigation";var rl=N.createContext(null);rl.displayName="Location";var ls=N.createContext({outlet:null,matches:[],isDataRoute:!1});ls.displayName="Route";var yd=N.createContext(null);yd.displayName="RouteError";function qb(n,{relative:a}={}){ze(Br(),"useHref() may be used only in the context of a <Router> component.");let{basename:l,navigator:i}=N.useContext(It),{hash:c,pathname:u,search:h}=nl(n,{relative:a}),m=u;return l!=="/"&&(m=u==="/"?l:Ns([l,u])),i.createHref({pathname:m,search:h,hash:c})}function Br(){return N.useContext(rl)!=null}function Kt(){return ze(Br(),"useLocation() may be used only in the context of a <Router> component."),N.useContext(rl).location}var Lg="You should call navigate() in a React.useEffect(), not when your component is first rendered.";function qg(n){N.useContext(It).static||N.useLayoutEffect(n)}function zg(){let{isDataRoute:n}=N.useContext(ls);return n?Zb():zb()}function zb(){ze(Br(),"useNavigate() may be used only in the context of a <Router> component.");let n=N.useContext($r),{basename:a,navigator:l}=N.useContext(It),{matches:i}=N.useContext(ls),{pathname:c}=Kt(),u=JSON.stringify(xd(i)),h=N.useRef(!1);return qg(()=>{h.current=!0}),N.useCallback((x,g={})=>{if(Yt(h.current,Lg),!h.current)return;if(typeof x=="number"){l.go(x);return}let p=pd(x,JSON.parse(u),c,g.relative==="path");n==null&&a!=="/"&&(p.pathname=p.pathname==="/"?a:Ns([a,p.pathname])),(g.replace?l.replace:l.push)(p,g.state,g)},[a,l,u,c,n])}N.createContext(null);function nl(n,{relative:a}={}){let{matches:l}=N.useContext(ls),{pathname:i}=Kt(),c=JSON.stringify(xd(l));return N.useMemo(()=>pd(n,JSON.parse(c),i,a==="path"),[n,c,i,a])}function $b(n,a){return $g(n,a)}function $g(n,a,l,i,c){ze(Br(),"useRoutes() may be used only in the context of a <Router> component.");let{navigator:u}=N.useContext(It),{matches:h}=N.useContext(ls),m=h[h.length-1],x=m?m.params:{},g=m?m.pathname:"/",p=m?m.pathnameBase:"/",b=m&&m.route;{let B=b&&b.path||"";Bg(g,!b||B.endsWith("*")||B.endsWith("*?"),`You rendered descendant <Routes> (or called \`useRoutes()\`) at "${g}" (under <Route path="${B}">) but the parent route path has no trailing "*". This means if you navigate deeper, the parent won't match anymore and therefore the child routes will never render.

Please change the parent <Route path="${B}"> to <Route path="${B==="/"?"*":`${B}/*`}">.`)}let j=Kt(),w;if(a){let B=typeof a=="string"?zr(a):a;ze(p==="/"||B.pathname?.startsWith(p),`When overriding the location using \`<Routes location>\` or \`useRoutes(routes, location)\`, the location pathname must begin with the portion of the URL pathname that was matched by all parent routes. The current pathname base is "${p}" but pathname "${B.pathname}" was given in the \`location\` prop.`),w=B}else w=j;let S=w.pathname||"/",_=S;if(p!=="/"){let B=p.replace(/^\//,"").split("/");_="/"+S.replace(/^\//,"").split("/").slice(B.length).join("/")}let C=Og(n,{pathname:_});Yt(b||C!=null,`No routes matched location "${w.pathname}${w.search}${w.hash}" `),Yt(C==null||C[C.length-1].route.element!==void 0||C[C.length-1].route.Component!==void 0||C[C.length-1].route.lazy!==void 0,`Matched leaf route at location "${w.pathname}${w.search}${w.hash}" does not have an element or Component. This means it will render an <Outlet /> with a null value by default resulting in an "empty" page.`);let L=Qb(C&&C.map(B=>Object.assign({},B,{params:Object.assign({},x,B.params),pathname:Ns([p,u.encodeLocation?u.encodeLocation(B.pathname).pathname:B.pathname]),pathnameBase:B.pathnameBase==="/"?p:Ns([p,u.encodeLocation?u.encodeLocation(B.pathnameBase).pathname:B.pathnameBase])})),h,l,i,c);return a&&L?N.createElement(rl.Provider,{value:{location:{pathname:"/",search:"",hash:"",state:null,key:"default",...w},navigationType:"POP"}},L):L}function Bb(){let n=Xb(),a=Mb(n)?`${n.status} ${n.statusText}`:n instanceof Error?n.message:JSON.stringify(n),l=n instanceof Error?n.stack:null,i="rgba(200,200,200, 0.5)",c={padding:"0.5rem",backgroundColor:i},u={padding:"2px 4px",backgroundColor:i},h=null;return console.error("Error handled by React Router default ErrorBoundary:",n),h=N.createElement(N.Fragment,null,N.createElement("p",null,"💿 Hey developer 👋"),N.createElement("p",null,"You can provide a way better UX than this when your app throws errors by providing your own ",N.createElement("code",{style:u},"ErrorBoundary")," or"," ",N.createElement("code",{style:u},"errorElement")," prop on your route.")),N.createElement(N.Fragment,null,N.createElement("h2",null,"Unexpected Application Error!"),N.createElement("h3",{style:{fontStyle:"italic"}},a),l?N.createElement("pre",{style:c},l):null,h)}var Hb=N.createElement(Bb,null),Gb=class extends N.Component{constructor(n){super(n),this.state={location:n.location,revalidation:n.revalidation,error:n.error}}static getDerivedStateFromError(n){return{error:n}}static getDerivedStateFromProps(n,a){return a.location!==n.location||a.revalidation!=="idle"&&n.revalidation==="idle"?{error:n.error,location:n.location,revalidation:n.revalidation}:{error:n.error!==void 0?n.error:a.error,location:a.location,revalidation:n.revalidation||a.revalidation}}componentDidCatch(n,a){this.props.unstable_onError?this.props.unstable_onError(n,a):console.error("React Router caught the following error during render",n)}render(){return this.state.error!==void 0?N.createElement(ls.Provider,{value:this.props.routeContext},N.createElement(yd.Provider,{value:this.state.error,children:this.props.component})):this.props.children}};function Vb({routeContext:n,match:a,children:l}){let i=N.useContext($r);return i&&i.static&&i.staticContext&&(a.route.errorElement||a.route.ErrorBoundary)&&(i.staticContext._deepestRenderedBoundaryId=a.route.id),N.createElement(ls.Provider,{value:n},l)}function Qb(n,a=[],l=null,i=null,c=null){if(n==null){if(!l)return null;if(l.errors)n=l.matches;else if(a.length===0&&!l.initialized&&l.matches.length>0)n=l.matches;else return null}let u=n,h=l?.errors;if(h!=null){let g=u.findIndex(p=>p.route.id&&h?.[p.route.id]!==void 0);ze(g>=0,`Could not find a matching route for errors on route IDs: ${Object.keys(h).join(",")}`),u=u.slice(0,Math.min(u.length,g+1))}let m=!1,x=-1;if(l)for(let g=0;g<u.length;g++){let p=u[g];if((p.route.HydrateFallback||p.route.hydrateFallbackElement)&&(x=g),p.route.id){let{loaderData:b,errors:j}=l,w=p.route.loader&&!b.hasOwnProperty(p.route.id)&&(!j||j[p.route.id]===void 0);if(p.route.lazy||w){m=!0,x>=0?u=u.slice(0,x+1):u=[u[0]];break}}}return u.reduceRight((g,p,b)=>{let j,w=!1,S=null,_=null;l&&(j=h&&p.route.id?h[p.route.id]:void 0,S=p.route.errorElement||Hb,m&&(x<0&&b===0?(Bg("route-fallback",!1,"No `HydrateFallback` element provided to render during initial hydration"),w=!0,_=null):x===b&&(w=!0,_=p.route.hydrateFallbackElement||null)));let C=a.concat(u.slice(0,b+1)),L=()=>{let B;return j?B=S:w?B=_:p.route.Component?B=N.createElement(p.route.Component,null):p.route.element?B=p.route.element:B=g,N.createElement(Vb,{match:p,routeContext:{outlet:g,matches:C,isDataRoute:l!=null},children:B})};return l&&(p.route.ErrorBoundary||p.route.errorElement||b===0)?N.createElement(Gb,{location:l.location,revalidation:l.revalidation,component:S,error:j,children:L(),routeContext:{outlet:null,matches:C,isDataRoute:!0},unstable_onError:i}):L()},null)}function bd(n){return`${n} must be used within a data router.  See https://reactrouter.com/en/main/routers/picking-a-router.`}function Yb(n){let a=N.useContext($r);return ze(a,bd(n)),a}function Fb(n){let a=N.useContext(Zi);return ze(a,bd(n)),a}function Ib(n){let a=N.useContext(ls);return ze(a,bd(n)),a}function vd(n){let a=Ib(n),l=a.matches[a.matches.length-1];return ze(l.route.id,`${n} can only be used on routes that contain a unique "id"`),l.route.id}function Kb(){return vd("useRouteId")}function Xb(){let n=N.useContext(yd),a=Fb("useRouteError"),l=vd("useRouteError");return n!==void 0?n:a.errors?.[l]}function Zb(){let{router:n}=Yb("useNavigate"),a=vd("useNavigate"),l=N.useRef(!1);return qg(()=>{l.current=!0}),N.useCallback(async(c,u={})=>{Yt(l.current,Lg),l.current&&(typeof c=="number"?n.navigate(c):await n.navigate(c,{fromRouteId:a,...u}))},[n,a])}var B0={};function Bg(n,a,l){!a&&!B0[n]&&(B0[n]=!0,Yt(!1,l))}N.memo(Jb);function Jb({routes:n,future:a,state:l,unstable_onError:i}){return $g(n,void 0,l,i,a)}function Jn({to:n,replace:a,state:l,relative:i}){ze(Br(),"<Navigate> may be used only in the context of a <Router> component.");let{static:c}=N.useContext(It);Yt(!c,"<Navigate> must not be used on the initial render in a <StaticRouter>. This is a no-op, but you should modify your code so the <Navigate> is only ever rendered in response to some user interaction or state change.");let{matches:u}=N.useContext(ls),{pathname:h}=Kt(),m=zg(),x=pd(n,xd(u),h,i==="path"),g=JSON.stringify(x);return N.useEffect(()=>{m(JSON.parse(g),{replace:a,state:l,relative:i})},[m,g,i,a,l]),null}function ss(n){ze(!1,"A <Route> is only ever to be used as the child of <Routes> element, never rendered directly. Please wrap your <Route> in a <Routes>.")}function Wb({basename:n="/",children:a=null,location:l,navigationType:i="POP",navigator:c,static:u=!1}){ze(!Br(),"You cannot render a <Router> inside another <Router>. You should never have more than one in your app.");let h=n.replace(/^\/*/,"/"),m=N.useMemo(()=>({basename:h,navigator:c,static:u,future:{}}),[h,c,u]);typeof l=="string"&&(l=zr(l));let{pathname:x="/",search:g="",hash:p="",state:b=null,key:j="default"}=l,w=N.useMemo(()=>{let S=Es(x,h);return S==null?null:{location:{pathname:S,search:g,hash:p,state:b,key:j},navigationType:i}},[h,x,g,p,b,j,i]);return Yt(w!=null,`<Router basename="${h}"> is not able to match the URL "${x}${g}${p}" because it does not start with the basename, so the <Router> won't render anything.`),w==null?null:N.createElement(It.Provider,{value:m},N.createElement(rl.Provider,{children:a,value:w}))}function ev({children:n,location:a}){return $b(Yu(n),a)}function Yu(n,a=[]){let l=[];return N.Children.forEach(n,(i,c)=>{if(!N.isValidElement(i))return;let u=[...a,c];if(i.type===N.Fragment){l.push.apply(l,Yu(i.props.children,u));return}ze(i.type===ss,`[${typeof i.type=="string"?i.type:i.type.name}] is not a <Route> component. All component children of <Routes> must be a <Route> or <React.Fragment>`),ze(!i.props.index||!i.props.children,"An index route cannot have child routes.");let h={id:i.props.id||u.join("-"),caseSensitive:i.props.caseSensitive,element:i.props.element,Component:i.props.Component,index:i.props.index,path:i.props.path,loader:i.props.loader,action:i.props.action,hydrateFallbackElement:i.props.hydrateFallbackElement,HydrateFallback:i.props.HydrateFallback,errorElement:i.props.errorElement,ErrorBoundary:i.props.ErrorBoundary,hasErrorBoundary:i.props.hasErrorBoundary===!0||i.props.ErrorBoundary!=null||i.props.errorElement!=null,shouldRevalidate:i.props.shouldRevalidate,handle:i.props.handle,lazy:i.props.lazy};i.props.children&&(h.children=Yu(i.props.children,u)),l.push(h)}),l}var Bi="get",Hi="application/x-www-form-urlencoded";function Ji(n){return n!=null&&typeof n.tagName=="string"}function tv(n){return Ji(n)&&n.tagName.toLowerCase()==="button"}function sv(n){return Ji(n)&&n.tagName.toLowerCase()==="form"}function av(n){return Ji(n)&&n.tagName.toLowerCase()==="input"}function rv(n){return!!(n.metaKey||n.altKey||n.ctrlKey||n.shiftKey)}function nv(n,a){return n.button===0&&(!a||a==="_self")&&!rv(n)}var ki=null;function lv(){if(ki===null)try{new FormData(document.createElement("form"),0),ki=!1}catch{ki=!0}return ki}var iv=new Set(["application/x-www-form-urlencoded","multipart/form-data","text/plain"]);function Eu(n){return n!=null&&!iv.has(n)?(Yt(!1,`"${n}" is not a valid \`encType\` for \`<Form>\`/\`<fetcher.Form>\` and will default to "${Hi}"`),null):n}function ov(n,a){let l,i,c,u,h;if(sv(n)){let m=n.getAttribute("action");i=m?Es(m,a):null,l=n.getAttribute("method")||Bi,c=Eu(n.getAttribute("enctype"))||Hi,u=new FormData(n)}else if(tv(n)||av(n)&&(n.type==="submit"||n.type==="image")){let m=n.form;if(m==null)throw new Error('Cannot submit a <button> or <input type="submit"> without a <form>');let x=n.getAttribute("formaction")||m.getAttribute("action");if(i=x?Es(x,a):null,l=n.getAttribute("formmethod")||m.getAttribute("method")||Bi,c=Eu(n.getAttribute("formenctype"))||Eu(m.getAttribute("enctype"))||Hi,u=new FormData(m,n),!lv()){let{name:g,type:p,value:b}=n;if(p==="image"){let j=g?`${g}.`:"";u.append(`${j}x`,"0"),u.append(`${j}y`,"0")}else g&&u.append(g,b)}}else{if(Ji(n))throw new Error('Cannot submit element that is not <form>, <button>, or <input type="submit|image">');l=Bi,i=null,c=Hi,h=n}return u&&c==="text/plain"&&(h=u,u=void 0),{action:i,method:l.toLowerCase(),encType:c,formData:u,body:h}}Object.getOwnPropertyNames(Object.prototype).sort().join("\0");function jd(n,a){if(n===!1||n===null||typeof n>"u")throw new Error(a)}function cv(n,a,l){let i=typeof n=="string"?new URL(n,typeof window>"u"?"server://singlefetch/":window.location.origin):n;return i.pathname==="/"?i.pathname=`_root.${l}`:a&&Es(i.pathname,a)==="/"?i.pathname=`${a.replace(/\/$/,"")}/_root.${l}`:i.pathname=`${i.pathname.replace(/\/$/,"")}.${l}`,i}async function uv(n,a){if(n.id in a)return a[n.id];try{let l=await import(n.module);return a[n.id]=l,l}catch(l){return console.error(`Error loading route module \`${n.module}\`, reloading page...`),console.error(l),window.__reactRouterContext&&window.__reactRouterContext.isSpaMode,window.location.reload(),new Promise(()=>{})}}function dv(n){return n==null?!1:n.href==null?n.rel==="preload"&&typeof n.imageSrcSet=="string"&&typeof n.imageSizes=="string":typeof n.rel=="string"&&typeof n.href=="string"}async function hv(n,a,l){let i=await Promise.all(n.map(async c=>{let u=a.routes[c.route.id];if(u){let h=await uv(u,l);return h.links?h.links():[]}return[]}));return xv(i.flat(1).filter(dv).filter(c=>c.rel==="stylesheet"||c.rel==="preload").map(c=>c.rel==="stylesheet"?{...c,rel:"prefetch",as:"style"}:{...c,rel:"prefetch"}))}function H0(n,a,l,i,c,u){let h=(x,g)=>l[g]?x.route.id!==l[g].route.id:!0,m=(x,g)=>l[g].pathname!==x.pathname||l[g].route.path?.endsWith("*")&&l[g].params["*"]!==x.params["*"];return u==="assets"?a.filter((x,g)=>h(x,g)||m(x,g)):u==="data"?a.filter((x,g)=>{let p=i.routes[x.route.id];if(!p||!p.hasLoader)return!1;if(h(x,g)||m(x,g))return!0;if(x.route.shouldRevalidate){let b=x.route.shouldRevalidate({currentUrl:new URL(c.pathname+c.search+c.hash,window.origin),currentParams:l[0]?.params||{},nextUrl:new URL(n,window.origin),nextParams:x.params,defaultShouldRevalidate:!0});if(typeof b=="boolean")return b}return!0}):[]}function fv(n,a,{includeHydrateFallback:l}={}){return mv(n.map(i=>{let c=a.routes[i.route.id];if(!c)return[];let u=[c.module];return c.clientActionModule&&(u=u.concat(c.clientActionModule)),c.clientLoaderModule&&(u=u.concat(c.clientLoaderModule)),l&&c.hydrateFallbackModule&&(u=u.concat(c.hydrateFallbackModule)),c.imports&&(u=u.concat(c.imports)),u}).flat(1))}function mv(n){return[...new Set(n)]}function gv(n){let a={},l=Object.keys(n).sort();for(let i of l)a[i]=n[i];return a}function xv(n,a){let l=new Set;return new Set(a),n.reduce((i,c)=>{let u=JSON.stringify(gv(c));return l.has(u)||(l.add(u),i.push({key:u,link:c})),i},[])}function Hg(){let n=N.useContext($r);return jd(n,"You must render this element inside a <DataRouterContext.Provider> element"),n}function pv(){let n=N.useContext(Zi);return jd(n,"You must render this element inside a <DataRouterStateContext.Provider> element"),n}var wd=N.createContext(void 0);wd.displayName="FrameworkContext";function Gg(){let n=N.useContext(wd);return jd(n,"You must render this element inside a <HydratedRouter> element"),n}function yv(n,a){let l=N.useContext(wd),[i,c]=N.useState(!1),[u,h]=N.useState(!1),{onFocus:m,onBlur:x,onMouseEnter:g,onMouseLeave:p,onTouchStart:b}=a,j=N.useRef(null);N.useEffect(()=>{if(n==="render"&&h(!0),n==="viewport"){let _=L=>{L.forEach(B=>{h(B.isIntersecting)})},C=new IntersectionObserver(_,{threshold:.5});return j.current&&C.observe(j.current),()=>{C.disconnect()}}},[n]),N.useEffect(()=>{if(i){let _=setTimeout(()=>{h(!0)},100);return()=>{clearTimeout(_)}}},[i]);let w=()=>{c(!0)},S=()=>{c(!1),h(!1)};return l?n!=="intent"?[u,j,{}]:[u,j,{onFocus:Qn(m,w),onBlur:Qn(x,S),onMouseEnter:Qn(g,w),onMouseLeave:Qn(p,S),onTouchStart:Qn(b,w)}]:[!1,j,{}]}function Qn(n,a){return l=>{n&&n(l),l.defaultPrevented||a(l)}}function bv({page:n,...a}){let{router:l}=Hg(),i=N.useMemo(()=>Og(l.routes,n,l.basename),[l.routes,n,l.basename]);return i?N.createElement(jv,{page:n,matches:i,...a}):null}function vv(n){let{manifest:a,routeModules:l}=Gg(),[i,c]=N.useState([]);return N.useEffect(()=>{let u=!1;return hv(n,a,l).then(h=>{u||c(h)}),()=>{u=!0}},[n,a,l]),i}function jv({page:n,matches:a,...l}){let i=Kt(),{manifest:c,routeModules:u}=Gg(),{basename:h}=Hg(),{loaderData:m,matches:x}=pv(),g=N.useMemo(()=>H0(n,a,x,c,i,"data"),[n,a,x,c,i]),p=N.useMemo(()=>H0(n,a,x,c,i,"assets"),[n,a,x,c,i]),b=N.useMemo(()=>{if(n===i.pathname+i.search+i.hash)return[];let S=new Set,_=!1;if(a.forEach(L=>{let B=c.routes[L.route.id];!B||!B.hasLoader||(!g.some(z=>z.route.id===L.route.id)&&L.route.id in m&&u[L.route.id]?.shouldRevalidate||B.hasClientLoader?_=!0:S.add(L.route.id))}),S.size===0)return[];let C=cv(n,h,"data");return _&&S.size>0&&C.searchParams.set("_routes",a.filter(L=>S.has(L.route.id)).map(L=>L.route.id).join(",")),[C.pathname+C.search]},[h,m,i,c,g,a,n,u]),j=N.useMemo(()=>fv(p,c),[p,c]),w=vv(p);return N.createElement(N.Fragment,null,b.map(S=>N.createElement("link",{key:S,rel:"prefetch",as:"fetch",href:S,...l})),j.map(S=>N.createElement("link",{key:S,rel:"modulepreload",href:S,...l})),w.map(({key:S,link:_})=>N.createElement("link",{key:S,nonce:l.nonce,..._})))}function wv(...n){return a=>{n.forEach(l=>{typeof l=="function"?l(a):l!=null&&(l.current=a)})}}var Vg=typeof window<"u"&&typeof window.document<"u"&&typeof window.document.createElement<"u";try{Vg&&(window.__reactRouterVersion="7.8.2")}catch{}function _v({basename:n,children:a,window:l}){let i=N.useRef();i.current==null&&(i.current=db({window:l,v5Compat:!0}));let c=i.current,[u,h]=N.useState({action:c.action,location:c.location}),m=N.useCallback(x=>{N.startTransition(()=>h(x))},[h]);return N.useLayoutEffect(()=>c.listen(m),[c,m]),N.createElement(Wb,{basename:n,children:a,location:u.location,navigationType:u.action,navigator:c})}var Qg=/^(?:[a-z][a-z0-9+.-]*:|\/\/)/i,Wn=N.forwardRef(function({onClick:a,discover:l="render",prefetch:i="none",relative:c,reloadDocument:u,replace:h,state:m,target:x,to:g,preventScrollReset:p,viewTransition:b,...j},w){let{basename:S}=N.useContext(It),_=typeof g=="string"&&Qg.test(g),C,L=!1;if(typeof g=="string"&&_&&(C=g,Vg))try{let K=new URL(window.location.href),te=g.startsWith("//")?new URL(K.protocol+g):new URL(g),de=Es(te.pathname,S);te.origin===K.origin&&de!=null?g=de+te.search+te.hash:L=!0}catch{Yt(!1,`<Link to="${g}"> contains an invalid URL which will probably break when clicked - please update to a valid URL path.`)}let B=qb(g,{relative:c}),[z,U,D]=yv(i,j),q=Cv(g,{replace:h,state:m,target:x,preventScrollReset:p,relative:c,viewTransition:b});function H(K){a&&a(K),K.defaultPrevented||q(K)}let ee=N.createElement("a",{...j,...D,href:C||B,onClick:L||u?a:H,ref:wv(w,U),target:x,"data-discover":!_&&l==="render"?"true":void 0});return z&&!_?N.createElement(N.Fragment,null,ee,N.createElement(bv,{page:B})):ee});Wn.displayName="Link";var Nv=N.forwardRef(function({"aria-current":a="page",caseSensitive:l=!1,className:i="",end:c=!1,style:u,to:h,viewTransition:m,children:x,...g},p){let b=nl(h,{relative:g.relative}),j=Kt(),w=N.useContext(Zi),{navigator:S,basename:_}=N.useContext(It),C=w!=null&&Ov(b)&&m===!0,L=S.encodeLocation?S.encodeLocation(b).pathname:b.pathname,B=j.pathname,z=w&&w.navigation&&w.navigation.location?w.navigation.location.pathname:null;l||(B=B.toLowerCase(),z=z?z.toLowerCase():null,L=L.toLowerCase()),z&&_&&(z=Es(z,_)||z);const U=L!=="/"&&L.endsWith("/")?L.length-1:L.length;let D=B===L||!c&&B.startsWith(L)&&B.charAt(U)==="/",q=z!=null&&(z===L||!c&&z.startsWith(L)&&z.charAt(L.length)==="/"),H={isActive:D,isPending:q,isTransitioning:C},ee=D?a:void 0,K;typeof i=="function"?K=i(H):K=[i,D?"active":null,q?"pending":null,C?"transitioning":null].filter(Boolean).join(" ");let te=typeof u=="function"?u(H):u;return N.createElement(Wn,{...g,"aria-current":ee,className:K,ref:p,style:te,to:h,viewTransition:m},typeof x=="function"?x(H):x)});Nv.displayName="NavLink";var Sv=N.forwardRef(({discover:n="render",fetcherKey:a,navigate:l,reloadDocument:i,replace:c,state:u,method:h=Bi,action:m,onSubmit:x,relative:g,preventScrollReset:p,viewTransition:b,...j},w)=>{let S=Tv(),_=Rv(m,{relative:g}),C=h.toLowerCase()==="get"?"get":"post",L=typeof m=="string"&&Qg.test(m),B=z=>{if(x&&x(z),z.defaultPrevented)return;z.preventDefault();let U=z.nativeEvent.submitter,D=U?.getAttribute("formmethod")||h;S(U||z.currentTarget,{fetcherKey:a,method:D,navigate:l,replace:c,state:u,relative:g,preventScrollReset:p,viewTransition:b})};return N.createElement("form",{ref:w,method:C,action:_,onSubmit:i?x:B,...j,"data-discover":!L&&n==="render"?"true":void 0})});Sv.displayName="Form";function kv(n){return`${n} must be used within a data router.  See https://reactrouter.com/en/main/routers/picking-a-router.`}function Yg(n){let a=N.useContext($r);return ze(a,kv(n)),a}function Cv(n,{target:a,replace:l,state:i,preventScrollReset:c,relative:u,viewTransition:h}={}){let m=zg(),x=Kt(),g=nl(n,{relative:u});return N.useCallback(p=>{if(nv(p,a)){p.preventDefault();let b=l!==void 0?l:Zn(x)===Zn(g);m(n,{replace:b,state:i,preventScrollReset:c,relative:u,viewTransition:h})}},[x,m,g,l,i,a,n,c,u,h])}var Ev=0,Av=()=>`__${String(++Ev)}__`;function Tv(){let{router:n}=Yg("useSubmit"),{basename:a}=N.useContext(It),l=Kb();return N.useCallback(async(i,c={})=>{let{action:u,method:h,encType:m,formData:x,body:g}=ov(i,a);if(c.navigate===!1){let p=c.fetcherKey||Av();await n.fetch(p,l,c.action||u,{preventScrollReset:c.preventScrollReset,formData:x,body:g,formMethod:c.method||h,formEncType:c.encType||m,flushSync:c.flushSync})}else await n.navigate(c.action||u,{preventScrollReset:c.preventScrollReset,formData:x,body:g,formMethod:c.method||h,formEncType:c.encType||m,replace:c.replace,state:c.state,fromRouteId:l,flushSync:c.flushSync,viewTransition:c.viewTransition})},[n,a,l])}function Rv(n,{relative:a}={}){let{basename:l}=N.useContext(It),i=N.useContext(ls);ze(i,"useFormAction must be used inside a RouteContext");let[c]=i.matches.slice(-1),u={...nl(n||".",{relative:a})},h=Kt();if(n==null){u.search=h.search;let m=new URLSearchParams(u.search),x=m.getAll("index");if(x.some(p=>p==="")){m.delete("index"),x.filter(b=>b).forEach(b=>m.append("index",b));let p=m.toString();u.search=p?`?${p}`:""}}return(!n||n===".")&&c.route.index&&(u.search=u.search?u.search.replace(/^\?/,"?index&"):"?index"),l!=="/"&&(u.pathname=u.pathname==="/"?l:Ns([l,u.pathname])),Zn(u)}function Ov(n,{relative:a}={}){let l=N.useContext(Pg);ze(l!=null,"`useViewTransitionState` must be used within `react-router-dom`'s `RouterProvider`.  Did you accidentally import `RouterProvider` from `react-router`?");let{basename:i}=Yg("useViewTransitionState"),c=nl(n,{relative:a});if(!l.isTransitioning)return!1;let u=Es(l.currentLocation.pathname,i)||l.currentLocation.pathname,h=Es(l.nextLocation.pathname,i)||l.nextLocation.pathname;return Vi(c.pathname,h)!=null||Vi(c.pathname,u)!=null}var Wi=class{constructor(){this.listeners=new Set,this.subscribe=this.subscribe.bind(this)}subscribe(n){return this.listeners.add(n),this.onSubscribe(),()=>{this.listeners.delete(n),this.onUnsubscribe()}}hasListeners(){return this.listeners.size>0}onSubscribe(){}onUnsubscribe(){}},Dv={setTimeout:(n,a)=>setTimeout(n,a),clearTimeout:n=>clearTimeout(n),setInterval:(n,a)=>setInterval(n,a),clearInterval:n=>clearInterval(n)},Mv=class{#e=Dv;#t=!1;setTimeoutProvider(n){this.#e=n}setTimeout(n,a){return this.#e.setTimeout(n,a)}clearTimeout(n){this.#e.clearTimeout(n)}setInterval(n,a){return this.#e.setInterval(n,a)}clearInterval(n){this.#e.clearInterval(n)}},Fu=new Mv;function Uv(n){setTimeout(n,0)}var eo=typeof window>"u"||"Deno"in globalThis;function Ht(){}function Pv(n,a){return typeof n=="function"?n(a):n}function Lv(n){return typeof n=="number"&&n>=0&&n!==1/0}function qv(n,a){return Math.max(n+(a||0)-Date.now(),0)}function Iu(n,a){return typeof n=="function"?n(a):n}function zv(n,a){return typeof n=="function"?n(a):n}function G0(n,a){const{type:l="all",exact:i,fetchStatus:c,predicate:u,queryKey:h,stale:m}=n;if(h){if(i){if(a.queryHash!==_d(h,a.options))return!1}else if(!tl(a.queryKey,h))return!1}if(l!=="all"){const x=a.isActive();if(l==="active"&&!x||l==="inactive"&&x)return!1}return!(typeof m=="boolean"&&a.isStale()!==m||c&&c!==a.state.fetchStatus||u&&!u(a))}function V0(n,a){const{exact:l,status:i,predicate:c,mutationKey:u}=n;if(u){if(!a.options.mutationKey)return!1;if(l){if(el(a.options.mutationKey)!==el(u))return!1}else if(!tl(a.options.mutationKey,u))return!1}return!(i&&a.state.status!==i||c&&!c(a))}function _d(n,a){return(a?.queryKeyHashFn||el)(n)}function el(n){return JSON.stringify(n,(a,l)=>Ku(l)?Object.keys(l).sort().reduce((i,c)=>(i[c]=l[c],i),{}):l)}function tl(n,a){return n===a?!0:typeof n!=typeof a?!1:n&&a&&typeof n=="object"&&typeof a=="object"?Object.keys(a).every(l=>tl(n[l],a[l])):!1}var $v=Object.prototype.hasOwnProperty;function Fg(n,a){if(n===a)return n;const l=Q0(n)&&Q0(a);if(!l&&!(Ku(n)&&Ku(a)))return a;const c=(l?n:Object.keys(n)).length,u=l?a:Object.keys(a),h=u.length,m=l?new Array(h):{};let x=0;for(let g=0;g<h;g++){const p=l?g:u[g],b=n[p],j=a[p];if(b===j){m[p]=b,(l?g<c:$v.call(n,p))&&x++;continue}if(b===null||j===null||typeof b!="object"||typeof j!="object"){m[p]=j;continue}const w=Fg(b,j);m[p]=w,w===b&&x++}return c===h&&x===c?n:m}function Q0(n){return Array.isArray(n)&&n.length===Object.keys(n).length}function Ku(n){if(!Y0(n))return!1;const a=n.constructor;if(a===void 0)return!0;const l=a.prototype;return!(!Y0(l)||!l.hasOwnProperty("isPrototypeOf")||Object.getPrototypeOf(n)!==Object.prototype)}function Y0(n){return Object.prototype.toString.call(n)==="[object Object]"}function Bv(n){return new Promise(a=>{Fu.setTimeout(a,n)})}function Hv(n,a,l){return typeof l.structuralSharing=="function"?l.structuralSharing(n,a):l.structuralSharing!==!1?Fg(n,a):a}function Gv(n,a,l=0){const i=[...n,a];return l&&i.length>l?i.slice(1):i}function Vv(n,a,l=0){const i=[a,...n];return l&&i.length>l?i.slice(0,-1):i}var Nd=Symbol();function Ig(n,a){return!n.queryFn&&a?.initialPromise?()=>a.initialPromise:!n.queryFn||n.queryFn===Nd?()=>Promise.reject(new Error(`Missing queryFn: '${n.queryHash}'`)):n.queryFn}var Qv=class extends Wi{#e;#t;#s;constructor(){super(),this.#s=n=>{if(!eo&&window.addEventListener){const a=()=>n();return window.addEventListener("visibilitychange",a,!1),()=>{window.removeEventListener("visibilitychange",a)}}}}onSubscribe(){this.#t||this.setEventListener(this.#s)}onUnsubscribe(){this.hasListeners()||(this.#t?.(),this.#t=void 0)}setEventListener(n){this.#s=n,this.#t?.(),this.#t=n(a=>{typeof a=="boolean"?this.setFocused(a):this.onFocus()})}setFocused(n){this.#e!==n&&(this.#e=n,this.onFocus())}onFocus(){const n=this.isFocused();this.listeners.forEach(a=>{a(n)})}isFocused(){return typeof this.#e=="boolean"?this.#e:globalThis.document?.visibilityState!=="hidden"}},Kg=new Qv;function Yv(){let n,a;const l=new Promise((c,u)=>{n=c,a=u});l.status="pending",l.catch(()=>{});function i(c){Object.assign(l,c),delete l.resolve,delete l.reject}return l.resolve=c=>{i({status:"fulfilled",value:c}),n(c)},l.reject=c=>{i({status:"rejected",reason:c}),a(c)},l}var Fv=Uv;function Iv(){let n=[],a=0,l=m=>{m()},i=m=>{m()},c=Fv;const u=m=>{a?n.push(m):c(()=>{l(m)})},h=()=>{const m=n;n=[],m.length&&c(()=>{i(()=>{m.forEach(x=>{l(x)})})})};return{batch:m=>{let x;a++;try{x=m()}finally{a--,a||h()}return x},batchCalls:m=>(...x)=>{u(()=>{m(...x)})},schedule:u,setNotifyFunction:m=>{l=m},setBatchNotifyFunction:m=>{i=m},setScheduler:m=>{c=m}}}var dt=Iv(),Kv=class extends Wi{#e=!0;#t;#s;constructor(){super(),this.#s=n=>{if(!eo&&window.addEventListener){const a=()=>n(!0),l=()=>n(!1);return window.addEventListener("online",a,!1),window.addEventListener("offline",l,!1),()=>{window.removeEventListener("online",a),window.removeEventListener("offline",l)}}}}onSubscribe(){this.#t||this.setEventListener(this.#s)}onUnsubscribe(){this.hasListeners()||(this.#t?.(),this.#t=void 0)}setEventListener(n){this.#s=n,this.#t?.(),this.#t=n(this.setOnline.bind(this))}setOnline(n){this.#e!==n&&(this.#e=n,this.listeners.forEach(l=>{l(n)}))}isOnline(){return this.#e}},Qi=new Kv;function Xv(n){return Math.min(1e3*2**n,3e4)}function Xg(n){return(n??"online")==="online"?Qi.isOnline():!0}var Xu=class extends Error{constructor(n){super("CancelledError"),this.revert=n?.revert,this.silent=n?.silent}};function Zg(n){let a=!1,l=0,i;const c=Yv(),u=()=>c.status!=="pending",h=_=>{if(!u()){const C=new Xu(_);j(C),n.onCancel?.(C)}},m=()=>{a=!0},x=()=>{a=!1},g=()=>Kg.isFocused()&&(n.networkMode==="always"||Qi.isOnline())&&n.canRun(),p=()=>Xg(n.networkMode)&&n.canRun(),b=_=>{u()||(i?.(),c.resolve(_))},j=_=>{u()||(i?.(),c.reject(_))},w=()=>new Promise(_=>{i=C=>{(u()||g())&&_(C)},n.onPause?.()}).then(()=>{i=void 0,u()||n.onContinue?.()}),S=()=>{if(u())return;let _;const C=l===0?n.initialPromise:void 0;try{_=C??n.fn()}catch(L){_=Promise.reject(L)}Promise.resolve(_).then(b).catch(L=>{if(u())return;const B=n.retry??(eo?0:3),z=n.retryDelay??Xv,U=typeof z=="function"?z(l,L):z,D=B===!0||typeof B=="number"&&l<B||typeof B=="function"&&B(l,L);if(a||!D){j(L);return}l++,n.onFail?.(l,L),Bv(U).then(()=>g()?void 0:w()).then(()=>{a?j(L):S()})})};return{promise:c,status:()=>c.status,cancel:h,continue:()=>(i?.(),c),cancelRetry:m,continueRetry:x,canStart:p,start:()=>(p()?S():w().then(S),c)}}var Jg=class{#e;destroy(){this.clearGcTimeout()}scheduleGc(){this.clearGcTimeout(),Lv(this.gcTime)&&(this.#e=Fu.setTimeout(()=>{this.optionalRemove()},this.gcTime))}updateGcTime(n){this.gcTime=Math.max(this.gcTime||0,n??(eo?1/0:300*1e3))}clearGcTimeout(){this.#e&&(Fu.clearTimeout(this.#e),this.#e=void 0)}},Zv=class extends Jg{#e;#t;#s;#r;#a;#l;#i;constructor(n){super(),this.#i=!1,this.#l=n.defaultOptions,this.setOptions(n.options),this.observers=[],this.#r=n.client,this.#s=this.#r.getQueryCache(),this.queryKey=n.queryKey,this.queryHash=n.queryHash,this.#e=F0(this.options),this.state=n.state??this.#e,this.scheduleGc()}get meta(){return this.options.meta}get promise(){return this.#a?.promise}setOptions(n){if(this.options={...this.#l,...n},this.updateGcTime(this.options.gcTime),this.state&&this.state.data===void 0){const a=F0(this.options);a.data!==void 0&&(this.setData(a.data,{updatedAt:a.dataUpdatedAt,manual:!0}),this.#e=a)}}optionalRemove(){!this.observers.length&&this.state.fetchStatus==="idle"&&this.#s.remove(this)}setData(n,a){const l=Hv(this.state.data,n,this.options);return this.#n({data:l,type:"success",dataUpdatedAt:a?.updatedAt,manual:a?.manual}),l}setState(n,a){this.#n({type:"setState",state:n,setStateOptions:a})}cancel(n){const a=this.#a?.promise;return this.#a?.cancel(n),a?a.then(Ht).catch(Ht):Promise.resolve()}destroy(){super.destroy(),this.cancel({silent:!0})}reset(){this.destroy(),this.setState(this.#e)}isActive(){return this.observers.some(n=>zv(n.options.enabled,this)!==!1)}isDisabled(){return this.getObserversCount()>0?!this.isActive():this.options.queryFn===Nd||this.state.dataUpdateCount+this.state.errorUpdateCount===0}isStatic(){return this.getObserversCount()>0?this.observers.some(n=>Iu(n.options.staleTime,this)==="static"):!1}isStale(){return this.getObserversCount()>0?this.observers.some(n=>n.getCurrentResult().isStale):this.state.data===void 0||this.state.isInvalidated}isStaleByTime(n=0){return this.state.data===void 0?!0:n==="static"?!1:this.state.isInvalidated?!0:!qv(this.state.dataUpdatedAt,n)}onFocus(){this.observers.find(a=>a.shouldFetchOnWindowFocus())?.refetch({cancelRefetch:!1}),this.#a?.continue()}onOnline(){this.observers.find(a=>a.shouldFetchOnReconnect())?.refetch({cancelRefetch:!1}),this.#a?.continue()}addObserver(n){this.observers.includes(n)||(this.observers.push(n),this.clearGcTimeout(),this.#s.notify({type:"observerAdded",query:this,observer:n}))}removeObserver(n){this.observers.includes(n)&&(this.observers=this.observers.filter(a=>a!==n),this.observers.length||(this.#a&&(this.#i?this.#a.cancel({revert:!0}):this.#a.cancelRetry()),this.scheduleGc()),this.#s.notify({type:"observerRemoved",query:this,observer:n}))}getObserversCount(){return this.observers.length}invalidate(){this.state.isInvalidated||this.#n({type:"invalidate"})}async fetch(n,a){if(this.state.fetchStatus!=="idle"&&this.#a?.status()!=="rejected"){if(this.state.data!==void 0&&a?.cancelRefetch)this.cancel({silent:!0});else if(this.#a)return this.#a.continueRetry(),this.#a.promise}if(n&&this.setOptions(n),!this.options.queryFn){const m=this.observers.find(x=>x.options.queryFn);m&&this.setOptions(m.options)}const l=new AbortController,i=m=>{Object.defineProperty(m,"signal",{enumerable:!0,get:()=>(this.#i=!0,l.signal)})},c=()=>{const m=Ig(this.options,a),g=(()=>{const p={client:this.#r,queryKey:this.queryKey,meta:this.meta};return i(p),p})();return this.#i=!1,this.options.persister?this.options.persister(m,g,this):m(g)},h=(()=>{const m={fetchOptions:a,options:this.options,queryKey:this.queryKey,client:this.#r,state:this.state,fetchFn:c};return i(m),m})();this.options.behavior?.onFetch(h,this),this.#t=this.state,(this.state.fetchStatus==="idle"||this.state.fetchMeta!==h.fetchOptions?.meta)&&this.#n({type:"fetch",meta:h.fetchOptions?.meta}),this.#a=Zg({initialPromise:a?.initialPromise,fn:h.fetchFn,onCancel:m=>{m instanceof Xu&&m.revert&&this.setState({...this.#t,fetchStatus:"idle"}),l.abort()},onFail:(m,x)=>{this.#n({type:"failed",failureCount:m,error:x})},onPause:()=>{this.#n({type:"pause"})},onContinue:()=>{this.#n({type:"continue"})},retry:h.options.retry,retryDelay:h.options.retryDelay,networkMode:h.options.networkMode,canRun:()=>!0});try{const m=await this.#a.start();if(m===void 0)throw new Error(`${this.queryHash} data is undefined`);return this.setData(m),this.#s.config.onSuccess?.(m,this),this.#s.config.onSettled?.(m,this.state.error,this),m}catch(m){if(m instanceof Xu){if(m.silent)return this.#a.promise;if(m.revert){if(this.state.data===void 0)throw m;return this.state.data}}throw this.#n({type:"error",error:m}),this.#s.config.onError?.(m,this),this.#s.config.onSettled?.(this.state.data,m,this),m}finally{this.scheduleGc()}}#n(n){const a=l=>{switch(n.type){case"failed":return{...l,fetchFailureCount:n.failureCount,fetchFailureReason:n.error};case"pause":return{...l,fetchStatus:"paused"};case"continue":return{...l,fetchStatus:"fetching"};case"fetch":return{...l,...Jv(l.data,this.options),fetchMeta:n.meta??null};case"success":const i={...l,data:n.data,dataUpdateCount:l.dataUpdateCount+1,dataUpdatedAt:n.dataUpdatedAt??Date.now(),error:null,isInvalidated:!1,status:"success",...!n.manual&&{fetchStatus:"idle",fetchFailureCount:0,fetchFailureReason:null}};return this.#t=n.manual?i:void 0,i;case"error":const c=n.error;return{...l,error:c,errorUpdateCount:l.errorUpdateCount+1,errorUpdatedAt:Date.now(),fetchFailureCount:l.fetchFailureCount+1,fetchFailureReason:c,fetchStatus:"idle",status:"error"};case"invalidate":return{...l,isInvalidated:!0};case"setState":return{...l,...n.state}}};this.state=a(this.state),dt.batch(()=>{this.observers.forEach(l=>{l.onQueryUpdate()}),this.#s.notify({query:this,type:"updated",action:n})})}};function Jv(n,a){return{fetchFailureCount:0,fetchFailureReason:null,fetchStatus:Xg(a.networkMode)?"fetching":"paused",...n===void 0&&{error:null,status:"pending"}}}function F0(n){const a=typeof n.initialData=="function"?n.initialData():n.initialData,l=a!==void 0,i=l?typeof n.initialDataUpdatedAt=="function"?n.initialDataUpdatedAt():n.initialDataUpdatedAt:0;return{data:a,dataUpdateCount:0,dataUpdatedAt:l?i??Date.now():0,error:null,errorUpdateCount:0,errorUpdatedAt:0,fetchFailureCount:0,fetchFailureReason:null,fetchMeta:null,isInvalidated:!1,status:l?"success":"pending",fetchStatus:"idle"}}function I0(n){return{onFetch:(a,l)=>{const i=a.options,c=a.fetchOptions?.meta?.fetchMore?.direction,u=a.state.data?.pages||[],h=a.state.data?.pageParams||[];let m={pages:[],pageParams:[]},x=0;const g=async()=>{let p=!1;const b=S=>{Object.defineProperty(S,"signal",{enumerable:!0,get:()=>(a.signal.aborted?p=!0:a.signal.addEventListener("abort",()=>{p=!0}),a.signal)})},j=Ig(a.options,a.fetchOptions),w=async(S,_,C)=>{if(p)return Promise.reject();if(_==null&&S.pages.length)return Promise.resolve(S);const B=(()=>{const q={client:a.client,queryKey:a.queryKey,pageParam:_,direction:C?"backward":"forward",meta:a.options.meta};return b(q),q})(),z=await j(B),{maxPages:U}=a.options,D=C?Vv:Gv;return{pages:D(S.pages,z,U),pageParams:D(S.pageParams,_,U)}};if(c&&u.length){const S=c==="backward",_=S?Wv:K0,C={pages:u,pageParams:h},L=_(i,C);m=await w(C,L,S)}else{const S=n??u.length;do{const _=x===0?h[0]??i.initialPageParam:K0(i,m);if(x>0&&_==null)break;m=await w(m,_),x++}while(x<S)}return m};a.options.persister?a.fetchFn=()=>a.options.persister?.(g,{client:a.client,queryKey:a.queryKey,meta:a.options.meta,signal:a.signal},l):a.fetchFn=g}}}function K0(n,{pages:a,pageParams:l}){const i=a.length-1;return a.length>0?n.getNextPageParam(a[i],a,l[i],l):void 0}function Wv(n,{pages:a,pageParams:l}){return a.length>0?n.getPreviousPageParam?.(a[0],a,l[0],l):void 0}var ej=class extends Jg{#e;#t;#s;constructor(n){super(),this.mutationId=n.mutationId,this.#t=n.mutationCache,this.#e=[],this.state=n.state||tj(),this.setOptions(n.options),this.scheduleGc()}setOptions(n){this.options=n,this.updateGcTime(this.options.gcTime)}get meta(){return this.options.meta}addObserver(n){this.#e.includes(n)||(this.#e.push(n),this.clearGcTimeout(),this.#t.notify({type:"observerAdded",mutation:this,observer:n}))}removeObserver(n){this.#e=this.#e.filter(a=>a!==n),this.scheduleGc(),this.#t.notify({type:"observerRemoved",mutation:this,observer:n})}optionalRemove(){this.#e.length||(this.state.status==="pending"?this.scheduleGc():this.#t.remove(this))}continue(){return this.#s?.continue()??this.execute(this.state.variables)}async execute(n){const a=()=>{this.#r({type:"continue"})};this.#s=Zg({fn:()=>this.options.mutationFn?this.options.mutationFn(n):Promise.reject(new Error("No mutationFn found")),onFail:(c,u)=>{this.#r({type:"failed",failureCount:c,error:u})},onPause:()=>{this.#r({type:"pause"})},onContinue:a,retry:this.options.retry??0,retryDelay:this.options.retryDelay,networkMode:this.options.networkMode,canRun:()=>this.#t.canRun(this)});const l=this.state.status==="pending",i=!this.#s.canStart();try{if(l)a();else{this.#r({type:"pending",variables:n,isPaused:i}),await this.#t.config.onMutate?.(n,this);const u=await this.options.onMutate?.(n);u!==this.state.context&&this.#r({type:"pending",context:u,variables:n,isPaused:i})}const c=await this.#s.start();return await this.#t.config.onSuccess?.(c,n,this.state.context,this),await this.options.onSuccess?.(c,n,this.state.context),await this.#t.config.onSettled?.(c,null,this.state.variables,this.state.context,this),await this.options.onSettled?.(c,null,n,this.state.context),this.#r({type:"success",data:c}),c}catch(c){try{throw await this.#t.config.onError?.(c,n,this.state.context,this),await this.options.onError?.(c,n,this.state.context),await this.#t.config.onSettled?.(void 0,c,this.state.variables,this.state.context,this),await this.options.onSettled?.(void 0,c,n,this.state.context),c}finally{this.#r({type:"error",error:c})}}finally{this.#t.runNext(this)}}#r(n){const a=l=>{switch(n.type){case"failed":return{...l,failureCount:n.failureCount,failureReason:n.error};case"pause":return{...l,isPaused:!0};case"continue":return{...l,isPaused:!1};case"pending":return{...l,context:n.context,data:void 0,failureCount:0,failureReason:null,error:null,isPaused:n.isPaused,status:"pending",variables:n.variables,submittedAt:Date.now()};case"success":return{...l,data:n.data,failureCount:0,failureReason:null,error:null,status:"success",isPaused:!1};case"error":return{...l,data:void 0,error:n.error,failureCount:l.failureCount+1,failureReason:n.error,isPaused:!1,status:"error"}}};this.state=a(this.state),dt.batch(()=>{this.#e.forEach(l=>{l.onMutationUpdate(n)}),this.#t.notify({mutation:this,type:"updated",action:n})})}};function tj(){return{context:void 0,data:void 0,error:null,failureCount:0,failureReason:null,isPaused:!1,status:"idle",variables:void 0,submittedAt:0}}var sj=class extends Wi{constructor(n={}){super(),this.config=n,this.#e=new Set,this.#t=new Map,this.#s=0}#e;#t;#s;build(n,a,l){const i=new ej({mutationCache:this,mutationId:++this.#s,options:n.defaultMutationOptions(a),state:l});return this.add(i),i}add(n){this.#e.add(n);const a=Ci(n);if(typeof a=="string"){const l=this.#t.get(a);l?l.push(n):this.#t.set(a,[n])}this.notify({type:"added",mutation:n})}remove(n){if(this.#e.delete(n)){const a=Ci(n);if(typeof a=="string"){const l=this.#t.get(a);if(l)if(l.length>1){const i=l.indexOf(n);i!==-1&&l.splice(i,1)}else l[0]===n&&this.#t.delete(a)}}this.notify({type:"removed",mutation:n})}canRun(n){const a=Ci(n);if(typeof a=="string"){const i=this.#t.get(a)?.find(c=>c.state.status==="pending");return!i||i===n}else return!0}runNext(n){const a=Ci(n);return typeof a=="string"?this.#t.get(a)?.find(i=>i!==n&&i.state.isPaused)?.continue()??Promise.resolve():Promise.resolve()}clear(){dt.batch(()=>{this.#e.forEach(n=>{this.notify({type:"removed",mutation:n})}),this.#e.clear(),this.#t.clear()})}getAll(){return Array.from(this.#e)}find(n){const a={exact:!0,...n};return this.getAll().find(l=>V0(a,l))}findAll(n={}){return this.getAll().filter(a=>V0(n,a))}notify(n){dt.batch(()=>{this.listeners.forEach(a=>{a(n)})})}resumePausedMutations(){const n=this.getAll().filter(a=>a.state.isPaused);return dt.batch(()=>Promise.all(n.map(a=>a.continue().catch(Ht))))}};function Ci(n){return n.options.scope?.id}var aj=class extends Wi{constructor(n={}){super(),this.config=n,this.#e=new Map}#e;build(n,a,l){const i=a.queryKey,c=a.queryHash??_d(i,a);let u=this.get(c);return u||(u=new Zv({client:n,queryKey:i,queryHash:c,options:n.defaultQueryOptions(a),state:l,defaultOptions:n.getQueryDefaults(i)}),this.add(u)),u}add(n){this.#e.has(n.queryHash)||(this.#e.set(n.queryHash,n),this.notify({type:"added",query:n}))}remove(n){const a=this.#e.get(n.queryHash);a&&(n.destroy(),a===n&&this.#e.delete(n.queryHash),this.notify({type:"removed",query:n}))}clear(){dt.batch(()=>{this.getAll().forEach(n=>{this.remove(n)})})}get(n){return this.#e.get(n)}getAll(){return[...this.#e.values()]}find(n){const a={exact:!0,...n};return this.getAll().find(l=>G0(a,l))}findAll(n={}){const a=this.getAll();return Object.keys(n).length>0?a.filter(l=>G0(n,l)):a}notify(n){dt.batch(()=>{this.listeners.forEach(a=>{a(n)})})}onFocus(){dt.batch(()=>{this.getAll().forEach(n=>{n.onFocus()})})}onOnline(){dt.batch(()=>{this.getAll().forEach(n=>{n.onOnline()})})}},rj=class{#e;#t;#s;#r;#a;#l;#i;#n;constructor(n={}){this.#e=n.queryCache||new aj,this.#t=n.mutationCache||new sj,this.#s=n.defaultOptions||{},this.#r=new Map,this.#a=new Map,this.#l=0}mount(){this.#l++,this.#l===1&&(this.#i=Kg.subscribe(async n=>{n&&(await this.resumePausedMutations(),this.#e.onFocus())}),this.#n=Qi.subscribe(async n=>{n&&(await this.resumePausedMutations(),this.#e.onOnline())}))}unmount(){this.#l--,this.#l===0&&(this.#i?.(),this.#i=void 0,this.#n?.(),this.#n=void 0)}isFetching(n){return this.#e.findAll({...n,fetchStatus:"fetching"}).length}isMutating(n){return this.#t.findAll({...n,status:"pending"}).length}getQueryData(n){const a=this.defaultQueryOptions({queryKey:n});return this.#e.get(a.queryHash)?.state.data}ensureQueryData(n){const a=this.defaultQueryOptions(n),l=this.#e.build(this,a),i=l.state.data;return i===void 0?this.fetchQuery(n):(n.revalidateIfStale&&l.isStaleByTime(Iu(a.staleTime,l))&&this.prefetchQuery(a),Promise.resolve(i))}getQueriesData(n){return this.#e.findAll(n).map(({queryKey:a,state:l})=>{const i=l.data;return[a,i]})}setQueryData(n,a,l){const i=this.defaultQueryOptions({queryKey:n}),u=this.#e.get(i.queryHash)?.state.data,h=Pv(a,u);if(h!==void 0)return this.#e.build(this,i).setData(h,{...l,manual:!0})}setQueriesData(n,a,l){return dt.batch(()=>this.#e.findAll(n).map(({queryKey:i})=>[i,this.setQueryData(i,a,l)]))}getQueryState(n){const a=this.defaultQueryOptions({queryKey:n});return this.#e.get(a.queryHash)?.state}removeQueries(n){const a=this.#e;dt.batch(()=>{a.findAll(n).forEach(l=>{a.remove(l)})})}resetQueries(n,a){const l=this.#e;return dt.batch(()=>(l.findAll(n).forEach(i=>{i.reset()}),this.refetchQueries({type:"active",...n},a)))}cancelQueries(n,a={}){const l={revert:!0,...a},i=dt.batch(()=>this.#e.findAll(n).map(c=>c.cancel(l)));return Promise.all(i).then(Ht).catch(Ht)}invalidateQueries(n,a={}){return dt.batch(()=>(this.#e.findAll(n).forEach(l=>{l.invalidate()}),n?.refetchType==="none"?Promise.resolve():this.refetchQueries({...n,type:n?.refetchType??n?.type??"active"},a)))}refetchQueries(n,a={}){const l={...a,cancelRefetch:a.cancelRefetch??!0},i=dt.batch(()=>this.#e.findAll(n).filter(c=>!c.isDisabled()&&!c.isStatic()).map(c=>{let u=c.fetch(void 0,l);return l.throwOnError||(u=u.catch(Ht)),c.state.fetchStatus==="paused"?Promise.resolve():u}));return Promise.all(i).then(Ht)}fetchQuery(n){const a=this.defaultQueryOptions(n);a.retry===void 0&&(a.retry=!1);const l=this.#e.build(this,a);return l.isStaleByTime(Iu(a.staleTime,l))?l.fetch(a):Promise.resolve(l.state.data)}prefetchQuery(n){return this.fetchQuery(n).then(Ht).catch(Ht)}fetchInfiniteQuery(n){return n.behavior=I0(n.pages),this.fetchQuery(n)}prefetchInfiniteQuery(n){return this.fetchInfiniteQuery(n).then(Ht).catch(Ht)}ensureInfiniteQueryData(n){return n.behavior=I0(n.pages),this.ensureQueryData(n)}resumePausedMutations(){return Qi.isOnline()?this.#t.resumePausedMutations():Promise.resolve()}getQueryCache(){return this.#e}getMutationCache(){return this.#t}getDefaultOptions(){return this.#s}setDefaultOptions(n){this.#s=n}setQueryDefaults(n,a){this.#r.set(el(n),{queryKey:n,defaultOptions:a})}getQueryDefaults(n){const a=[...this.#r.values()],l={};return a.forEach(i=>{tl(n,i.queryKey)&&Object.assign(l,i.defaultOptions)}),l}setMutationDefaults(n,a){this.#a.set(el(n),{mutationKey:n,defaultOptions:a})}getMutationDefaults(n){const a=[...this.#a.values()],l={};return a.forEach(i=>{tl(n,i.mutationKey)&&Object.assign(l,i.defaultOptions)}),l}defaultQueryOptions(n){if(n._defaulted)return n;const a={...this.#s.queries,...this.getQueryDefaults(n.queryKey),...n,_defaulted:!0};return a.queryHash||(a.queryHash=_d(a.queryKey,a)),a.refetchOnReconnect===void 0&&(a.refetchOnReconnect=a.networkMode!=="always"),a.throwOnError===void 0&&(a.throwOnError=!!a.suspense),!a.networkMode&&a.persister&&(a.networkMode="offlineFirst"),a.queryFn===Nd&&(a.enabled=!1),a}defaultMutationOptions(n){return n?._defaulted?n:{...this.#s.mutations,...n?.mutationKey&&this.getMutationDefaults(n.mutationKey),...n,_defaulted:!0}}clear(){this.#e.clear(),this.#t.clear()}},nj=N.createContext(void 0),lj=({client:n,children:a})=>(N.useEffect(()=>(n.mount(),()=>{n.unmount()}),[n]),s.jsx(nj.Provider,{value:n,children:a}));const ij="modulepreload",oj=function(n){return"/MedCure-Web-Pro/"+n},X0={},ll=function(a,l,i){let c=Promise.resolve();if(l&&l.length>0){let g=function(p){return Promise.all(p.map(b=>Promise.resolve(b).then(j=>({status:"fulfilled",value:j}),j=>({status:"rejected",reason:j}))))};var h=g;document.getElementsByTagName("link");const m=document.querySelector("meta[property=csp-nonce]"),x=m?.nonce||m?.getAttribute("nonce");c=g(l.map(p=>{if(p=oj(p),p in X0)return;X0[p]=!0;const b=p.endsWith(".css"),j=b?'[rel="stylesheet"]':"";if(document.querySelector(`link[href="${p}"]${j}`))return;const w=document.createElement("link");if(w.rel=b?"stylesheet":ij,b||(w.as="script"),w.crossOrigin="",w.href=p,x&&w.setAttribute("nonce",x),document.head.appendChild(w),b)return new Promise((S,_)=>{w.addEventListener("load",S),w.addEventListener("error",()=>_(new Error(`Unable to preload CSS for ${p}`)))})}))}function u(m){const x=new Event("vite:preloadError",{cancelable:!0});if(x.payload=m,window.dispatchEvent(x),!x.defaultPrevented)throw m}return c.then(m=>{for(const x of m||[])x.status==="rejected"&&u(x.reason);return a().catch(u)})};var cj=function(){return null},Au={exports:{}},Tu,Z0;function uj(){if(Z0)return Tu;Z0=1;var n="SECRET_DO_NOT_PASS_THIS_OR_YOU_WILL_BE_FIRED";return Tu=n,Tu}var Ru,J0;function dj(){if(J0)return Ru;J0=1;var n=uj();function a(){}function l(){}return l.resetWarningCache=a,Ru=function(){function i(h,m,x,g,p,b){if(b!==n){var j=new Error("Calling PropTypes validators directly is not supported by the `prop-types` package. Use PropTypes.checkPropTypes() to call them. Read more at http://fb.me/use-check-prop-types");throw j.name="Invariant Violation",j}}i.isRequired=i;function c(){return i}var u={array:i,bigint:i,bool:i,func:i,number:i,object:i,string:i,symbol:i,any:i,arrayOf:c,element:i,elementType:i,instanceOf:c,node:i,objectOf:c,oneOf:c,oneOfType:c,shape:c,exact:c,checkPropTypes:l,resetWarningCache:a};return u.PropTypes=u,u},Ru}var W0;function hj(){return W0||(W0=1,Au.exports=dj()()),Au.exports}var fj=hj();const Zu=md(fj),Wg=N.createContext({}),mj=n=>{let a;return n?a=n:typeof fetch>"u"?a=(...l)=>ll(async()=>{const{default:i}=await Promise.resolve().then(()=>Hr);return{default:i}},[]).then(({default:i})=>i(...l)):a=fetch,(...l)=>a(...l)};class Sd extends Error{constructor(a,l="FunctionsError",i){super(a),this.name=l,this.context=i}}class gj extends Sd{constructor(a){super("Failed to send a request to the Edge Function","FunctionsFetchError",a)}}class eg extends Sd{constructor(a){super("Relay Error invoking the Edge Function","FunctionsRelayError",a)}}class tg extends Sd{constructor(a){super("Edge Function returned a non-2xx status code","FunctionsHttpError",a)}}var Ju;(function(n){n.Any="any",n.ApNortheast1="ap-northeast-1",n.ApNortheast2="ap-northeast-2",n.ApSouth1="ap-south-1",n.ApSoutheast1="ap-southeast-1",n.ApSoutheast2="ap-southeast-2",n.CaCentral1="ca-central-1",n.EuCentral1="eu-central-1",n.EuWest1="eu-west-1",n.EuWest2="eu-west-2",n.EuWest3="eu-west-3",n.SaEast1="sa-east-1",n.UsEast1="us-east-1",n.UsWest1="us-west-1",n.UsWest2="us-west-2"})(Ju||(Ju={}));var xj=function(n,a,l,i){function c(u){return u instanceof l?u:new l(function(h){h(u)})}return new(l||(l=Promise))(function(u,h){function m(p){try{g(i.next(p))}catch(b){h(b)}}function x(p){try{g(i.throw(p))}catch(b){h(b)}}function g(p){p.done?u(p.value):c(p.value).then(m,x)}g((i=i.apply(n,a||[])).next())})};class pj{constructor(a,{headers:l={},customFetch:i,region:c=Ju.Any}={}){this.url=a,this.headers=l,this.region=c,this.fetch=mj(i)}setAuth(a){this.headers.Authorization=`Bearer ${a}`}invoke(a,l={}){var i;return xj(this,void 0,void 0,function*(){try{const{headers:c,method:u,body:h}=l;let m={},{region:x}=l;x||(x=this.region);const g=new URL(`${this.url}/${a}`);x&&x!=="any"&&(m["x-region"]=x,g.searchParams.set("forceFunctionRegion",x));let p;h&&(c&&!Object.prototype.hasOwnProperty.call(c,"Content-Type")||!c)&&(typeof Blob<"u"&&h instanceof Blob||h instanceof ArrayBuffer?(m["Content-Type"]="application/octet-stream",p=h):typeof h=="string"?(m["Content-Type"]="text/plain",p=h):typeof FormData<"u"&&h instanceof FormData?p=h:(m["Content-Type"]="application/json",p=JSON.stringify(h)));const b=yield this.fetch(g.toString(),{method:u||"POST",headers:Object.assign(Object.assign(Object.assign({},m),this.headers),c),body:p}).catch(_=>{throw new gj(_)}),j=b.headers.get("x-relay-error");if(j&&j==="true")throw new eg(b);if(!b.ok)throw new tg(b);let w=((i=b.headers.get("Content-Type"))!==null&&i!==void 0?i:"text/plain").split(";")[0].trim(),S;return w==="application/json"?S=yield b.json():w==="application/octet-stream"?S=yield b.blob():w==="text/event-stream"?S=b:w==="multipart/form-data"?S=yield b.formData():S=yield b.text(),{data:S,error:null,response:b}}catch(c){return{data:null,error:c,response:c instanceof tg||c instanceof eg?c.context:void 0}}})}}var tt={},jr={},wr={},_r={},Nr={},Sr={},yj=function(){if(typeof self<"u")return self;if(typeof window<"u")return window;if(typeof global<"u")return global;throw new Error("unable to locate global object")},Pr=yj();const bj=Pr.fetch,ex=Pr.fetch.bind(Pr),tx=Pr.Headers,vj=Pr.Request,jj=Pr.Response,Hr=Object.freeze(Object.defineProperty({__proto__:null,Headers:tx,Request:vj,Response:jj,default:ex,fetch:bj},Symbol.toStringTag,{value:"Module"})),wj=eb(Hr);var Ei={},sg;function sx(){if(sg)return Ei;sg=1,Object.defineProperty(Ei,"__esModule",{value:!0});class n extends Error{constructor(l){super(l.message),this.name="PostgrestError",this.details=l.details,this.hint=l.hint,this.code=l.code}}return Ei.default=n,Ei}var ag;function ax(){if(ag)return Sr;ag=1;var n=Sr&&Sr.__importDefault||function(c){return c&&c.__esModule?c:{default:c}};Object.defineProperty(Sr,"__esModule",{value:!0});const a=n(wj),l=n(sx());class i{constructor(u){var h,m;this.shouldThrowOnError=!1,this.method=u.method,this.url=u.url,this.headers=new Headers(u.headers),this.schema=u.schema,this.body=u.body,this.shouldThrowOnError=(h=u.shouldThrowOnError)!==null&&h!==void 0?h:!1,this.signal=u.signal,this.isMaybeSingle=(m=u.isMaybeSingle)!==null&&m!==void 0?m:!1,u.fetch?this.fetch=u.fetch:typeof fetch>"u"?this.fetch=a.default:this.fetch=fetch}throwOnError(){return this.shouldThrowOnError=!0,this}setHeader(u,h){return this.headers=new Headers(this.headers),this.headers.set(u,h),this}then(u,h){this.schema===void 0||(["GET","HEAD"].includes(this.method)?this.headers.set("Accept-Profile",this.schema):this.headers.set("Content-Profile",this.schema)),this.method!=="GET"&&this.method!=="HEAD"&&this.headers.set("Content-Type","application/json");const m=this.fetch;let x=m(this.url.toString(),{method:this.method,headers:this.headers,body:JSON.stringify(this.body),signal:this.signal}).then(async g=>{var p,b,j,w;let S=null,_=null,C=null,L=g.status,B=g.statusText;if(g.ok){if(this.method!=="HEAD"){const q=await g.text();q===""||(this.headers.get("Accept")==="text/csv"||this.headers.get("Accept")&&(!((p=this.headers.get("Accept"))===null||p===void 0)&&p.includes("application/vnd.pgrst.plan+text"))?_=q:_=JSON.parse(q))}const U=(b=this.headers.get("Prefer"))===null||b===void 0?void 0:b.match(/count=(exact|planned|estimated)/),D=(j=g.headers.get("content-range"))===null||j===void 0?void 0:j.split("/");U&&D&&D.length>1&&(C=parseInt(D[1])),this.isMaybeSingle&&this.method==="GET"&&Array.isArray(_)&&(_.length>1?(S={code:"PGRST116",details:`Results contain ${_.length} rows, application/vnd.pgrst.object+json requires 1 row`,hint:null,message:"JSON object requested, multiple (or no) rows returned"},_=null,C=null,L=406,B="Not Acceptable"):_.length===1?_=_[0]:_=null)}else{const U=await g.text();try{S=JSON.parse(U),Array.isArray(S)&&g.status===404&&(_=[],S=null,L=200,B="OK")}catch{g.status===404&&U===""?(L=204,B="No Content"):S={message:U}}if(S&&this.isMaybeSingle&&(!((w=S?.details)===null||w===void 0)&&w.includes("0 rows"))&&(S=null,L=200,B="OK"),S&&this.shouldThrowOnError)throw new l.default(S)}return{error:S,data:_,count:C,status:L,statusText:B}});return this.shouldThrowOnError||(x=x.catch(g=>{var p,b,j;return{error:{message:`${(p=g?.name)!==null&&p!==void 0?p:"FetchError"}: ${g?.message}`,details:`${(b=g?.stack)!==null&&b!==void 0?b:""}`,hint:"",code:`${(j=g?.code)!==null&&j!==void 0?j:""}`},data:null,count:null,status:0,statusText:""}})),x.then(u,h)}returns(){return this}overrideTypes(){return this}}return Sr.default=i,Sr}var rg;function rx(){if(rg)return Nr;rg=1;var n=Nr&&Nr.__importDefault||function(i){return i&&i.__esModule?i:{default:i}};Object.defineProperty(Nr,"__esModule",{value:!0});const a=n(ax());class l extends a.default{select(c){let u=!1;const h=(c??"*").split("").map(m=>/\s/.test(m)&&!u?"":(m==='"'&&(u=!u),m)).join("");return this.url.searchParams.set("select",h),this.headers.append("Prefer","return=representation"),this}order(c,{ascending:u=!0,nullsFirst:h,foreignTable:m,referencedTable:x=m}={}){const g=x?`${x}.order`:"order",p=this.url.searchParams.get(g);return this.url.searchParams.set(g,`${p?`${p},`:""}${c}.${u?"asc":"desc"}${h===void 0?"":h?".nullsfirst":".nullslast"}`),this}limit(c,{foreignTable:u,referencedTable:h=u}={}){const m=typeof h>"u"?"limit":`${h}.limit`;return this.url.searchParams.set(m,`${c}`),this}range(c,u,{foreignTable:h,referencedTable:m=h}={}){const x=typeof m>"u"?"offset":`${m}.offset`,g=typeof m>"u"?"limit":`${m}.limit`;return this.url.searchParams.set(x,`${c}`),this.url.searchParams.set(g,`${u-c+1}`),this}abortSignal(c){return this.signal=c,this}single(){return this.headers.set("Accept","application/vnd.pgrst.object+json"),this}maybeSingle(){return this.method==="GET"?this.headers.set("Accept","application/json"):this.headers.set("Accept","application/vnd.pgrst.object+json"),this.isMaybeSingle=!0,this}csv(){return this.headers.set("Accept","text/csv"),this}geojson(){return this.headers.set("Accept","application/geo+json"),this}explain({analyze:c=!1,verbose:u=!1,settings:h=!1,buffers:m=!1,wal:x=!1,format:g="text"}={}){var p;const b=[c?"analyze":null,u?"verbose":null,h?"settings":null,m?"buffers":null,x?"wal":null].filter(Boolean).join("|"),j=(p=this.headers.get("Accept"))!==null&&p!==void 0?p:"application/json";return this.headers.set("Accept",`application/vnd.pgrst.plan+${g}; for="${j}"; options=${b};`),g==="json"?this:this}rollback(){return this.headers.append("Prefer","tx=rollback"),this}returns(){return this}maxAffected(c){return this.headers.append("Prefer","handling=strict"),this.headers.append("Prefer",`max-affected=${c}`),this}}return Nr.default=l,Nr}var ng;function kd(){if(ng)return _r;ng=1;var n=_r&&_r.__importDefault||function(i){return i&&i.__esModule?i:{default:i}};Object.defineProperty(_r,"__esModule",{value:!0});const a=n(rx());class l extends a.default{eq(c,u){return this.url.searchParams.append(c,`eq.${u}`),this}neq(c,u){return this.url.searchParams.append(c,`neq.${u}`),this}gt(c,u){return this.url.searchParams.append(c,`gt.${u}`),this}gte(c,u){return this.url.searchParams.append(c,`gte.${u}`),this}lt(c,u){return this.url.searchParams.append(c,`lt.${u}`),this}lte(c,u){return this.url.searchParams.append(c,`lte.${u}`),this}like(c,u){return this.url.searchParams.append(c,`like.${u}`),this}likeAllOf(c,u){return this.url.searchParams.append(c,`like(all).{${u.join(",")}}`),this}likeAnyOf(c,u){return this.url.searchParams.append(c,`like(any).{${u.join(",")}}`),this}ilike(c,u){return this.url.searchParams.append(c,`ilike.${u}`),this}ilikeAllOf(c,u){return this.url.searchParams.append(c,`ilike(all).{${u.join(",")}}`),this}ilikeAnyOf(c,u){return this.url.searchParams.append(c,`ilike(any).{${u.join(",")}}`),this}is(c,u){return this.url.searchParams.append(c,`is.${u}`),this}in(c,u){const h=Array.from(new Set(u)).map(m=>typeof m=="string"&&new RegExp("[,()]").test(m)?`"${m}"`:`${m}`).join(",");return this.url.searchParams.append(c,`in.(${h})`),this}contains(c,u){return typeof u=="string"?this.url.searchParams.append(c,`cs.${u}`):Array.isArray(u)?this.url.searchParams.append(c,`cs.{${u.join(",")}}`):this.url.searchParams.append(c,`cs.${JSON.stringify(u)}`),this}containedBy(c,u){return typeof u=="string"?this.url.searchParams.append(c,`cd.${u}`):Array.isArray(u)?this.url.searchParams.append(c,`cd.{${u.join(",")}}`):this.url.searchParams.append(c,`cd.${JSON.stringify(u)}`),this}rangeGt(c,u){return this.url.searchParams.append(c,`sr.${u}`),this}rangeGte(c,u){return this.url.searchParams.append(c,`nxl.${u}`),this}rangeLt(c,u){return this.url.searchParams.append(c,`sl.${u}`),this}rangeLte(c,u){return this.url.searchParams.append(c,`nxr.${u}`),this}rangeAdjacent(c,u){return this.url.searchParams.append(c,`adj.${u}`),this}overlaps(c,u){return typeof u=="string"?this.url.searchParams.append(c,`ov.${u}`):this.url.searchParams.append(c,`ov.{${u.join(",")}}`),this}textSearch(c,u,{config:h,type:m}={}){let x="";m==="plain"?x="pl":m==="phrase"?x="ph":m==="websearch"&&(x="w");const g=h===void 0?"":`(${h})`;return this.url.searchParams.append(c,`${x}fts${g}.${u}`),this}match(c){return Object.entries(c).forEach(([u,h])=>{this.url.searchParams.append(u,`eq.${h}`)}),this}not(c,u,h){return this.url.searchParams.append(c,`not.${u}.${h}`),this}or(c,{foreignTable:u,referencedTable:h=u}={}){const m=h?`${h}.or`:"or";return this.url.searchParams.append(m,`(${c})`),this}filter(c,u,h){return this.url.searchParams.append(c,`${u}.${h}`),this}}return _r.default=l,_r}var lg;function nx(){if(lg)return wr;lg=1;var n=wr&&wr.__importDefault||function(i){return i&&i.__esModule?i:{default:i}};Object.defineProperty(wr,"__esModule",{value:!0});const a=n(kd());class l{constructor(c,{headers:u={},schema:h,fetch:m}){this.url=c,this.headers=new Headers(u),this.schema=h,this.fetch=m}select(c,{head:u=!1,count:h}={}){const m=u?"HEAD":"GET";let x=!1;const g=(c??"*").split("").map(p=>/\s/.test(p)&&!x?"":(p==='"'&&(x=!x),p)).join("");return this.url.searchParams.set("select",g),h&&this.headers.append("Prefer",`count=${h}`),new a.default({method:m,url:this.url,headers:this.headers,schema:this.schema,fetch:this.fetch})}insert(c,{count:u,defaultToNull:h=!0}={}){var m;const x="POST";if(u&&this.headers.append("Prefer",`count=${u}`),h||this.headers.append("Prefer","missing=default"),Array.isArray(c)){const g=c.reduce((p,b)=>p.concat(Object.keys(b)),[]);if(g.length>0){const p=[...new Set(g)].map(b=>`"${b}"`);this.url.searchParams.set("columns",p.join(","))}}return new a.default({method:x,url:this.url,headers:this.headers,schema:this.schema,body:c,fetch:(m=this.fetch)!==null&&m!==void 0?m:fetch})}upsert(c,{onConflict:u,ignoreDuplicates:h=!1,count:m,defaultToNull:x=!0}={}){var g;const p="POST";if(this.headers.append("Prefer",`resolution=${h?"ignore":"merge"}-duplicates`),u!==void 0&&this.url.searchParams.set("on_conflict",u),m&&this.headers.append("Prefer",`count=${m}`),x||this.headers.append("Prefer","missing=default"),Array.isArray(c)){const b=c.reduce((j,w)=>j.concat(Object.keys(w)),[]);if(b.length>0){const j=[...new Set(b)].map(w=>`"${w}"`);this.url.searchParams.set("columns",j.join(","))}}return new a.default({method:p,url:this.url,headers:this.headers,schema:this.schema,body:c,fetch:(g=this.fetch)!==null&&g!==void 0?g:fetch})}update(c,{count:u}={}){var h;const m="PATCH";return u&&this.headers.append("Prefer",`count=${u}`),new a.default({method:m,url:this.url,headers:this.headers,schema:this.schema,body:c,fetch:(h=this.fetch)!==null&&h!==void 0?h:fetch})}delete({count:c}={}){var u;const h="DELETE";return c&&this.headers.append("Prefer",`count=${c}`),new a.default({method:h,url:this.url,headers:this.headers,schema:this.schema,fetch:(u=this.fetch)!==null&&u!==void 0?u:fetch})}}return wr.default=l,wr}var ig;function _j(){if(ig)return jr;ig=1;var n=jr&&jr.__importDefault||function(c){return c&&c.__esModule?c:{default:c}};Object.defineProperty(jr,"__esModule",{value:!0});const a=n(nx()),l=n(kd());class i{constructor(u,{headers:h={},schema:m,fetch:x}={}){this.url=u,this.headers=new Headers(h),this.schemaName=m,this.fetch=x}from(u){const h=new URL(`${this.url}/${u}`);return new a.default(h,{headers:new Headers(this.headers),schema:this.schemaName,fetch:this.fetch})}schema(u){return new i(this.url,{headers:this.headers,schema:u,fetch:this.fetch})}rpc(u,h={},{head:m=!1,get:x=!1,count:g}={}){var p;let b;const j=new URL(`${this.url}/rpc/${u}`);let w;m||x?(b=m?"HEAD":"GET",Object.entries(h).filter(([_,C])=>C!==void 0).map(([_,C])=>[_,Array.isArray(C)?`{${C.join(",")}}`:`${C}`]).forEach(([_,C])=>{j.searchParams.append(_,C)})):(b="POST",w=h);const S=new Headers(this.headers);return g&&S.set("Prefer",`count=${g}`),new l.default({method:b,url:j,headers:S,schema:this.schemaName,body:w,fetch:(p=this.fetch)!==null&&p!==void 0?p:fetch})}}return jr.default=i,jr}var og;function Nj(){if(og)return tt;og=1;var n=tt&&tt.__importDefault||function(m){return m&&m.__esModule?m:{default:m}};Object.defineProperty(tt,"__esModule",{value:!0}),tt.PostgrestError=tt.PostgrestBuilder=tt.PostgrestTransformBuilder=tt.PostgrestFilterBuilder=tt.PostgrestQueryBuilder=tt.PostgrestClient=void 0;const a=n(_j());tt.PostgrestClient=a.default;const l=n(nx());tt.PostgrestQueryBuilder=l.default;const i=n(kd());tt.PostgrestFilterBuilder=i.default;const c=n(rx());tt.PostgrestTransformBuilder=c.default;const u=n(ax());tt.PostgrestBuilder=u.default;const h=n(sx());return tt.PostgrestError=h.default,tt.default={PostgrestClient:a.default,PostgrestQueryBuilder:l.default,PostgrestFilterBuilder:i.default,PostgrestTransformBuilder:c.default,PostgrestBuilder:u.default,PostgrestError:h.default},tt}var Sj=Nj();const kj=md(Sj),{PostgrestClient:Cj,PostgrestQueryBuilder:EN,PostgrestFilterBuilder:AN,PostgrestTransformBuilder:TN,PostgrestBuilder:RN,PostgrestError:ON}=kj;class Ej{static detectEnvironment(){var a;if(typeof WebSocket<"u")return{type:"native",constructor:WebSocket};if(typeof globalThis<"u"&&typeof globalThis.WebSocket<"u")return{type:"native",constructor:globalThis.WebSocket};if(typeof global<"u"&&typeof global.WebSocket<"u")return{type:"native",constructor:global.WebSocket};if(typeof globalThis<"u"&&typeof globalThis.WebSocketPair<"u"&&typeof globalThis.WebSocket>"u")return{type:"cloudflare",error:"Cloudflare Workers detected. WebSocket clients are not supported in Cloudflare Workers.",workaround:"Use Cloudflare Workers WebSocket API for server-side WebSocket handling, or deploy to a different runtime."};if(typeof globalThis<"u"&&globalThis.EdgeRuntime||typeof navigator<"u"&&(!((a=navigator.userAgent)===null||a===void 0)&&a.includes("Vercel-Edge")))return{type:"unsupported",error:"Edge runtime detected (Vercel Edge/Netlify Edge). WebSockets are not supported in edge functions.",workaround:"Use serverless functions or a different deployment target for WebSocket functionality."};if(typeof process<"u"){const l=process.versions;if(l&&l.node){const i=l.node,c=parseInt(i.replace(/^v/,"").split(".")[0]);return c>=22?typeof globalThis.WebSocket<"u"?{type:"native",constructor:globalThis.WebSocket}:{type:"unsupported",error:`Node.js ${c} detected but native WebSocket not found.`,workaround:"Provide a WebSocket implementation via the transport option."}:{type:"unsupported",error:`Node.js ${c} detected without native WebSocket support.`,workaround:`For Node.js < 22, install "ws" package and provide it via the transport option:
import ws from "ws"
new RealtimeClient(url, { transport: ws })`}}}return{type:"unsupported",error:"Unknown JavaScript runtime without WebSocket support.",workaround:"Ensure you're running in a supported environment (browser, Node.js, Deno) or provide a custom WebSocket implementation."}}static getWebSocketConstructor(){const a=this.detectEnvironment();if(a.constructor)return a.constructor;let l=a.error||"WebSocket not supported in this environment.";throw a.workaround&&(l+=`

Suggested solution: ${a.workaround}`),new Error(l)}static createWebSocket(a,l){const i=this.getWebSocketConstructor();return new i(a,l)}static isWebSocketSupported(){try{const a=this.detectEnvironment();return a.type==="native"||a.type==="ws"}catch{return!1}}}const Aj="2.15.5",Tj=`realtime-js/${Aj}`,Rj="1.0.0",Wu=1e4,Oj=1e3,Dj=100;var Fn;(function(n){n[n.connecting=0]="connecting",n[n.open=1]="open",n[n.closing=2]="closing",n[n.closed=3]="closed"})(Fn||(Fn={}));var Ke;(function(n){n.closed="closed",n.errored="errored",n.joined="joined",n.joining="joining",n.leaving="leaving"})(Ke||(Ke={}));var Gt;(function(n){n.close="phx_close",n.error="phx_error",n.join="phx_join",n.reply="phx_reply",n.leave="phx_leave",n.access_token="access_token"})(Gt||(Gt={}));var ed;(function(n){n.websocket="websocket"})(ed||(ed={}));var Ra;(function(n){n.Connecting="connecting",n.Open="open",n.Closing="closing",n.Closed="closed"})(Ra||(Ra={}));class Mj{constructor(){this.HEADER_LENGTH=1}decode(a,l){return a.constructor===ArrayBuffer?l(this._binaryDecode(a)):l(typeof a=="string"?JSON.parse(a):{})}_binaryDecode(a){const l=new DataView(a),i=new TextDecoder;return this._decodeBroadcast(a,l,i)}_decodeBroadcast(a,l,i){const c=l.getUint8(1),u=l.getUint8(2);let h=this.HEADER_LENGTH+2;const m=i.decode(a.slice(h,h+c));h=h+c;const x=i.decode(a.slice(h,h+u));h=h+u;const g=JSON.parse(i.decode(a.slice(h,a.byteLength)));return{ref:null,topic:m,event:x,payload:g}}}class lx{constructor(a,l){this.callback=a,this.timerCalc=l,this.timer=void 0,this.tries=0,this.callback=a,this.timerCalc=l}reset(){this.tries=0,clearTimeout(this.timer),this.timer=void 0}scheduleTimeout(){clearTimeout(this.timer),this.timer=setTimeout(()=>{this.tries=this.tries+1,this.callback()},this.timerCalc(this.tries+1))}}var Pe;(function(n){n.abstime="abstime",n.bool="bool",n.date="date",n.daterange="daterange",n.float4="float4",n.float8="float8",n.int2="int2",n.int4="int4",n.int4range="int4range",n.int8="int8",n.int8range="int8range",n.json="json",n.jsonb="jsonb",n.money="money",n.numeric="numeric",n.oid="oid",n.reltime="reltime",n.text="text",n.time="time",n.timestamp="timestamp",n.timestamptz="timestamptz",n.timetz="timetz",n.tsrange="tsrange",n.tstzrange="tstzrange"})(Pe||(Pe={}));const cg=(n,a,l={})=>{var i;const c=(i=l.skipTypes)!==null&&i!==void 0?i:[];return Object.keys(a).reduce((u,h)=>(u[h]=Uj(h,n,a,c),u),{})},Uj=(n,a,l,i)=>{const c=a.find(m=>m.name===n),u=c?.type,h=l[n];return u&&!i.includes(u)?ix(u,h):td(h)},ix=(n,a)=>{if(n.charAt(0)==="_"){const l=n.slice(1,n.length);return zj(a,l)}switch(n){case Pe.bool:return Pj(a);case Pe.float4:case Pe.float8:case Pe.int2:case Pe.int4:case Pe.int8:case Pe.numeric:case Pe.oid:return Lj(a);case Pe.json:case Pe.jsonb:return qj(a);case Pe.timestamp:return $j(a);case Pe.abstime:case Pe.date:case Pe.daterange:case Pe.int4range:case Pe.int8range:case Pe.money:case Pe.reltime:case Pe.text:case Pe.time:case Pe.timestamptz:case Pe.timetz:case Pe.tsrange:case Pe.tstzrange:return td(a);default:return td(a)}},td=n=>n,Pj=n=>{switch(n){case"t":return!0;case"f":return!1;default:return n}},Lj=n=>{if(typeof n=="string"){const a=parseFloat(n);if(!Number.isNaN(a))return a}return n},qj=n=>{if(typeof n=="string")try{return JSON.parse(n)}catch(a){return console.log(`JSON parse error: ${a}`),n}return n},zj=(n,a)=>{if(typeof n!="string")return n;const l=n.length-1,i=n[l];if(n[0]==="{"&&i==="}"){let u;const h=n.slice(1,l);try{u=JSON.parse("["+h+"]")}catch{u=h?h.split(","):[]}return u.map(m=>ix(a,m))}return n},$j=n=>typeof n=="string"?n.replace(" ","T"):n,ox=n=>{let a=n;return a=a.replace(/^ws/i,"http"),a=a.replace(/(\/socket\/websocket|\/socket|\/websocket)\/?$/i,""),a.replace(/\/+$/,"")+"/api/broadcast"};class Ou{constructor(a,l,i={},c=Wu){this.channel=a,this.event=l,this.payload=i,this.timeout=c,this.sent=!1,this.timeoutTimer=void 0,this.ref="",this.receivedResp=null,this.recHooks=[],this.refEvent=null}resend(a){this.timeout=a,this._cancelRefEvent(),this.ref="",this.refEvent=null,this.receivedResp=null,this.sent=!1,this.send()}send(){this._hasReceived("timeout")||(this.startTimeout(),this.sent=!0,this.channel.socket.push({topic:this.channel.topic,event:this.event,payload:this.payload,ref:this.ref,join_ref:this.channel._joinRef()}))}updatePayload(a){this.payload=Object.assign(Object.assign({},this.payload),a)}receive(a,l){var i;return this._hasReceived(a)&&l((i=this.receivedResp)===null||i===void 0?void 0:i.response),this.recHooks.push({status:a,callback:l}),this}startTimeout(){if(this.timeoutTimer)return;this.ref=this.channel.socket._makeRef(),this.refEvent=this.channel._replyEventName(this.ref);const a=l=>{this._cancelRefEvent(),this._cancelTimeout(),this.receivedResp=l,this._matchReceive(l)};this.channel._on(this.refEvent,{},a),this.timeoutTimer=setTimeout(()=>{this.trigger("timeout",{})},this.timeout)}trigger(a,l){this.refEvent&&this.channel._trigger(this.refEvent,{status:a,response:l})}destroy(){this._cancelRefEvent(),this._cancelTimeout()}_cancelRefEvent(){this.refEvent&&this.channel._off(this.refEvent,{})}_cancelTimeout(){clearTimeout(this.timeoutTimer),this.timeoutTimer=void 0}_matchReceive({status:a,response:l}){this.recHooks.filter(i=>i.status===a).forEach(i=>i.callback(l))}_hasReceived(a){return this.receivedResp&&this.receivedResp.status===a}}var ug;(function(n){n.SYNC="sync",n.JOIN="join",n.LEAVE="leave"})(ug||(ug={}));class In{constructor(a,l){this.channel=a,this.state={},this.pendingDiffs=[],this.joinRef=null,this.enabled=!1,this.caller={onJoin:()=>{},onLeave:()=>{},onSync:()=>{}};const i=l?.events||{state:"presence_state",diff:"presence_diff"};this.channel._on(i.state,{},c=>{const{onJoin:u,onLeave:h,onSync:m}=this.caller;this.joinRef=this.channel._joinRef(),this.state=In.syncState(this.state,c,u,h),this.pendingDiffs.forEach(x=>{this.state=In.syncDiff(this.state,x,u,h)}),this.pendingDiffs=[],m()}),this.channel._on(i.diff,{},c=>{const{onJoin:u,onLeave:h,onSync:m}=this.caller;this.inPendingSyncState()?this.pendingDiffs.push(c):(this.state=In.syncDiff(this.state,c,u,h),m())}),this.onJoin((c,u,h)=>{this.channel._trigger("presence",{event:"join",key:c,currentPresences:u,newPresences:h})}),this.onLeave((c,u,h)=>{this.channel._trigger("presence",{event:"leave",key:c,currentPresences:u,leftPresences:h})}),this.onSync(()=>{this.channel._trigger("presence",{event:"sync"})})}static syncState(a,l,i,c){const u=this.cloneDeep(a),h=this.transformState(l),m={},x={};return this.map(u,(g,p)=>{h[g]||(x[g]=p)}),this.map(h,(g,p)=>{const b=u[g];if(b){const j=p.map(C=>C.presence_ref),w=b.map(C=>C.presence_ref),S=p.filter(C=>w.indexOf(C.presence_ref)<0),_=b.filter(C=>j.indexOf(C.presence_ref)<0);S.length>0&&(m[g]=S),_.length>0&&(x[g]=_)}else m[g]=p}),this.syncDiff(u,{joins:m,leaves:x},i,c)}static syncDiff(a,l,i,c){const{joins:u,leaves:h}={joins:this.transformState(l.joins),leaves:this.transformState(l.leaves)};return i||(i=()=>{}),c||(c=()=>{}),this.map(u,(m,x)=>{var g;const p=(g=a[m])!==null&&g!==void 0?g:[];if(a[m]=this.cloneDeep(x),p.length>0){const b=a[m].map(w=>w.presence_ref),j=p.filter(w=>b.indexOf(w.presence_ref)<0);a[m].unshift(...j)}i(m,p,x)}),this.map(h,(m,x)=>{let g=a[m];if(!g)return;const p=x.map(b=>b.presence_ref);g=g.filter(b=>p.indexOf(b.presence_ref)<0),a[m]=g,c(m,g,x),g.length===0&&delete a[m]}),a}static map(a,l){return Object.getOwnPropertyNames(a).map(i=>l(i,a[i]))}static transformState(a){return a=this.cloneDeep(a),Object.getOwnPropertyNames(a).reduce((l,i)=>{const c=a[i];return"metas"in c?l[i]=c.metas.map(u=>(u.presence_ref=u.phx_ref,delete u.phx_ref,delete u.phx_ref_prev,u)):l[i]=c,l},{})}static cloneDeep(a){return JSON.parse(JSON.stringify(a))}onJoin(a){this.caller.onJoin=a}onLeave(a){this.caller.onLeave=a}onSync(a){this.caller.onSync=a}inPendingSyncState(){return!this.joinRef||this.joinRef!==this.channel._joinRef()}}var dg;(function(n){n.ALL="*",n.INSERT="INSERT",n.UPDATE="UPDATE",n.DELETE="DELETE"})(dg||(dg={}));var Kn;(function(n){n.BROADCAST="broadcast",n.PRESENCE="presence",n.POSTGRES_CHANGES="postgres_changes",n.SYSTEM="system"})(Kn||(Kn={}));var _s;(function(n){n.SUBSCRIBED="SUBSCRIBED",n.TIMED_OUT="TIMED_OUT",n.CLOSED="CLOSED",n.CHANNEL_ERROR="CHANNEL_ERROR"})(_s||(_s={}));class Cd{constructor(a,l={config:{}},i){this.topic=a,this.params=l,this.socket=i,this.bindings={},this.state=Ke.closed,this.joinedOnce=!1,this.pushBuffer=[],this.subTopic=a.replace(/^realtime:/i,""),this.params.config=Object.assign({broadcast:{ack:!1,self:!1},presence:{key:"",enabled:!1},private:!1},l.config),this.timeout=this.socket.timeout,this.joinPush=new Ou(this,Gt.join,this.params,this.timeout),this.rejoinTimer=new lx(()=>this._rejoinUntilConnected(),this.socket.reconnectAfterMs),this.joinPush.receive("ok",()=>{this.state=Ke.joined,this.rejoinTimer.reset(),this.pushBuffer.forEach(c=>c.send()),this.pushBuffer=[]}),this._onClose(()=>{this.rejoinTimer.reset(),this.socket.log("channel",`close ${this.topic} ${this._joinRef()}`),this.state=Ke.closed,this.socket._remove(this)}),this._onError(c=>{this._isLeaving()||this._isClosed()||(this.socket.log("channel",`error ${this.topic}`,c),this.state=Ke.errored,this.rejoinTimer.scheduleTimeout())}),this.joinPush.receive("timeout",()=>{this._isJoining()&&(this.socket.log("channel",`timeout ${this.topic}`,this.joinPush.timeout),this.state=Ke.errored,this.rejoinTimer.scheduleTimeout())}),this.joinPush.receive("error",c=>{this._isLeaving()||this._isClosed()||(this.socket.log("channel",`error ${this.topic}`,c),this.state=Ke.errored,this.rejoinTimer.scheduleTimeout())}),this._on(Gt.reply,{},(c,u)=>{this._trigger(this._replyEventName(u),c)}),this.presence=new In(this),this.broadcastEndpointURL=ox(this.socket.endPoint),this.private=this.params.config.private||!1}subscribe(a,l=this.timeout){var i,c,u;if(this.socket.isConnected()||this.socket.connect(),this.state==Ke.closed){const{config:{broadcast:h,presence:m,private:x}}=this.params,g=(c=(i=this.bindings.postgres_changes)===null||i===void 0?void 0:i.map(w=>w.filter))!==null&&c!==void 0?c:[],p=!!this.bindings[Kn.PRESENCE]&&this.bindings[Kn.PRESENCE].length>0||((u=this.params.config.presence)===null||u===void 0?void 0:u.enabled)===!0,b={},j={broadcast:h,presence:Object.assign(Object.assign({},m),{enabled:p}),postgres_changes:g,private:x};this.socket.accessTokenValue&&(b.access_token=this.socket.accessTokenValue),this._onError(w=>a?.(_s.CHANNEL_ERROR,w)),this._onClose(()=>a?.(_s.CLOSED)),this.updateJoinPayload(Object.assign({config:j},b)),this.joinedOnce=!0,this._rejoin(l),this.joinPush.receive("ok",async({postgres_changes:w})=>{var S;if(this.socket.setAuth(),w===void 0){a?.(_s.SUBSCRIBED);return}else{const _=this.bindings.postgres_changes,C=(S=_?.length)!==null&&S!==void 0?S:0,L=[];for(let B=0;B<C;B++){const z=_[B],{filter:{event:U,schema:D,table:q,filter:H}}=z,ee=w&&w[B];if(ee&&ee.event===U&&ee.schema===D&&ee.table===q&&ee.filter===H)L.push(Object.assign(Object.assign({},z),{id:ee.id}));else{this.unsubscribe(),this.state=Ke.errored,a?.(_s.CHANNEL_ERROR,new Error("mismatch between server and client bindings for postgres changes"));return}}this.bindings.postgres_changes=L,a&&a(_s.SUBSCRIBED);return}}).receive("error",w=>{this.state=Ke.errored,a?.(_s.CHANNEL_ERROR,new Error(JSON.stringify(Object.values(w).join(", ")||"error")))}).receive("timeout",()=>{a?.(_s.TIMED_OUT)})}return this}presenceState(){return this.presence.state}async track(a,l={}){return await this.send({type:"presence",event:"track",payload:a},l.timeout||this.timeout)}async untrack(a={}){return await this.send({type:"presence",event:"untrack"},a)}on(a,l,i){return this.state===Ke.joined&&a===Kn.PRESENCE&&(this.socket.log("channel",`resubscribe to ${this.topic} due to change in presence callbacks on joined channel`),this.unsubscribe().then(()=>this.subscribe())),this._on(a,l,i)}async send(a,l={}){var i,c;if(!this._canPush()&&a.type==="broadcast"){const{event:u,payload:h}=a,x={method:"POST",headers:{Authorization:this.socket.accessTokenValue?`Bearer ${this.socket.accessTokenValue}`:"",apikey:this.socket.apiKey?this.socket.apiKey:"","Content-Type":"application/json"},body:JSON.stringify({messages:[{topic:this.subTopic,event:u,payload:h,private:this.private}]})};try{const g=await this._fetchWithTimeout(this.broadcastEndpointURL,x,(i=l.timeout)!==null&&i!==void 0?i:this.timeout);return await((c=g.body)===null||c===void 0?void 0:c.cancel()),g.ok?"ok":"error"}catch(g){return g.name==="AbortError"?"timed out":"error"}}else return new Promise(u=>{var h,m,x;const g=this._push(a.type,a,l.timeout||this.timeout);a.type==="broadcast"&&!(!((x=(m=(h=this.params)===null||h===void 0?void 0:h.config)===null||m===void 0?void 0:m.broadcast)===null||x===void 0)&&x.ack)&&u("ok"),g.receive("ok",()=>u("ok")),g.receive("error",()=>u("error")),g.receive("timeout",()=>u("timed out"))})}updateJoinPayload(a){this.joinPush.updatePayload(a)}unsubscribe(a=this.timeout){this.state=Ke.leaving;const l=()=>{this.socket.log("channel",`leave ${this.topic}`),this._trigger(Gt.close,"leave",this._joinRef())};this.joinPush.destroy();let i=null;return new Promise(c=>{i=new Ou(this,Gt.leave,{},a),i.receive("ok",()=>{l(),c("ok")}).receive("timeout",()=>{l(),c("timed out")}).receive("error",()=>{c("error")}),i.send(),this._canPush()||i.trigger("ok",{})}).finally(()=>{i?.destroy()})}teardown(){this.pushBuffer.forEach(a=>a.destroy()),this.pushBuffer=[],this.rejoinTimer.reset(),this.joinPush.destroy(),this.state=Ke.closed,this.bindings={}}async _fetchWithTimeout(a,l,i){const c=new AbortController,u=setTimeout(()=>c.abort(),i),h=await this.socket.fetch(a,Object.assign(Object.assign({},l),{signal:c.signal}));return clearTimeout(u),h}_push(a,l,i=this.timeout){if(!this.joinedOnce)throw`tried to push '${a}' to '${this.topic}' before joining. Use channel.subscribe() before pushing events`;let c=new Ou(this,a,l,i);return this._canPush()?c.send():this._addToPushBuffer(c),c}_addToPushBuffer(a){if(a.startTimeout(),this.pushBuffer.push(a),this.pushBuffer.length>Dj){const l=this.pushBuffer.shift();l&&(l.destroy(),this.socket.log("channel",`discarded push due to buffer overflow: ${l.event}`,l.payload))}}_onMessage(a,l,i){return l}_isMember(a){return this.topic===a}_joinRef(){return this.joinPush.ref}_trigger(a,l,i){var c,u;const h=a.toLocaleLowerCase(),{close:m,error:x,leave:g,join:p}=Gt;if(i&&[m,x,g,p].indexOf(h)>=0&&i!==this._joinRef())return;let j=this._onMessage(h,l,i);if(l&&!j)throw"channel onMessage callbacks must return the payload, modified or unmodified";["insert","update","delete"].includes(h)?(c=this.bindings.postgres_changes)===null||c===void 0||c.filter(w=>{var S,_,C;return((S=w.filter)===null||S===void 0?void 0:S.event)==="*"||((C=(_=w.filter)===null||_===void 0?void 0:_.event)===null||C===void 0?void 0:C.toLocaleLowerCase())===h}).map(w=>w.callback(j,i)):(u=this.bindings[h])===null||u===void 0||u.filter(w=>{var S,_,C,L,B,z;if(["broadcast","presence","postgres_changes"].includes(h))if("id"in w){const U=w.id,D=(S=w.filter)===null||S===void 0?void 0:S.event;return U&&((_=l.ids)===null||_===void 0?void 0:_.includes(U))&&(D==="*"||D?.toLocaleLowerCase()===((C=l.data)===null||C===void 0?void 0:C.type.toLocaleLowerCase()))}else{const U=(B=(L=w?.filter)===null||L===void 0?void 0:L.event)===null||B===void 0?void 0:B.toLocaleLowerCase();return U==="*"||U===((z=l?.event)===null||z===void 0?void 0:z.toLocaleLowerCase())}else return w.type.toLocaleLowerCase()===h}).map(w=>{if(typeof j=="object"&&"ids"in j){const S=j.data,{schema:_,table:C,commit_timestamp:L,type:B,errors:z}=S;j=Object.assign(Object.assign({},{schema:_,table:C,commit_timestamp:L,eventType:B,new:{},old:{},errors:z}),this._getPayloadRecords(S))}w.callback(j,i)})}_isClosed(){return this.state===Ke.closed}_isJoined(){return this.state===Ke.joined}_isJoining(){return this.state===Ke.joining}_isLeaving(){return this.state===Ke.leaving}_replyEventName(a){return`chan_reply_${a}`}_on(a,l,i){const c=a.toLocaleLowerCase(),u={type:c,filter:l,callback:i};return this.bindings[c]?this.bindings[c].push(u):this.bindings[c]=[u],this}_off(a,l){const i=a.toLocaleLowerCase();return this.bindings[i]&&(this.bindings[i]=this.bindings[i].filter(c=>{var u;return!(((u=c.type)===null||u===void 0?void 0:u.toLocaleLowerCase())===i&&Cd.isEqual(c.filter,l))})),this}static isEqual(a,l){if(Object.keys(a).length!==Object.keys(l).length)return!1;for(const i in a)if(a[i]!==l[i])return!1;return!0}_rejoinUntilConnected(){this.rejoinTimer.scheduleTimeout(),this.socket.isConnected()&&this._rejoin()}_onClose(a){this._on(Gt.close,{},a)}_onError(a){this._on(Gt.error,{},l=>a(l))}_canPush(){return this.socket.isConnected()&&this._isJoined()}_rejoin(a=this.timeout){this._isLeaving()||(this.socket._leaveOpenTopic(this.topic),this.state=Ke.joining,this.joinPush.resend(a))}_getPayloadRecords(a){const l={new:{},old:{}};return(a.type==="INSERT"||a.type==="UPDATE")&&(l.new=cg(a.columns,a.record)),(a.type==="UPDATE"||a.type==="DELETE")&&(l.old=cg(a.columns,a.old_record)),l}}const Du=()=>{},Ai={HEARTBEAT_INTERVAL:25e3,RECONNECT_DELAY:10,HEARTBEAT_TIMEOUT_FALLBACK:100},Bj=[1e3,2e3,5e3,1e4],Hj=1e4,Gj=`
  addEventListener("message", (e) => {
    if (e.data.event === "start") {
      setInterval(() => postMessage({ event: "keepAlive" }), e.data.interval);
    }
  });`;class Vj{constructor(a,l){var i;if(this.accessTokenValue=null,this.apiKey=null,this.channels=new Array,this.endPoint="",this.httpEndpoint="",this.headers={},this.params={},this.timeout=Wu,this.transport=null,this.heartbeatIntervalMs=Ai.HEARTBEAT_INTERVAL,this.heartbeatTimer=void 0,this.pendingHeartbeatRef=null,this.heartbeatCallback=Du,this.ref=0,this.reconnectTimer=null,this.logger=Du,this.conn=null,this.sendBuffer=[],this.serializer=new Mj,this.stateChangeCallbacks={open:[],close:[],error:[],message:[]},this.accessToken=null,this._connectionState="disconnected",this._wasManualDisconnect=!1,this._authPromise=null,this._resolveFetch=c=>{let u;return c?u=c:typeof fetch>"u"?u=(...h)=>ll(async()=>{const{default:m}=await Promise.resolve().then(()=>Hr);return{default:m}},void 0).then(({default:m})=>m(...h)).catch(m=>{throw new Error(`Failed to load @supabase/node-fetch: ${m.message}. This is required for HTTP requests in Node.js environments without native fetch.`)}):u=fetch,(...h)=>u(...h)},!(!((i=l?.params)===null||i===void 0)&&i.apikey))throw new Error("API key is required to connect to Realtime");this.apiKey=l.params.apikey,this.endPoint=`${a}/${ed.websocket}`,this.httpEndpoint=ox(a),this._initializeOptions(l),this._setupReconnectionTimer(),this.fetch=this._resolveFetch(l?.fetch)}connect(){if(!(this.isConnecting()||this.isDisconnecting()||this.conn!==null&&this.isConnected())){if(this._setConnectionState("connecting"),this._setAuthSafely("connect"),this.transport)this.conn=new this.transport(this.endpointURL());else try{this.conn=Ej.createWebSocket(this.endpointURL())}catch(a){this._setConnectionState("disconnected");const l=a.message;throw l.includes("Node.js")?new Error(`${l}

To use Realtime in Node.js, you need to provide a WebSocket implementation:

Option 1: Use Node.js 22+ which has native WebSocket support
Option 2: Install and provide the "ws" package:

  npm install ws

  import ws from "ws"
  const client = new RealtimeClient(url, {
    ...options,
    transport: ws
  })`):new Error(`WebSocket not available: ${l}`)}this._setupConnectionHandlers()}}endpointURL(){return this._appendParams(this.endPoint,Object.assign({},this.params,{vsn:Rj}))}disconnect(a,l){if(!this.isDisconnecting())if(this._setConnectionState("disconnecting",!0),this.conn){const i=setTimeout(()=>{this._setConnectionState("disconnected")},100);this.conn.onclose=()=>{clearTimeout(i),this._setConnectionState("disconnected")},a?this.conn.close(a,l??""):this.conn.close(),this._teardownConnection()}else this._setConnectionState("disconnected")}getChannels(){return this.channels}async removeChannel(a){const l=await a.unsubscribe();return this.channels.length===0&&this.disconnect(),l}async removeAllChannels(){const a=await Promise.all(this.channels.map(l=>l.unsubscribe()));return this.channels=[],this.disconnect(),a}log(a,l,i){this.logger(a,l,i)}connectionState(){switch(this.conn&&this.conn.readyState){case Fn.connecting:return Ra.Connecting;case Fn.open:return Ra.Open;case Fn.closing:return Ra.Closing;default:return Ra.Closed}}isConnected(){return this.connectionState()===Ra.Open}isConnecting(){return this._connectionState==="connecting"}isDisconnecting(){return this._connectionState==="disconnecting"}channel(a,l={config:{}}){const i=`realtime:${a}`,c=this.getChannels().find(u=>u.topic===i);if(c)return c;{const u=new Cd(`realtime:${a}`,l,this);return this.channels.push(u),u}}push(a){const{topic:l,event:i,payload:c,ref:u}=a,h=()=>{this.encode(a,m=>{var x;(x=this.conn)===null||x===void 0||x.send(m)})};this.log("push",`${l} ${i} (${u})`,c),this.isConnected()?h():this.sendBuffer.push(h)}async setAuth(a=null){this._authPromise=this._performAuth(a);try{await this._authPromise}finally{this._authPromise=null}}async sendHeartbeat(){var a;if(!this.isConnected()){try{this.heartbeatCallback("disconnected")}catch(l){this.log("error","error in heartbeat callback",l)}return}if(this.pendingHeartbeatRef){this.pendingHeartbeatRef=null,this.log("transport","heartbeat timeout. Attempting to re-establish connection");try{this.heartbeatCallback("timeout")}catch(l){this.log("error","error in heartbeat callback",l)}this._wasManualDisconnect=!1,(a=this.conn)===null||a===void 0||a.close(Oj,"heartbeat timeout"),setTimeout(()=>{var l;this.isConnected()||(l=this.reconnectTimer)===null||l===void 0||l.scheduleTimeout()},Ai.HEARTBEAT_TIMEOUT_FALLBACK);return}this.pendingHeartbeatRef=this._makeRef(),this.push({topic:"phoenix",event:"heartbeat",payload:{},ref:this.pendingHeartbeatRef});try{this.heartbeatCallback("sent")}catch(l){this.log("error","error in heartbeat callback",l)}this._setAuthSafely("heartbeat")}onHeartbeat(a){this.heartbeatCallback=a}flushSendBuffer(){this.isConnected()&&this.sendBuffer.length>0&&(this.sendBuffer.forEach(a=>a()),this.sendBuffer=[])}_makeRef(){let a=this.ref+1;return a===this.ref?this.ref=0:this.ref=a,this.ref.toString()}_leaveOpenTopic(a){let l=this.channels.find(i=>i.topic===a&&(i._isJoined()||i._isJoining()));l&&(this.log("transport",`leaving duplicate topic "${a}"`),l.unsubscribe())}_remove(a){this.channels=this.channels.filter(l=>l.topic!==a.topic)}_onConnMessage(a){this.decode(a.data,l=>{if(l.topic==="phoenix"&&l.event==="phx_reply")try{this.heartbeatCallback(l.payload.status==="ok"?"ok":"error")}catch(g){this.log("error","error in heartbeat callback",g)}l.ref&&l.ref===this.pendingHeartbeatRef&&(this.pendingHeartbeatRef=null);const{topic:i,event:c,payload:u,ref:h}=l,m=h?`(${h})`:"",x=u.status||"";this.log("receive",`${x} ${i} ${c} ${m}`.trim(),u),this.channels.filter(g=>g._isMember(i)).forEach(g=>g._trigger(c,u,h)),this._triggerStateCallbacks("message",l)})}_clearTimer(a){var l;a==="heartbeat"&&this.heartbeatTimer?(clearInterval(this.heartbeatTimer),this.heartbeatTimer=void 0):a==="reconnect"&&((l=this.reconnectTimer)===null||l===void 0||l.reset())}_clearAllTimers(){this._clearTimer("heartbeat"),this._clearTimer("reconnect")}_setupConnectionHandlers(){this.conn&&("binaryType"in this.conn&&(this.conn.binaryType="arraybuffer"),this.conn.onopen=()=>this._onConnOpen(),this.conn.onerror=a=>this._onConnError(a),this.conn.onmessage=a=>this._onConnMessage(a),this.conn.onclose=a=>this._onConnClose(a))}_teardownConnection(){this.conn&&(this.conn.onopen=null,this.conn.onerror=null,this.conn.onmessage=null,this.conn.onclose=null,this.conn=null),this._clearAllTimers(),this.channels.forEach(a=>a.teardown())}_onConnOpen(){this._setConnectionState("connected"),this.log("transport",`connected to ${this.endpointURL()}`),this.flushSendBuffer(),this._clearTimer("reconnect"),this.worker?this.workerRef||this._startWorkerHeartbeat():this._startHeartbeat(),this._triggerStateCallbacks("open")}_startHeartbeat(){this.heartbeatTimer&&clearInterval(this.heartbeatTimer),this.heartbeatTimer=setInterval(()=>this.sendHeartbeat(),this.heartbeatIntervalMs)}_startWorkerHeartbeat(){this.workerUrl?this.log("worker",`starting worker for from ${this.workerUrl}`):this.log("worker","starting default worker");const a=this._workerObjectUrl(this.workerUrl);this.workerRef=new Worker(a),this.workerRef.onerror=l=>{this.log("worker","worker error",l.message),this.workerRef.terminate()},this.workerRef.onmessage=l=>{l.data.event==="keepAlive"&&this.sendHeartbeat()},this.workerRef.postMessage({event:"start",interval:this.heartbeatIntervalMs})}_onConnClose(a){var l;this._setConnectionState("disconnected"),this.log("transport","close",a),this._triggerChanError(),this._clearTimer("heartbeat"),this._wasManualDisconnect||(l=this.reconnectTimer)===null||l===void 0||l.scheduleTimeout(),this._triggerStateCallbacks("close",a)}_onConnError(a){this._setConnectionState("disconnected"),this.log("transport",`${a}`),this._triggerChanError(),this._triggerStateCallbacks("error",a)}_triggerChanError(){this.channels.forEach(a=>a._trigger(Gt.error))}_appendParams(a,l){if(Object.keys(l).length===0)return a;const i=a.match(/\?/)?"&":"?",c=new URLSearchParams(l);return`${a}${i}${c}`}_workerObjectUrl(a){let l;if(a)l=a;else{const i=new Blob([Gj],{type:"application/javascript"});l=URL.createObjectURL(i)}return l}_setConnectionState(a,l=!1){this._connectionState=a,a==="connecting"?this._wasManualDisconnect=!1:a==="disconnecting"&&(this._wasManualDisconnect=l)}async _performAuth(a=null){let l;a?l=a:this.accessToken?l=await this.accessToken():l=this.accessTokenValue,this.accessTokenValue!=l&&(this.accessTokenValue=l,this.channels.forEach(i=>{const c={access_token:l,version:Tj};l&&i.updateJoinPayload(c),i.joinedOnce&&i._isJoined()&&i._push(Gt.access_token,{access_token:l})}))}async _waitForAuthIfNeeded(){this._authPromise&&await this._authPromise}_setAuthSafely(a="general"){this.setAuth().catch(l=>{this.log("error",`error setting auth in ${a}`,l)})}_triggerStateCallbacks(a,l){try{this.stateChangeCallbacks[a].forEach(i=>{try{i(l)}catch(c){this.log("error",`error in ${a} callback`,c)}})}catch(i){this.log("error",`error triggering ${a} callbacks`,i)}}_setupReconnectionTimer(){this.reconnectTimer=new lx(async()=>{setTimeout(async()=>{await this._waitForAuthIfNeeded(),this.isConnected()||this.connect()},Ai.RECONNECT_DELAY)},this.reconnectAfterMs)}_initializeOptions(a){var l,i,c,u,h,m,x,g,p;if(this.transport=(l=a?.transport)!==null&&l!==void 0?l:null,this.timeout=(i=a?.timeout)!==null&&i!==void 0?i:Wu,this.heartbeatIntervalMs=(c=a?.heartbeatIntervalMs)!==null&&c!==void 0?c:Ai.HEARTBEAT_INTERVAL,this.worker=(u=a?.worker)!==null&&u!==void 0?u:!1,this.accessToken=(h=a?.accessToken)!==null&&h!==void 0?h:null,this.heartbeatCallback=(m=a?.heartbeatCallback)!==null&&m!==void 0?m:Du,a?.params&&(this.params=a.params),a?.logger&&(this.logger=a.logger),(a?.logLevel||a?.log_level)&&(this.logLevel=a.logLevel||a.log_level,this.params=Object.assign(Object.assign({},this.params),{log_level:this.logLevel})),this.reconnectAfterMs=(x=a?.reconnectAfterMs)!==null&&x!==void 0?x:(b=>Bj[b-1]||Hj),this.encode=(g=a?.encode)!==null&&g!==void 0?g:((b,j)=>j(JSON.stringify(b))),this.decode=(p=a?.decode)!==null&&p!==void 0?p:this.serializer.decode.bind(this.serializer),this.worker){if(typeof window<"u"&&!window.Worker)throw new Error("Web Worker is not supported");this.workerUrl=a?.workerUrl}}}class Ed extends Error{constructor(a){super(a),this.__isStorageError=!0,this.name="StorageError"}}function Xe(n){return typeof n=="object"&&n!==null&&"__isStorageError"in n}class Qj extends Ed{constructor(a,l,i){super(a),this.name="StorageApiError",this.status=l,this.statusCode=i}toJSON(){return{name:this.name,message:this.message,status:this.status,statusCode:this.statusCode}}}class sd extends Ed{constructor(a,l){super(a),this.name="StorageUnknownError",this.originalError=l}}var Yj=function(n,a,l,i){function c(u){return u instanceof l?u:new l(function(h){h(u)})}return new(l||(l=Promise))(function(u,h){function m(p){try{g(i.next(p))}catch(b){h(b)}}function x(p){try{g(i.throw(p))}catch(b){h(b)}}function g(p){p.done?u(p.value):c(p.value).then(m,x)}g((i=i.apply(n,a||[])).next())})};const cx=n=>{let a;return n?a=n:typeof fetch>"u"?a=(...l)=>ll(async()=>{const{default:i}=await Promise.resolve().then(()=>Hr);return{default:i}},void 0).then(({default:i})=>i(...l)):a=fetch,(...l)=>a(...l)},Fj=()=>Yj(void 0,void 0,void 0,function*(){return typeof Response>"u"?(yield ll(()=>Promise.resolve().then(()=>Hr),void 0)).Response:Response}),ad=n=>{if(Array.isArray(n))return n.map(l=>ad(l));if(typeof n=="function"||n!==Object(n))return n;const a={};return Object.entries(n).forEach(([l,i])=>{const c=l.replace(/([-_][a-z])/gi,u=>u.toUpperCase().replace(/[-_]/g,""));a[c]=ad(i)}),a},Ij=n=>{if(typeof n!="object"||n===null)return!1;const a=Object.getPrototypeOf(n);return(a===null||a===Object.prototype||Object.getPrototypeOf(a)===null)&&!(Symbol.toStringTag in n)&&!(Symbol.iterator in n)};var Ma=function(n,a,l,i){function c(u){return u instanceof l?u:new l(function(h){h(u)})}return new(l||(l=Promise))(function(u,h){function m(p){try{g(i.next(p))}catch(b){h(b)}}function x(p){try{g(i.throw(p))}catch(b){h(b)}}function g(p){p.done?u(p.value):c(p.value).then(m,x)}g((i=i.apply(n,a||[])).next())})};const Mu=n=>n.msg||n.message||n.error_description||n.error||JSON.stringify(n),Kj=(n,a,l)=>Ma(void 0,void 0,void 0,function*(){const i=yield Fj();n instanceof i&&!l?.noResolveJson?n.json().then(c=>{const u=n.status||500,h=c?.statusCode||u+"";a(new Qj(Mu(c),u,h))}).catch(c=>{a(new sd(Mu(c),c))}):a(new sd(Mu(n),n))}),Xj=(n,a,l,i)=>{const c={method:n,headers:a?.headers||{}};return n==="GET"||!i?c:(Ij(i)?(c.headers=Object.assign({"Content-Type":"application/json"},a?.headers),c.body=JSON.stringify(i)):c.body=i,a?.duplex&&(c.duplex=a.duplex),Object.assign(Object.assign({},c),l))};function il(n,a,l,i,c,u){return Ma(this,void 0,void 0,function*(){return new Promise((h,m)=>{n(l,Xj(a,i,c,u)).then(x=>{if(!x.ok)throw x;return i?.noResolveJson?x:x.json()}).then(x=>h(x)).catch(x=>Kj(x,m,i))})})}function Yi(n,a,l,i){return Ma(this,void 0,void 0,function*(){return il(n,"GET",a,l,i)})}function as(n,a,l,i,c){return Ma(this,void 0,void 0,function*(){return il(n,"POST",a,i,c,l)})}function rd(n,a,l,i,c){return Ma(this,void 0,void 0,function*(){return il(n,"PUT",a,i,c,l)})}function Zj(n,a,l,i){return Ma(this,void 0,void 0,function*(){return il(n,"HEAD",a,Object.assign(Object.assign({},l),{noResolveJson:!0}),i)})}function ux(n,a,l,i,c){return Ma(this,void 0,void 0,function*(){return il(n,"DELETE",a,i,c,l)})}var ut=function(n,a,l,i){function c(u){return u instanceof l?u:new l(function(h){h(u)})}return new(l||(l=Promise))(function(u,h){function m(p){try{g(i.next(p))}catch(b){h(b)}}function x(p){try{g(i.throw(p))}catch(b){h(b)}}function g(p){p.done?u(p.value):c(p.value).then(m,x)}g((i=i.apply(n,a||[])).next())})};const Jj={limit:100,offset:0,sortBy:{column:"name",order:"asc"}},hg={cacheControl:"3600",contentType:"text/plain;charset=UTF-8",upsert:!1};class Wj{constructor(a,l={},i,c){this.url=a,this.headers=l,this.bucketId=i,this.fetch=cx(c)}uploadOrUpdate(a,l,i,c){return ut(this,void 0,void 0,function*(){try{let u;const h=Object.assign(Object.assign({},hg),c);let m=Object.assign(Object.assign({},this.headers),a==="POST"&&{"x-upsert":String(h.upsert)});const x=h.metadata;typeof Blob<"u"&&i instanceof Blob?(u=new FormData,u.append("cacheControl",h.cacheControl),x&&u.append("metadata",this.encodeMetadata(x)),u.append("",i)):typeof FormData<"u"&&i instanceof FormData?(u=i,u.append("cacheControl",h.cacheControl),x&&u.append("metadata",this.encodeMetadata(x))):(u=i,m["cache-control"]=`max-age=${h.cacheControl}`,m["content-type"]=h.contentType,x&&(m["x-metadata"]=this.toBase64(this.encodeMetadata(x)))),c?.headers&&(m=Object.assign(Object.assign({},m),c.headers));const g=this._removeEmptyFolders(l),p=this._getFinalPath(g),b=yield(a=="PUT"?rd:as)(this.fetch,`${this.url}/object/${p}`,u,Object.assign({headers:m},h?.duplex?{duplex:h.duplex}:{}));return{data:{path:g,id:b.Id,fullPath:b.Key},error:null}}catch(u){if(Xe(u))return{data:null,error:u};throw u}})}upload(a,l,i){return ut(this,void 0,void 0,function*(){return this.uploadOrUpdate("POST",a,l,i)})}uploadToSignedUrl(a,l,i,c){return ut(this,void 0,void 0,function*(){const u=this._removeEmptyFolders(a),h=this._getFinalPath(u),m=new URL(this.url+`/object/upload/sign/${h}`);m.searchParams.set("token",l);try{let x;const g=Object.assign({upsert:hg.upsert},c),p=Object.assign(Object.assign({},this.headers),{"x-upsert":String(g.upsert)});typeof Blob<"u"&&i instanceof Blob?(x=new FormData,x.append("cacheControl",g.cacheControl),x.append("",i)):typeof FormData<"u"&&i instanceof FormData?(x=i,x.append("cacheControl",g.cacheControl)):(x=i,p["cache-control"]=`max-age=${g.cacheControl}`,p["content-type"]=g.contentType);const b=yield rd(this.fetch,m.toString(),x,{headers:p});return{data:{path:u,fullPath:b.Key},error:null}}catch(x){if(Xe(x))return{data:null,error:x};throw x}})}createSignedUploadUrl(a,l){return ut(this,void 0,void 0,function*(){try{let i=this._getFinalPath(a);const c=Object.assign({},this.headers);l?.upsert&&(c["x-upsert"]="true");const u=yield as(this.fetch,`${this.url}/object/upload/sign/${i}`,{},{headers:c}),h=new URL(this.url+u.url),m=h.searchParams.get("token");if(!m)throw new Ed("No token returned by API");return{data:{signedUrl:h.toString(),path:a,token:m},error:null}}catch(i){if(Xe(i))return{data:null,error:i};throw i}})}update(a,l,i){return ut(this,void 0,void 0,function*(){return this.uploadOrUpdate("PUT",a,l,i)})}move(a,l,i){return ut(this,void 0,void 0,function*(){try{return{data:yield as(this.fetch,`${this.url}/object/move`,{bucketId:this.bucketId,sourceKey:a,destinationKey:l,destinationBucket:i?.destinationBucket},{headers:this.headers}),error:null}}catch(c){if(Xe(c))return{data:null,error:c};throw c}})}copy(a,l,i){return ut(this,void 0,void 0,function*(){try{return{data:{path:(yield as(this.fetch,`${this.url}/object/copy`,{bucketId:this.bucketId,sourceKey:a,destinationKey:l,destinationBucket:i?.destinationBucket},{headers:this.headers})).Key},error:null}}catch(c){if(Xe(c))return{data:null,error:c};throw c}})}createSignedUrl(a,l,i){return ut(this,void 0,void 0,function*(){try{let c=this._getFinalPath(a),u=yield as(this.fetch,`${this.url}/object/sign/${c}`,Object.assign({expiresIn:l},i?.transform?{transform:i.transform}:{}),{headers:this.headers});const h=i?.download?`&download=${i.download===!0?"":i.download}`:"";return u={signedUrl:encodeURI(`${this.url}${u.signedURL}${h}`)},{data:u,error:null}}catch(c){if(Xe(c))return{data:null,error:c};throw c}})}createSignedUrls(a,l,i){return ut(this,void 0,void 0,function*(){try{const c=yield as(this.fetch,`${this.url}/object/sign/${this.bucketId}`,{expiresIn:l,paths:a},{headers:this.headers}),u=i?.download?`&download=${i.download===!0?"":i.download}`:"";return{data:c.map(h=>Object.assign(Object.assign({},h),{signedUrl:h.signedURL?encodeURI(`${this.url}${h.signedURL}${u}`):null})),error:null}}catch(c){if(Xe(c))return{data:null,error:c};throw c}})}download(a,l){return ut(this,void 0,void 0,function*(){const c=typeof l?.transform<"u"?"render/image/authenticated":"object",u=this.transformOptsToQueryString(l?.transform||{}),h=u?`?${u}`:"";try{const m=this._getFinalPath(a);return{data:yield(yield Yi(this.fetch,`${this.url}/${c}/${m}${h}`,{headers:this.headers,noResolveJson:!0})).blob(),error:null}}catch(m){if(Xe(m))return{data:null,error:m};throw m}})}info(a){return ut(this,void 0,void 0,function*(){const l=this._getFinalPath(a);try{const i=yield Yi(this.fetch,`${this.url}/object/info/${l}`,{headers:this.headers});return{data:ad(i),error:null}}catch(i){if(Xe(i))return{data:null,error:i};throw i}})}exists(a){return ut(this,void 0,void 0,function*(){const l=this._getFinalPath(a);try{return yield Zj(this.fetch,`${this.url}/object/${l}`,{headers:this.headers}),{data:!0,error:null}}catch(i){if(Xe(i)&&i instanceof sd){const c=i.originalError;if([400,404].includes(c?.status))return{data:!1,error:i}}throw i}})}getPublicUrl(a,l){const i=this._getFinalPath(a),c=[],u=l?.download?`download=${l.download===!0?"":l.download}`:"";u!==""&&c.push(u);const m=typeof l?.transform<"u"?"render/image":"object",x=this.transformOptsToQueryString(l?.transform||{});x!==""&&c.push(x);let g=c.join("&");return g!==""&&(g=`?${g}`),{data:{publicUrl:encodeURI(`${this.url}/${m}/public/${i}${g}`)}}}remove(a){return ut(this,void 0,void 0,function*(){try{return{data:yield ux(this.fetch,`${this.url}/object/${this.bucketId}`,{prefixes:a},{headers:this.headers}),error:null}}catch(l){if(Xe(l))return{data:null,error:l};throw l}})}list(a,l,i){return ut(this,void 0,void 0,function*(){try{const c=Object.assign(Object.assign(Object.assign({},Jj),l),{prefix:a||""});return{data:yield as(this.fetch,`${this.url}/object/list/${this.bucketId}`,c,{headers:this.headers},i),error:null}}catch(c){if(Xe(c))return{data:null,error:c};throw c}})}listV2(a,l){return ut(this,void 0,void 0,function*(){try{const i=Object.assign({},a);return{data:yield as(this.fetch,`${this.url}/object/list-v2/${this.bucketId}`,i,{headers:this.headers},l),error:null}}catch(i){if(Xe(i))return{data:null,error:i};throw i}})}encodeMetadata(a){return JSON.stringify(a)}toBase64(a){return typeof Buffer<"u"?Buffer.from(a).toString("base64"):btoa(a)}_getFinalPath(a){return`${this.bucketId}/${a.replace(/^\/+/,"")}`}_removeEmptyFolders(a){return a.replace(/^\/|\/$/g,"").replace(/\/+/g,"/")}transformOptsToQueryString(a){const l=[];return a.width&&l.push(`width=${a.width}`),a.height&&l.push(`height=${a.height}`),a.resize&&l.push(`resize=${a.resize}`),a.format&&l.push(`format=${a.format}`),a.quality&&l.push(`quality=${a.quality}`),l.join("&")}}const ew="2.11.1",tw={"X-Client-Info":`storage-js/${ew}`};var kr=function(n,a,l,i){function c(u){return u instanceof l?u:new l(function(h){h(u)})}return new(l||(l=Promise))(function(u,h){function m(p){try{g(i.next(p))}catch(b){h(b)}}function x(p){try{g(i.throw(p))}catch(b){h(b)}}function g(p){p.done?u(p.value):c(p.value).then(m,x)}g((i=i.apply(n,a||[])).next())})};class sw{constructor(a,l={},i,c){const u=new URL(a);c?.useNewHostname&&/supabase\.(co|in|red)$/.test(u.hostname)&&!u.hostname.includes("storage.supabase.")&&(u.hostname=u.hostname.replace("supabase.","storage.supabase.")),this.url=u.href,this.headers=Object.assign(Object.assign({},tw),l),this.fetch=cx(i)}listBuckets(){return kr(this,void 0,void 0,function*(){try{return{data:yield Yi(this.fetch,`${this.url}/bucket`,{headers:this.headers}),error:null}}catch(a){if(Xe(a))return{data:null,error:a};throw a}})}getBucket(a){return kr(this,void 0,void 0,function*(){try{return{data:yield Yi(this.fetch,`${this.url}/bucket/${a}`,{headers:this.headers}),error:null}}catch(l){if(Xe(l))return{data:null,error:l};throw l}})}createBucket(a,l={public:!1}){return kr(this,void 0,void 0,function*(){try{return{data:yield as(this.fetch,`${this.url}/bucket`,{id:a,name:a,type:l.type,public:l.public,file_size_limit:l.fileSizeLimit,allowed_mime_types:l.allowedMimeTypes},{headers:this.headers}),error:null}}catch(i){if(Xe(i))return{data:null,error:i};throw i}})}updateBucket(a,l){return kr(this,void 0,void 0,function*(){try{return{data:yield rd(this.fetch,`${this.url}/bucket/${a}`,{id:a,name:a,public:l.public,file_size_limit:l.fileSizeLimit,allowed_mime_types:l.allowedMimeTypes},{headers:this.headers}),error:null}}catch(i){if(Xe(i))return{data:null,error:i};throw i}})}emptyBucket(a){return kr(this,void 0,void 0,function*(){try{return{data:yield as(this.fetch,`${this.url}/bucket/${a}/empty`,{},{headers:this.headers}),error:null}}catch(l){if(Xe(l))return{data:null,error:l};throw l}})}deleteBucket(a){return kr(this,void 0,void 0,function*(){try{return{data:yield ux(this.fetch,`${this.url}/bucket/${a}`,{},{headers:this.headers}),error:null}}catch(l){if(Xe(l))return{data:null,error:l};throw l}})}}class aw extends sw{constructor(a,l={},i,c){super(a,l,i,c)}from(a){return new Wj(this.url,this.headers,a,this.fetch)}}const rw="2.57.2";let Yn="";typeof Deno<"u"?Yn="deno":typeof document<"u"?Yn="web":typeof navigator<"u"&&navigator.product==="ReactNative"?Yn="react-native":Yn="node";const nw={"X-Client-Info":`supabase-js-${Yn}/${rw}`},lw={headers:nw},iw={schema:"public"},ow={autoRefreshToken:!0,persistSession:!0,detectSessionInUrl:!0,flowType:"implicit"},cw={};var uw=function(n,a,l,i){function c(u){return u instanceof l?u:new l(function(h){h(u)})}return new(l||(l=Promise))(function(u,h){function m(p){try{g(i.next(p))}catch(b){h(b)}}function x(p){try{g(i.throw(p))}catch(b){h(b)}}function g(p){p.done?u(p.value):c(p.value).then(m,x)}g((i=i.apply(n,a||[])).next())})};const dw=n=>{let a;return n?a=n:typeof fetch>"u"?a=ex:a=fetch,(...l)=>a(...l)},hw=()=>typeof Headers>"u"?tx:Headers,fw=(n,a,l)=>{const i=dw(l),c=hw();return(u,h)=>uw(void 0,void 0,void 0,function*(){var m;const x=(m=yield a())!==null&&m!==void 0?m:n;let g=new c(h?.headers);return g.has("apikey")||g.set("apikey",n),g.has("Authorization")||g.set("Authorization",`Bearer ${x}`),i(u,Object.assign(Object.assign({},h),{headers:g}))})};var mw=function(n,a,l,i){function c(u){return u instanceof l?u:new l(function(h){h(u)})}return new(l||(l=Promise))(function(u,h){function m(p){try{g(i.next(p))}catch(b){h(b)}}function x(p){try{g(i.throw(p))}catch(b){h(b)}}function g(p){p.done?u(p.value):c(p.value).then(m,x)}g((i=i.apply(n,a||[])).next())})};function gw(n){return n.endsWith("/")?n:n+"/"}function xw(n,a){var l,i;const{db:c,auth:u,realtime:h,global:m}=n,{db:x,auth:g,realtime:p,global:b}=a,j={db:Object.assign(Object.assign({},x),c),auth:Object.assign(Object.assign({},g),u),realtime:Object.assign(Object.assign({},p),h),storage:{},global:Object.assign(Object.assign(Object.assign({},b),m),{headers:Object.assign(Object.assign({},(l=b?.headers)!==null&&l!==void 0?l:{}),(i=m?.headers)!==null&&i!==void 0?i:{})}),accessToken:()=>mw(this,void 0,void 0,function*(){return""})};return n.accessToken?j.accessToken=n.accessToken:delete j.accessToken,j}const dx="2.71.1",Or=30*1e3,nd=3,Uu=nd*Or,pw="http://localhost:9999",yw="supabase.auth.token",bw={"X-Client-Info":`gotrue-js/${dx}`},ld="X-Supabase-Api-Version",hx={"2024-01-01":{timestamp:Date.parse("2024-01-01T00:00:00.0Z"),name:"2024-01-01"}},vw=/^([a-z0-9_-]{4})*($|[a-z0-9_-]{3}$|[a-z0-9_-]{2}$)$/i,jw=600*1e3;class Ad extends Error{constructor(a,l,i){super(a),this.__isAuthError=!0,this.name="AuthError",this.status=l,this.code=i}}function ge(n){return typeof n=="object"&&n!==null&&"__isAuthError"in n}class ww extends Ad{constructor(a,l,i){super(a,l,i),this.name="AuthApiError",this.status=l,this.code=i}}function _w(n){return ge(n)&&n.name==="AuthApiError"}class fx extends Ad{constructor(a,l){super(a),this.name="AuthUnknownError",this.originalError=l}}class ia extends Ad{constructor(a,l,i,c){super(a,i,c),this.name=l,this.status=i}}class sa extends ia{constructor(){super("Auth session missing!","AuthSessionMissingError",400,void 0)}}function Nw(n){return ge(n)&&n.name==="AuthSessionMissingError"}class Ti extends ia{constructor(){super("Auth session or user missing","AuthInvalidTokenResponseError",500,void 0)}}class Ri extends ia{constructor(a){super(a,"AuthInvalidCredentialsError",400,void 0)}}class Oi extends ia{constructor(a,l=null){super(a,"AuthImplicitGrantRedirectError",500,void 0),this.details=null,this.details=l}toJSON(){return{name:this.name,message:this.message,status:this.status,details:this.details}}}function Sw(n){return ge(n)&&n.name==="AuthImplicitGrantRedirectError"}class fg extends ia{constructor(a,l=null){super(a,"AuthPKCEGrantCodeExchangeError",500,void 0),this.details=null,this.details=l}toJSON(){return{name:this.name,message:this.message,status:this.status,details:this.details}}}class id extends ia{constructor(a,l){super(a,"AuthRetryableFetchError",l,void 0)}}function Pu(n){return ge(n)&&n.name==="AuthRetryableFetchError"}class mg extends ia{constructor(a,l,i){super(a,"AuthWeakPasswordError",l,"weak_password"),this.reasons=i}}class od extends ia{constructor(a){super(a,"AuthInvalidJwtError",400,"invalid_jwt")}}const Fi="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-_".split(""),gg=` 	
\r=`.split(""),kw=(()=>{const n=new Array(128);for(let a=0;a<n.length;a+=1)n[a]=-1;for(let a=0;a<gg.length;a+=1)n[gg[a].charCodeAt(0)]=-2;for(let a=0;a<Fi.length;a+=1)n[Fi[a].charCodeAt(0)]=a;return n})();function xg(n,a,l){if(n!==null)for(a.queue=a.queue<<8|n,a.queuedBits+=8;a.queuedBits>=6;){const i=a.queue>>a.queuedBits-6&63;l(Fi[i]),a.queuedBits-=6}else if(a.queuedBits>0)for(a.queue=a.queue<<6-a.queuedBits,a.queuedBits=6;a.queuedBits>=6;){const i=a.queue>>a.queuedBits-6&63;l(Fi[i]),a.queuedBits-=6}}function mx(n,a,l){const i=kw[n];if(i>-1)for(a.queue=a.queue<<6|i,a.queuedBits+=6;a.queuedBits>=8;)l(a.queue>>a.queuedBits-8&255),a.queuedBits-=8;else{if(i===-2)return;throw new Error(`Invalid Base64-URL character "${String.fromCharCode(n)}"`)}}function pg(n){const a=[],l=h=>{a.push(String.fromCodePoint(h))},i={utf8seq:0,codepoint:0},c={queue:0,queuedBits:0},u=h=>{Aw(h,i,l)};for(let h=0;h<n.length;h+=1)mx(n.charCodeAt(h),c,u);return a.join("")}function Cw(n,a){if(n<=127){a(n);return}else if(n<=2047){a(192|n>>6),a(128|n&63);return}else if(n<=65535){a(224|n>>12),a(128|n>>6&63),a(128|n&63);return}else if(n<=1114111){a(240|n>>18),a(128|n>>12&63),a(128|n>>6&63),a(128|n&63);return}throw new Error(`Unrecognized Unicode codepoint: ${n.toString(16)}`)}function Ew(n,a){for(let l=0;l<n.length;l+=1){let i=n.charCodeAt(l);if(i>55295&&i<=56319){const c=(i-55296)*1024&65535;i=(n.charCodeAt(l+1)-56320&65535|c)+65536,l+=1}Cw(i,a)}}function Aw(n,a,l){if(a.utf8seq===0){if(n<=127){l(n);return}for(let i=1;i<6;i+=1)if((n>>7-i&1)===0){a.utf8seq=i;break}if(a.utf8seq===2)a.codepoint=n&31;else if(a.utf8seq===3)a.codepoint=n&15;else if(a.utf8seq===4)a.codepoint=n&7;else throw new Error("Invalid UTF-8 sequence");a.utf8seq-=1}else if(a.utf8seq>0){if(n<=127)throw new Error("Invalid UTF-8 sequence");a.codepoint=a.codepoint<<6|n&63,a.utf8seq-=1,a.utf8seq===0&&l(a.codepoint)}}function Tw(n){const a=[],l={queue:0,queuedBits:0},i=c=>{a.push(c)};for(let c=0;c<n.length;c+=1)mx(n.charCodeAt(c),l,i);return new Uint8Array(a)}function Rw(n){const a=[];return Ew(n,l=>a.push(l)),new Uint8Array(a)}function Ow(n){const a=[],l={queue:0,queuedBits:0},i=c=>{a.push(c)};return n.forEach(c=>xg(c,l,i)),xg(null,l,i),a.join("")}function Dw(n){return Math.round(Date.now()/1e3)+n}function Mw(){return"xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,function(n){const a=Math.random()*16|0;return(n=="x"?a:a&3|8).toString(16)})}const Bt=()=>typeof window<"u"&&typeof document<"u",ka={tested:!1,writable:!1},gx=()=>{if(!Bt())return!1;try{if(typeof globalThis.localStorage!="object")return!1}catch{return!1}if(ka.tested)return ka.writable;const n=`lswt-${Math.random()}${Math.random()}`;try{globalThis.localStorage.setItem(n,n),globalThis.localStorage.removeItem(n),ka.tested=!0,ka.writable=!0}catch{ka.tested=!0,ka.writable=!1}return ka.writable};function Uw(n){const a={},l=new URL(n);if(l.hash&&l.hash[0]==="#")try{new URLSearchParams(l.hash.substring(1)).forEach((c,u)=>{a[u]=c})}catch{}return l.searchParams.forEach((i,c)=>{a[c]=i}),a}const xx=n=>{let a;return n?a=n:typeof fetch>"u"?a=(...l)=>ll(async()=>{const{default:i}=await Promise.resolve().then(()=>Hr);return{default:i}},void 0).then(({default:i})=>i(...l)):a=fetch,(...l)=>a(...l)},Pw=n=>typeof n=="object"&&n!==null&&"status"in n&&"ok"in n&&"json"in n&&typeof n.json=="function",Dr=async(n,a,l)=>{await n.setItem(a,JSON.stringify(l))},Ca=async(n,a)=>{const l=await n.getItem(a);if(!l)return null;try{return JSON.parse(l)}catch{return l}},ta=async(n,a)=>{await n.removeItem(a)};class to{constructor(){this.promise=new to.promiseConstructor((a,l)=>{this.resolve=a,this.reject=l})}}to.promiseConstructor=Promise;function Lu(n){const a=n.split(".");if(a.length!==3)throw new od("Invalid JWT structure");for(let i=0;i<a.length;i++)if(!vw.test(a[i]))throw new od("JWT not in base64url format");return{header:JSON.parse(pg(a[0])),payload:JSON.parse(pg(a[1])),signature:Tw(a[2]),raw:{header:a[0],payload:a[1]}}}async function Lw(n){return await new Promise(a=>{setTimeout(()=>a(null),n)})}function qw(n,a){return new Promise((i,c)=>{(async()=>{for(let u=0;u<1/0;u++)try{const h=await n(u);if(!a(u,null,h)){i(h);return}}catch(h){if(!a(u,h)){c(h);return}}})()})}function zw(n){return("0"+n.toString(16)).substr(-2)}function $w(){const a=new Uint32Array(56);if(typeof crypto>"u"){const l="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-._~",i=l.length;let c="";for(let u=0;u<56;u++)c+=l.charAt(Math.floor(Math.random()*i));return c}return crypto.getRandomValues(a),Array.from(a,zw).join("")}async function Bw(n){const l=new TextEncoder().encode(n),i=await crypto.subtle.digest("SHA-256",l),c=new Uint8Array(i);return Array.from(c).map(u=>String.fromCharCode(u)).join("")}async function Hw(n){if(!(typeof crypto<"u"&&typeof crypto.subtle<"u"&&typeof TextEncoder<"u"))return console.warn("WebCrypto API is not supported. Code challenge method will default to use plain instead of sha256."),n;const l=await Bw(n);return btoa(l).replace(/\+/g,"-").replace(/\//g,"_").replace(/=+$/,"")}async function Cr(n,a,l=!1){const i=$w();let c=i;l&&(c+="/PASSWORD_RECOVERY"),await Dr(n,`${a}-code-verifier`,c);const u=await Hw(i);return[u,i===u?"plain":"s256"]}const Gw=/^2[0-9]{3}-(0[1-9]|1[0-2])-(0[1-9]|1[0-9]|2[0-9]|3[0-1])$/i;function Vw(n){const a=n.headers.get(ld);if(!a||!a.match(Gw))return null;try{return new Date(`${a}T00:00:00.0Z`)}catch{return null}}function Qw(n){if(!n)throw new Error("Missing exp claim");const a=Math.floor(Date.now()/1e3);if(n<=a)throw new Error("JWT has expired")}function Yw(n){switch(n){case"RS256":return{name:"RSASSA-PKCS1-v1_5",hash:{name:"SHA-256"}};case"ES256":return{name:"ECDSA",namedCurve:"P-256",hash:{name:"SHA-256"}};default:throw new Error("Invalid alg claim")}}const Fw=/^[0-9a-f]{8}-[0-9a-f]{4}-[0-9a-f]{4}-[0-9a-f]{4}-[0-9a-f]{12}$/;function Er(n){if(!Fw.test(n))throw new Error("@supabase/auth-js: Expected parameter to be UUID but is not")}function qu(){const n={};return new Proxy(n,{get:(a,l)=>{if(l==="__isUserNotAvailableProxy")return!0;if(typeof l=="symbol"){const i=l.toString();if(i==="Symbol(Symbol.toPrimitive)"||i==="Symbol(Symbol.toStringTag)"||i==="Symbol(util.inspect.custom)")return}throw new Error(`@supabase/auth-js: client was created with userStorage option and there was no user stored in the user storage. Accessing the "${l}" property of the session object is not supported. Please use getUser() instead.`)},set:(a,l)=>{throw new Error(`@supabase/auth-js: client was created with userStorage option and there was no user stored in the user storage. Setting the "${l}" property of the session object is not supported. Please use getUser() to fetch a user object you can manipulate.`)},deleteProperty:(a,l)=>{throw new Error(`@supabase/auth-js: client was created with userStorage option and there was no user stored in the user storage. Deleting the "${l}" property of the session object is not supported. Please use getUser() to fetch a user object you can manipulate.`)}})}function yg(n){return JSON.parse(JSON.stringify(n))}var Iw=function(n,a){var l={};for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&a.indexOf(i)<0&&(l[i]=n[i]);if(n!=null&&typeof Object.getOwnPropertySymbols=="function")for(var c=0,i=Object.getOwnPropertySymbols(n);c<i.length;c++)a.indexOf(i[c])<0&&Object.prototype.propertyIsEnumerable.call(n,i[c])&&(l[i[c]]=n[i[c]]);return l};const Aa=n=>n.msg||n.message||n.error_description||n.error||JSON.stringify(n),Kw=[502,503,504];async function bg(n){var a;if(!Pw(n))throw new id(Aa(n),0);if(Kw.includes(n.status))throw new id(Aa(n),n.status);let l;try{l=await n.json()}catch(u){throw new fx(Aa(u),u)}let i;const c=Vw(n);if(c&&c.getTime()>=hx["2024-01-01"].timestamp&&typeof l=="object"&&l&&typeof l.code=="string"?i=l.code:typeof l=="object"&&l&&typeof l.error_code=="string"&&(i=l.error_code),i){if(i==="weak_password")throw new mg(Aa(l),n.status,((a=l.weak_password)===null||a===void 0?void 0:a.reasons)||[]);if(i==="session_not_found")throw new sa}else if(typeof l=="object"&&l&&typeof l.weak_password=="object"&&l.weak_password&&Array.isArray(l.weak_password.reasons)&&l.weak_password.reasons.length&&l.weak_password.reasons.reduce((u,h)=>u&&typeof h=="string",!0))throw new mg(Aa(l),n.status,l.weak_password.reasons);throw new ww(Aa(l),n.status||500,i)}const Xw=(n,a,l,i)=>{const c={method:n,headers:a?.headers||{}};return n==="GET"?c:(c.headers=Object.assign({"Content-Type":"application/json;charset=UTF-8"},a?.headers),c.body=JSON.stringify(i),Object.assign(Object.assign({},c),l))};async function _e(n,a,l,i){var c;const u=Object.assign({},i?.headers);u[ld]||(u[ld]=hx["2024-01-01"].name),i?.jwt&&(u.Authorization=`Bearer ${i.jwt}`);const h=(c=i?.query)!==null&&c!==void 0?c:{};i?.redirectTo&&(h.redirect_to=i.redirectTo);const m=Object.keys(h).length?"?"+new URLSearchParams(h).toString():"",x=await Zw(n,a,l+m,{headers:u,noResolveJson:i?.noResolveJson},{},i?.body);return i?.xform?i?.xform(x):{data:Object.assign({},x),error:null}}async function Zw(n,a,l,i,c,u){const h=Xw(a,i,c,u);let m;try{m=await n(l,Object.assign({},h))}catch(x){throw console.error(x),new id(Aa(x),0)}if(m.ok||await bg(m),i?.noResolveJson)return m;try{return await m.json()}catch(x){await bg(x)}}function ws(n){var a;let l=null;t_(n)&&(l=Object.assign({},n),n.expires_at||(l.expires_at=Dw(n.expires_in)));const i=(a=n.user)!==null&&a!==void 0?a:n;return{data:{session:l,user:i},error:null}}function vg(n){const a=ws(n);return!a.error&&n.weak_password&&typeof n.weak_password=="object"&&Array.isArray(n.weak_password.reasons)&&n.weak_password.reasons.length&&n.weak_password.message&&typeof n.weak_password.message=="string"&&n.weak_password.reasons.reduce((l,i)=>l&&typeof i=="string",!0)&&(a.data.weak_password=n.weak_password),a}function ra(n){var a;return{data:{user:(a=n.user)!==null&&a!==void 0?a:n},error:null}}function Jw(n){return{data:n,error:null}}function Ww(n){const{action_link:a,email_otp:l,hashed_token:i,redirect_to:c,verification_type:u}=n,h=Iw(n,["action_link","email_otp","hashed_token","redirect_to","verification_type"]),m={action_link:a,email_otp:l,hashed_token:i,redirect_to:c,verification_type:u},x=Object.assign({},h);return{data:{properties:m,user:x},error:null}}function e_(n){return n}function t_(n){return n.access_token&&n.refresh_token&&n.expires_in}const zu=["global","local","others"];var s_=function(n,a){var l={};for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&a.indexOf(i)<0&&(l[i]=n[i]);if(n!=null&&typeof Object.getOwnPropertySymbols=="function")for(var c=0,i=Object.getOwnPropertySymbols(n);c<i.length;c++)a.indexOf(i[c])<0&&Object.prototype.propertyIsEnumerable.call(n,i[c])&&(l[i[c]]=n[i[c]]);return l};class a_{constructor({url:a="",headers:l={},fetch:i}){this.url=a,this.headers=l,this.fetch=xx(i),this.mfa={listFactors:this._listFactors.bind(this),deleteFactor:this._deleteFactor.bind(this)}}async signOut(a,l=zu[0]){if(zu.indexOf(l)<0)throw new Error(`@supabase/auth-js: Parameter scope must be one of ${zu.join(", ")}`);try{return await _e(this.fetch,"POST",`${this.url}/logout?scope=${l}`,{headers:this.headers,jwt:a,noResolveJson:!0}),{data:null,error:null}}catch(i){if(ge(i))return{data:null,error:i};throw i}}async inviteUserByEmail(a,l={}){try{return await _e(this.fetch,"POST",`${this.url}/invite`,{body:{email:a,data:l.data},headers:this.headers,redirectTo:l.redirectTo,xform:ra})}catch(i){if(ge(i))return{data:{user:null},error:i};throw i}}async generateLink(a){try{const{options:l}=a,i=s_(a,["options"]),c=Object.assign(Object.assign({},i),l);return"newEmail"in i&&(c.new_email=i?.newEmail,delete c.newEmail),await _e(this.fetch,"POST",`${this.url}/admin/generate_link`,{body:c,headers:this.headers,xform:Ww,redirectTo:l?.redirectTo})}catch(l){if(ge(l))return{data:{properties:null,user:null},error:l};throw l}}async createUser(a){try{return await _e(this.fetch,"POST",`${this.url}/admin/users`,{body:a,headers:this.headers,xform:ra})}catch(l){if(ge(l))return{data:{user:null},error:l};throw l}}async listUsers(a){var l,i,c,u,h,m,x;try{const g={nextPage:null,lastPage:0,total:0},p=await _e(this.fetch,"GET",`${this.url}/admin/users`,{headers:this.headers,noResolveJson:!0,query:{page:(i=(l=a?.page)===null||l===void 0?void 0:l.toString())!==null&&i!==void 0?i:"",per_page:(u=(c=a?.perPage)===null||c===void 0?void 0:c.toString())!==null&&u!==void 0?u:""},xform:e_});if(p.error)throw p.error;const b=await p.json(),j=(h=p.headers.get("x-total-count"))!==null&&h!==void 0?h:0,w=(x=(m=p.headers.get("link"))===null||m===void 0?void 0:m.split(","))!==null&&x!==void 0?x:[];return w.length>0&&(w.forEach(S=>{const _=parseInt(S.split(";")[0].split("=")[1].substring(0,1)),C=JSON.parse(S.split(";")[1].split("=")[1]);g[`${C}Page`]=_}),g.total=parseInt(j)),{data:Object.assign(Object.assign({},b),g),error:null}}catch(g){if(ge(g))return{data:{users:[]},error:g};throw g}}async getUserById(a){Er(a);try{return await _e(this.fetch,"GET",`${this.url}/admin/users/${a}`,{headers:this.headers,xform:ra})}catch(l){if(ge(l))return{data:{user:null},error:l};throw l}}async updateUserById(a,l){Er(a);try{return await _e(this.fetch,"PUT",`${this.url}/admin/users/${a}`,{body:l,headers:this.headers,xform:ra})}catch(i){if(ge(i))return{data:{user:null},error:i};throw i}}async deleteUser(a,l=!1){Er(a);try{return await _e(this.fetch,"DELETE",`${this.url}/admin/users/${a}`,{headers:this.headers,body:{should_soft_delete:l},xform:ra})}catch(i){if(ge(i))return{data:{user:null},error:i};throw i}}async _listFactors(a){Er(a.userId);try{const{data:l,error:i}=await _e(this.fetch,"GET",`${this.url}/admin/users/${a.userId}/factors`,{headers:this.headers,xform:c=>({data:{factors:c},error:null})});return{data:l,error:i}}catch(l){if(ge(l))return{data:null,error:l};throw l}}async _deleteFactor(a){Er(a.userId),Er(a.id);try{return{data:await _e(this.fetch,"DELETE",`${this.url}/admin/users/${a.userId}/factors/${a.id}`,{headers:this.headers}),error:null}}catch(l){if(ge(l))return{data:null,error:l};throw l}}}function jg(n={}){return{getItem:a=>n[a]||null,setItem:(a,l)=>{n[a]=l},removeItem:a=>{delete n[a]}}}function r_(){if(typeof globalThis!="object")try{Object.defineProperty(Object.prototype,"__magic__",{get:function(){return this},configurable:!0}),__magic__.globalThis=__magic__,delete Object.prototype.__magic__}catch{typeof self<"u"&&(self.globalThis=self)}}const Ar={debug:!!(globalThis&&gx()&&globalThis.localStorage&&globalThis.localStorage.getItem("supabase.gotrue-js.locks.debug")==="true")};class px extends Error{constructor(a){super(a),this.isAcquireTimeout=!0}}class n_ extends px{}async function l_(n,a,l){Ar.debug&&console.log("@supabase/gotrue-js: navigatorLock: acquire lock",n,a);const i=new globalThis.AbortController;return a>0&&setTimeout(()=>{i.abort(),Ar.debug&&console.log("@supabase/gotrue-js: navigatorLock acquire timed out",n)},a),await Promise.resolve().then(()=>globalThis.navigator.locks.request(n,a===0?{mode:"exclusive",ifAvailable:!0}:{mode:"exclusive",signal:i.signal},async c=>{if(c){Ar.debug&&console.log("@supabase/gotrue-js: navigatorLock: acquired",n,c.name);try{return await l()}finally{Ar.debug&&console.log("@supabase/gotrue-js: navigatorLock: released",n,c.name)}}else{if(a===0)throw Ar.debug&&console.log("@supabase/gotrue-js: navigatorLock: not immediately available",n),new n_(`Acquiring an exclusive Navigator LockManager lock "${n}" immediately failed`);if(Ar.debug)try{const u=await globalThis.navigator.locks.query();console.log("@supabase/gotrue-js: Navigator LockManager state",JSON.stringify(u,null,"  "))}catch(u){console.warn("@supabase/gotrue-js: Error when querying Navigator LockManager state",u)}return console.warn("@supabase/gotrue-js: Navigator LockManager returned a null lock when using #request without ifAvailable set to true, it appears this browser is not following the LockManager spec https://developer.mozilla.org/en-US/docs/Web/API/LockManager/request"),await l()}}))}r_();const i_={url:pw,storageKey:yw,autoRefreshToken:!0,persistSession:!0,detectSessionInUrl:!0,headers:bw,flowType:"implicit",debug:!1,hasCustomAuthorizationHeader:!1};async function wg(n,a,l){return await l()}const Tr={};class sl{constructor(a){var l,i;this.userStorage=null,this.memoryStorage=null,this.stateChangeEmitters=new Map,this.autoRefreshTicker=null,this.visibilityChangedCallback=null,this.refreshingDeferred=null,this.initializePromise=null,this.detectSessionInUrl=!0,this.hasCustomAuthorizationHeader=!1,this.suppressGetSessionWarning=!1,this.lockAcquired=!1,this.pendingInLock=[],this.broadcastChannel=null,this.logger=console.log,this.instanceID=sl.nextInstanceID,sl.nextInstanceID+=1,this.instanceID>0&&Bt()&&console.warn("Multiple GoTrueClient instances detected in the same browser context. It is not an error, but this should be avoided as it may produce undefined behavior when used concurrently under the same storage key.");const c=Object.assign(Object.assign({},i_),a);if(this.logDebugMessages=!!c.debug,typeof c.debug=="function"&&(this.logger=c.debug),this.persistSession=c.persistSession,this.storageKey=c.storageKey,this.autoRefreshToken=c.autoRefreshToken,this.admin=new a_({url:c.url,headers:c.headers,fetch:c.fetch}),this.url=c.url,this.headers=c.headers,this.fetch=xx(c.fetch),this.lock=c.lock||wg,this.detectSessionInUrl=c.detectSessionInUrl,this.flowType=c.flowType,this.hasCustomAuthorizationHeader=c.hasCustomAuthorizationHeader,c.lock?this.lock=c.lock:Bt()&&(!((l=globalThis?.navigator)===null||l===void 0)&&l.locks)?this.lock=l_:this.lock=wg,this.jwks||(this.jwks={keys:[]},this.jwks_cached_at=Number.MIN_SAFE_INTEGER),this.mfa={verify:this._verify.bind(this),enroll:this._enroll.bind(this),unenroll:this._unenroll.bind(this),challenge:this._challenge.bind(this),listFactors:this._listFactors.bind(this),challengeAndVerify:this._challengeAndVerify.bind(this),getAuthenticatorAssuranceLevel:this._getAuthenticatorAssuranceLevel.bind(this)},this.persistSession?(c.storage?this.storage=c.storage:gx()?this.storage=globalThis.localStorage:(this.memoryStorage={},this.storage=jg(this.memoryStorage)),c.userStorage&&(this.userStorage=c.userStorage)):(this.memoryStorage={},this.storage=jg(this.memoryStorage)),Bt()&&globalThis.BroadcastChannel&&this.persistSession&&this.storageKey){try{this.broadcastChannel=new globalThis.BroadcastChannel(this.storageKey)}catch(u){console.error("Failed to create a new BroadcastChannel, multi-tab state changes will not be available",u)}(i=this.broadcastChannel)===null||i===void 0||i.addEventListener("message",async u=>{this._debug("received broadcast notification from other tab or client",u),await this._notifyAllSubscribers(u.data.event,u.data.session,!1)})}this.initialize()}get jwks(){var a,l;return(l=(a=Tr[this.storageKey])===null||a===void 0?void 0:a.jwks)!==null&&l!==void 0?l:{keys:[]}}set jwks(a){Tr[this.storageKey]=Object.assign(Object.assign({},Tr[this.storageKey]),{jwks:a})}get jwks_cached_at(){var a,l;return(l=(a=Tr[this.storageKey])===null||a===void 0?void 0:a.cachedAt)!==null&&l!==void 0?l:Number.MIN_SAFE_INTEGER}set jwks_cached_at(a){Tr[this.storageKey]=Object.assign(Object.assign({},Tr[this.storageKey]),{cachedAt:a})}_debug(...a){return this.logDebugMessages&&this.logger(`GoTrueClient@${this.instanceID} (${dx}) ${new Date().toISOString()}`,...a),this}async initialize(){return this.initializePromise?await this.initializePromise:(this.initializePromise=(async()=>await this._acquireLock(-1,async()=>await this._initialize()))(),await this.initializePromise)}async _initialize(){var a;try{const l=Uw(window.location.href);let i="none";if(this._isImplicitGrantCallback(l)?i="implicit":await this._isPKCECallback(l)&&(i="pkce"),Bt()&&this.detectSessionInUrl&&i!=="none"){const{data:c,error:u}=await this._getSessionFromURL(l,i);if(u){if(this._debug("#_initialize()","error detecting session from URL",u),Sw(u)){const x=(a=u.details)===null||a===void 0?void 0:a.code;if(x==="identity_already_exists"||x==="identity_not_found"||x==="single_identity_not_deletable")return{error:u}}return await this._removeSession(),{error:u}}const{session:h,redirectType:m}=c;return this._debug("#_initialize()","detected session in URL",h,"redirect type",m),await this._saveSession(h),setTimeout(async()=>{m==="recovery"?await this._notifyAllSubscribers("PASSWORD_RECOVERY",h):await this._notifyAllSubscribers("SIGNED_IN",h)},0),{error:null}}return await this._recoverAndRefresh(),{error:null}}catch(l){return ge(l)?{error:l}:{error:new fx("Unexpected error during initialization",l)}}finally{await this._handleVisibilityChange(),this._debug("#_initialize()","end")}}async signInAnonymously(a){var l,i,c;try{const u=await _e(this.fetch,"POST",`${this.url}/signup`,{headers:this.headers,body:{data:(i=(l=a?.options)===null||l===void 0?void 0:l.data)!==null&&i!==void 0?i:{},gotrue_meta_security:{captcha_token:(c=a?.options)===null||c===void 0?void 0:c.captchaToken}},xform:ws}),{data:h,error:m}=u;if(m||!h)return{data:{user:null,session:null},error:m};const x=h.session,g=h.user;return h.session&&(await this._saveSession(h.session),await this._notifyAllSubscribers("SIGNED_IN",x)),{data:{user:g,session:x},error:null}}catch(u){if(ge(u))return{data:{user:null,session:null},error:u};throw u}}async signUp(a){var l,i,c;try{let u;if("email"in a){const{email:p,password:b,options:j}=a;let w=null,S=null;this.flowType==="pkce"&&([w,S]=await Cr(this.storage,this.storageKey)),u=await _e(this.fetch,"POST",`${this.url}/signup`,{headers:this.headers,redirectTo:j?.emailRedirectTo,body:{email:p,password:b,data:(l=j?.data)!==null&&l!==void 0?l:{},gotrue_meta_security:{captcha_token:j?.captchaToken},code_challenge:w,code_challenge_method:S},xform:ws})}else if("phone"in a){const{phone:p,password:b,options:j}=a;u=await _e(this.fetch,"POST",`${this.url}/signup`,{headers:this.headers,body:{phone:p,password:b,data:(i=j?.data)!==null&&i!==void 0?i:{},channel:(c=j?.channel)!==null&&c!==void 0?c:"sms",gotrue_meta_security:{captcha_token:j?.captchaToken}},xform:ws})}else throw new Ri("You must provide either an email or phone number and a password");const{data:h,error:m}=u;if(m||!h)return{data:{user:null,session:null},error:m};const x=h.session,g=h.user;return h.session&&(await this._saveSession(h.session),await this._notifyAllSubscribers("SIGNED_IN",x)),{data:{user:g,session:x},error:null}}catch(u){if(ge(u))return{data:{user:null,session:null},error:u};throw u}}async signInWithPassword(a){try{let l;if("email"in a){const{email:u,password:h,options:m}=a;l=await _e(this.fetch,"POST",`${this.url}/token?grant_type=password`,{headers:this.headers,body:{email:u,password:h,gotrue_meta_security:{captcha_token:m?.captchaToken}},xform:vg})}else if("phone"in a){const{phone:u,password:h,options:m}=a;l=await _e(this.fetch,"POST",`${this.url}/token?grant_type=password`,{headers:this.headers,body:{phone:u,password:h,gotrue_meta_security:{captcha_token:m?.captchaToken}},xform:vg})}else throw new Ri("You must provide either an email or phone number and a password");const{data:i,error:c}=l;return c?{data:{user:null,session:null},error:c}:!i||!i.session||!i.user?{data:{user:null,session:null},error:new Ti}:(i.session&&(await this._saveSession(i.session),await this._notifyAllSubscribers("SIGNED_IN",i.session)),{data:Object.assign({user:i.user,session:i.session},i.weak_password?{weakPassword:i.weak_password}:null),error:c})}catch(l){if(ge(l))return{data:{user:null,session:null},error:l};throw l}}async signInWithOAuth(a){var l,i,c,u;return await this._handleProviderSignIn(a.provider,{redirectTo:(l=a.options)===null||l===void 0?void 0:l.redirectTo,scopes:(i=a.options)===null||i===void 0?void 0:i.scopes,queryParams:(c=a.options)===null||c===void 0?void 0:c.queryParams,skipBrowserRedirect:(u=a.options)===null||u===void 0?void 0:u.skipBrowserRedirect})}async exchangeCodeForSession(a){return await this.initializePromise,this._acquireLock(-1,async()=>this._exchangeCodeForSession(a))}async signInWithWeb3(a){const{chain:l}=a;if(l==="solana")return await this.signInWithSolana(a);throw new Error(`@supabase/auth-js: Unsupported chain "${l}"`)}async signInWithSolana(a){var l,i,c,u,h,m,x,g,p,b,j,w;let S,_;if("message"in a)S=a.message,_=a.signature;else{const{chain:C,wallet:L,statement:B,options:z}=a;let U;if(Bt())if(typeof L=="object")U=L;else{const q=window;if("solana"in q&&typeof q.solana=="object"&&("signIn"in q.solana&&typeof q.solana.signIn=="function"||"signMessage"in q.solana&&typeof q.solana.signMessage=="function"))U=q.solana;else throw new Error("@supabase/auth-js: No compatible Solana wallet interface on the window object (window.solana) detected. Make sure the user already has a wallet installed and connected for this app. Prefer passing the wallet interface object directly to signInWithWeb3({ chain: 'solana', wallet: resolvedUserWallet }) instead.")}else{if(typeof L!="object"||!z?.url)throw new Error("@supabase/auth-js: Both wallet and url must be specified in non-browser environments.");U=L}const D=new URL((l=z?.url)!==null&&l!==void 0?l:window.location.href);if("signIn"in U&&U.signIn){const q=await U.signIn(Object.assign(Object.assign(Object.assign({issuedAt:new Date().toISOString()},z?.signInWithSolana),{version:"1",domain:D.host,uri:D.href}),B?{statement:B}:null));let H;if(Array.isArray(q)&&q[0]&&typeof q[0]=="object")H=q[0];else if(q&&typeof q=="object"&&"signedMessage"in q&&"signature"in q)H=q;else throw new Error("@supabase/auth-js: Wallet method signIn() returned unrecognized value");if("signedMessage"in H&&"signature"in H&&(typeof H.signedMessage=="string"||H.signedMessage instanceof Uint8Array)&&H.signature instanceof Uint8Array)S=typeof H.signedMessage=="string"?H.signedMessage:new TextDecoder().decode(H.signedMessage),_=H.signature;else throw new Error("@supabase/auth-js: Wallet method signIn() API returned object without signedMessage and signature fields")}else{if(!("signMessage"in U)||typeof U.signMessage!="function"||!("publicKey"in U)||typeof U!="object"||!U.publicKey||!("toBase58"in U.publicKey)||typeof U.publicKey.toBase58!="function")throw new Error("@supabase/auth-js: Wallet does not have a compatible signMessage() and publicKey.toBase58() API");S=[`${D.host} wants you to sign in with your Solana account:`,U.publicKey.toBase58(),...B?["",B,""]:[""],"Version: 1",`URI: ${D.href}`,`Issued At: ${(c=(i=z?.signInWithSolana)===null||i===void 0?void 0:i.issuedAt)!==null&&c!==void 0?c:new Date().toISOString()}`,...!((u=z?.signInWithSolana)===null||u===void 0)&&u.notBefore?[`Not Before: ${z.signInWithSolana.notBefore}`]:[],...!((h=z?.signInWithSolana)===null||h===void 0)&&h.expirationTime?[`Expiration Time: ${z.signInWithSolana.expirationTime}`]:[],...!((m=z?.signInWithSolana)===null||m===void 0)&&m.chainId?[`Chain ID: ${z.signInWithSolana.chainId}`]:[],...!((x=z?.signInWithSolana)===null||x===void 0)&&x.nonce?[`Nonce: ${z.signInWithSolana.nonce}`]:[],...!((g=z?.signInWithSolana)===null||g===void 0)&&g.requestId?[`Request ID: ${z.signInWithSolana.requestId}`]:[],...!((b=(p=z?.signInWithSolana)===null||p===void 0?void 0:p.resources)===null||b===void 0)&&b.length?["Resources",...z.signInWithSolana.resources.map(H=>`- ${H}`)]:[]].join(`
`);const q=await U.signMessage(new TextEncoder().encode(S),"utf8");if(!q||!(q instanceof Uint8Array))throw new Error("@supabase/auth-js: Wallet signMessage() API returned an recognized value");_=q}}try{const{data:C,error:L}=await _e(this.fetch,"POST",`${this.url}/token?grant_type=web3`,{headers:this.headers,body:Object.assign({chain:"solana",message:S,signature:Ow(_)},!((j=a.options)===null||j===void 0)&&j.captchaToken?{gotrue_meta_security:{captcha_token:(w=a.options)===null||w===void 0?void 0:w.captchaToken}}:null),xform:ws});if(L)throw L;return!C||!C.session||!C.user?{data:{user:null,session:null},error:new Ti}:(C.session&&(await this._saveSession(C.session),await this._notifyAllSubscribers("SIGNED_IN",C.session)),{data:Object.assign({},C),error:L})}catch(C){if(ge(C))return{data:{user:null,session:null},error:C};throw C}}async _exchangeCodeForSession(a){const l=await Ca(this.storage,`${this.storageKey}-code-verifier`),[i,c]=(l??"").split("/");try{const{data:u,error:h}=await _e(this.fetch,"POST",`${this.url}/token?grant_type=pkce`,{headers:this.headers,body:{auth_code:a,code_verifier:i},xform:ws});if(await ta(this.storage,`${this.storageKey}-code-verifier`),h)throw h;return!u||!u.session||!u.user?{data:{user:null,session:null,redirectType:null},error:new Ti}:(u.session&&(await this._saveSession(u.session),await this._notifyAllSubscribers("SIGNED_IN",u.session)),{data:Object.assign(Object.assign({},u),{redirectType:c??null}),error:h})}catch(u){if(ge(u))return{data:{user:null,session:null,redirectType:null},error:u};throw u}}async signInWithIdToken(a){try{const{options:l,provider:i,token:c,access_token:u,nonce:h}=a,m=await _e(this.fetch,"POST",`${this.url}/token?grant_type=id_token`,{headers:this.headers,body:{provider:i,id_token:c,access_token:u,nonce:h,gotrue_meta_security:{captcha_token:l?.captchaToken}},xform:ws}),{data:x,error:g}=m;return g?{data:{user:null,session:null},error:g}:!x||!x.session||!x.user?{data:{user:null,session:null},error:new Ti}:(x.session&&(await this._saveSession(x.session),await this._notifyAllSubscribers("SIGNED_IN",x.session)),{data:x,error:g})}catch(l){if(ge(l))return{data:{user:null,session:null},error:l};throw l}}async signInWithOtp(a){var l,i,c,u,h;try{if("email"in a){const{email:m,options:x}=a;let g=null,p=null;this.flowType==="pkce"&&([g,p]=await Cr(this.storage,this.storageKey));const{error:b}=await _e(this.fetch,"POST",`${this.url}/otp`,{headers:this.headers,body:{email:m,data:(l=x?.data)!==null&&l!==void 0?l:{},create_user:(i=x?.shouldCreateUser)!==null&&i!==void 0?i:!0,gotrue_meta_security:{captcha_token:x?.captchaToken},code_challenge:g,code_challenge_method:p},redirectTo:x?.emailRedirectTo});return{data:{user:null,session:null},error:b}}if("phone"in a){const{phone:m,options:x}=a,{data:g,error:p}=await _e(this.fetch,"POST",`${this.url}/otp`,{headers:this.headers,body:{phone:m,data:(c=x?.data)!==null&&c!==void 0?c:{},create_user:(u=x?.shouldCreateUser)!==null&&u!==void 0?u:!0,gotrue_meta_security:{captcha_token:x?.captchaToken},channel:(h=x?.channel)!==null&&h!==void 0?h:"sms"}});return{data:{user:null,session:null,messageId:g?.message_id},error:p}}throw new Ri("You must provide either an email or phone number.")}catch(m){if(ge(m))return{data:{user:null,session:null},error:m};throw m}}async verifyOtp(a){var l,i;try{let c,u;"options"in a&&(c=(l=a.options)===null||l===void 0?void 0:l.redirectTo,u=(i=a.options)===null||i===void 0?void 0:i.captchaToken);const{data:h,error:m}=await _e(this.fetch,"POST",`${this.url}/verify`,{headers:this.headers,body:Object.assign(Object.assign({},a),{gotrue_meta_security:{captcha_token:u}}),redirectTo:c,xform:ws});if(m)throw m;if(!h)throw new Error("An error occurred on token verification.");const x=h.session,g=h.user;return x?.access_token&&(await this._saveSession(x),await this._notifyAllSubscribers(a.type=="recovery"?"PASSWORD_RECOVERY":"SIGNED_IN",x)),{data:{user:g,session:x},error:null}}catch(c){if(ge(c))return{data:{user:null,session:null},error:c};throw c}}async signInWithSSO(a){var l,i,c;try{let u=null,h=null;return this.flowType==="pkce"&&([u,h]=await Cr(this.storage,this.storageKey)),await _e(this.fetch,"POST",`${this.url}/sso`,{body:Object.assign(Object.assign(Object.assign(Object.assign(Object.assign({},"providerId"in a?{provider_id:a.providerId}:null),"domain"in a?{domain:a.domain}:null),{redirect_to:(i=(l=a.options)===null||l===void 0?void 0:l.redirectTo)!==null&&i!==void 0?i:void 0}),!((c=a?.options)===null||c===void 0)&&c.captchaToken?{gotrue_meta_security:{captcha_token:a.options.captchaToken}}:null),{skip_http_redirect:!0,code_challenge:u,code_challenge_method:h}),headers:this.headers,xform:Jw})}catch(u){if(ge(u))return{data:null,error:u};throw u}}async reauthenticate(){return await this.initializePromise,await this._acquireLock(-1,async()=>await this._reauthenticate())}async _reauthenticate(){try{return await this._useSession(async a=>{const{data:{session:l},error:i}=a;if(i)throw i;if(!l)throw new sa;const{error:c}=await _e(this.fetch,"GET",`${this.url}/reauthenticate`,{headers:this.headers,jwt:l.access_token});return{data:{user:null,session:null},error:c}})}catch(a){if(ge(a))return{data:{user:null,session:null},error:a};throw a}}async resend(a){try{const l=`${this.url}/resend`;if("email"in a){const{email:i,type:c,options:u}=a,{error:h}=await _e(this.fetch,"POST",l,{headers:this.headers,body:{email:i,type:c,gotrue_meta_security:{captcha_token:u?.captchaToken}},redirectTo:u?.emailRedirectTo});return{data:{user:null,session:null},error:h}}else if("phone"in a){const{phone:i,type:c,options:u}=a,{data:h,error:m}=await _e(this.fetch,"POST",l,{headers:this.headers,body:{phone:i,type:c,gotrue_meta_security:{captcha_token:u?.captchaToken}}});return{data:{user:null,session:null,messageId:h?.message_id},error:m}}throw new Ri("You must provide either an email or phone number and a type")}catch(l){if(ge(l))return{data:{user:null,session:null},error:l};throw l}}async getSession(){return await this.initializePromise,await this._acquireLock(-1,async()=>this._useSession(async l=>l))}async _acquireLock(a,l){this._debug("#_acquireLock","begin",a);try{if(this.lockAcquired){const i=this.pendingInLock.length?this.pendingInLock[this.pendingInLock.length-1]:Promise.resolve(),c=(async()=>(await i,await l()))();return this.pendingInLock.push((async()=>{try{await c}catch{}})()),c}return await this.lock(`lock:${this.storageKey}`,a,async()=>{this._debug("#_acquireLock","lock acquired for storage key",this.storageKey);try{this.lockAcquired=!0;const i=l();for(this.pendingInLock.push((async()=>{try{await i}catch{}})()),await i;this.pendingInLock.length;){const c=[...this.pendingInLock];await Promise.all(c),this.pendingInLock.splice(0,c.length)}return await i}finally{this._debug("#_acquireLock","lock released for storage key",this.storageKey),this.lockAcquired=!1}})}finally{this._debug("#_acquireLock","end")}}async _useSession(a){this._debug("#_useSession","begin");try{const l=await this.__loadSession();return await a(l)}finally{this._debug("#_useSession","end")}}async __loadSession(){this._debug("#__loadSession()","begin"),this.lockAcquired||this._debug("#__loadSession()","used outside of an acquired lock!",new Error().stack);try{let a=null;const l=await Ca(this.storage,this.storageKey);if(this._debug("#getSession()","session from storage",l),l!==null&&(this._isValidSession(l)?a=l:(this._debug("#getSession()","session from storage is not valid"),await this._removeSession())),!a)return{data:{session:null},error:null};const i=a.expires_at?a.expires_at*1e3-Date.now()<Uu:!1;if(this._debug("#__loadSession()",`session has${i?"":" not"} expired`,"expires_at",a.expires_at),!i){if(this.userStorage){const h=await Ca(this.userStorage,this.storageKey+"-user");h?.user?a.user=h.user:a.user=qu()}if(this.storage.isServer&&a.user){let h=this.suppressGetSessionWarning;a=new Proxy(a,{get:(x,g,p)=>(!h&&g==="user"&&(console.warn("Using the user object as returned from supabase.auth.getSession() or from some supabase.auth.onAuthStateChange() events could be insecure! This value comes directly from the storage medium (usually cookies on the server) and may not be authentic. Use supabase.auth.getUser() instead which authenticates the data by contacting the Supabase Auth server."),h=!0,this.suppressGetSessionWarning=!0),Reflect.get(x,g,p))})}return{data:{session:a},error:null}}const{session:c,error:u}=await this._callRefreshToken(a.refresh_token);return u?{data:{session:null},error:u}:{data:{session:c},error:null}}finally{this._debug("#__loadSession()","end")}}async getUser(a){return a?await this._getUser(a):(await this.initializePromise,await this._acquireLock(-1,async()=>await this._getUser()))}async _getUser(a){try{return a?await _e(this.fetch,"GET",`${this.url}/user`,{headers:this.headers,jwt:a,xform:ra}):await this._useSession(async l=>{var i,c,u;const{data:h,error:m}=l;if(m)throw m;return!(!((i=h.session)===null||i===void 0)&&i.access_token)&&!this.hasCustomAuthorizationHeader?{data:{user:null},error:new sa}:await _e(this.fetch,"GET",`${this.url}/user`,{headers:this.headers,jwt:(u=(c=h.session)===null||c===void 0?void 0:c.access_token)!==null&&u!==void 0?u:void 0,xform:ra})})}catch(l){if(ge(l))return Nw(l)&&(await this._removeSession(),await ta(this.storage,`${this.storageKey}-code-verifier`)),{data:{user:null},error:l};throw l}}async updateUser(a,l={}){return await this.initializePromise,await this._acquireLock(-1,async()=>await this._updateUser(a,l))}async _updateUser(a,l={}){try{return await this._useSession(async i=>{const{data:c,error:u}=i;if(u)throw u;if(!c.session)throw new sa;const h=c.session;let m=null,x=null;this.flowType==="pkce"&&a.email!=null&&([m,x]=await Cr(this.storage,this.storageKey));const{data:g,error:p}=await _e(this.fetch,"PUT",`${this.url}/user`,{headers:this.headers,redirectTo:l?.emailRedirectTo,body:Object.assign(Object.assign({},a),{code_challenge:m,code_challenge_method:x}),jwt:h.access_token,xform:ra});if(p)throw p;return h.user=g.user,await this._saveSession(h),await this._notifyAllSubscribers("USER_UPDATED",h),{data:{user:h.user},error:null}})}catch(i){if(ge(i))return{data:{user:null},error:i};throw i}}async setSession(a){return await this.initializePromise,await this._acquireLock(-1,async()=>await this._setSession(a))}async _setSession(a){try{if(!a.access_token||!a.refresh_token)throw new sa;const l=Date.now()/1e3;let i=l,c=!0,u=null;const{payload:h}=Lu(a.access_token);if(h.exp&&(i=h.exp,c=i<=l),c){const{session:m,error:x}=await this._callRefreshToken(a.refresh_token);if(x)return{data:{user:null,session:null},error:x};if(!m)return{data:{user:null,session:null},error:null};u=m}else{const{data:m,error:x}=await this._getUser(a.access_token);if(x)throw x;u={access_token:a.access_token,refresh_token:a.refresh_token,user:m.user,token_type:"bearer",expires_in:i-l,expires_at:i},await this._saveSession(u),await this._notifyAllSubscribers("SIGNED_IN",u)}return{data:{user:u.user,session:u},error:null}}catch(l){if(ge(l))return{data:{session:null,user:null},error:l};throw l}}async refreshSession(a){return await this.initializePromise,await this._acquireLock(-1,async()=>await this._refreshSession(a))}async _refreshSession(a){try{return await this._useSession(async l=>{var i;if(!a){const{data:h,error:m}=l;if(m)throw m;a=(i=h.session)!==null&&i!==void 0?i:void 0}if(!a?.refresh_token)throw new sa;const{session:c,error:u}=await this._callRefreshToken(a.refresh_token);return u?{data:{user:null,session:null},error:u}:c?{data:{user:c.user,session:c},error:null}:{data:{user:null,session:null},error:null}})}catch(l){if(ge(l))return{data:{user:null,session:null},error:l};throw l}}async _getSessionFromURL(a,l){try{if(!Bt())throw new Oi("No browser detected.");if(a.error||a.error_description||a.error_code)throw new Oi(a.error_description||"Error in URL with unspecified error_description",{error:a.error||"unspecified_error",code:a.error_code||"unspecified_code"});switch(l){case"implicit":if(this.flowType==="pkce")throw new fg("Not a valid PKCE flow url.");break;case"pkce":if(this.flowType==="implicit")throw new Oi("Not a valid implicit grant flow url.");break;default:}if(l==="pkce"){if(this._debug("#_initialize()","begin","is PKCE flow",!0),!a.code)throw new fg("No code detected.");const{data:B,error:z}=await this._exchangeCodeForSession(a.code);if(z)throw z;const U=new URL(window.location.href);return U.searchParams.delete("code"),window.history.replaceState(window.history.state,"",U.toString()),{data:{session:B.session,redirectType:null},error:null}}const{provider_token:i,provider_refresh_token:c,access_token:u,refresh_token:h,expires_in:m,expires_at:x,token_type:g}=a;if(!u||!m||!h||!g)throw new Oi("No session defined in URL");const p=Math.round(Date.now()/1e3),b=parseInt(m);let j=p+b;x&&(j=parseInt(x));const w=j-p;w*1e3<=Or&&console.warn(`@supabase/gotrue-js: Session as retrieved from URL expires in ${w}s, should have been closer to ${b}s`);const S=j-b;p-S>=120?console.warn("@supabase/gotrue-js: Session as retrieved from URL was issued over 120s ago, URL could be stale",S,j,p):p-S<0&&console.warn("@supabase/gotrue-js: Session as retrieved from URL was issued in the future? Check the device clock for skew",S,j,p);const{data:_,error:C}=await this._getUser(u);if(C)throw C;const L={provider_token:i,provider_refresh_token:c,access_token:u,expires_in:b,expires_at:j,refresh_token:h,token_type:g,user:_.user};return window.location.hash="",this._debug("#_getSessionFromURL()","clearing window.location.hash"),{data:{session:L,redirectType:a.type},error:null}}catch(i){if(ge(i))return{data:{session:null,redirectType:null},error:i};throw i}}_isImplicitGrantCallback(a){return!!(a.access_token||a.error_description)}async _isPKCECallback(a){const l=await Ca(this.storage,`${this.storageKey}-code-verifier`);return!!(a.code&&l)}async signOut(a={scope:"global"}){return await this.initializePromise,await this._acquireLock(-1,async()=>await this._signOut(a))}async _signOut({scope:a}={scope:"global"}){return await this._useSession(async l=>{var i;const{data:c,error:u}=l;if(u)return{error:u};const h=(i=c.session)===null||i===void 0?void 0:i.access_token;if(h){const{error:m}=await this.admin.signOut(h,a);if(m&&!(_w(m)&&(m.status===404||m.status===401||m.status===403)))return{error:m}}return a!=="others"&&(await this._removeSession(),await ta(this.storage,`${this.storageKey}-code-verifier`)),{error:null}})}onAuthStateChange(a){const l=Mw(),i={id:l,callback:a,unsubscribe:()=>{this._debug("#unsubscribe()","state change callback with id removed",l),this.stateChangeEmitters.delete(l)}};return this._debug("#onAuthStateChange()","registered callback with id",l),this.stateChangeEmitters.set(l,i),(async()=>(await this.initializePromise,await this._acquireLock(-1,async()=>{this._emitInitialSession(l)})))(),{data:{subscription:i}}}async _emitInitialSession(a){return await this._useSession(async l=>{var i,c;try{const{data:{session:u},error:h}=l;if(h)throw h;await((i=this.stateChangeEmitters.get(a))===null||i===void 0?void 0:i.callback("INITIAL_SESSION",u)),this._debug("INITIAL_SESSION","callback id",a,"session",u)}catch(u){await((c=this.stateChangeEmitters.get(a))===null||c===void 0?void 0:c.callback("INITIAL_SESSION",null)),this._debug("INITIAL_SESSION","callback id",a,"error",u),console.error(u)}})}async resetPasswordForEmail(a,l={}){let i=null,c=null;this.flowType==="pkce"&&([i,c]=await Cr(this.storage,this.storageKey,!0));try{return await _e(this.fetch,"POST",`${this.url}/recover`,{body:{email:a,code_challenge:i,code_challenge_method:c,gotrue_meta_security:{captcha_token:l.captchaToken}},headers:this.headers,redirectTo:l.redirectTo})}catch(u){if(ge(u))return{data:null,error:u};throw u}}async getUserIdentities(){var a;try{const{data:l,error:i}=await this.getUser();if(i)throw i;return{data:{identities:(a=l.user.identities)!==null&&a!==void 0?a:[]},error:null}}catch(l){if(ge(l))return{data:null,error:l};throw l}}async linkIdentity(a){var l;try{const{data:i,error:c}=await this._useSession(async u=>{var h,m,x,g,p;const{data:b,error:j}=u;if(j)throw j;const w=await this._getUrlForProvider(`${this.url}/user/identities/authorize`,a.provider,{redirectTo:(h=a.options)===null||h===void 0?void 0:h.redirectTo,scopes:(m=a.options)===null||m===void 0?void 0:m.scopes,queryParams:(x=a.options)===null||x===void 0?void 0:x.queryParams,skipBrowserRedirect:!0});return await _e(this.fetch,"GET",w,{headers:this.headers,jwt:(p=(g=b.session)===null||g===void 0?void 0:g.access_token)!==null&&p!==void 0?p:void 0})});if(c)throw c;return Bt()&&!(!((l=a.options)===null||l===void 0)&&l.skipBrowserRedirect)&&window.location.assign(i?.url),{data:{provider:a.provider,url:i?.url},error:null}}catch(i){if(ge(i))return{data:{provider:a.provider,url:null},error:i};throw i}}async unlinkIdentity(a){try{return await this._useSession(async l=>{var i,c;const{data:u,error:h}=l;if(h)throw h;return await _e(this.fetch,"DELETE",`${this.url}/user/identities/${a.identity_id}`,{headers:this.headers,jwt:(c=(i=u.session)===null||i===void 0?void 0:i.access_token)!==null&&c!==void 0?c:void 0})})}catch(l){if(ge(l))return{data:null,error:l};throw l}}async _refreshAccessToken(a){const l=`#_refreshAccessToken(${a.substring(0,5)}...)`;this._debug(l,"begin");try{const i=Date.now();return await qw(async c=>(c>0&&await Lw(200*Math.pow(2,c-1)),this._debug(l,"refreshing attempt",c),await _e(this.fetch,"POST",`${this.url}/token?grant_type=refresh_token`,{body:{refresh_token:a},headers:this.headers,xform:ws})),(c,u)=>{const h=200*Math.pow(2,c);return u&&Pu(u)&&Date.now()+h-i<Or})}catch(i){if(this._debug(l,"error",i),ge(i))return{data:{session:null,user:null},error:i};throw i}finally{this._debug(l,"end")}}_isValidSession(a){return typeof a=="object"&&a!==null&&"access_token"in a&&"refresh_token"in a&&"expires_at"in a}async _handleProviderSignIn(a,l){const i=await this._getUrlForProvider(`${this.url}/authorize`,a,{redirectTo:l.redirectTo,scopes:l.scopes,queryParams:l.queryParams});return this._debug("#_handleProviderSignIn()","provider",a,"options",l,"url",i),Bt()&&!l.skipBrowserRedirect&&window.location.assign(i),{data:{provider:a,url:i},error:null}}async _recoverAndRefresh(){var a,l;const i="#_recoverAndRefresh()";this._debug(i,"begin");try{const c=await Ca(this.storage,this.storageKey);if(c&&this.userStorage){let h=await Ca(this.userStorage,this.storageKey+"-user");!this.storage.isServer&&Object.is(this.storage,this.userStorage)&&!h&&(h={user:c.user},await Dr(this.userStorage,this.storageKey+"-user",h)),c.user=(a=h?.user)!==null&&a!==void 0?a:qu()}else if(c&&!c.user&&!c.user){const h=await Ca(this.storage,this.storageKey+"-user");h&&h?.user?(c.user=h.user,await ta(this.storage,this.storageKey+"-user"),await Dr(this.storage,this.storageKey,c)):c.user=qu()}if(this._debug(i,"session from storage",c),!this._isValidSession(c)){this._debug(i,"session is not valid"),c!==null&&await this._removeSession();return}const u=((l=c.expires_at)!==null&&l!==void 0?l:1/0)*1e3-Date.now()<Uu;if(this._debug(i,`session has${u?"":" not"} expired with margin of ${Uu}s`),u){if(this.autoRefreshToken&&c.refresh_token){const{error:h}=await this._callRefreshToken(c.refresh_token);h&&(console.error(h),Pu(h)||(this._debug(i,"refresh failed with a non-retryable error, removing the session",h),await this._removeSession()))}}else if(c.user&&c.user.__isUserNotAvailableProxy===!0)try{const{data:h,error:m}=await this._getUser(c.access_token);!m&&h?.user?(c.user=h.user,await this._saveSession(c),await this._notifyAllSubscribers("SIGNED_IN",c)):this._debug(i,"could not get user data, skipping SIGNED_IN notification")}catch(h){console.error("Error getting user data:",h),this._debug(i,"error getting user data, skipping SIGNED_IN notification",h)}else await this._notifyAllSubscribers("SIGNED_IN",c)}catch(c){this._debug(i,"error",c),console.error(c);return}finally{this._debug(i,"end")}}async _callRefreshToken(a){var l,i;if(!a)throw new sa;if(this.refreshingDeferred)return this.refreshingDeferred.promise;const c=`#_callRefreshToken(${a.substring(0,5)}...)`;this._debug(c,"begin");try{this.refreshingDeferred=new to;const{data:u,error:h}=await this._refreshAccessToken(a);if(h)throw h;if(!u.session)throw new sa;await this._saveSession(u.session),await this._notifyAllSubscribers("TOKEN_REFRESHED",u.session);const m={session:u.session,error:null};return this.refreshingDeferred.resolve(m),m}catch(u){if(this._debug(c,"error",u),ge(u)){const h={session:null,error:u};return Pu(u)||await this._removeSession(),(l=this.refreshingDeferred)===null||l===void 0||l.resolve(h),h}throw(i=this.refreshingDeferred)===null||i===void 0||i.reject(u),u}finally{this.refreshingDeferred=null,this._debug(c,"end")}}async _notifyAllSubscribers(a,l,i=!0){const c=`#_notifyAllSubscribers(${a})`;this._debug(c,"begin",l,`broadcast = ${i}`);try{this.broadcastChannel&&i&&this.broadcastChannel.postMessage({event:a,session:l});const u=[],h=Array.from(this.stateChangeEmitters.values()).map(async m=>{try{await m.callback(a,l)}catch(x){u.push(x)}});if(await Promise.all(h),u.length>0){for(let m=0;m<u.length;m+=1)console.error(u[m]);throw u[0]}}finally{this._debug(c,"end")}}async _saveSession(a){this._debug("#_saveSession()",a),this.suppressGetSessionWarning=!0;const l=Object.assign({},a),i=l.user&&l.user.__isUserNotAvailableProxy===!0;if(this.userStorage){!i&&l.user&&await Dr(this.userStorage,this.storageKey+"-user",{user:l.user});const c=Object.assign({},l);delete c.user;const u=yg(c);await Dr(this.storage,this.storageKey,u)}else{const c=yg(l);await Dr(this.storage,this.storageKey,c)}}async _removeSession(){this._debug("#_removeSession()"),await ta(this.storage,this.storageKey),await ta(this.storage,this.storageKey+"-code-verifier"),await ta(this.storage,this.storageKey+"-user"),this.userStorage&&await ta(this.userStorage,this.storageKey+"-user"),await this._notifyAllSubscribers("SIGNED_OUT",null)}_removeVisibilityChangedCallback(){this._debug("#_removeVisibilityChangedCallback()");const a=this.visibilityChangedCallback;this.visibilityChangedCallback=null;try{a&&Bt()&&window?.removeEventListener&&window.removeEventListener("visibilitychange",a)}catch(l){console.error("removing visibilitychange callback failed",l)}}async _startAutoRefresh(){await this._stopAutoRefresh(),this._debug("#_startAutoRefresh()");const a=setInterval(()=>this._autoRefreshTokenTick(),Or);this.autoRefreshTicker=a,a&&typeof a=="object"&&typeof a.unref=="function"?a.unref():typeof Deno<"u"&&typeof Deno.unrefTimer=="function"&&Deno.unrefTimer(a),setTimeout(async()=>{await this.initializePromise,await this._autoRefreshTokenTick()},0)}async _stopAutoRefresh(){this._debug("#_stopAutoRefresh()");const a=this.autoRefreshTicker;this.autoRefreshTicker=null,a&&clearInterval(a)}async startAutoRefresh(){this._removeVisibilityChangedCallback(),await this._startAutoRefresh()}async stopAutoRefresh(){this._removeVisibilityChangedCallback(),await this._stopAutoRefresh()}async _autoRefreshTokenTick(){this._debug("#_autoRefreshTokenTick()","begin");try{await this._acquireLock(0,async()=>{try{const a=Date.now();try{return await this._useSession(async l=>{const{data:{session:i}}=l;if(!i||!i.refresh_token||!i.expires_at){this._debug("#_autoRefreshTokenTick()","no session");return}const c=Math.floor((i.expires_at*1e3-a)/Or);this._debug("#_autoRefreshTokenTick()",`access token expires in ${c} ticks, a tick lasts ${Or}ms, refresh threshold is ${nd} ticks`),c<=nd&&await this._callRefreshToken(i.refresh_token)})}catch(l){console.error("Auto refresh tick failed with error. This is likely a transient error.",l)}}finally{this._debug("#_autoRefreshTokenTick()","end")}})}catch(a){if(a.isAcquireTimeout||a instanceof px)this._debug("auto refresh token tick lock not available");else throw a}}async _handleVisibilityChange(){if(this._debug("#_handleVisibilityChange()"),!Bt()||!window?.addEventListener)return this.autoRefreshToken&&this.startAutoRefresh(),!1;try{this.visibilityChangedCallback=async()=>await this._onVisibilityChanged(!1),window?.addEventListener("visibilitychange",this.visibilityChangedCallback),await this._onVisibilityChanged(!0)}catch(a){console.error("_handleVisibilityChange",a)}}async _onVisibilityChanged(a){const l=`#_onVisibilityChanged(${a})`;this._debug(l,"visibilityState",document.visibilityState),document.visibilityState==="visible"?(this.autoRefreshToken&&this._startAutoRefresh(),a||(await this.initializePromise,await this._acquireLock(-1,async()=>{if(document.visibilityState!=="visible"){this._debug(l,"acquired the lock to recover the session, but the browser visibilityState is no longer visible, aborting");return}await this._recoverAndRefresh()}))):document.visibilityState==="hidden"&&this.autoRefreshToken&&this._stopAutoRefresh()}async _getUrlForProvider(a,l,i){const c=[`provider=${encodeURIComponent(l)}`];if(i?.redirectTo&&c.push(`redirect_to=${encodeURIComponent(i.redirectTo)}`),i?.scopes&&c.push(`scopes=${encodeURIComponent(i.scopes)}`),this.flowType==="pkce"){const[u,h]=await Cr(this.storage,this.storageKey),m=new URLSearchParams({code_challenge:`${encodeURIComponent(u)}`,code_challenge_method:`${encodeURIComponent(h)}`});c.push(m.toString())}if(i?.queryParams){const u=new URLSearchParams(i.queryParams);c.push(u.toString())}return i?.skipBrowserRedirect&&c.push(`skip_http_redirect=${i.skipBrowserRedirect}`),`${a}?${c.join("&")}`}async _unenroll(a){try{return await this._useSession(async l=>{var i;const{data:c,error:u}=l;return u?{data:null,error:u}:await _e(this.fetch,"DELETE",`${this.url}/factors/${a.factorId}`,{headers:this.headers,jwt:(i=c?.session)===null||i===void 0?void 0:i.access_token})})}catch(l){if(ge(l))return{data:null,error:l};throw l}}async _enroll(a){try{return await this._useSession(async l=>{var i,c;const{data:u,error:h}=l;if(h)return{data:null,error:h};const m=Object.assign({friendly_name:a.friendlyName,factor_type:a.factorType},a.factorType==="phone"?{phone:a.phone}:{issuer:a.issuer}),{data:x,error:g}=await _e(this.fetch,"POST",`${this.url}/factors`,{body:m,headers:this.headers,jwt:(i=u?.session)===null||i===void 0?void 0:i.access_token});return g?{data:null,error:g}:(a.factorType==="totp"&&(!((c=x?.totp)===null||c===void 0)&&c.qr_code)&&(x.totp.qr_code=`data:image/svg+xml;utf-8,${x.totp.qr_code}`),{data:x,error:null})})}catch(l){if(ge(l))return{data:null,error:l};throw l}}async _verify(a){return this._acquireLock(-1,async()=>{try{return await this._useSession(async l=>{var i;const{data:c,error:u}=l;if(u)return{data:null,error:u};const{data:h,error:m}=await _e(this.fetch,"POST",`${this.url}/factors/${a.factorId}/verify`,{body:{code:a.code,challenge_id:a.challengeId},headers:this.headers,jwt:(i=c?.session)===null||i===void 0?void 0:i.access_token});return m?{data:null,error:m}:(await this._saveSession(Object.assign({expires_at:Math.round(Date.now()/1e3)+h.expires_in},h)),await this._notifyAllSubscribers("MFA_CHALLENGE_VERIFIED",h),{data:h,error:m})})}catch(l){if(ge(l))return{data:null,error:l};throw l}})}async _challenge(a){return this._acquireLock(-1,async()=>{try{return await this._useSession(async l=>{var i;const{data:c,error:u}=l;return u?{data:null,error:u}:await _e(this.fetch,"POST",`${this.url}/factors/${a.factorId}/challenge`,{body:{channel:a.channel},headers:this.headers,jwt:(i=c?.session)===null||i===void 0?void 0:i.access_token})})}catch(l){if(ge(l))return{data:null,error:l};throw l}})}async _challengeAndVerify(a){const{data:l,error:i}=await this._challenge({factorId:a.factorId});return i?{data:null,error:i}:await this._verify({factorId:a.factorId,challengeId:l.id,code:a.code})}async _listFactors(){const{data:{user:a},error:l}=await this.getUser();if(l)return{data:null,error:l};const i=a?.factors||[],c=i.filter(h=>h.factor_type==="totp"&&h.status==="verified"),u=i.filter(h=>h.factor_type==="phone"&&h.status==="verified");return{data:{all:i,totp:c,phone:u},error:null}}async _getAuthenticatorAssuranceLevel(){return this._acquireLock(-1,async()=>await this._useSession(async a=>{var l,i;const{data:{session:c},error:u}=a;if(u)return{data:null,error:u};if(!c)return{data:{currentLevel:null,nextLevel:null,currentAuthenticationMethods:[]},error:null};const{payload:h}=Lu(c.access_token);let m=null;h.aal&&(m=h.aal);let x=m;((i=(l=c.user.factors)===null||l===void 0?void 0:l.filter(b=>b.status==="verified"))!==null&&i!==void 0?i:[]).length>0&&(x="aal2");const p=h.amr||[];return{data:{currentLevel:m,nextLevel:x,currentAuthenticationMethods:p},error:null}}))}async fetchJwk(a,l={keys:[]}){let i=l.keys.find(m=>m.kid===a);if(i)return i;const c=Date.now();if(i=this.jwks.keys.find(m=>m.kid===a),i&&this.jwks_cached_at+jw>c)return i;const{data:u,error:h}=await _e(this.fetch,"GET",`${this.url}/.well-known/jwks.json`,{headers:this.headers});if(h)throw h;return!u.keys||u.keys.length===0||(this.jwks=u,this.jwks_cached_at=c,i=u.keys.find(m=>m.kid===a),!i)?null:i}async getClaims(a,l={}){try{let i=a;if(!i){const{data:w,error:S}=await this.getSession();if(S||!w.session)return{data:null,error:S};i=w.session.access_token}const{header:c,payload:u,signature:h,raw:{header:m,payload:x}}=Lu(i);l?.allowExpired||Qw(u.exp);const g=!c.alg||c.alg.startsWith("HS")||!c.kid||!("crypto"in globalThis&&"subtle"in globalThis.crypto)?null:await this.fetchJwk(c.kid,l?.keys?{keys:l.keys}:l?.jwks);if(!g){const{error:w}=await this.getUser(i);if(w)throw w;return{data:{claims:u,header:c,signature:h},error:null}}const p=Yw(c.alg),b=await crypto.subtle.importKey("jwk",g,p,!0,["verify"]);if(!await crypto.subtle.verify(p,b,h,Rw(`${m}.${x}`)))throw new od("Invalid JWT signature");return{data:{claims:u,header:c,signature:h},error:null}}catch(i){if(ge(i))return{data:null,error:i};throw i}}}sl.nextInstanceID=0;const o_=sl;class c_ extends o_{constructor(a){super(a)}}var u_=function(n,a,l,i){function c(u){return u instanceof l?u:new l(function(h){h(u)})}return new(l||(l=Promise))(function(u,h){function m(p){try{g(i.next(p))}catch(b){h(b)}}function x(p){try{g(i.throw(p))}catch(b){h(b)}}function g(p){p.done?u(p.value):c(p.value).then(m,x)}g((i=i.apply(n,a||[])).next())})};class d_{constructor(a,l,i){var c,u,h;if(this.supabaseUrl=a,this.supabaseKey=l,!a)throw new Error("supabaseUrl is required.");if(!l)throw new Error("supabaseKey is required.");const m=gw(a),x=new URL(m);this.realtimeUrl=new URL("realtime/v1",x),this.realtimeUrl.protocol=this.realtimeUrl.protocol.replace("http","ws"),this.authUrl=new URL("auth/v1",x),this.storageUrl=new URL("storage/v1",x),this.functionsUrl=new URL("functions/v1",x);const g=`sb-${x.hostname.split(".")[0]}-auth-token`,p={db:iw,realtime:cw,auth:Object.assign(Object.assign({},ow),{storageKey:g}),global:lw},b=xw(i??{},p);this.storageKey=(c=b.auth.storageKey)!==null&&c!==void 0?c:"",this.headers=(u=b.global.headers)!==null&&u!==void 0?u:{},b.accessToken?(this.accessToken=b.accessToken,this.auth=new Proxy({},{get:(j,w)=>{throw new Error(`@supabase/supabase-js: Supabase Client is configured with the accessToken option, accessing supabase.auth.${String(w)} is not possible`)}})):this.auth=this._initSupabaseAuthClient((h=b.auth)!==null&&h!==void 0?h:{},this.headers,b.global.fetch),this.fetch=fw(l,this._getAccessToken.bind(this),b.global.fetch),this.realtime=this._initRealtimeClient(Object.assign({headers:this.headers,accessToken:this._getAccessToken.bind(this)},b.realtime)),this.rest=new Cj(new URL("rest/v1",x).href,{headers:this.headers,schema:b.db.schema,fetch:this.fetch}),this.storage=new aw(this.storageUrl.href,this.headers,this.fetch,i?.storage),b.accessToken||this._listenForAuthEvents()}get functions(){return new pj(this.functionsUrl.href,{headers:this.headers,customFetch:this.fetch})}from(a){return this.rest.from(a)}schema(a){return this.rest.schema(a)}rpc(a,l={},i={}){return this.rest.rpc(a,l,i)}channel(a,l={config:{}}){return this.realtime.channel(a,l)}getChannels(){return this.realtime.getChannels()}removeChannel(a){return this.realtime.removeChannel(a)}removeAllChannels(){return this.realtime.removeAllChannels()}_getAccessToken(){var a,l;return u_(this,void 0,void 0,function*(){if(this.accessToken)return yield this.accessToken();const{data:i}=yield this.auth.getSession();return(l=(a=i.session)===null||a===void 0?void 0:a.access_token)!==null&&l!==void 0?l:this.supabaseKey})}_initSupabaseAuthClient({autoRefreshToken:a,persistSession:l,detectSessionInUrl:i,storage:c,userStorage:u,storageKey:h,flowType:m,lock:x,debug:g},p,b){const j={Authorization:`Bearer ${this.supabaseKey}`,apikey:`${this.supabaseKey}`};return new c_({url:this.authUrl.href,headers:Object.assign(Object.assign({},j),p),storageKey:h,autoRefreshToken:a,persistSession:l,detectSessionInUrl:i,storage:c,userStorage:u,flowType:m,lock:x,debug:g,fetch:b,hasCustomAuthorizationHeader:Object.keys(this.headers).some(w=>w.toLowerCase()==="authorization")})}_initRealtimeClient(a){return new Vj(this.realtimeUrl.href,Object.assign(Object.assign({},a),{params:Object.assign({apikey:this.supabaseKey},a?.params)}))}_listenForAuthEvents(){return this.auth.onAuthStateChange((l,i)=>{this._handleTokenChanged(l,"CLIENT",i?.access_token)})}_handleTokenChanged(a,l,i){(a==="TOKEN_REFRESHED"||a==="SIGNED_IN")&&this.changedAccessToken!==i?this.changedAccessToken=i:a==="SIGNED_OUT"&&(this.realtime.setAuth(),l=="STORAGE"&&this.auth.signOut(),this.changedAccessToken=void 0)}}const h_=(n,a,l)=>new d_(n,a,l);function f_(){if(typeof window<"u"||typeof process>"u")return!1;const n=process.version;if(n==null)return!1;const a=n.match(/^v(\d+)\./);return a?parseInt(a[1],10)<=18:!1}f_()&&console.warn("⚠️  Node.js 18 and below are deprecated and will no longer be supported in future versions of @supabase/supabase-js. Please upgrade to Node.js 20 or later. For more information, visit: https://github.com/orgs/supabase/discussions/37217");const m_="https://ccffpklqscpzqculffnd.supabase.co",g_="eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZSIsInJlZiI6ImNjZmZwa2xxc2NwenFjdWxmZm5kIiwicm9sZSI6ImFub24iLCJpYXQiOjE3NTcyMTYxMjAsImV4cCI6MjA3Mjc5MjEyMH0.Ngqvdx1pR-Y8inZVgj-uHMBi3c9ZFUlsz_Fc3kDqyN4",x_=m_,p_=g_,ne=h_(x_,p_,{auth:{persistSession:!0,autoRefreshToken:!0,detectSessionInUrl:!1}}),xe=(n,a=null)=>{},st=(n,a)=>{throw console.error(`❌ [DataService] ${a} failed:`,n),new Error(`${a} failed: ${n.message}`)};class pt{static async getProducts(){try{xe("Fetching all products from database");const{data:a,error:l}=await ne.from("products").select("*").order("name");if(l)throw console.error("❌ ProductService.getProducts() error:",l),l;return xe(`Successfully fetched ${a?.length||0} products`),console.log("📦 ProductService.getProducts() result:",a?.length||0,"products"),a||[]}catch(a){console.error("❌ ProductService.getProducts() failed:",a),st(a,"Get products")}}static async getProductById(a){try{xe(`Fetching product by ID: ${a}`);const{data:l,error:i}=await ne.from("products").select("*").eq("id",a).single();if(i)throw i;return xe("Successfully fetched product",l),l}catch(l){st(l,"Get product by ID")}}static async updateProduct(a,l){try{xe(`Updating product ${a}`,l);const{data:i,error:c}=await ne.from("products").update(l).eq("id",a).select();if(c)throw c;return xe("Successfully updated product",i[0]),i[0]}catch(i){st(i,"Update product")}}static async addProduct(a){try{xe("Adding new product",a);const{data:l,error:i}=await ne.from("products").insert([a]).select();if(i)throw i;return xe("Successfully added product",l[0]),l[0]}catch(l){st(l,"Add product")}}static async deleteProduct(a){try{xe(`Safely deleting product ${a}`);const{data:l,error:i}=await ne.rpc("safe_delete_product",{product_id:a});if(i)throw i;return xe("Successfully processed product deletion",l),l}catch(l){st(l,"Delete product")}}static async getLowStockProducts(a=10){try{xe(`Fetching products with stock below ${a}`);const{data:l,error:i}=await ne.from("products").select("*").lt("stock_in_pieces",a).eq("is_active",!0).order("stock_in_pieces",{ascending:!0});if(i)throw i;return xe(`Found ${l?.length||0} low stock products`),l||[]}catch(l){st(l,"Get low stock products")}}}class Da{static async getUsers(){try{xe("Fetching all users from database");const{data:a,error:l}=await ne.from("users").select("*").order("first_name");if(l)throw l;return xe(`Successfully fetched ${a?.length||0} users`),{success:!0,data:a||[]}}catch(a){return console.error("❌ [UserService] Get users failed:",a),{success:!1,error:a.message,data:[{id:1,first_name:"John",last_name:"Admin",email:"admin@medcure.com",role:"admin",is_active:!0,last_login:"2024-01-15T10:30:00Z"},{id:2,first_name:"Sarah",last_name:"Pharmacist",email:"sarah@medcure.com",role:"manager",is_active:!0,last_login:"2024-01-15T09:15:00Z"}]}}}static async getUserByEmail(a){try{xe(`Fetching user by email: ${a}`);const{data:l,error:i}=await ne.from("users").select("*").eq("email",a).single();if(i)throw i;return xe("Successfully fetched user",l),l}catch(l){st(l,"Get user by email")}}static async updateUser(a,l){try{xe(`Updating user ${a}`,l);const{data:i,error:c}=await ne.from("users").update(l).eq("id",a).select();if(c)throw c;return xe("Successfully updated user",i[0]),i[0]}catch(i){st(i,"Update user")}}}class aa{static async processSale(a){try{xe("Processing sale transaction",a);const l=a.items.map(u=>({product_id:u.product_id,quantity:u.unit_quantity,unit_type:u.unit_type,unit_price:u.price_per_unit,total_price:u.total_price}));console.log("🔍 Sales Service - Mapped sale items:",l),console.log("🔍 Sales Service - Original items:",a.items);const{data:i,error:c}=await ne.rpc("create_sale_with_items",{sale_data:{user_id:a.cashierId,total_amount:a.total,payment_method:a.paymentMethod,customer_name:a.customer?.name||null,customer_phone:a.customer?.phone||null,notes:a.notes||null},sale_items:l});if(c)throw c;return xe("Successfully processed sale",i),i}catch(l){st(l,"Process sale")}}static async getSales(a=100){try{xe(`Fetching ${a} sales from database`);const{data:l,error:i}=await ne.from("sales").select(`
          *,
          sale_items (
            *,
            products (*)
          ),
          users (first_name, last_name)
        `).order("created_at",{ascending:!1}).limit(a);if(i)throw console.error("❌ SalesService.getSales() error:",i),i;return xe(`Successfully fetched ${l?.length||0} sales`),console.log("💰 SalesService.getSales() result:",l?.length||0,"sales"),l||[]}catch(l){console.error("❌ SalesService.getSales() failed:",l),st(l,"Get sales")}}static async createSale(a){try{xe("Creating sale",a);const{data:l,error:i}=await ne.from("sales").insert([a]).select();if(i)throw i;return xe("Successfully created sale",l[0]),l[0]}catch(l){st(l,"Create sale")}}static async getSalesByDateRange(a,l){try{xe(`Fetching sales from ${a} to ${l}`);const{data:i,error:c}=await ne.from("sales").select(`
          *,
          sale_items (
            *,
            products (
              id,
              name,
              brand,
              category
            )
          ),
          users (first_name, last_name)
        `).gte("created_at",a.toISOString()).lte("created_at",l.toISOString()).order("created_at",{ascending:!1});if(c)throw c;return xe(`Successfully fetched ${i?.length||0} sales in date range`),i||[]}catch(i){st(i,"Get sales by date range")}}static async voidSale(a,l){try{xe(`Voiding sale ${a} with reason: ${l}`);const{data:i,error:c}=await ne.rpc("void_sale_transaction",{sale_id:a,void_reason:l});if(c)throw c;return xe("Successfully voided sale",i),i}catch(i){st(i,"Void sale")}}static async getDailySalesSummary(a){try{xe(`Fetching daily sales summary for ${a}`);const{data:l,error:i}=await ne.rpc("get_daily_sales_summary",{target_date:a});if(i)throw i;return xe("Successfully fetched daily sales summary",l),l}catch(l){st(l,"Get daily sales summary")}}static async getSalesAnalytics(a,l){try{xe(`Fetching sales analytics from ${a} to ${l}`);const{data:i,error:c}=await ne.rpc("get_sales_analytics",{start_date:a,end_date:l});if(c)throw c;return xe("Successfully fetched sales analytics",i),i}catch(i){st(i,"Get sales analytics")}}}class cd{static async getDashboardData(){try{xe("Fetching dashboard data");const[a,l,i]=await Promise.all([aa.getSales(30),pt.getProducts(),Da.getUsers()]),c=a||[],u=i.success?i.data:[];xe("Dashboard data fetched:",{salesCount:c.length,productsCount:l.length,usersCount:u.length});const h=c.reduce((p,b)=>p+b.total_amount,0),m=l.filter(p=>p.stock_in_pieces<=(p.reorder_level||10)),x=u.filter(p=>p.is_active!==!1),g={totalSales:h,totalProducts:l.length,lowStockCount:m.length,lowStockItems:m.length,totalUsers:u.length,activeUsers:x.length,todaySales:h,recentSales:c.slice(0,5),salesTrend:c.slice(0,7).reverse(),todayMetrics:{totalSales:h,transactions:c.length,customers:new Set(c.map(p=>p.customer_name).filter(Boolean)).size,averageOrder:c.length>0?h/c.length:0},yesterdayMetrics:{totalSales:h*.9,transactions:Math.max(0,c.length-2),customers:Math.max(0,new Set(c.map(p=>p.customer_name).filter(Boolean)).size-1),averageOrder:c.length>1?h*.9/(c.length-2):0},weeklyData:c.slice(0,7).map(p=>({day:new Date(p.created_at).toLocaleDateString("en-US",{weekday:"short"}),sales:p.total_amount,date:p.created_at})),topProducts:l.sort((p,b)=>(b.stock_in_pieces||0)-(p.stock_in_pieces||0)).slice(0,5).map(p=>({name:p.name,sales:p.stock_in_pieces||0,revenue:(p.stock_in_pieces||0)*(p.price_per_piece||0)})),recentTransactions:c.slice(0,5).map(p=>({id:p.id,amount:p.total_amount,customer:p.customer_name||"Walk-in Customer",time:p.created_at,status:p.status||"completed"})),formatGrowth:(p,b)=>{if(!b||b===0)return{percentage:0,trend:"neutral"};const j=(p-b)/b*100;return{percentage:Math.abs(j).toFixed(1),trend:j>0?"up":j<0?"down":"neutral"}},getCriticalAlerts:()=>{const p=l.filter(j=>j.expiry_date&&new Date(j.expiry_date)<new Date&&j.is_active),b=l.filter(j=>j.expiry_date&&new Date(j.expiry_date)<=new Date(Date.now()+720*60*60*1e3)&&new Date(j.expiry_date)>=new Date&&j.is_active);return{lowStock:m.map(j=>({type:"warning",message:`${j.name} is low in stock (${j.stock_in_pieces} remaining)`,product:j})),expiring:[...p.map(j=>({type:"danger",message:`${j.name} has expired`,product:j})),...b.map(j=>({type:"warning",message:`${j.name} expires on ${new Date(j.expiry_date).toLocaleDateString()}`,product:j}))],system:x.length===0?[{type:"danger",message:"No active users found",count:0}]:[]}}};return xe("Successfully compiled dashboard data",g),{success:!0,data:g}}catch(a){return console.error("❌ [DashboardService] Get dashboard data failed:",a),{success:!1,error:a.message,data:{totalSales:0,totalProducts:0,lowStockCount:0,lowStockItems:0,totalUsers:0,activeUsers:0,todaySales:0,recentSales:[],salesTrend:[],getCriticalAlerts:()=>({lowStock:[],expiring:[],system:[{type:"danger",message:"Dashboard data failed to load",count:0}]})}}}}}class Rr{static async signIn(a,l){try{xe(`Attempting sign in for email: ${a}`);const{data:i,error:c}=await ne.auth.signInWithPassword({email:a,password:l});if(c)throw c;const u=await Da.getUserByEmail(a),h={...i,user:u};return xe("Successfully signed in user",h),h}catch(i){st(i,"Sign in")}}static async signOut(){try{xe("Attempting sign out");const{error:a}=await ne.auth.signOut();if(a)throw a;return xe("Successfully signed out"),{success:!0}}catch(a){st(a,"Sign out")}}static async getCurrentUser(){try{xe("Fetching current user");const{data:{user:a}}=await ne.auth.getUser();if(a){const l=await Da.getUserByEmail(a.email);return xe("Successfully fetched current user",l),l}return xe("No current user found"),null}catch(a){st(a,"Get current user")}}}class na{static async updateLastLogin(a){try{const l=new Date().toISOString();console.log(`🔍 [LoginTracking] Attempting to update last login for user ID: ${a}`);const{data:i,error:c}=await ne.from("users").update({last_login:l,updated_at:l}).eq("id",a).select();if(c)throw console.error("❌ [LoginTracking] Supabase error:",c),this.updateLocalStorageLastLogin(a,l),c;return console.log("✅ [LoginTracking] Successfully updated last login:",i),await this.logLoginActivity(a,"login",{timestamp:l,ip_address:await this.getClientIP(),user_agent:navigator.userAgent}),this.updateLocalStorageLastLogin(a,l),{success:!0,timestamp:l,data:i}}catch(l){console.error("❌ [LoginTracking] Failed to update last login:",l);const i=new Date().toISOString();return this.updateLocalStorageLastLogin(a,i),{success:!1,error:l.message,timestamp:i}}}static updateLocalStorageLastLogin(a,l){try{const i=localStorage.getItem("medcure-current-user");if(i){const c=JSON.parse(i);(c.id===a||c.user_id===a)&&(c.last_login=l,localStorage.setItem("medcure-current-user",JSON.stringify(c)),console.log(`✅ [LoginTracking] Updated localStorage last login for user ${a}`))}}catch(i){console.error("❌ [LoginTracking] Failed to update localStorage:",i)}}static async logLoginActivity(a,l,i={}){try{const{error:c}=await ne.from("user_activity_logs").insert({user_id:a,action_type:l,metadata:i,created_at:new Date().toISOString()});if(c)throw c;return{success:!0}}catch(c){return console.error("❌ [LoginTracking] Failed to log activity:",c),{success:!1,error:c.message}}}static async getLoginHistory(a,l=10){try{const{data:i,error:c}=await ne.from("user_activity_logs").select("*").eq("user_id",a).in("action_type",["login","logout"]).order("created_at",{ascending:!1}).limit(l);if(c)throw c;return{success:!0,data:i||[]}}catch(i){return console.error("❌ [LoginTracking] Failed to get login history:",i),{success:!1,error:i.message,data:[]}}}static async getActiveSessions(){try{const a=new Date(Date.now()-864e5).toISOString(),{data:l,error:i}=await ne.from("users").select(`
          id,
          first_name,
          last_name,
          email,
          role,
          last_login,
          is_active
        `).gte("last_login",a).eq("is_active",!0).order("last_login",{ascending:!1});if(i)throw i;return{success:!0,data:l||[]}}catch(a){return console.error("❌ [LoginTracking] Failed to get active sessions:",a),{success:!1,error:a.message,data:[]}}}static async getLoginStats(a="week"){try{let l;const i=new Date;switch(a){case"day":l=new Date(i.getTime()-1440*60*1e3);break;case"week":l=new Date(i.getTime()-10080*60*1e3);break;case"month":l=new Date(i.getTime()-720*60*60*1e3);break;default:l=new Date(i.getTime()-10080*60*1e3)}const{data:c,error:u}=await ne.from("user_activity_logs").select("user_id, created_at, metadata").eq("action_type","login").gte("created_at",l.toISOString());if(u)throw u;const h=c?.length||0,m=new Set(c?.map(g=>g.user_id)).size,x=h/Math.ceil((i-l)/(1440*60*1e3));return{success:!0,data:{totalLogins:h,uniqueUsers:m,avgLoginsPerDay:Math.round(x*100)/100,timeframe:a,startDate:l.toISOString(),endDate:i.toISOString()}}}catch(l){return console.error("❌ [LoginTracking] Failed to get login stats:",l),{success:!1,error:l.message,data:{totalLogins:0,uniqueUsers:0,avgLoginsPerDay:0,timeframe:a}}}}static async getOnlineUsers(){try{const a=new Date(Date.now()-9e5).toISOString(),{data:l,error:i}=await ne.from("users").select(`
          id,
          first_name,
          last_name,
          email,
          role,
          last_login
        `).gte("last_login",a).eq("is_active",!0).order("last_login",{ascending:!1});if(i)throw i;return{success:!0,data:l||[]}}catch(a){return console.error("❌ [LoginTracking] Failed to get online users:",a),{success:!1,error:a.message,data:[]}}}static async trackLogout(a){try{return await this.logLoginActivity(a,"logout",{timestamp:new Date().toISOString(),ip_address:await this.getClientIP(),user_agent:navigator.userAgent}),console.log(`✅ [LoginTracking] Logged logout for user ${a}`),{success:!0}}catch(l){return console.error("❌ [LoginTracking] Failed to track logout:",l),{success:!1,error:l.message}}}static async getClientIP(){try{return"client-side"}catch{return"unknown"}}static formatLastLogin(a){if(!a)return"Never";const l=new Date(a),c=Math.floor((new Date-l)/(1e3*60));if(c<1)return"Just now";if(c<60)return`${c} minutes ago`;const u=Math.floor(c/60);if(u<24)return`${u} hours ago`;const h=Math.floor(u/24);return h<7?`${h} days ago`:l.toLocaleDateString()}static isUserOnline(a){if(!a)return!1;const l=new Date(a);return(new Date-l)/(1e3*60)<=15}}const $u={signIn:async(n,a)=>{try{const l=await Rr.signIn(n,a);if(l&&l.user){console.log("🔍 [AuthService] Login successful, updating last login for user:",l.user);const i=l.user.id||l.user.user_id;if(i){const c=await na.updateLastLogin(i);console.log("📊 [AuthService] Login tracking result:",c)}else console.warn("⚠️ [AuthService] No user ID found for login tracking")}return l}catch(l){return console.error("❌ [AuthService] Sign in failed:",l),{success:!1,error:l.message}}},signOut:async()=>{try{const n=localStorage.getItem("medcure-current-user");if(n){const a=JSON.parse(n);await na.trackLogout(a.id)}return localStorage.removeItem("medcure-current-user"),await Rr.signOut()}catch(n){return console.error("❌ [AuthService] Sign out failed:",n),localStorage.removeItem("medcure-current-user"),{success:!1,error:n.message}}},getCurrentUser:async()=>await Rr.getCurrentUser(),getSession:async()=>await Rr.getSession(),getUserProfile:async n=>await Rr.getUserProfile(n),refreshSession:async()=>await Rr.refreshSession(),isAuthenticated:()=>!!localStorage.getItem("medcure-current-user"),getUserPermissions:n=>n?.permissions||[],hasPermission:(n,a)=>n?.permissions?.includes(a)||!1};function yx({children:n}){const[a,l]=N.useState(null),[i,c]=N.useState(null),[u,h]=N.useState(null),[m,x]=N.useState(!0);N.useEffect(()=>{g()},[]);const g=async()=>{try{const w=await $u.getCurrentUser();w&&(c(w),h(w.role),l({user:w,access_token:"mock-token"}))}catch(w){console.error("Error initializing auth:",w)}finally{x(!1)}},p=async(w,S)=>{try{const _=await $u.signIn(w,S);return _.user&&(c(_.user),h(_.user.role),l(_.session||{user:_.user,access_token:"mock-token"}),localStorage.setItem("medcure-current-user",JSON.stringify(_.user))),{data:_,error:null}}catch(_){return{data:null,error:{message:_.message}}}},b=async()=>{try{return await $u.signOut(),l(null),c(null),h(null),{error:null}}catch(w){return{error:{message:w.message}}}},j=N.useMemo(()=>({session:a,user:i,role:u,isLoadingAuth:m,signIn:p,signOut:b}),[a,i,u,m]);return s.jsx(Wg.Provider,{value:j,children:n})}yx.propTypes={children:Zu.node.isRequired};function As(){const n=N.useContext(Wg);if(n===void 0)throw new Error("useAuth must be used within an AuthProvider");return n}function y_(){return s.jsx("div",{className:"min-h-screen bg-gray-50 flex flex-col justify-center",children:s.jsx("div",{className:"relative py-3 sm:max-w-xl sm:mx-auto",children:s.jsxs("div",{className:"text-center",children:[s.jsx("div",{className:"mx-auto w-16 h-16 border-4 border-blue-600 border-t-transparent rounded-full animate-spin"}),s.jsx("p",{className:"mt-4 text-gray-600 text-lg",children:"Loading Medcure..."})]})})})}/**
 * @license lucide-react v0.542.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const b_=n=>n.replace(/([a-z0-9])([A-Z])/g,"$1-$2").toLowerCase(),v_=n=>n.replace(/^([A-Z])|[\s-_]+(\w)/g,(a,l,i)=>i?i.toUpperCase():l.toLowerCase()),_g=n=>{const a=v_(n);return a.charAt(0).toUpperCase()+a.slice(1)},bx=(...n)=>n.filter((a,l,i)=>!!a&&a.trim()!==""&&i.indexOf(a)===l).join(" ").trim(),j_=n=>{for(const a in n)if(a.startsWith("aria-")||a==="role"||a==="title")return!0};/**
 * @license lucide-react v0.542.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */var w_={xmlns:"http://www.w3.org/2000/svg",width:24,height:24,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:2,strokeLinecap:"round",strokeLinejoin:"round"};/**
 * @license lucide-react v0.542.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const __=N.forwardRef(({color:n="currentColor",size:a=24,strokeWidth:l=2,absoluteStrokeWidth:i,className:c="",children:u,iconNode:h,...m},x)=>N.createElement("svg",{ref:x,...w_,width:a,height:a,stroke:n,strokeWidth:i?Number(l)*24/Number(a):l,className:bx("lucide",c),...!u&&!j_(m)&&{"aria-hidden":"true"},...m},[...h.map(([g,p])=>N.createElement(g,p)),...Array.isArray(u)?u:[u]]));/**
 * @license lucide-react v0.542.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const se=(n,a)=>{const l=N.forwardRef(({className:i,...c},u)=>N.createElement(__,{ref:u,iconNode:a,className:bx(`lucide-${b_(_g(n))}`,`lucide-${n}`,i),...c}));return l.displayName=_g(n),l};/**
 * @license lucide-react v0.542.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const N_=[["path",{d:"M22 12h-2.48a2 2 0 0 0-1.93 1.46l-2.35 8.36a.25.25 0 0 1-.48 0L9.24 2.18a.25.25 0 0 0-.48 0l-2.35 8.36A2 2 0 0 1 4.49 12H2",key:"169zse"}]],Oa=se("activity",N_);/**
 * @license lucide-react v0.542.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const S_=[["rect",{width:"20",height:"5",x:"2",y:"3",rx:"1",key:"1wp1u1"}],["path",{d:"M4 8v11a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V8",key:"1s80jp"}],["path",{d:"M10 12h4",key:"a56b0p"}]],so=se("archive",S_);/**
 * @license lucide-react v0.542.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const k_=[["path",{d:"m12 19-7-7 7-7",key:"1l729n"}],["path",{d:"M19 12H5",key:"x3x0zl"}]],C_=se("arrow-left",k_);/**
 * @license lucide-react v0.542.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const E_=[["path",{d:"M7 7h10v10",key:"1tivn9"}],["path",{d:"M7 17 17 7",key:"1vkiza"}]],A_=se("arrow-up-right",E_);/**
 * @license lucide-react v0.542.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const T_=[["path",{d:"M10.268 21a2 2 0 0 0 3.464 0",key:"vwvbt9"}],["path",{d:"M3.262 15.326A1 1 0 0 0 4 17h16a1 1 0 0 0 .74-1.673C19.41 13.956 18 12.499 18 8A6 6 0 0 0 6 8c0 4.499-1.411 5.956-2.738 7.326",key:"11g9vi"}]],Td=se("bell",T_);/**
 * @license lucide-react v0.542.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const R_=[["path",{d:"M21 8a2 2 0 0 0-1-1.73l-7-4a2 2 0 0 0-2 0l-7 4A2 2 0 0 0 3 8v8a2 2 0 0 0 1 1.73l7 4a2 2 0 0 0 2 0l7-4A2 2 0 0 0 21 16Z",key:"hh9hay"}],["path",{d:"m3.3 7 8.7 5 8.7-5",key:"g66t2b"}],["path",{d:"M12 22V12",key:"d0xqtd"}]],O_=se("box",R_);/**
 * @license lucide-react v0.542.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const D_=[["path",{d:"M8 2v4",key:"1cmpym"}],["path",{d:"M16 2v4",key:"4m81vk"}],["rect",{width:"18",height:"18",x:"3",y:"4",rx:"2",key:"1hopcy"}],["path",{d:"M3 10h18",key:"8toen8"}]],ao=se("calendar",D_);/**
 * @license lucide-react v0.542.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const M_=[["path",{d:"M3 3v16a2 2 0 0 0 2 2h16",key:"c24i48"}],["path",{d:"M18 17V9",key:"2bz60n"}],["path",{d:"M13 17V5",key:"1frdt8"}],["path",{d:"M8 17v-3",key:"17ska0"}]],Lr=se("chart-column",M_);/**
 * @license lucide-react v0.542.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const U_=[["path",{d:"m9 18 6-6-6-6",key:"mthhwq"}]],P_=se("chevron-right",U_);/**
 * @license lucide-react v0.542.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const L_=[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["line",{x1:"12",x2:"12",y1:"8",y2:"12",key:"1pkeuh"}],["line",{x1:"12",x2:"12.01",y1:"16",y2:"16",key:"4dfq90"}]],vx=se("circle-alert",L_);/**
 * @license lucide-react v0.542.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const q_=[["path",{d:"M21.801 10A10 10 0 1 1 17 3.335",key:"yps3ct"}],["path",{d:"m9 11 3 3L22 4",key:"1pflzl"}]],jx=se("circle-check-big",q_);/**
 * @license lucide-react v0.542.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const z_=[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"m15 9-6 6",key:"1uzhvr"}],["path",{d:"m9 9 6 6",key:"z0biqf"}]],$_=se("circle-x",z_);/**
 * @license lucide-react v0.542.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const B_=[["path",{d:"M12 6v6l4 2",key:"mmk7yg"}],["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}]],Gi=se("clock",B_);/**
 * @license lucide-react v0.542.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const H_=[["rect",{width:"20",height:"14",x:"2",y:"5",rx:"2",key:"ynyp8z"}],["line",{x1:"2",x2:"22",y1:"10",y2:"10",key:"1b3vmo"}]],Bu=se("credit-card",H_);/**
 * @license lucide-react v0.542.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const G_=[["ellipse",{cx:"12",cy:"5",rx:"9",ry:"3",key:"msslwz"}],["path",{d:"M3 5V19A9 3 0 0 0 21 19V5",key:"1wlel7"}],["path",{d:"M3 12A9 3 0 0 0 21 12",key:"mv7ke4"}]],wx=se("database",G_);/**
 * @license lucide-react v0.542.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const V_=[["line",{x1:"12",x2:"12",y1:"2",y2:"22",key:"7eqyqh"}],["path",{d:"M17 5H9.5a3.5 3.5 0 0 0 0 7h5a3.5 3.5 0 0 1 0 7H6",key:"1b0p4s"}]],ns=se("dollar-sign",V_);/**
 * @license lucide-react v0.542.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Q_=[["path",{d:"M12 15V3",key:"m9g1x1"}],["path",{d:"M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4",key:"ih7n3h"}],["path",{d:"m7 10 5 5 5-5",key:"brsn70"}]],Ss=se("download",Q_);/**
 * @license lucide-react v0.542.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Y_=[["path",{d:"M10.733 5.076a10.744 10.744 0 0 1 11.205 6.575 1 1 0 0 1 0 .696 10.747 10.747 0 0 1-1.444 2.49",key:"ct8e1f"}],["path",{d:"M14.084 14.158a3 3 0 0 1-4.242-4.242",key:"151rxh"}],["path",{d:"M17.479 17.499a10.75 10.75 0 0 1-15.417-5.151 1 1 0 0 1 0-.696 10.75 10.75 0 0 1 4.446-5.143",key:"13bj9a"}],["path",{d:"m2 2 20 20",key:"1ooewy"}]],Rd=se("eye-off",Y_);/**
 * @license lucide-react v0.542.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const F_=[["path",{d:"M2.062 12.348a1 1 0 0 1 0-.696 10.75 10.75 0 0 1 19.876 0 1 1 0 0 1 0 .696 10.75 10.75 0 0 1-19.876 0",key:"1nclc0"}],["circle",{cx:"12",cy:"12",r:"3",key:"1v7zrd"}]],Ua=se("eye",F_);/**
 * @license lucide-react v0.542.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const I_=[["path",{d:"M15 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V7Z",key:"1rqfz7"}],["path",{d:"M14 2v4a2 2 0 0 0 2 2h4",key:"tnqrlb"}],["path",{d:"M10 9H8",key:"b1mrlr"}],["path",{d:"M16 13H8",key:"t4e002"}],["path",{d:"M16 17H8",key:"z1uh3a"}]],_x=se("file-text",I_);/**
 * @license lucide-react v0.542.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const K_=[["path",{d:"M15 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V7Z",key:"1rqfz7"}],["path",{d:"M14 2v4a2 2 0 0 0 2 2h4",key:"tnqrlb"}]],X_=se("file",K_);/**
 * @license lucide-react v0.542.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Z_=[["path",{d:"M12 10v6",key:"1bos4e"}],["path",{d:"M9 13h6",key:"1uhe8q"}],["path",{d:"M20 20a2 2 0 0 0 2-2V8a2 2 0 0 0-2-2h-7.9a2 2 0 0 1-1.69-.9L9.6 3.9A2 2 0 0 0 7.93 3H4a2 2 0 0 0-2 2v13a2 2 0 0 0 2 2Z",key:"1kt360"}]],J_=se("folder-plus",Z_);/**
 * @license lucide-react v0.542.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const W_=[["path",{d:"M10 20a1 1 0 0 0 .553.895l2 1A1 1 0 0 0 14 21v-7a2 2 0 0 1 .517-1.341L21.74 4.67A1 1 0 0 0 21 3H3a1 1 0 0 0-.742 1.67l7.225 7.989A2 2 0 0 1 10 14z",key:"sc7q7i"}]],Nx=se("funnel",W_);/**
 * @license lucide-react v0.542.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const e1=[["rect",{width:"18",height:"18",x:"3",y:"3",rx:"2",key:"afitv7"}],["path",{d:"M3 9h18",key:"1pudct"}],["path",{d:"M3 15h18",key:"5xshup"}],["path",{d:"M9 3v18",key:"fh3hqa"}],["path",{d:"M15 3v18",key:"14nvp0"}]],t1=se("grid-3x3",e1);/**
 * @license lucide-react v0.542.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const s1=[["path",{d:"M3 14h3a2 2 0 0 1 2 2v3a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-7a9 9 0 0 1 18 0v7a2 2 0 0 1-2 2h-1a2 2 0 0 1-2-2v-3a2 2 0 0 1 2-2h3",key:"1xhozi"}]],a1=se("headphones",s1);/**
 * @license lucide-react v0.542.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const r1=[["path",{d:"M2 9.5a5.5 5.5 0 0 1 9.591-3.676.56.56 0 0 0 .818 0A5.49 5.49 0 0 1 22 9.5c0 2.29-1.5 4-3 5.5l-5.492 5.313a2 2 0 0 1-3 .019L5 15c-1.5-1.5-3-3.2-3-5.5",key:"mvr1a0"}]],n1=se("heart",r1);/**
 * @license lucide-react v0.542.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const l1=[["path",{d:"M3 12a9 9 0 1 0 9-9 9.75 9.75 0 0 0-6.74 2.74L3 8",key:"1357e3"}],["path",{d:"M3 3v5h5",key:"1xhq8a"}],["path",{d:"M12 7v5l4 2",key:"1fdv2h"}]],Hu=se("history",l1);/**
 * @license lucide-react v0.542.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const i1=[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"M12 16v-4",key:"1dtifu"}],["path",{d:"M12 8h.01",key:"e9boi3"}]],Od=se("info",i1);/**
 * @license lucide-react v0.542.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const o1=[["path",{d:"M12.83 2.18a2 2 0 0 0-1.66 0L2.6 6.08a1 1 0 0 0 0 1.83l8.58 3.91a2 2 0 0 0 1.66 0l8.58-3.9a1 1 0 0 0 0-1.83z",key:"zw3jo"}],["path",{d:"M2 12a1 1 0 0 0 .58.91l8.6 3.91a2 2 0 0 0 1.65 0l8.58-3.9A1 1 0 0 0 22 12",key:"1wduqc"}],["path",{d:"M2 17a1 1 0 0 0 .58.91l8.6 3.91a2 2 0 0 0 1.65 0l8.58-3.9A1 1 0 0 0 22 17",key:"kqbvx6"}]],c1=se("layers",o1);/**
 * @license lucide-react v0.542.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const u1=[["rect",{width:"7",height:"9",x:"3",y:"3",rx:"1",key:"10lvy0"}],["rect",{width:"7",height:"5",x:"14",y:"3",rx:"1",key:"16une8"}],["rect",{width:"7",height:"9",x:"14",y:"12",rx:"1",key:"1hutg5"}],["rect",{width:"7",height:"5",x:"3",y:"16",rx:"1",key:"ldoo1y"}]],d1=se("layout-dashboard",u1);/**
 * @license lucide-react v0.542.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const h1=[["path",{d:"M3 12h.01",key:"nlz23k"}],["path",{d:"M3 18h.01",key:"1tta3j"}],["path",{d:"M3 6h.01",key:"1rqtza"}],["path",{d:"M8 12h13",key:"1za7za"}],["path",{d:"M8 18h13",key:"1lx6n3"}],["path",{d:"M8 6h13",key:"ik3vkj"}]],f1=se("list",h1);/**
 * @license lucide-react v0.542.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const m1=[["path",{d:"M21 12a9 9 0 1 1-6.219-8.56",key:"13zald"}]],Sx=se("loader-circle",m1);/**
 * @license lucide-react v0.542.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const g1=[["rect",{width:"18",height:"11",x:"3",y:"11",rx:"2",ry:"2",key:"1w4ew1"}],["path",{d:"M7 11V7a5 5 0 0 1 10 0v4",key:"fwvmzm"}]],Di=se("lock",g1);/**
 * @license lucide-react v0.542.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const x1=[["path",{d:"m10 17 5-5-5-5",key:"1bsop3"}],["path",{d:"M15 12H3",key:"6jk70r"}],["path",{d:"M15 3h4a2 2 0 0 1 2 2v14a2 2 0 0 1-2 2h-4",key:"u53s6r"}]],p1=se("log-in",x1);/**
 * @license lucide-react v0.542.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const y1=[["path",{d:"m16 17 5-5-5-5",key:"1bji2h"}],["path",{d:"M21 12H9",key:"dn1m92"}],["path",{d:"M9 21H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h4",key:"1uf3rs"}]],b1=se("log-out",y1);/**
 * @license lucide-react v0.542.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const v1=[["path",{d:"m22 7-8.991 5.727a2 2 0 0 1-2.009 0L2 7",key:"132q7q"}],["rect",{x:"2",y:"4",width:"20",height:"16",rx:"2",key:"izxlao"}]],j1=se("mail",v1);/**
 * @license lucide-react v0.542.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const w1=[["path",{d:"M4 12h16",key:"1lakjw"}],["path",{d:"M4 18h16",key:"19g7jn"}],["path",{d:"M4 6h16",key:"1o0s65"}]],_1=se("menu",w1);/**
 * @license lucide-react v0.542.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const N1=[["path",{d:"M5 12h14",key:"1ays0h"}]],kx=se("minus",N1);/**
 * @license lucide-react v0.542.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const S1=[["path",{d:"M11 21.73a2 2 0 0 0 2 0l7-4A2 2 0 0 0 21 16V8a2 2 0 0 0-1-1.73l-7-4a2 2 0 0 0-2 0l-7 4A2 2 0 0 0 3 8v8a2 2 0 0 0 1 1.73z",key:"1a0edw"}],["path",{d:"M12 22V12",key:"d0xqtd"}],["polyline",{points:"3.29 7 12 12 20.71 7",key:"ousv84"}],["path",{d:"m7.5 4.27 9 5.15",key:"1c824w"}]],Me=se("package",S1);/**
 * @license lucide-react v0.542.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const k1=[["path",{d:"M13.832 16.568a1 1 0 0 0 1.213-.303l.355-.465A2 2 0 0 1 17 15h3a2 2 0 0 1 2 2v3a2 2 0 0 1-2 2A18 18 0 0 1 2 4a2 2 0 0 1 2-2h3a2 2 0 0 1 2 2v3a2 2 0 0 1-.8 1.6l-.468.351a1 1 0 0 0-.292 1.233 14 14 0 0 0 6.392 6.384",key:"9njp5v"}]],C1=se("phone",k1);/**
 * @license lucide-react v0.542.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const E1=[["path",{d:"m10.5 20.5 10-10a4.95 4.95 0 1 0-7-7l-10 10a4.95 4.95 0 1 0 7 7Z",key:"wa1lgi"}],["path",{d:"m8.5 8.5 7 7",key:"rvfmvr"}]],A1=se("pill",E1);/**
 * @license lucide-react v0.542.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const T1=[["path",{d:"M5 12h14",key:"1ays0h"}],["path",{d:"M12 5v14",key:"s699le"}]],ol=se("plus",T1);/**
 * @license lucide-react v0.542.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const R1=[["path",{d:"M4 2v20l2-1 2 1 2-1 2 1 2-1 2 1 2-1 2 1V2l-2 1-2-1-2 1-2-1-2 1-2-1-2 1Z",key:"q3az6g"}],["path",{d:"M16 8h-6a2 2 0 1 0 0 4h4a2 2 0 1 1 0 4H8",key:"1h4pet"}],["path",{d:"M12 17.5v-11",key:"1jc1ny"}]],Mi=se("receipt",R1);/**
 * @license lucide-react v0.542.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const O1=[["path",{d:"M3 12a9 9 0 0 1 9-9 9.75 9.75 0 0 1 6.74 2.74L21 8",key:"v9h5vc"}],["path",{d:"M21 3v5h-5",key:"1q7to0"}],["path",{d:"M21 12a9 9 0 0 1-9 9 9.75 9.75 0 0 1-6.74-2.74L3 16",key:"3uifl3"}],["path",{d:"M8 16H3v5",key:"1cv678"}]],yt=se("refresh-cw",O1);/**
 * @license lucide-react v0.542.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const D1=[["path",{d:"M3 12a9 9 0 1 0 9-9 9.75 9.75 0 0 0-6.74 2.74L3 8",key:"1357e3"}],["path",{d:"M3 3v5h5",key:"1xhq8a"}]],M1=se("rotate-ccw",D1);/**
 * @license lucide-react v0.542.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const U1=[["path",{d:"M15.2 3a2 2 0 0 1 1.4.6l3.8 3.8a2 2 0 0 1 .6 1.4V19a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2z",key:"1c8476"}],["path",{d:"M17 21v-7a1 1 0 0 0-1-1H8a1 1 0 0 0-1 1v7",key:"1ydtos"}],["path",{d:"M7 3v4a1 1 0 0 0 1 1h7",key:"t51u73"}]],ud=se("save",U1);/**
 * @license lucide-react v0.542.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const P1=[["path",{d:"m21 21-4.34-4.34",key:"14j7rj"}],["circle",{cx:"11",cy:"11",r:"8",key:"4ej97u"}]],Ii=se("search",P1);/**
 * @license lucide-react v0.542.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const L1=[["path",{d:"M9.671 4.136a2.34 2.34 0 0 1 4.659 0 2.34 2.34 0 0 0 3.319 1.915 2.34 2.34 0 0 1 2.33 4.033 2.34 2.34 0 0 0 0 3.831 2.34 2.34 0 0 1-2.33 4.033 2.34 2.34 0 0 0-3.319 1.915 2.34 2.34 0 0 1-4.659 0 2.34 2.34 0 0 0-3.32-1.915 2.34 2.34 0 0 1-2.33-4.033 2.34 2.34 0 0 0 0-3.831A2.34 2.34 0 0 1 6.35 6.051a2.34 2.34 0 0 0 3.319-1.915",key:"1i5ecw"}],["circle",{cx:"12",cy:"12",r:"3",key:"1v7zrd"}]],qr=se("settings",L1);/**
 * @license lucide-react v0.542.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const q1=[["path",{d:"M20 13c0 5-3.5 7.5-7.66 8.95a1 1 0 0 1-.67-.01C7.5 20.5 4 18 4 13V6a1 1 0 0 1 1-1c2 0 4.5-1.2 6.24-2.72a1.17 1.17 0 0 1 1.52 0C14.51 3.81 17 5 19 5a1 1 0 0 1 1 1z",key:"oel41y"}]],Ki=se("shield",q1);/**
 * @license lucide-react v0.542.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const z1=[["circle",{cx:"8",cy:"21",r:"1",key:"jimo8o"}],["circle",{cx:"19",cy:"21",r:"1",key:"13723u"}],["path",{d:"M2.05 2.05h2l2.66 12.42a2 2 0 0 0 2 1.58h9.78a2 2 0 0 0 1.95-1.57l1.65-7.43H5.12",key:"9zh506"}]],Qt=se("shopping-cart",z1);/**
 * @license lucide-react v0.542.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const $1=[["line",{x1:"21",x2:"14",y1:"4",y2:"4",key:"obuewd"}],["line",{x1:"10",x2:"3",y1:"4",y2:"4",key:"1q6298"}],["line",{x1:"21",x2:"12",y1:"12",y2:"12",key:"1iu8h1"}],["line",{x1:"8",x2:"3",y1:"12",y2:"12",key:"ntss68"}],["line",{x1:"21",x2:"16",y1:"20",y2:"20",key:"14d8ph"}],["line",{x1:"12",x2:"3",y1:"20",y2:"20",key:"m0wm8r"}],["line",{x1:"14",x2:"14",y1:"2",y2:"6",key:"14e1ph"}],["line",{x1:"8",x2:"8",y1:"10",y2:"14",key:"1i6ji0"}],["line",{x1:"16",x2:"16",y1:"18",y2:"22",key:"1lctlv"}]],B1=se("sliders-horizontal",$1);/**
 * @license lucide-react v0.542.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const H1=[["rect",{width:"14",height:"20",x:"5",y:"2",rx:"2",ry:"2",key:"1yt0o3"}],["path",{d:"M12 18h.01",key:"mhygvu"}]],G1=se("smartphone",H1);/**
 * @license lucide-react v0.542.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const V1=[["path",{d:"M12 3H5a2 2 0 0 0-2 2v14a2 2 0 0 0 2 2h14a2 2 0 0 0 2-2v-7",key:"1m0v6g"}],["path",{d:"M18.375 2.625a1 1 0 0 1 3 3l-9.013 9.014a2 2 0 0 1-.853.505l-2.873.84a.5.5 0 0 1-.62-.62l.84-2.873a2 2 0 0 1 .506-.852z",key:"ohrbg2"}]],cl=se("square-pen",V1);/**
 * @license lucide-react v0.542.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Q1=[["path",{d:"M11 2v2",key:"1539x4"}],["path",{d:"M5 2v2",key:"1yf1q8"}],["path",{d:"M5 3H4a2 2 0 0 0-2 2v4a6 6 0 0 0 12 0V5a2 2 0 0 0-2-2h-1",key:"rb5t3r"}],["path",{d:"M8 15a6 6 0 0 0 12 0v-3",key:"x18d4x"}],["circle",{cx:"20",cy:"10",r:"2",key:"ts1r5v"}]],Y1=se("stethoscope",Q1);/**
 * @license lucide-react v0.542.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const F1=[["path",{d:"M12.586 2.586A2 2 0 0 0 11.172 2H4a2 2 0 0 0-2 2v7.172a2 2 0 0 0 .586 1.414l8.704 8.704a2.426 2.426 0 0 0 3.42 0l6.58-6.58a2.426 2.426 0 0 0 0-3.42z",key:"vktsd0"}],["circle",{cx:"7.5",cy:"7.5",r:".5",fill:"currentColor",key:"kqv944"}]],Gr=se("tag",F1);/**
 * @license lucide-react v0.542.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const I1=[["path",{d:"M10 11v6",key:"nco0om"}],["path",{d:"M14 11v6",key:"outv1u"}],["path",{d:"M19 6v14a2 2 0 0 1-2 2H7a2 2 0 0 1-2-2V6",key:"miytrc"}],["path",{d:"M3 6h18",key:"d0wm0j"}],["path",{d:"M8 6V4a2 2 0 0 1 2-2h4a2 2 0 0 1 2 2v2",key:"e791ji"}]],ul=se("trash-2",I1);/**
 * @license lucide-react v0.542.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const K1=[["path",{d:"M16 17h6v-6",key:"t6n2it"}],["path",{d:"m22 17-8.5-8.5-5 5L2 7",key:"x473p"}]],ro=se("trending-down",K1);/**
 * @license lucide-react v0.542.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const X1=[["path",{d:"M16 7h6v6",key:"box55l"}],["path",{d:"m22 7-8.5 8.5-5-5L2 17",key:"1t1m79"}]],Vr=se("trending-up",X1);/**
 * @license lucide-react v0.542.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Z1=[["path",{d:"m21.73 18-8-14a2 2 0 0 0-3.48 0l-8 14A2 2 0 0 0 4 21h16a2 2 0 0 0 1.73-3",key:"wmoenq"}],["path",{d:"M12 9v4",key:"juzpu7"}],["path",{d:"M12 17h.01",key:"p32p05"}]],ks=se("triangle-alert",Z1);/**
 * @license lucide-react v0.542.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const J1=[["path",{d:"M12 3v12",key:"1x0j5s"}],["path",{d:"m17 8-5-5-5 5",key:"7q97r8"}],["path",{d:"M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4",key:"ih7n3h"}]],dd=se("upload",J1);/**
 * @license lucide-react v0.542.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const W1=[["path",{d:"m16 11 2 2 4-4",key:"9rsbq5"}],["path",{d:"M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2",key:"1yyitq"}],["circle",{cx:"9",cy:"7",r:"4",key:"nufk8"}]],e2=se("user-check",W1);/**
 * @license lucide-react v0.542.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const t2=[["path",{d:"M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2",key:"1yyitq"}],["circle",{cx:"9",cy:"7",r:"4",key:"nufk8"}],["line",{x1:"19",x2:"19",y1:"8",y2:"14",key:"1bvyxn"}],["line",{x1:"22",x2:"16",y1:"11",y2:"11",key:"1shjgl"}]],s2=se("user-plus",t2);/**
 * @license lucide-react v0.542.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const a2=[["path",{d:"M19 21v-2a4 4 0 0 0-4-4H9a4 4 0 0 0-4 4v2",key:"975kel"}],["circle",{cx:"12",cy:"7",r:"4",key:"17ys0d"}]],Cx=se("user",a2);/**
 * @license lucide-react v0.542.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const r2=[["path",{d:"M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2",key:"1yyitq"}],["path",{d:"M16 3.128a4 4 0 0 1 0 7.744",key:"16gr8j"}],["path",{d:"M22 21v-2a4 4 0 0 0-3-3.87",key:"kshegd"}],["circle",{cx:"9",cy:"7",r:"4",key:"nufk8"}]],al=se("users",r2);/**
 * @license lucide-react v0.542.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const n2=[["path",{d:"M18 6 6 18",key:"1bl5f8"}],["path",{d:"m6 6 12 12",key:"d8bk6v"}]],Ft=se("x",n2);function l2({onToggleSidebar:n}){const{user:a,signOut:l}=As(),[i,c]=N.useState(!1),[u,h]=N.useState(!1),m=async()=>{try{await l()}catch(p){console.error("Error signing out:",p)}},x=()=>{c(!i)},g=()=>{h(!u)};return s.jsxs("header",{className:"bg-white shadow-lg border-b border-gray-200 h-16 flex items-center justify-between px-4 lg:px-6 relative",children:[s.jsx("div",{className:"absolute inset-0 bg-gradient-to-r from-white via-blue-50/30 to-white"}),s.jsxs("div",{className:"relative z-10 w-full flex items-center justify-between",children:[s.jsxs("div",{className:"flex items-center gap-4",children:[s.jsx("button",{onClick:n,className:"lg:hidden p-2 rounded-xl hover:bg-blue-50 hover:text-blue-600 transition-all duration-200 shadow-sm",children:s.jsx(_1,{className:"h-5 w-5 text-gray-600"})}),s.jsxs("div",{className:"flex items-center gap-3 lg:hidden",children:[s.jsx("div",{className:"w-9 h-9 bg-gradient-to-r from-blue-600 to-blue-700 rounded-xl flex items-center justify-center shadow-md",children:s.jsx("span",{className:"text-white font-bold text-sm",children:"M"})}),s.jsx("span",{className:"font-bold text-xl text-gray-900 hidden sm:block",children:"MedCure Pro"})]})]}),s.jsx("div",{className:"hidden md:flex flex-1 max-w-2xl mx-8",children:s.jsxs("div",{className:"relative w-full",children:[s.jsx(Ii,{className:"absolute left-4 top-1/2 transform -translate-y-1/2 h-5 w-5 text-gray-400"}),s.jsx("input",{type:"text",placeholder:"Search products, sales, or anything...",className:"w-full pl-12 pr-4 py-3 border-2 border-gray-200 rounded-xl focus:ring-2 focus:ring-blue-500 focus:border-blue-500 bg-gray-50/50 transition-all duration-200 text-sm font-medium placeholder-gray-500"})]})}),s.jsxs("div",{className:"flex items-center gap-2",children:[s.jsx("button",{onClick:g,className:"md:hidden p-2.5 rounded-xl hover:bg-blue-50 hover:text-blue-600 transition-all duration-200 shadow-sm",children:s.jsx(Ii,{className:"h-5 w-5 text-gray-600"})}),s.jsxs("button",{onClick:x,className:"relative p-2.5 rounded-xl hover:bg-blue-50 hover:text-blue-600 transition-all duration-200 shadow-sm",children:[s.jsx(Td,{className:"h-5 w-5 text-gray-600"}),s.jsx("span",{className:"absolute -top-1 -right-1 bg-gradient-to-r from-red-500 to-red-600 text-white text-xs w-5 h-5 rounded-full flex items-center justify-center font-bold shadow-md",children:"3"})]}),s.jsx("button",{className:"p-2.5 rounded-xl hover:bg-blue-50 hover:text-blue-600 transition-all duration-200 shadow-sm",children:s.jsx(qr,{className:"h-5 w-5 text-gray-600"})}),s.jsxs("div",{className:"relative group",children:[s.jsxs("button",{className:"flex items-center gap-3 p-2 pl-3 pr-4 rounded-xl hover:bg-blue-50 transition-all duration-200 shadow-sm",children:[s.jsx("div",{className:"w-8 h-8 bg-gradient-to-r from-blue-500 to-blue-600 rounded-full flex items-center justify-center shadow-md",children:s.jsx("span",{className:"text-white font-bold text-xs",children:a?.email?.[0]?.toUpperCase()||"U"})}),s.jsx("span",{className:"hidden sm:block text-sm font-semibold text-gray-700",children:a?.email?.split("@")[0]||"User"})]}),s.jsx("div",{className:"absolute right-0 top-full mt-2 w-52 bg-white rounded-xl shadow-xl border border-gray-100 opacity-0 invisible group-hover:opacity-100 group-hover:visible transition-all duration-200 z-50",children:s.jsxs("div",{className:"p-3",children:[s.jsxs("div",{className:"px-3 py-3 text-sm text-gray-500 border-b border-gray-100 bg-gray-50/50 rounded-lg mb-2",children:[s.jsx("div",{className:"text-xs text-gray-400 uppercase tracking-wide font-semibold",children:"Signed in as"}),s.jsx("div",{className:"font-semibold text-gray-900 mt-1",children:a?.email})]}),s.jsxs("button",{className:"w-full flex items-center gap-3 px-3 py-2.5 text-sm text-gray-700 hover:bg-blue-50 hover:text-blue-700 rounded-lg mt-2 transition-all duration-200",children:[s.jsx(Cx,{className:"h-4 w-4"}),s.jsx("span",{className:"font-medium",children:"Profile"})]}),s.jsxs("button",{className:"w-full flex items-center gap-3 px-3 py-2.5 text-sm text-gray-700 hover:bg-blue-50 hover:text-blue-700 rounded-lg transition-all duration-200",children:[s.jsx(qr,{className:"h-4 w-4"}),s.jsx("span",{className:"font-medium",children:"Settings"})]}),s.jsxs("button",{onClick:m,className:"w-full flex items-center gap-3 px-3 py-2.5 text-sm text-red-600 hover:bg-red-50 hover:text-red-700 rounded-lg mt-2 transition-all duration-200 font-medium",children:[s.jsx(b1,{className:"h-4 w-4"}),s.jsx("span",{children:"Sign out"})]})]})})]})]})]})]})}const i2=[{name:"Dashboard",href:"/dashboard",icon:d1,roles:["admin","manager","cashier"]},{name:"Point of Sale",href:"/pos",icon:Qt,roles:["admin","manager","cashier"]},{name:"Inventory",href:"/inventory",icon:Me,roles:["admin","manager"]},{name:"Management",href:"/management",icon:al,roles:["admin"]},{name:"Analytics",href:"/analytics",icon:Lr,roles:["admin","manager"]}];function o2({isOpen:n,onClose:a}){const l=Kt(),{user:i,role:c}=As(),u=i2.filter(h=>h.roles.includes(c||"cashier"));return s.jsxs(s.Fragment,{children:[n&&s.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 z-40 lg:hidden",onClick:a}),s.jsx("div",{className:`
        fixed inset-y-0 left-0 z-50 w-64 bg-white shadow-lg transform transition-transform duration-300 ease-in-out
        lg:translate-x-0 lg:z-30
        ${n?"translate-x-0":"-translate-x-full lg:translate-x-0"}
      `,children:s.jsxs("div",{className:"flex flex-col h-full",children:[s.jsxs("div",{className:"hidden lg:flex items-center gap-3 p-6 border-b border-gray-200",children:[s.jsx("div",{className:"w-8 h-8 bg-blue-600 rounded-lg flex items-center justify-center",children:s.jsx("span",{className:"text-white font-bold text-sm",children:"M"})}),s.jsx("span",{className:"font-semibold text-xl text-gray-900",children:"MedCure Pro"})]}),s.jsxs("div",{className:"flex items-center justify-between p-4 lg:hidden",children:[s.jsxs("div",{className:"flex items-center gap-2",children:[s.jsx("div",{className:"w-8 h-8 bg-blue-600 rounded-lg flex items-center justify-center",children:s.jsx("span",{className:"text-white font-bold text-sm",children:"M"})}),s.jsx("span",{className:"font-semibold text-xl text-gray-900",children:"MedCure Pro"})]}),s.jsx("button",{onClick:a,className:"p-2 rounded-lg hover:bg-gray-100 transition-colors",children:s.jsx(Ft,{className:"h-5 w-5 text-gray-600"})})]}),s.jsxs("nav",{className:"flex-1 px-4 py-4 lg:px-6 lg:py-6",children:[s.jsx("div",{className:"space-y-2",children:u.map(h=>{const m=l.pathname===h.href,x=h.icon;return s.jsxs(Wn,{to:h.href,onClick:a,className:`
                      flex items-center gap-3 px-4 py-3 rounded-xl text-sm font-medium transition-all duration-200
                      ${m?"bg-blue-600 text-white shadow-lg transform scale-105":"text-gray-700 hover:bg-gray-100 hover:text-gray-900"}
                    `,children:[s.jsx(x,{className:`h-5 w-5 ${m?"text-white":"text-gray-500"}`}),s.jsx("span",{className:"font-medium",children:h.name})]},h.name)})}),s.jsxs("div",{className:"mt-auto pt-6",children:[s.jsx("div",{className:"border-t border-gray-200 pt-6",children:s.jsxs(Wn,{to:"/settings",className:"flex items-center gap-3 px-4 py-3 rounded-xl text-sm font-medium text-gray-700 hover:bg-gray-100 hover:text-gray-900 transition-all duration-200",children:[s.jsx(qr,{className:"h-5 w-5 text-gray-500"}),s.jsx("span",{className:"font-medium",children:"Settings"})]})}),s.jsx("div",{className:"mt-6 p-4 bg-gradient-to-r from-gray-50 to-gray-100 rounded-xl border border-gray-200",children:s.jsxs("div",{className:"flex items-center gap-3",children:[s.jsx("div",{className:"w-10 h-10 bg-gradient-to-r from-blue-500 to-blue-600 rounded-full flex items-center justify-center shadow-md",children:s.jsx("span",{className:"text-sm font-bold text-white",children:i?.email?.[0]?.toUpperCase()||"U"})}),s.jsxs("div",{className:"flex-1 min-w-0",children:[s.jsx("p",{className:"text-sm font-semibold text-gray-900 truncate",children:i?.email||"User"}),s.jsx("p",{className:"text-xs text-gray-500 capitalize font-medium",children:c||"cashier"})]})]})})]})]})]})})]})}function c2({children:n}){const[a,l]=N.useState(!1),i=()=>{l(!a)},c=()=>{l(!1)};return s.jsxs("div",{className:"min-h-screen bg-gray-50",children:[s.jsx(o2,{isOpen:a,onClose:c}),s.jsxs("div",{className:"lg:pl-64",children:[s.jsx(l2,{onToggleSidebar:i}),s.jsx("main",{className:"p-4 lg:p-6",children:s.jsx("div",{className:"max-w-7xl mx-auto",children:n})})]})]})}function Ta({children:n,requiredRole:a=null}){const{user:l,role:i,isLoadingAuth:c}=As(),u=Kt();return c?null:l?a&&i!==a&&i!=="admin"?s.jsx(Jn,{to:"/unauthorized",replace:!0}):s.jsx(c2,{children:n}):s.jsx(Jn,{to:"/login",state:{from:u},replace:!0})}Ta.propTypes={children:Zu.node.isRequired,requiredRole:Zu.string};function u2({size:n="md",color:a="blue",text:l="",className:i=""}){const c={sm:"h-4 w-4",md:"h-6 w-6",lg:"h-8 w-8",xl:"h-12 w-12"},u={blue:"text-blue-600",gray:"text-gray-500",white:"text-white",green:"text-green-600",red:"text-red-600",yellow:"text-yellow-600"};return s.jsxs("div",{className:`flex flex-col items-center justify-center space-y-2 ${i}`,children:[s.jsx(Sx,{className:`animate-spin ${c[n]} ${u[a]}`}),l&&s.jsx("p",{className:`text-sm ${u[a]} font-medium`,children:l})]})}const d2=N.createContext();function h2({children:n}){const[a,l]=N.useState([]),i=N.useCallback((p,b="info",j={})=>{const w=Date.now().toString(),S={id:w,message:p,type:b,duration:j.duration||5e3,action:j.action,persistent:j.persistent||!1};return l(_=>[..._,S]),S.persistent||setTimeout(()=>{c(w)},S.duration),w},[]),c=N.useCallback(p=>{l(b=>b.filter(j=>j.id!==p))},[]),u=N.useCallback((p,b)=>i(p,"success",b),[i]),h=N.useCallback((p,b)=>i(p,"error",b),[i]),m=N.useCallback((p,b)=>i(p,"warning",b),[i]),x=N.useCallback((p,b)=>i(p,"info",b),[i]),g={toasts:a,showToast:i,removeToast:c,success:u,error:h,warning:m,info:x};return s.jsxs(d2.Provider,{value:g,children:[n,s.jsx(f2,{toasts:a,onRemove:c})]})}function f2({toasts:n,onRemove:a}){return s.jsx("div",{className:"fixed top-4 right-4 z-50 space-y-2",children:n.map(l=>s.jsx(m2,{toast:l,onRemove:a},l.id))})}function m2({toast:n,onRemove:a}){const{id:l,message:i,type:c,action:u}=n,m={success:{icon:jx,className:"bg-green-50 border-green-200 text-green-800",iconColor:"text-green-600"},error:{icon:$_,className:"bg-red-50 border-red-200 text-red-800",iconColor:"text-red-600"},warning:{icon:vx,className:"bg-yellow-50 border-yellow-200 text-yellow-800",iconColor:"text-yellow-600"},info:{icon:Od,className:"bg-blue-50 border-blue-200 text-blue-800",iconColor:"text-blue-600"}}[c],x=m.icon;return s.jsxs("div",{className:`
        flex items-start space-x-3 p-4 rounded-lg border shadow-lg
        transform transition-all duration-300 ease-in-out
        min-w-[320px] max-w-md
        ${m.className}
      `,children:[s.jsx(x,{className:`h-5 w-5 mt-0.5 flex-shrink-0 ${m.iconColor}`}),s.jsxs("div",{className:"flex-1 min-w-0",children:[s.jsx("p",{className:"text-sm font-medium",children:i}),u&&s.jsx("div",{className:"mt-2",children:s.jsx("button",{onClick:u.onClick,className:"text-xs font-medium underline hover:no-underline",children:u.label})})]}),s.jsx("button",{onClick:()=>a(l),className:"flex-shrink-0 text-gray-400 hover:text-gray-600 transition-colors",children:s.jsx(Ft,{className:"h-4 w-4"})})]})}function Xi({children:n,variant:a="primary",size:l="md",disabled:i=!1,loading:c=!1,onClick:u,type:h="button",className:m="",icon:x,iconPosition:g="left",fullWidth:p=!1,...b}){const j=`
    inline-flex items-center justify-center font-medium
    rounded-lg transition-colors focus:outline-none focus:ring-2 focus:ring-offset-2
    disabled:opacity-50 disabled:cursor-not-allowed
  `,w={primary:`
      bg-blue-600 text-white hover:bg-blue-700 
      focus:ring-blue-500 border border-transparent
    `,secondary:`
      bg-gray-600 text-white hover:bg-gray-700 
      focus:ring-gray-500 border border-transparent
    `,outline:`
      bg-transparent text-gray-700 border border-gray-300 
      hover:bg-gray-50 focus:ring-gray-500
    `,ghost:`
      bg-transparent text-gray-700 border border-transparent 
      hover:bg-gray-100 focus:ring-gray-500
    `,danger:`
      bg-red-600 text-white hover:bg-red-700 
      focus:ring-red-500 border border-transparent
    `,success:`
      bg-green-600 text-white hover:bg-green-700 
      focus:ring-green-500 border border-transparent
    `,warning:`
      bg-yellow-600 text-white hover:bg-yellow-700 
      focus:ring-yellow-500 border border-transparent
    `},S={xs:"px-2 py-1 text-xs",sm:"px-3 py-1.5 text-sm",md:"px-4 py-2 text-sm",lg:"px-6 py-3 text-base",xl:"px-8 py-4 text-lg"},_={xs:"h-3 w-3",sm:"h-4 w-4",md:"h-4 w-4",lg:"h-5 w-5",xl:"h-6 w-6"},C=`
    ${j}
    ${w[a]}
    ${S[l]}
    ${p?"w-full":""}
    ${m}
  `.trim(),L=_[l],B=x&&!c,z=c;return s.jsxs("button",{type:h,disabled:i||c,onClick:u,className:C,...b,children:[z&&s.jsxs("svg",{className:`animate-spin ${L} ${g==="left"?"mr-2":"ml-2"}`,fill:"none",viewBox:"0 0 24 24",children:[s.jsx("circle",{className:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor",strokeWidth:"4"}),s.jsx("path",{className:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"})]}),B&&g==="left"&&s.jsx(x,{className:`${L} mr-2`}),s.jsx("span",{children:n}),B&&g==="right"&&s.jsx(x,{className:`${L} ml-2`})]})}const g2=N.forwardRef(({label:n,error:a,helperText:l,type:i="text",size:c="md",fullWidth:u=!1,icon:h,iconPosition:m="left",placeholder:x,className:g="",containerClassName:p="",required:b=!1,disabled:j=!1,...w},S)=>{const[_,C]=rs.useState(!1),L=i==="password",B=L&&_?"text":i,z={sm:"px-3 py-1.5 text-sm",md:"px-3 py-2 text-sm",lg:"px-4 py-3 text-base"},U={sm:"h-4 w-4",md:"h-5 w-5",lg:"h-6 w-6"},D=`
    block border border-gray-300 rounded-lg
    focus:ring-2 focus:ring-blue-500 focus:border-transparent
    disabled:bg-gray-50 disabled:cursor-not-allowed
    transition-colors
    ${u?"w-full":""}
    ${a?"border-red-300 focus:ring-red-500":""}
    ${h&&m==="left"?"pl-10":""}
    ${h&&m==="right"?"pr-10":""}
    ${L?"pr-10":""}
    ${z[c]}
    ${g}
  `;return s.jsxs("div",{className:`${p}`,children:[n&&s.jsxs("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:[n,b&&s.jsx("span",{className:"text-red-500 ml-1",children:"*"})]}),s.jsxs("div",{className:"relative",children:[h&&m==="left"&&s.jsx("div",{className:"absolute inset-y-0 left-0 pl-3 flex items-center pointer-events-none",children:s.jsx(h,{className:`text-gray-400 ${U[c]}`})}),s.jsx("input",{ref:S,type:B,placeholder:x,disabled:j,className:D,...w}),h&&m==="right"&&!L&&s.jsx("div",{className:"absolute inset-y-0 right-0 pr-3 flex items-center pointer-events-none",children:s.jsx(h,{className:`text-gray-400 ${U[c]}`})}),L&&s.jsx("button",{type:"button",onClick:()=>C(!_),className:"absolute inset-y-0 right-0 pr-3 flex items-center",children:_?s.jsx(Rd,{className:`text-gray-400 hover:text-gray-600 ${U[c]}`}):s.jsx(Ua,{className:`text-gray-400 hover:text-gray-600 ${U[c]}`})})]}),a&&s.jsx("p",{className:"mt-1 text-sm text-red-600",children:a}),l&&!a&&s.jsx("p",{className:"mt-1 text-sm text-gray-500",children:l})]})});g2.displayName="Input";const x2=N.forwardRef(({label:n,error:a,helperText:l,rows:i=3,fullWidth:c=!1,placeholder:u,className:h="",containerClassName:m="",required:x=!1,disabled:g=!1,...p},b)=>{const j=`
    block border border-gray-300 rounded-lg px-3 py-2 text-sm
    focus:ring-2 focus:ring-blue-500 focus:border-transparent
    disabled:bg-gray-50 disabled:cursor-not-allowed
    transition-colors resize-vertical
    ${c?"w-full":""}
    ${a?"border-red-300 focus:ring-red-500":""}
    ${h}
  `;return s.jsxs("div",{className:m,children:[n&&s.jsxs("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:[n,x&&s.jsx("span",{className:"text-red-500 ml-1",children:"*"})]}),s.jsx("textarea",{ref:b,rows:i,placeholder:u,disabled:g,className:j,...p}),a&&s.jsx("p",{className:"mt-1 text-sm text-red-600",children:a}),l&&!a&&s.jsx("p",{className:"mt-1 text-sm text-gray-500",children:l})]})});x2.displayName="Textarea";const p2=N.forwardRef(({label:n,error:a,helperText:l,options:i=[],placeholder:c="Select an option",fullWidth:u=!1,className:h="",containerClassName:m="",required:x=!1,disabled:g=!1,...p},b)=>{const j=`
    block border border-gray-300 rounded-lg px-3 py-2 text-sm
    focus:ring-2 focus:ring-blue-500 focus:border-transparent
    disabled:bg-gray-50 disabled:cursor-not-allowed
    transition-colors
    ${u?"w-full":""}
    ${a?"border-red-300 focus:ring-red-500":""}
    ${h}
  `;return s.jsxs("div",{className:m,children:[n&&s.jsxs("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:[n,x&&s.jsx("span",{className:"text-red-500 ml-1",children:"*"})]}),s.jsxs("select",{ref:b,disabled:g,className:j,...p,children:[c&&s.jsx("option",{value:"",disabled:!0,children:c}),i.map((w,S)=>s.jsx("option",{value:w.value,children:w.label},S))]}),a&&s.jsx("p",{className:"mt-1 text-sm text-red-600",children:a}),l&&!a&&s.jsx("p",{className:"mt-1 text-sm text-gray-500",children:l})]})});p2.displayName="Select";class Ex extends rs.Component{constructor(a){super(a),this.state={hasError:!1,error:null,errorInfo:null}}static getDerivedStateFromError(){return{hasError:!0}}componentDidCatch(a,l){console.error("ErrorBoundary caught an error:",a,l),this.setState({error:a,errorInfo:l}),this.props.onError&&typeof this.props.onError=="function"&&this.props.onError(a,l)}handleRetry=()=>{this.setState({hasError:!1,error:null,errorInfo:null})};render(){return this.state.hasError?this.props.fallback?this.props.fallback(this.state.error,this.handleRetry):s.jsx("div",{className:"min-h-screen flex items-center justify-center bg-gray-50 px-4",children:s.jsxs("div",{className:"max-w-md w-full",children:[s.jsxs("div",{className:"text-center mb-6",children:[s.jsx(ks,{className:"mx-auto h-12 w-12 text-red-500 mb-4"}),s.jsx("h1",{className:"text-xl font-semibold text-gray-900 mb-2",children:this.props.title||"Something went wrong"}),s.jsx("p",{className:"text-gray-600",children:this.props.message||"An unexpected error occurred. Please try again."})]}),s.jsxs("div",{className:"space-y-4",children:[s.jsx(Xi,{onClick:this.handleRetry,className:"w-full",icon:yt,children:"Try Again"}),this.props.showBackButton!==!1&&s.jsx(Xi,{variant:"outline",onClick:()=>window.history.back(),className:"w-full",icon:C_,children:"Go Back"})]}),!1]})}):this.props.children}}const Ea=({children:n,title:a,message:l})=>s.jsx(Ex,{title:a||"Page Error",message:l||"This page encountered an error. Please try refreshing or go back.",fallback:(i,c)=>s.jsx("div",{className:"min-h-[400px] flex items-center justify-center",children:s.jsxs("div",{className:"max-w-md w-full text-center",children:[s.jsx(ks,{className:"mx-auto h-10 w-10 text-red-500 mb-4"}),s.jsx("h2",{className:"text-lg font-medium text-gray-900 mb-2",children:a||"Page Error"}),s.jsx("p",{className:"text-gray-600 mb-6",children:l||"This page encountered an error. Please try refreshing or go back."}),s.jsxs("div",{className:"space-y-3",children:[s.jsx(Xi,{onClick:c,icon:yt,children:"Retry"}),s.jsx(Xi,{variant:"outline",onClick:()=>window.location.reload(),children:"Refresh Page"})]})]})}),children:n});class Ur{static async getAllCategories(){try{console.log("🔍 CategoryService: Fetching all categories...");const{data:a,error:l}=await ne.from("categories").select("*").order("sort_order",{ascending:!0}).order("name",{ascending:!0});if(l)throw l;const i=await Promise.all(a.map(async c=>{const u=await this.getCategoryStats(c.id);return{...c,stats:u}}));return console.log(`✅ CategoryService: Retrieved ${i.length} categories`),{success:!0,data:i}}catch(a){return console.error("❌ CategoryService: Error fetching categories:",a),{success:!1,error:a.message,data:[]}}}static async getActiveCategories(){try{console.log("🔍 CategoryService: Fetching active categories...");const{data:a,error:l}=await ne.from("categories").select("*").eq("is_active",!0).order("sort_order",{ascending:!0}).order("name",{ascending:!0});if(l)throw l;return console.log(`✅ CategoryService: Retrieved ${a.length} active categories`),{success:!0,data:a||[]}}catch(a){return console.error("❌ CategoryService: Error fetching active categories:",a),{success:!1,error:a.message,data:[]}}}static async getCategoryStats(a){try{const{data:l,error:i}=await ne.rpc("get_category_stats",{category_uuid:a});if(i)throw i;return l&&l.length>0?l[0]:{total_products:0,active_products:0,archived_products:0,total_value:0,low_stock_count:0}}catch(l){return console.error("❌ CategoryService: Error fetching category stats:",l),{total_products:0,active_products:0,archived_products:0,total_value:0,low_stock_count:0}}}static async createCategory(a){try{console.log("📝 CategoryService: Creating new category:",a.name);const{data:l,error:i}=await ne.from("categories").insert([{name:a.name,description:a.description||"",color:a.color||"#3B82F6",icon:a.icon||"Package",sort_order:a.sort_order||0}]).select().single();if(i)throw i;return console.log("✅ CategoryService: Category created successfully"),{success:!0,data:l}}catch(l){return console.error("❌ CategoryService: Error creating category:",l),{success:!1,error:l.message}}}static async updateCategory(a,l){try{console.log("📝 CategoryService: Updating category:",a);const{data:i,error:c}=await ne.from("categories").update(l).eq("id",a).select().single();if(c)throw c;return console.log("✅ CategoryService: Category updated successfully"),{success:!0,data:i}}catch(i){return console.error("❌ CategoryService: Error updating category:",i),{success:!1,error:i.message}}}static async deleteCategory(a){try{console.log("🗑️ CategoryService: Attempting to delete category:",a);const{data:l,error:i}=await ne.rpc("safe_delete_category",{category_uuid:a});if(i)throw i;return l?(console.log("✅ CategoryService: Category deleted successfully"),{success:!0,message:"Category deleted successfully"}):(console.log("⚠️ CategoryService: Cannot delete category with associated products"),{success:!1,error:"Cannot delete category that has associated products"})}catch(l){return console.error("❌ CategoryService: Error deleting category:",l),{success:!1,error:l.message}}}static async reorderCategories(a){try{console.log("🔄 CategoryService: Reordering categories...");const l=a.map(({id:i,sort_order:c})=>ne.from("categories").update({sort_order:c}).eq("id",i));return await Promise.all(l),console.log("✅ CategoryService: Categories reordered successfully"),{success:!0,message:"Categories reordered successfully"}}catch(l){return console.error("❌ CategoryService: Error reordering categories:",l),{success:!1,error:l.message}}}}class Xn{static async getArchivedProducts(){try{console.log("🔍 ArchiveService: Fetching archived products...");const{data:a,error:l}=await ne.from("archived_products").select("*").order("archived_at",{ascending:!1});if(l)throw l;return console.log(`✅ ArchiveService: Retrieved ${a.length} archived products`),{success:!0,data:a||[]}}catch(a){return console.error("❌ ArchiveService: Error fetching archived products:",a),{success:!1,error:a.message,data:[]}}}static async archiveProduct(a,l){try{console.log("📦 ArchiveService: Archiving product:",a);const{data:i,error:c}=await ne.rpc("archive_product",{product_uuid:a,user_uuid:l});if(c)throw c;return i?(console.log("✅ ArchiveService: Product archived successfully"),{success:!0,message:"Product archived successfully"}):{success:!1,error:"Product not found or already archived"}}catch(i){return console.error("❌ ArchiveService: Error archiving product:",i),{success:!1,error:i.message}}}static async restoreProduct(a){try{console.log("♻️ ArchiveService: Restoring product:",a);const{data:l,error:i}=await ne.rpc("restore_product",{product_uuid:a});if(i)throw i;return l?(console.log("✅ ArchiveService: Product restored successfully"),{success:!0,message:"Product restored successfully"}):{success:!1,error:"Product not found or not archived"}}catch(l){return console.error("❌ ArchiveService: Error restoring product:",l),{success:!1,error:l.message}}}static async permanentlyDeleteProduct(a){try{console.log("🗑️ ArchiveService: Permanently deleting product:",a);const{data:l,error:i}=await ne.from("products").select("is_archived").eq("id",a).single();if(i)throw i;if(!l.is_archived)return{success:!1,error:"Only archived products can be permanently deleted"};const{error:c}=await ne.from("products").delete().eq("id",a);if(c)throw c;return console.log("✅ ArchiveService: Product permanently deleted"),{success:!0,message:"Product permanently deleted"}}catch(l){return console.error("❌ ArchiveService: Error permanently deleting product:",l),{success:!1,error:l.message}}}}class Vt{static categoryMappings={"pain relief":"Pain Relief",analgesics:"Pain Relief","anti-inflammatory":"Pain Relief",painkiller:"Pain Relief",nsaid:"Pain Relief",antibiotics:"Antibiotics",antibiotic:"Antibiotics",infection:"Antibiotics",antimicrobial:"Antibiotics",cardiovascular:"Cardiovascular",heart:"Cardiovascular","blood pressure":"Cardiovascular",hypertension:"Cardiovascular",circulation:"Cardiovascular",digestive:"Digestive Health",stomach:"Digestive Health",antacid:"Digestive Health",gastro:"Digestive Health",laxative:"Digestive Health",respiratory:"Respiratory",cough:"Respiratory",cold:"Respiratory",asthma:"Respiratory",bronchial:"Respiratory",vitamins:"Vitamins & Supplements",vitamin:"Vitamins & Supplements",supplements:"Vitamins & Supplements",mineral:"Vitamins & Supplements",multivitamin:"Vitamins & Supplements",diabetes:"Diabetes Care",diabetic:"Diabetes Care",insulin:"Diabetes Care","blood sugar":"Diabetes Care",dermatology:"Dermatology",skin:"Dermatology",topical:"Dermatology",cream:"Dermatology",ointment:"Dermatology",ophthalmology:"Eye Care",eye:"Eye Care",vision:"Eye Care",drops:"Eye Care",general:"General Medicine",misc:"General Medicine",other:"General Medicine",otc:"Over-the-Counter"};static defaultColors=["#EF4444","#F59E0B","#10B981","#3B82F6","#6366F1","#8B5CF6","#EC4899","#F97316","#84CC16","#06B6D4"];static normalizeCategoryName(a){if(!a||typeof a!="string")return"General Medicine";const l=a.toLowerCase().trim();if(this.categoryMappings[l])return this.categoryMappings[l];for(const[i,c]of Object.entries(this.categoryMappings))if(l.includes(i)||i.includes(l))return c;return a.split(" ").map(i=>i.charAt(0).toUpperCase()+i.slice(1).toLowerCase()).join(" ")}static async categoryExists(a){try{const l=this.normalizeCategoryName(a),{data:i,error:c}=await ne.from("categories").select("id, name").ilike("name",l);if(c)throw c;return{exists:i&&i.length>0,category:i&&i.length>0?i[0]:null,normalizedName:l}}catch(l){return console.error("❌ Error checking category existence:",l),{exists:!1,category:null,normalizedName:a}}}static async createCategoryDuringImport(a,l={}){try{console.log(`🧠 Creating category intelligently: "${a}"`);const i=this.normalizeCategoryName(a),c=await this.categoryExists(i);if(c.exists)return console.log(`✅ Category "${i}" already exists`),{success:!0,category:c.category,action:"existing"};const{data:u}=await ne.from("categories").select("sort_order").order("sort_order",{ascending:!1}).limit(1),h=u&&u.length>0?u[0].sort_order+10:10,{data:m}=await ne.from("categories").select("color"),x=m?m.map(S=>S.color):[],g=this.defaultColors.filter(S=>!x.includes(S)),p=g.length>0?g[0]:this.defaultColors[Math.floor(Math.random()*this.defaultColors.length)],b={name:i,description:`Auto-created during import for ${i} products`,color:p,icon:this.getIconForCategory(i),sort_order:h,is_active:!0,metadata:{auto_created:!0,created_during:"import",original_name:a,...l}},{data:j,error:w}=await ne.from("categories").insert([b]).select().single();if(w)throw w;return console.log(`✅ Category "${i}" created successfully`),await this.logCategoryCreation(j,l),{success:!0,category:j,action:"created"}}catch(i){return console.error("❌ Error creating category during import:",i),{success:!1,error:i.message,action:"failed"}}}static getIconForCategory(a){const l=a.toLowerCase();return l.includes("pain")||l.includes("relief")?"Zap":l.includes("heart")||l.includes("cardio")?"Heart":l.includes("vitamin")||l.includes("supplement")?"Shield":l.includes("digestive")||l.includes("stomach")?"Stomach":l.includes("respiratory")||l.includes("cough")?"Droplets":l.includes("skin")||l.includes("dermatology")?"Sun":l.includes("eye")||l.includes("vision")?"Eye":l.includes("diabetes")||l.includes("blood")?"Activity":l.includes("antibiotic")||l.includes("infection")?"Cross":"Package"}static async logCategoryCreation(a,l){try{const i={action:"category_auto_created",category_id:a.id,category_name:a.name,metadata:{...l,auto_created:!0,timestamp:new Date().toISOString()}};await ne.from("user_activity_logs").insert([{user_id:l.user_id||null,action_type:"category_created",metadata:i}])}catch(i){console.warn("⚠️ Failed to log category creation:",i)}}static async calculateCategoryStats(a){try{console.log(`📊 Calculating stats for category: ${a}`);const{data:l,error:i}=await ne.from("products").select(`
          id,
          name,
          category,
          stock_in_pieces,
          price_per_piece,
          cost_price,
          reorder_level,
          is_active
        `).eq("category_id",a).eq("is_active",!0);if(i)throw i;if(!l||l.length===0)return{total_products:0,active_products:0,total_value:0,total_cost_value:0,total_profit_potential:0,low_stock_count:0,out_of_stock_count:0,average_price:0};const c=l.reduce((u,h)=>{const m=(h.stock_in_pieces||0)*(h.price_per_piece||0),x=(h.stock_in_pieces||0)*(h.cost_price||0),g=m-x;return u.total_products++,h.is_active&&u.active_products++,u.total_value+=m,u.total_cost_value+=x,u.total_profit_potential+=g,h.stock_in_pieces<=h.reorder_level&&u.low_stock_count++,h.stock_in_pieces===0&&u.out_of_stock_count++,u.price_sum+=h.price_per_piece||0,u},{total_products:0,active_products:0,total_value:0,total_cost_value:0,total_profit_potential:0,low_stock_count:0,out_of_stock_count:0,price_sum:0});return c.average_price=c.active_products>0?c.price_sum/c.active_products:0,delete c.price_sum,console.log("✅ Category stats calculated:",c),c}catch(l){return console.error("❌ Error calculating category stats:",l),{total_products:0,active_products:0,total_value:0,total_cost_value:0,total_profit_potential:0,low_stock_count:0,out_of_stock_count:0,average_price:0}}}static async updateCategoryStats(a){try{const l=await this.calculateCategoryStats(a),{error:i}=await ne.from("categories").update({stats:l,last_calculated:new Date().toISOString()}).eq("id",a);if(i){if(i.code==="PGRST204"||i.code==="42703")return console.warn(`⚠️ Category stats columns not yet created in database. Skipping update for ${a}`),{success:!0,stats:l,skipped:!0};throw i}return console.log(`✅ Category ${a} stats updated in database`),{success:!0,stats:l}}catch(l){return console.error("❌ Error updating category stats:",l),{success:!1,error:l.message}}}static async updateAllCategoryStats(){try{console.log("🔄 Updating all category statistics...");const{data:a,error:l}=await ne.from("categories").select("id, name").eq("is_active",!0);if(l)throw l;const i=await Promise.all(a.map(h=>this.updateCategoryStats(h.id))),c=i.filter(h=>h.success).length,u=i.filter(h=>!h.success).length;return console.log(`✅ Category stats update complete: ${c} successful, ${u} failed`),{success:u===0,updated:c,failed:u,results:i}}catch(a){return console.error("❌ Error updating all category stats:",a),{success:!1,error:a.message}}}static async getCategoryInsights(){try{console.log("📈 Getting category insights...");let a;try{const{data:i,error:c}=await ne.from("categories").select("*").eq("is_active",!0).order("stats->total_value",{ascending:!1});if(c&&(c.code==="42703"||c.code==="PGRST204")){console.warn("⚠️ Stats column not found, using fallback query");const u=await ne.from("categories").select("*").eq("is_active",!0).order("name");if(u.error)throw u.error;a=u.data}else{if(c)throw c;a=i}}catch(i){console.warn("⚠️ Using basic fallback query for categories",i.message);const{data:c,error:u}=await ne.from("categories").select("*").eq("is_active",!0);if(u)throw u;a=c}const l={total_categories:a.length,total_value:a.reduce((i,c)=>i+(c.stats?.total_value||0),0),total_products:a.reduce((i,c)=>i+(c.stats?.total_products||0),0),total_low_stock:a.reduce((i,c)=>i+(c.stats?.low_stock_count||0),0),top_value_categories:a.sort((i,c)=>(c.stats?.total_value||0)-(i.stats?.total_value||0)).slice(0,5),low_performing_categories:a.filter(i=>(i.stats?.total_value||0)<1e3),auto_created_categories:a.filter(i=>i.metadata?.auto_created),categories_needing_attention:a.filter(i=>(i.stats?.low_stock_count||0)>0)};return console.log("✅ Category insights generated:",l),{success:!0,data:l}}catch(a){return console.error("❌ Error getting category insights:",a),{success:!1,error:a.message,data:{total_categories:0,total_value:0,total_products:0,total_low_stock:0,top_value_categories:[],low_performing_categories:[],auto_created_categories:[],categories_needing_attention:[]}}}}static async processBulkCategoryCreation(a,l={}){try{console.log(`🔄 Processing bulk category creation for ${a.length} categories`);const i=await Promise.all(a.map(async m=>{const x=await this.createCategoryDuringImport(m,l);return{original_name:m,normalized_name:x.category?.name,action:x.action,success:x.success,category_id:x.category?.id}})),c=i.filter(m=>m.action==="created").length,u=i.filter(m=>m.action==="existing").length,h=i.filter(m=>!m.success).length;return console.log(`✅ Bulk category processing complete: ${c} created, ${u} existing, ${h} failed`),{success:h===0,summary:{created:c,existing:u,failed:h},results:i}}catch(i){return console.error("❌ Error in bulk category processing:",i),{success:!1,error:i.message}}}}const y2=({isOpen:n,onClose:a,products:l,categories:i})=>{const[c,u]=N.useState(!1),[h,m]=N.useState({exportType:"products",format:"csv",filters:{category:"all",stockStatus:"all",expiryStatus:"all"},columns:{name:!0,category:!0,brand:!0,stock:!0,price:!0,costPrice:!1,marginPercentage:!1,expiry:!0,supplier:!1,batchNumber:!1,unitConversion:!1}}),x=async()=>{u(!0);try{if(h.exportType==="categories"){const w=await Vt.getCategoryInsights();if(w.success){const S=w.data.top_value_categories.map(_=>({"Category Name":_.name,"Total Products":_.stats?.total_products||0,"Total Value":_.stats?.total_value||0,"Low Stock Count":_.stats?.low_stock_count||0,"Auto Created":_.metadata?.auto_created?"Yes":"No","Last Updated":_.last_calculated||"Not calculated"}));h.format==="csv"?g(S,"category_insights"):p(S,"category_insights")}}else{let w=l||[];h.filters.category!=="all"&&(w=w.filter(_=>_.category===h.filters.category)),h.filters.stockStatus!=="all"&&(w=w.filter(_=>{const C=_.stock_in_pieces||0,L=_.reorder_level||0;switch(h.filters.stockStatus){case"low":return C<=L&&C>0;case"out":return C===0;case"normal":return C>L;default:return!0}})),h.filters.expiryStatus!=="all"&&(w=w.filter(_=>{const C=new Date(_.expiry_date),B=Math.ceil((C-new Date)/(1e3*60*60*24));switch(h.filters.expiryStatus){case"expired":return B<0;case"expiring":return B>=0&&B<=30;case"fresh":return B>30;default:return!0}}));const S=w.map(_=>{const C={};return h.columns.name&&(C["Product Name"]=_.name),h.columns.category&&(C.Category=_.category),h.columns.brand&&(C.Brand=_.brand),h.columns.stock&&(C["Stock (Pieces)"]=_.stock_in_pieces),h.columns.price&&(C["Price per Piece"]=_.price_per_piece),h.columns.costPrice&&(C["Cost Price"]=_.cost_price||""),h.columns.marginPercentage&&(C["Margin Percentage"]=_.margin_percentage||""),h.columns.expiry&&(C["Expiry Date"]=_.expiry_date?.split("T")[0]),h.columns.supplier&&(C.Supplier=_.supplier),h.columns.batchNumber&&(C["Batch Number"]=_.batch_number),h.columns.unitConversion&&(C["Pieces per Sheet"]=_.pieces_per_sheet||1,C["Sheets per Box"]=_.sheets_per_box||1),C});h.format==="csv"?g(S,"inventory_export"):p(S,"inventory_export")}setTimeout(()=>{u(!1),a()},1e3)}catch(w){console.error("Export error:",w),u(!1)}},g=(w,S="export")=>{if(w.length===0)return;const _=Object.keys(w[0]),C=[_.join(","),...w.map(U=>_.map(D=>`"${U[D]||""}"`).join(","))].join(`
`),L=new Blob([C],{type:"text/csv;charset=utf-8;"}),B=document.createElement("a"),z=URL.createObjectURL(L);B.setAttribute("href",z),B.setAttribute("download",`${S}_${new Date().toISOString().split("T")[0]}.csv`),B.style.visibility="hidden",document.body.appendChild(B),B.click(),document.body.removeChild(B)},p=(w,S="export")=>{const _=new Blob([JSON.stringify(w,null,2)],{type:"application/json;charset=utf-8;"}),C=document.createElement("a"),L=URL.createObjectURL(_);C.setAttribute("href",L),C.setAttribute("download",`${S}_${new Date().toISOString().split("T")[0]}.json`),C.style.visibility="hidden",document.body.appendChild(C),C.click(),document.body.removeChild(C)},b=(w,S)=>{m(_=>({..._,filters:{..._.filters,[w]:S}}))},j=(w,S)=>{m(_=>({..._,columns:{..._.columns,[w]:S}}))};return n?s.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50",children:s.jsxs("div",{className:"bg-white rounded-lg shadow-xl max-w-2xl w-full mx-4 max-h-[90vh] overflow-y-auto",children:[s.jsxs("div",{className:"flex items-center justify-between p-6 border-b",children:[s.jsx("h2",{className:"text-xl font-semibold text-gray-900",children:"Export Data"}),s.jsx("button",{onClick:a,className:"text-gray-400 hover:text-gray-600",children:s.jsx(Ft,{className:"w-6 h-6"})})]}),s.jsxs("div",{className:"p-6 space-y-6",children:[s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-3",children:"Export Type"}),s.jsxs("div",{className:"grid grid-cols-2 gap-3",children:[s.jsxs("button",{onClick:()=>m(w=>({...w,exportType:"products"})),className:`p-3 border rounded-lg flex items-center space-x-2 ${h.exportType==="products"?"border-blue-500 bg-blue-50 text-blue-700":"border-gray-300 hover:border-gray-400"}`,children:[s.jsx(_x,{className:"w-5 h-5"}),s.jsx("span",{children:"Product Inventory"})]}),s.jsxs("button",{onClick:()=>m(w=>({...w,exportType:"categories"})),className:`p-3 border rounded-lg flex items-center space-x-2 ${h.exportType==="categories"?"border-blue-500 bg-blue-50 text-blue-700":"border-gray-300 hover:border-gray-400"}`,children:[s.jsx(wx,{className:"w-5 h-5"}),s.jsx("span",{children:"Category Insights"})]})]})]}),s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-3",children:"Export Format"}),s.jsxs("div",{className:"grid grid-cols-2 gap-3",children:[s.jsx("button",{onClick:()=>m(w=>({...w,format:"csv"})),className:`p-3 border rounded-lg text-center ${h.format==="csv"?"border-blue-500 bg-blue-50 text-blue-700":"border-gray-300 hover:border-gray-400"}`,children:"CSV"}),s.jsx("button",{onClick:()=>m(w=>({...w,format:"json"})),className:`p-3 border rounded-lg text-center ${h.format==="json"?"border-blue-500 bg-blue-50 text-blue-700":"border-gray-300 hover:border-gray-400"}`,children:"JSON"})]})]}),h.exportType==="products"&&s.jsxs(s.Fragment,{children:[s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-3",children:"Filters"}),s.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:[s.jsxs("div",{children:[s.jsx("label",{className:"block text-xs font-medium text-gray-600 mb-1",children:"Category"}),s.jsxs("select",{value:h.filters.category,onChange:w=>b("category",w.target.value),className:"w-full p-2 border border-gray-300 rounded-md focus:ring-blue-500 focus:border-blue-500",children:[s.jsx("option",{value:"all",children:"All Categories"}),i&&i.map(w=>s.jsx("option",{value:w,children:w},w))]})]}),s.jsxs("div",{children:[s.jsx("label",{className:"block text-xs font-medium text-gray-600 mb-1",children:"Stock Status"}),s.jsxs("select",{value:h.filters.stockStatus,onChange:w=>b("stockStatus",w.target.value),className:"w-full p-2 border border-gray-300 rounded-md focus:ring-blue-500 focus:border-blue-500",children:[s.jsx("option",{value:"all",children:"All Stock Levels"}),s.jsx("option",{value:"low",children:"Low Stock"}),s.jsx("option",{value:"out",children:"Out of Stock"}),s.jsx("option",{value:"normal",children:"Normal Stock"})]})]}),s.jsxs("div",{children:[s.jsx("label",{className:"block text-xs font-medium text-gray-600 mb-1",children:"Expiry Status"}),s.jsxs("select",{value:h.filters.expiryStatus,onChange:w=>b("expiryStatus",w.target.value),className:"w-full p-2 border border-gray-300 rounded-md focus:ring-blue-500 focus:border-blue-500",children:[s.jsx("option",{value:"all",children:"All Products"}),s.jsx("option",{value:"expired",children:"Expired"}),s.jsx("option",{value:"expiring",children:"Expiring Soon (30 days)"}),s.jsx("option",{value:"fresh",children:"Fresh"})]})]})]})]}),s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-3",children:"Columns to Export"}),s.jsx("div",{className:"grid grid-cols-2 md:grid-cols-3 gap-3",children:Object.entries({name:"Product Name",category:"Category",brand:"Brand",stock:"Stock Level",price:"Price per Piece",costPrice:"Cost Price",marginPercentage:"Margin %",expiry:"Expiry Date",supplier:"Supplier",batchNumber:"Batch Number",unitConversion:"Unit Conversion"}).map(([w,S])=>s.jsxs("label",{className:"flex items-center space-x-2",children:[s.jsx("input",{type:"checkbox",checked:h.columns[w],onChange:_=>j(w,_.target.checked),className:"rounded border-gray-300 text-blue-600 focus:ring-blue-500"}),s.jsx("span",{className:"text-sm text-gray-700",children:S})]},w))})]})]}),h.exportType==="categories"&&s.jsxs("div",{className:"bg-blue-50 p-4 rounded-lg",children:[s.jsx("h4",{className:"font-medium text-blue-900 mb-2",children:"Category Insights Export"}),s.jsx("p",{className:"text-sm text-blue-700",children:"This will export intelligent category insights including total products, total value, low stock counts, auto-creation status, and last update times for all categories in your inventory."})]})]}),s.jsxs("div",{className:"flex items-center justify-end space-x-3 p-6 border-t bg-gray-50",children:[s.jsx("button",{onClick:a,className:"px-4 py-2 text-sm font-medium text-gray-700 bg-white border border-gray-300 rounded-md hover:bg-gray-50 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-blue-500",children:"Cancel"}),s.jsx("button",{onClick:x,disabled:c,className:"px-4 py-2 text-sm font-medium text-white bg-blue-600 border border-transparent rounded-md hover:bg-blue-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-blue-500 disabled:opacity-50 flex items-center space-x-2",children:c?s.jsxs(s.Fragment,{children:[s.jsx("div",{className:"animate-spin rounded-full h-4 w-4 border-b-2 border-white"}),s.jsx("span",{children:"Exporting..."})]}):s.jsxs(s.Fragment,{children:[s.jsx(Ss,{className:"w-4 h-4"}),s.jsx("span",{children:"Export"})]})})]})]})}):null};function b2({isOpen:n,onClose:a,onImport:l}){const[i,c]=N.useState(null),[u,h]=N.useState(!1),[m,x]=N.useState([]),[g,p]=N.useState([]),[b,j]=N.useState("upload"),[w,S]=N.useState(null),[_,C]=N.useState([]),L=N.useRef(null),B=K=>{if(K){if(!K.name.endsWith(".csv")&&!K.name.endsWith(".json")){p(["Please select a CSV or JSON file"]);return}c(K),p([]),z(K)}},z=async K=>{h(!0);try{const te=await K.text();let de=[];K.name.endsWith(".csv")?de=U(te):K.name.endsWith(".json")&&(de=JSON.parse(te));const{validData:me,validationErrors:oe,categoriesFound:Q}=await D(de);x(me),p(oe),C(Q),j("preview")}catch(te){p([`Error processing file: ${te.message}`])}finally{h(!1)}},U=K=>{const te=K.split(`
`),de=te[0].split(",").map(me=>me.replace(/"/g,"").trim());return te.slice(1).filter(me=>me.trim()).map(me=>{const oe=me.split(",").map(X=>X.replace(/"/g,"").trim()),Q={};return de.forEach((X,R)=>{Q[X]=oe[R]||""}),Q})},D=async K=>{const te=[],de=[],me=new Set,oe=[];console.log("🧠 Starting intelligent validation with category processing..."),K.forEach((Q,X)=>{if(Q.Category){const R=Vt.normalizeCategoryName(Q.Category);me.add(R)}});for(const Q of me){const X=await Vt.categoryExists(Q);X.exists||oe.push({original:Q,normalized:X.normalizedName})}return console.log(`📊 Found ${me.size} unique categories, ${oe.length} will be auto-created`),K.forEach((Q,X)=>{const R=[];if(Q["Product Name"]||R.push("Product name is required"),Q.Category||R.push("Category is required"),(!Q["Price per Piece"]||parseFloat(Q["Price per Piece"])<=0)&&R.push("Valid price per piece is required"),(!Q["Stock (Pieces)"]||parseInt(Q["Stock (Pieces)"])<0)&&R.push("Valid stock quantity is required"),["Cost Price","Price per Piece","Margin Percentage","Pieces per Sheet","Sheets per Box","Stock (Pieces)","Reorder Level"].forEach(J=>{if(Q[J]&&Q[J]!==""){const ye=J.includes("Price")||J.includes("Margin")?parseFloat(Q[J]):parseInt(Q[J]);(isNaN(ye)||ye<0)&&R.push(`${J} must be a valid positive number`)}}),Q["Expiry Date"]&&Q["Expiry Date"]!==""){const J=new Date(Q["Expiry Date"]);isNaN(J.getTime())?R.push("Invalid expiry date format (use YYYY-MM-DD)"):J<new Date&&R.push("Expiry date cannot be in the past")}if(Q["Cost Price"]&&Q["Price per Piece"]){const J=parseFloat(Q["Cost Price"]),ye=parseFloat(Q["Price per Piece"]);!isNaN(J)&&!isNaN(ye)&&(J>ye&&R.push("Cost price cannot be higher than selling price"),(ye-J)/J*100<5&&R.push("Profit margin is very low (less than 5%)"))}if(R.length>0)de.push(`Row ${X+2}: ${R.join(", ")}`);else{const J=Vt.normalizeCategoryName(Q.Category),ye={name:Q["Product Name"].trim(),description:Q.Description?Q.Description.trim():"",category:J,brand:Q.Brand?Q.Brand.trim():"",cost_price:Q["Cost Price"]?parseFloat(Q["Cost Price"]):null,price_per_piece:parseFloat(Q["Price per Piece"]),margin_percentage:Q["Margin Percentage"]?parseFloat(Q["Margin Percentage"]):Q["Cost Price"]&&Q["Price per Piece"]?(parseFloat(Q["Price per Piece"])-parseFloat(Q["Cost Price"]))/parseFloat(Q["Cost Price"])*100:0,pieces_per_sheet:Q["Pieces per Sheet"]?parseInt(Q["Pieces per Sheet"]):1,sheets_per_box:Q["Sheets per Box"]?parseInt(Q["Sheets per Box"]):1,stock_in_pieces:parseInt(Q["Stock (Pieces)"]),reorder_level:Q["Reorder Level"]?parseInt(Q["Reorder Level"]):10,supplier:Q.Supplier?Q.Supplier.trim():"",expiry_date:Q["Expiry Date"]||null,batch_number:Q["Batch Number"]?Q["Batch Number"].trim():`BATCH-${Date.now()}-${X}`,is_archived:!1,archived_at:null,archived_by:null,import_metadata:{original_category:Q.Category,normalized_category:J,imported_at:new Date().toISOString(),row_number:X+2}};te.push(ye)}}),{validData:te,validationErrors:de,categoriesFound:Array.from(me),newCategories:oe}},q=async()=>{j("importing"),h(!0);try{console.log("🚀 Starting intelligent import process...");const K=[...new Set(m.map(de=>de.category))];console.log(`📋 Processing ${K.length} unique categories...`);const te=await Vt.processBulkCategoryCreation(K,{user_id:null,import_session:Date.now()});S(te.summary),console.log("✅ Category processing complete:",te.summary),await l(m),console.log("📊 Updating category statistics..."),await Vt.updateAllCategoryStats(),setTimeout(()=>{h(!1),a(),H()},1e3)}catch(K){p([`Import failed: ${K.message}`]),h(!1),j("preview")}},H=()=>{c(null),x([]),p([]),j("upload"),h(!1),S(null),C([])},ee=()=>{const K=["Product Name,Description,Category,Brand,Cost Price,Price per Piece,Margin Percentage,Pieces per Sheet,Sheets per Box,Stock (Pieces),Reorder Level,Supplier,Expiry Date,Batch Number","Paracetamol 500mg,Pain relief tablet,Pain Relief,GenericPharm,2.00,2.50,25.00,10,10,1000,100,MediSupply,2025-12-31,BATCH-2024-001","Amoxicillin 250mg,Antibiotic capsule,Antibiotics,PharmaCorp,4.60,5.75,25.00,8,12,500,50,HealthDistrib,2024-10-15,BATCH-2024-002","Vitamin C 500mg,Immune support tablet,Vitamins,VitaPlus,1.50,2.50,66.67,20,5,2000,200,NutriCorp,2025-06-30,BATCH-2024-003"].join(`
`),te=new Blob([K],{type:"text/csv;charset=utf-8;"}),de=document.createElement("a"),me=URL.createObjectURL(te);de.setAttribute("href",me),de.setAttribute("download","enhanced_inventory_import_template.csv"),de.style.visibility="hidden",document.body.appendChild(de),de.click(),document.body.removeChild(de)};return n?s.jsx("div",{className:"fixed inset-0 bg-black/60 backdrop-blur-sm flex items-center justify-center z-50 p-4",children:s.jsxs("div",{className:"bg-white rounded-2xl shadow-2xl max-w-4xl w-full max-h-[90vh] flex flex-col",children:[s.jsxs("div",{className:"flex items-center justify-between p-6 border-b border-gray-200 bg-gradient-to-r from-green-50 to-emerald-50 flex-shrink-0",children:[s.jsxs("div",{className:"flex items-center space-x-3",children:[s.jsx("div",{className:"p-2 bg-green-100 rounded-xl",children:s.jsx(dd,{className:"h-6 w-6 text-green-600"})}),s.jsx("h3",{className:"text-xl font-bold text-gray-900",children:"Import Products"})]}),s.jsx("button",{onClick:()=>{a(),H()},className:"group p-2 text-gray-400 hover:text-gray-600 hover:bg-gray-100 rounded-xl transition-all duration-200",children:s.jsx(Ft,{className:"h-6 w-6 group-hover:scale-110 transition-transform duration-200"})})]}),s.jsxs("div",{className:"flex-1 overflow-y-auto p-6 min-h-0",children:[s.jsxs("div",{className:"flex items-center space-x-4 mb-6",children:[s.jsxs("div",{className:`flex items-center space-x-2 ${b==="upload"?"text-blue-600":b==="preview"||b==="importing"?"text-green-600":"text-gray-400"}`,children:[s.jsx("div",{className:`w-8 h-8 rounded-full flex items-center justify-center ${b==="upload"?"bg-blue-100":b==="preview"||b==="importing"?"bg-green-100":"bg-gray-100"}`,children:s.jsx("span",{className:"text-sm font-medium",children:"1"})}),s.jsx("span",{className:"font-medium",children:"Upload File"})]}),s.jsx("div",{className:`h-px flex-1 ${b==="preview"||b==="importing"?"bg-green-600":"bg-gray-300"}`}),s.jsxs("div",{className:`flex items-center space-x-2 ${b==="preview"?"text-blue-600":b==="importing"?"text-green-600":"text-gray-400"}`,children:[s.jsx("div",{className:`w-8 h-8 rounded-full flex items-center justify-center ${b==="preview"?"bg-blue-100":b==="importing"?"bg-green-100":"bg-gray-100"}`,children:s.jsx("span",{className:"text-sm font-medium",children:"2"})}),s.jsx("span",{className:"font-medium",children:"Preview & Validate"})]}),s.jsx("div",{className:`h-px flex-1 ${b==="importing"?"bg-green-600":"bg-gray-300"}`}),s.jsxs("div",{className:`flex items-center space-x-2 ${b==="importing"?"text-blue-600":"text-gray-400"}`,children:[s.jsx("div",{className:`w-8 h-8 rounded-full flex items-center justify-center ${b==="importing"?"bg-blue-100":"bg-gray-100"}`,children:s.jsx("span",{className:"text-sm font-medium",children:"3"})}),s.jsx("span",{className:"font-medium",children:"Import"})]})]}),b==="upload"&&s.jsxs("div",{className:"space-y-6",children:[s.jsxs("div",{className:"border-2 border-dashed border-gray-300 rounded-lg p-8 text-center hover:border-gray-400 transition-colors",children:[s.jsx("input",{ref:L,type:"file",accept:".csv,.json",onChange:K=>B(K.target.files[0]),className:"hidden"}),s.jsx(X_,{className:"h-12 w-12 text-gray-400 mx-auto mb-4"}),s.jsx("p",{className:"text-lg font-medium text-gray-900 mb-2",children:"Choose a file to import"}),s.jsx("p",{className:"text-gray-500 mb-4",children:"Upload a CSV or JSON file with your product data"}),s.jsx("button",{onClick:()=>L.current?.click(),className:"px-4 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700",disabled:u,children:u?"Processing...":"Browse Files"})]}),s.jsx("div",{className:"bg-blue-50 rounded-lg p-4",children:s.jsxs("div",{className:"flex items-start space-x-3",children:[s.jsx("div",{className:"flex-shrink-0",children:s.jsx(Ss,{className:"h-5 w-5 text-blue-600 mt-0.5"})}),s.jsxs("div",{children:[s.jsx("h4",{className:"text-sm font-medium text-blue-900 mb-1",children:"Don't have a template?"}),s.jsx("p",{className:"text-sm text-blue-700 mb-2",children:"Download our CSV template with the required columns and example data."}),s.jsx("button",{onClick:ee,className:"text-sm text-blue-600 hover:text-blue-800 font-medium underline",children:"Download Template"})]})]})}),s.jsxs("div",{className:"text-sm text-gray-600",children:[s.jsx("h4",{className:"font-medium mb-2",children:"Required columns:"}),s.jsxs("ul",{className:"list-disc list-inside space-y-1",children:[s.jsxs("li",{children:[s.jsx("strong",{children:"Product Name"})," - Product identifier"]}),s.jsxs("li",{children:[s.jsx("strong",{children:"Category"})," - Must be valid category (Pain Relief, Antibiotics, etc.)"]}),s.jsxs("li",{children:[s.jsx("strong",{children:"Price per Piece"})," - Selling price (₱)"]}),s.jsxs("li",{children:[s.jsx("strong",{children:"Stock (Pieces)"})," - Current inventory count"]})]}),s.jsx("h4",{className:"font-medium mt-4 mb-2",children:"Enhanced Pricing (Optional):"}),s.jsxs("ul",{className:"list-disc list-inside space-y-1",children:[s.jsxs("li",{children:[s.jsx("strong",{children:"Cost Price"})," - Purchase cost per piece (₱)"]}),s.jsxs("li",{children:[s.jsx("strong",{children:"Price per Piece"})," - Selling price per unit (₱) - This is your single authoritative unit price"]}),s.jsxs("li",{children:[s.jsx("strong",{children:"Margin Percentage"})," - Profit margin (0-1000%)"]})]}),s.jsx("h4",{className:"font-medium mt-4 mb-2",children:"Product Details (Optional):"}),s.jsxs("ul",{className:"list-disc list-inside space-y-1",children:[s.jsxs("li",{children:[s.jsx("strong",{children:"Description, Brand, Supplier"})," - Product information"]}),s.jsxs("li",{children:[s.jsx("strong",{children:"Pieces per Sheet, Sheets per Box"})," - Unit conversion"]}),s.jsxs("li",{children:[s.jsx("strong",{children:"Reorder Level"})," - Stock alert threshold"]}),s.jsxs("li",{children:[s.jsx("strong",{children:"Expiry Date"})," - Format: YYYY-MM-DD"]}),s.jsxs("li",{children:[s.jsx("strong",{children:"Batch Number"})," - Tracking identifier"]})]}),s.jsx("div",{className:"mt-4 p-3 bg-blue-50 rounded-lg",children:s.jsxs("p",{className:"text-sm text-blue-800",children:[s.jsx("strong",{children:"💡 Pro Tip:"})," If Cost Price and Selling Price are provided, margin percentage will be automatically calculated. All pricing fields support automatic markup calculations."]})})]})]}),b==="preview"&&s.jsxs("div",{className:"space-y-6",children:[g.length>0&&s.jsx("div",{className:"bg-red-50 border border-red-200 rounded-lg p-4",children:s.jsxs("div",{className:"flex items-start space-x-3",children:[s.jsx(vx,{className:"h-5 w-5 text-red-600 mt-0.5 flex-shrink-0"}),s.jsxs("div",{children:[s.jsxs("h4",{className:"text-sm font-medium text-red-900 mb-2",children:["Validation Errors (",g.length,")"]}),s.jsx("ul",{className:"text-sm text-red-700 space-y-1 max-h-32 overflow-y-auto",children:g.map((K,te)=>s.jsx("li",{className:"list-disc list-inside",children:K},te))})]})]})}),m.length>0&&s.jsx("div",{className:"bg-green-50 border border-green-200 rounded-lg p-4",children:s.jsxs("div",{className:"flex items-center space-x-3",children:[s.jsx(jx,{className:"h-5 w-5 text-green-600"}),s.jsxs("div",{className:"flex-1",children:[s.jsx("h4",{className:"text-sm font-medium text-green-900",children:"Ready to Import - Enhanced Data Analysis"}),s.jsxs("div",{className:"mt-2 grid grid-cols-2 md:grid-cols-4 gap-4 text-sm text-green-700",children:[s.jsxs("div",{children:[s.jsx("span",{className:"font-medium",children:m.length})," ","products total"]}),s.jsxs("div",{children:[s.jsx("span",{className:"font-medium",children:m.filter(K=>K.cost_price).length})," ","with cost data"]}),s.jsxs("div",{children:[s.jsx("span",{className:"font-medium",children:m.filter(K=>K.expiry_date).length})," ","with expiry dates"]}),s.jsxs("div",{children:[s.jsxs("span",{className:"font-medium",children:["₱",m.reduce((K,te)=>K+(te.cost_price||0)*te.stock_in_pieces,0).toLocaleString()]})," ","total inventory value"]})]})]})]})}),_.length>0&&s.jsx("div",{className:"bg-blue-50 border border-blue-200 rounded-lg p-4",children:s.jsxs("div",{className:"flex items-start space-x-3",children:[s.jsx(Gr,{className:"h-5 w-5 text-blue-600 mt-0.5 flex-shrink-0"}),s.jsxs("div",{className:"flex-1",children:[s.jsx("h4",{className:"text-sm font-medium text-blue-900 mb-2",children:"🧠 Intelligent Category Processing"}),s.jsxs("p",{className:"text-sm text-blue-800 mb-3",children:[s.jsx("span",{className:"font-medium",children:_.length})," ","new categories will be automatically created with professional settings:"]}),s.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-2 text-sm",children:[_.slice(0,6).map((K,te)=>s.jsxs("div",{className:"flex items-center space-x-2 bg-white rounded px-2 py-1",children:[s.jsx(ol,{className:"h-3 w-3 text-blue-600"}),s.jsx("span",{className:"text-gray-700",children:K.original}),K.original!==K.normalized&&s.jsxs("span",{className:"text-xs text-blue-600",children:["→ ",K.normalized]})]},te)),_.length>6&&s.jsxs("div",{className:"text-xs text-blue-700 col-span-full",children:["+ ",_.length-6," more categories..."]})]}),s.jsxs("div",{className:"mt-3 text-xs text-blue-700 bg-blue-100 rounded px-2 py-1",children:[s.jsx(Od,{className:"h-3 w-3 inline mr-1"}),"Categories are automatically normalized and will include professional icons, colors, and settings."]})]})]})}),m.length>0&&s.jsxs("div",{children:[s.jsxs("h4",{className:"text-sm font-medium text-gray-900 mb-3",children:["Preview (",m.length," products)"]}),s.jsxs("div",{className:"border border-gray-200 rounded-lg overflow-hidden",children:[s.jsx("div",{className:"max-h-64 overflow-y-auto",children:s.jsxs("table",{className:"min-w-full divide-y divide-gray-200",children:[s.jsx("thead",{className:"bg-gray-50",children:s.jsxs("tr",{children:[s.jsx("th",{className:"px-4 py-2 text-left text-xs font-medium text-gray-500 uppercase",children:"Product Name"}),s.jsx("th",{className:"px-4 py-2 text-left text-xs font-medium text-gray-500 uppercase",children:"Category"}),s.jsx("th",{className:"px-4 py-2 text-left text-xs font-medium text-gray-500 uppercase",children:"Cost Price"}),s.jsx("th",{className:"px-4 py-2 text-left text-xs font-medium text-gray-500 uppercase",children:"Sell Price"}),s.jsx("th",{className:"px-4 py-2 text-left text-xs font-medium text-gray-500 uppercase",children:"Margin %"}),s.jsx("th",{className:"px-4 py-2 text-left text-xs font-medium text-gray-500 uppercase",children:"Stock"}),s.jsx("th",{className:"px-4 py-2 text-left text-xs font-medium text-gray-500 uppercase",children:"Expiry"})]})}),s.jsx("tbody",{className:"bg-white divide-y divide-gray-200",children:m.slice(0,10).map((K,te)=>s.jsxs("tr",{className:"hover:bg-gray-50",children:[s.jsx("td",{className:"px-4 py-2 text-sm text-gray-900",children:K.name}),s.jsx("td",{className:"px-4 py-2 text-sm text-gray-600",children:K.category}),s.jsx("td",{className:"px-4 py-2 text-sm text-gray-600",children:K.cost_price?`₱${K.cost_price.toFixed(2)}`:"N/A"}),s.jsxs("td",{className:"px-4 py-2 text-sm text-gray-900 font-medium",children:["₱",K.price_per_piece.toFixed(2)]}),s.jsx("td",{className:"px-4 py-2 text-sm text-gray-600",children:K.margin_percentage?`${K.margin_percentage.toFixed(1)}%`:"N/A"}),s.jsx("td",{className:"px-4 py-2 text-sm text-gray-600",children:K.stock_in_pieces.toLocaleString()}),s.jsx("td",{className:"px-4 py-2 text-sm text-gray-600",children:K.expiry_date||"N/A"})]},te))})]})}),m.length>10&&s.jsxs("div",{className:"bg-gray-50 px-4 py-2 text-sm text-gray-600",children:["... and ",m.length-10," more products"]})]})]})]}),b==="importing"&&s.jsxs("div",{className:"text-center py-8",children:[s.jsx("div",{className:"animate-spin rounded-full h-16 w-16 border-b-2 border-blue-600 mx-auto mb-4"}),s.jsx("h4",{className:"text-lg font-medium text-gray-900 mb-2",children:"Importing Enhanced Product Data..."}),s.jsxs("p",{className:"text-gray-600 mb-4",children:["Adding ",m.length," products with enhanced pricing and features."]}),s.jsx("div",{className:"bg-blue-50 rounded-lg p-4 mx-auto max-w-md",children:s.jsxs("div",{className:"text-sm text-blue-800 space-y-1",children:[s.jsxs("div",{className:"flex justify-between",children:[s.jsx("span",{children:"Products:"}),s.jsx("span",{className:"font-medium",children:m.length})]}),s.jsxs("div",{className:"flex justify-between",children:[s.jsx("span",{children:"With Pricing Data:"}),s.jsx("span",{className:"font-medium",children:m.filter(K=>K.cost_price).length})]}),s.jsxs("div",{className:"flex justify-between",children:[s.jsx("span",{children:"Categories:"}),s.jsx("span",{className:"font-medium",children:new Set(m.map(K=>K.category)).size})]})]})})]})]}),s.jsx("div",{className:"border-t border-gray-200 bg-gray-50 px-6 py-4 flex-shrink-0",children:s.jsxs("div",{className:"flex justify-between",children:[s.jsx("div",{children:b==="preview"&&s.jsx("button",{onClick:()=>{j("upload"),c(null),x([]),p([])},className:"px-4 py-2 border-2 border-gray-200 text-gray-700 font-medium rounded-xl hover:border-gray-300 hover:bg-gray-50 transition-all duration-200",children:"Back"})}),s.jsxs("div",{className:"flex space-x-3",children:[s.jsx("button",{type:"button",onClick:()=>{a(),H()},className:"px-6 py-2.5 border-2 border-gray-200 text-gray-700 font-medium rounded-xl hover:border-gray-300 hover:bg-gray-50 transition-all duration-200",disabled:b==="importing",children:"Cancel"}),b==="preview"&&s.jsxs("button",{onClick:q,disabled:m.length===0||u,className:"group flex items-center space-x-2 px-6 py-2.5 bg-gradient-to-r from-green-600 to-green-700 text-white font-semibold rounded-xl hover:from-green-700 hover:to-green-800 shadow-lg hover:shadow-xl transition-all duration-200 hover:scale-105 active:scale-95 disabled:opacity-50 disabled:cursor-not-allowed disabled:hover:scale-100",children:[s.jsx(dd,{className:"h-4 w-4 group-hover:scale-110 transition-transform duration-200"}),s.jsxs("span",{children:["Import ",m.length," Products"]})]})]})]})})]})}):null}function v2({onSubmit:n,isLoading:a=!1,error:l=null}){const[i,c]=N.useState({email:"",password:""}),[u,h]=N.useState(!1),[m,x]=N.useState({}),g=()=>{const j={};return i.email?/^[^\s@]+@[^\s@]+\.[^\s@]+$/.test(i.email)||(j.email="Please enter a valid email address"):j.email="Email is required",i.password?i.password.length<6&&(j.password="Password must be at least 6 characters"):j.password="Password is required",x(j),Object.keys(j).length===0},p=j=>{j.preventDefault(),g()&&n(i)},b=j=>w=>{c(S=>({...S,[j]:w.target.value})),m[j]&&x(S=>({...S,[j]:""}))};return s.jsxs("form",{onSubmit:p,className:"space-y-5",children:[l&&s.jsx("div",{className:"bg-red-50 border border-red-200 text-red-700 px-4 py-3 rounded-lg text-sm",children:l}),s.jsxs("div",{children:[s.jsx("label",{htmlFor:"email",className:"block text-sm font-medium text-gray-700 mb-2",children:"Email Address"}),s.jsx("input",{id:"email",type:"email",value:i.email,onChange:b("email"),disabled:a,className:`w-full px-4 py-3 border rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500 transition-colors ${m.email?"border-red-300 focus:ring-red-500 focus:border-red-500":"border-gray-300"} ${a?"bg-gray-50 cursor-not-allowed":"bg-white"}`,placeholder:"Enter your email",autoComplete:"email"}),m.email&&s.jsx("p",{className:"mt-2 text-sm text-red-600",children:m.email})]}),s.jsxs("div",{children:[s.jsx("label",{htmlFor:"password",className:"block text-sm font-medium text-gray-700 mb-2",children:"Password"}),s.jsxs("div",{className:"relative",children:[s.jsx("input",{id:"password",type:u?"text":"password",value:i.password,onChange:b("password"),disabled:a,className:`w-full px-4 py-3 pr-12 border rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500 transition-colors ${m.password?"border-red-300 focus:ring-red-500 focus:border-red-500":"border-gray-300"} ${a?"bg-gray-50 cursor-not-allowed":"bg-white"}`,placeholder:"Enter your password",autoComplete:"current-password"}),s.jsx("button",{type:"button",onClick:()=>h(!u),disabled:a,className:"absolute right-3 top-1/2 transform -translate-y-1/2 text-gray-400 hover:text-gray-600 transition-colors disabled:cursor-not-allowed","aria-label":u?"Hide password":"Show password",children:u?s.jsx(Rd,{className:"h-5 w-5"}):s.jsx(Ua,{className:"h-5 w-5"})})]}),m.password&&s.jsx("p",{className:"mt-2 text-sm text-red-600",children:m.password})]}),s.jsx("button",{type:"submit",disabled:a,className:"w-full bg-blue-600 text-white py-3 px-4 rounded-lg font-medium hover:bg-blue-700 focus:ring-2 focus:ring-blue-500 focus:ring-offset-2 transition-colors disabled:bg-blue-400 disabled:cursor-not-allowed flex items-center justify-center",children:a?s.jsxs(s.Fragment,{children:[s.jsx(Sx,{className:"animate-spin h-5 w-5 mr-2"}),"Signing In..."]}):s.jsxs(s.Fragment,{children:[s.jsx(p1,{className:"h-5 w-5 mr-2"}),"Sign In"]})})]})}function j2(){const[n,a]=N.useState(!1),[l,i]=N.useState(null),{signIn:c,signOut:u}=As();return{isLoading:n,error:l,handleLogin:async g=>{a(!0),i(null);try{console.log("🔐 useAuthForm: Attempting login with",g.email);const p=await c(g.email,g.password);if(p.error)throw new Error(p.error.message);console.log("✅ useAuthForm: Login successful")}catch(p){console.error("❌ useAuthForm: Login failed",p),i(p.message||"Invalid email or password")}finally{a(!1)}},handleLogout:async()=>{a(!0),i(null);try{await u()}catch(g){i(g.message||"Logout failed. Please try again.")}finally{a(!1)}},clearError:()=>{i(null)}}}function w2(){const{user:n}=As(),a=Kt(),{isLoading:l,error:i,handleLogin:c}=j2(),u=a.state?.from?.pathname||"/dashboard";return n?s.jsx(Jn,{to:u,replace:!0}):s.jsx("div",{className:"min-h-screen bg-gradient-to-br from-blue-900 to-purple-900 flex items-center justify-center p-4",children:s.jsxs("div",{className:"bg-white rounded-2xl shadow-2xl w-full max-w-md p-8",children:[s.jsxs("div",{className:"text-center mb-8",children:[s.jsx("div",{className:"w-20 h-20 bg-blue-600 rounded-full flex items-center justify-center mx-auto mb-4",children:s.jsx("svg",{className:"w-10 h-10 text-white",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:s.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M19.428 15.428a2 2 0 00-1.022-.547l-2.387-.477a6 6 0 00-3.86.517l-.318.158a6 6 0 01-3.86.517L6.05 15.21a2 2 0 00-1.806.547M8 4h8l-1 1v5.172a2 2 0 00.586 1.414l5 5c1.26 1.26.367 3.414-1.415 3.414H4.828c-1.782 0-2.674-2.154-1.414-3.414l5-5A2 2 0 009 7.172V5L8 4z"})})}),s.jsx("h1",{className:"text-3xl font-bold text-gray-900 mb-2",children:"Medcure Pro"}),s.jsx("p",{className:"text-gray-600",children:"Pharmacy Management System"})]}),s.jsx(v2,{onSubmit:c,isLoading:l,error:i})]})})}function re(n){return new Intl.NumberFormat("en-PH",{style:"currency",currency:"PHP",minimumFractionDigits:2,maximumFractionDigits:2}).format(n||0)}function Cs(n,a=0){return new Intl.NumberFormat("en-PH",{minimumFractionDigits:a,maximumFractionDigits:a}).format(n||0)}const Ui=rs.memo(S2),Pi=rs.memo(k2);function _2(){const[n,a]=N.useState(null),[l,i]=N.useState(!0),[c,u]=N.useState(null),h=N.useCallback(async()=>{try{i(!0),u(null),console.log("🔍 [Dashboard] Loading dashboard data...");const g=await cd.getDashboardData();if(console.log("📊 [Dashboard] Service response:",{success:g.success,hasData:!!g.data}),g.success)a(g.data),console.log("✅ [Dashboard] Data loaded successfully.");else{const p=g.error||"Failed to load dashboard data";console.error("❌ [Dashboard] Service returned error:",p),u(p)}}catch(g){console.error("❌ [Dashboard] Error loading dashboard data:",g),u("An unexpected error occurred. Please try again.")}finally{i(!1)}},[]);if(N.useEffect(()=>{h()},[h]),l)return s.jsx("div",{className:"flex items-center justify-center h-screen",children:s.jsx(u2,{size:"lg"})});if(c)return s.jsx("div",{className:"flex items-center justify-center h-screen",children:s.jsxs("div",{className:"text-center p-8 bg-white shadow-lg rounded-xl",children:[s.jsx(ks,{className:"h-12 w-12 text-red-500 mx-auto mb-4"}),s.jsx("h3",{className:"text-xl font-semibold text-gray-900 mb-2",children:"Dashboard Error"}),s.jsx("p",{className:"text-red-600 mb-6",children:c}),s.jsxs("button",{onClick:h,className:"inline-flex items-center px-6 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-blue-500 transition-colors",children:[s.jsx(yt,{className:"h-4 w-4 mr-2 animate-spin-slow"}),"Try Again"]})]})});if(!n)return s.jsx("div",{className:"flex items-center justify-center h-screen",children:s.jsxs("div",{className:"text-center",children:[s.jsx(Me,{className:"h-12 w-12 text-gray-400 mx-auto mb-4"}),s.jsx("p",{className:"text-gray-500",children:"No dashboard data available."})]})});const m=new Date().toLocaleTimeString("en-US",{hour:"2-digit",minute:"2-digit",hour12:!0}),x=new Date().toLocaleDateString("en-US",{weekday:"long",year:"numeric",month:"long",day:"numeric"});return s.jsx("div",{className:"min-h-screen bg-gray-50 p-6",children:s.jsxs("div",{className:"max-w-7xl mx-auto space-y-6",children:[s.jsx("header",{className:"bg-white rounded-xl shadow-sm border border-gray-200 p-8",children:s.jsxs("div",{className:"flex flex-col lg:flex-row lg:items-center lg:justify-between",children:[s.jsxs("div",{className:"flex-1",children:[s.jsxs("div",{className:"flex items-center space-x-4 mb-6",children:[s.jsxs("div",{className:"flex items-center space-x-2",children:[s.jsx("div",{className:"w-2 h-2 bg-green-500 rounded-full"}),s.jsx("span",{className:"text-sm font-medium text-green-700",children:"System Online"})]}),s.jsx("div",{className:"w-px h-4 bg-gray-200"}),s.jsxs("div",{className:"flex items-center space-x-2",children:[s.jsx(Oa,{className:"h-4 w-4 text-gray-500"}),s.jsx("span",{className:"text-sm font-medium text-gray-600",children:"Real-time Monitoring"})]})]}),s.jsx("h1",{className:"text-3xl lg:text-4xl font-bold mb-2 text-gray-900",children:"Dashboard"}),s.jsx("p",{className:"text-gray-600 text-lg mb-6",children:"Welcome back! Here's your pharmacy overview for today."}),s.jsxs("div",{className:"flex items-center space-x-6 text-sm",children:[s.jsxs("div",{className:"flex items-center space-x-2",children:[s.jsx(Gi,{className:"h-4 w-4 text-gray-400"}),s.jsx("span",{className:"text-gray-700 font-medium",children:m})]}),s.jsxs("div",{className:"flex items-center space-x-2",children:[s.jsx(ao,{className:"h-4 w-4 text-gray-400"}),s.jsx("span",{className:"text-gray-600",children:x})]})]})]}),s.jsxs("div",{className:"mt-6 lg:mt-0 flex items-center space-x-3",children:[s.jsxs("button",{className:"bg-gray-100 hover:bg-gray-200 text-gray-700 px-4 py-2 rounded-lg transition-colors duration-200 flex items-center space-x-2 border border-gray-200",children:[s.jsx(Td,{className:"h-4 w-4"}),s.jsx("span",{children:"3 Alerts"})]}),s.jsxs("button",{onClick:h,disabled:l,className:"bg-gray-900 text-white hover:bg-gray-800 px-6 py-2 rounded-lg transition-colors duration-200 flex items-center space-x-2 font-medium disabled:bg-gray-400",children:[s.jsx(yt,{className:`h-4 w-4 ${l?"animate-spin":""}`}),s.jsx("span",{children:l?"Refreshing...":"Refresh"})]})]})]})}),s.jsxs("section",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-6",children:[s.jsx(Ui,{title:"Revenue Today",value:re(n.totalSales||0),icon:ns,trend:8.2,trendText:"vs yesterday",color:"green"}),s.jsx(Ui,{title:"Total Products",value:Cs(n.totalProducts||0),icon:Me,trend:2.1,trendText:"this month",color:"blue"}),s.jsx(Ui,{title:"Low Stock Alert",value:Cs(n.lowStockCount||0),icon:ks,trend:-5.3,trendText:"improvement",color:"amber",isAlert:!0}),s.jsx(Ui,{title:"Active Users",value:Cs(n.activeUsers||0),icon:al,trend:12.5,trendText:"growth rate",color:"purple"})]}),s.jsxs("main",{className:"grid grid-cols-1 lg:grid-cols-12 gap-6",children:[s.jsx("aside",{className:"lg:col-span-4",children:s.jsxs("div",{className:"bg-white rounded-xl shadow-sm border border-gray-200 p-6 h-full",children:[s.jsxs("div",{className:"flex items-center justify-between mb-6",children:[s.jsxs("div",{children:[s.jsx("h3",{className:"text-lg font-semibold text-gray-900",children:"Quick Actions"}),s.jsx("p",{className:"text-gray-500 text-sm",children:"Essential tasks"})]}),s.jsx("div",{className:"p-2 bg-gray-100 rounded-lg",children:s.jsx(Y1,{className:"h-5 w-5 text-gray-600"})})]}),s.jsxs("div",{className:"space-y-3",children:[s.jsx(Pi,{icon:Qt,title:"Process Sale",description:"Quick POS transaction",href:"/pos",color:"blue",badge:"Popular"}),s.jsx(Pi,{icon:A1,title:"Add Medication",description:"Add new products",href:"/inventory",color:"green"}),s.jsx(Pi,{icon:Lr,title:"View Analytics",description:"Performance insights",href:"/analytics",color:"purple"}),s.jsx(Pi,{icon:e2,title:"User Management",description:"System administration",href:"/management",color:"gray"})]})]})}),s.jsx("section",{className:"lg:col-span-8",children:s.jsxs("div",{className:"bg-white rounded-xl shadow-sm border border-gray-200 p-6 h-full",children:[s.jsxs("div",{className:"flex items-center justify-between mb-6",children:[s.jsxs("div",{children:[s.jsx("h3",{className:"text-lg font-semibold text-gray-900",children:"Today's Performance"}),s.jsx("p",{className:"text-gray-500 text-sm",children:"Real-time business metrics"})]}),s.jsxs("div",{className:"flex items-center space-x-2",children:[s.jsx("div",{className:"p-2 bg-green-50 rounded-lg border border-green-200",children:s.jsx(Vr,{className:"h-4 w-4 text-green-600"})}),s.jsx("span",{className:"text-sm font-medium text-green-700",children:"+15.3%"})]})]}),s.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4 mb-6",children:[s.jsx(Gu,{icon:Qt,value:"24",label:"Sales Today",color:"blue"}),s.jsx(Gu,{icon:n1,value:"98%",label:"Customer Satisfaction",color:"green"}),s.jsx(Gu,{icon:Oa,value:"5.2min",label:"Avg. Processing Time",color:"purple"})]}),s.jsxs("div",{children:[s.jsxs("h4",{className:"font-medium text-gray-900 mb-4 flex items-center",children:[s.jsx(Oa,{className:"h-4 w-4 mr-2 text-gray-500"}),"Recent Activity"]}),s.jsx("div",{className:"space-y-2",children:n.recentSales?.length>0?n.recentSales.slice(0,3).map((g,p)=>s.jsx(N2,{sale:g},g.id||p)):s.jsxs("div",{className:"text-center py-6",children:[s.jsx("div",{className:"w-12 h-12 bg-gray-100 rounded-lg flex items-center justify-center mx-auto mb-3",children:s.jsx(Qt,{className:"h-6 w-6 text-gray-400"})}),s.jsx("p",{className:"text-gray-600 font-medium text-sm",children:"No recent activity"}),s.jsx("p",{className:"text-gray-400 text-xs",children:"Start processing sales to see activity here"})]})})]})]})})]}),n.lowStockCount>0&&s.jsx("section",{className:"bg-gradient-to-r from-amber-50 via-orange-50 to-red-50 rounded-2xl border border-amber-200 overflow-hidden shadow-lg",children:s.jsx("div",{className:"p-6",children:s.jsxs("div",{className:"flex flex-col md:flex-row items-center justify-between gap-4",children:[s.jsxs("div",{className:"flex items-center space-x-4",children:[s.jsx("div",{className:"p-3 bg-gradient-to-br from-amber-500 to-orange-600 rounded-xl shadow-lg",children:s.jsx(ks,{className:"h-6 w-6 text-white"})}),s.jsxs("div",{children:[s.jsx("h3",{className:"text-xl font-bold text-amber-900",children:"Inventory Alerts"}),s.jsx("p",{className:"text-amber-700",children:"Critical stock levels detected"})]})]}),s.jsxs("div",{className:"flex items-center space-x-3",children:[s.jsxs("span",{className:"px-4 py-2 bg-amber-200 text-amber-800 font-bold rounded-full text-sm",children:[n.lowStockCount," items"]}),s.jsxs("a",{href:"/inventory",className:"bg-gradient-to-r from-amber-600 to-orange-600 text-white px-6 py-2 rounded-xl hover:from-amber-700 hover:to-orange-700 transition-all duration-200 flex items-center space-x-2 font-semibold shadow-lg",children:[s.jsx(Ua,{className:"h-4 w-4"}),s.jsx("span",{children:"Review Inventory"}),s.jsx(A_,{className:"h-4 w-4"})]})]})]})})}),s.jsx("footer",{className:"bg-white rounded-2xl shadow-lg border border-gray-100 p-6",children:s.jsxs("div",{className:"flex flex-wrap items-center justify-between gap-4",children:[s.jsxs("div",{className:"flex items-center space-x-6",children:[s.jsxs("div",{className:"flex items-center space-x-2",children:[s.jsx("div",{className:"w-2 h-2 bg-green-500 rounded-full animate-pulse"}),s.jsx("span",{className:"text-sm font-medium text-gray-600",children:"All systems operational"})]}),s.jsxs("div",{className:"flex items-center space-x-2",children:[s.jsx(wx,{className:"h-4 w-4 text-gray-400"}),s.jsx("span",{className:"text-sm text-gray-500",children:"Database: Connected"})]}),s.jsxs("div",{className:"flex items-center space-x-2",children:[s.jsx(a1,{className:"h-4 w-4 text-gray-400"}),s.jsx("span",{className:"text-sm text-gray-500",children:"Support: Available 24/7"})]})]}),s.jsxs("div",{className:"text-xs text-gray-400",children:["Last updated: ",new Date().toLocaleTimeString()]})]})})]})})}const Gu=({icon:n,value:a,label:l,color:i})=>{const c={blue:"bg-blue-600",green:"bg-green-600",purple:"bg-purple-600"};return s.jsxs("div",{className:"text-center p-4 bg-gray-50 rounded-lg border border-gray-100",children:[s.jsx("div",{className:`w-10 h-10 ${c[i]} rounded-lg flex items-center justify-center mx-auto mb-3`,children:s.jsx(n,{className:"h-5 w-5 text-white"})}),s.jsx("div",{className:"text-xl font-bold text-gray-900",children:a}),s.jsx("div",{className:"text-sm text-gray-600",children:l})]})},N2=({sale:n})=>s.jsxs("div",{className:"flex items-center justify-between p-3 bg-gray-50 rounded-lg hover:bg-gray-100 transition-colors border border-gray-100",children:[s.jsxs("div",{className:"flex items-center space-x-3",children:[s.jsx("div",{className:"w-8 h-8 bg-gray-600 rounded-lg flex items-center justify-center",children:s.jsx(Qt,{className:"h-4 w-4 text-white"})}),s.jsxs("div",{children:[s.jsxs("p",{className:"font-medium text-gray-900 text-sm",children:["Sale #",n.id?.toString().slice(-6)]}),s.jsx("p",{className:"text-xs text-gray-500",children:n.customer_name||"Walk-in Customer"})]})]}),s.jsxs("div",{className:"text-right",children:[s.jsx("p",{className:"font-semibold text-gray-900 text-sm",children:re(n.total_amount||0)}),s.jsx("p",{className:"text-xs text-gray-500",children:new Date(n.created_at).toLocaleDateString()})]})]});function S2({title:n,value:a,icon:l,trend:i,trendText:c,color:u,isAlert:h=!1}){const m={green:"bg-green-600",blue:"bg-blue-600",amber:"bg-amber-600",purple:"bg-purple-600"};return s.jsxs("div",{className:`bg-white rounded-xl shadow-sm border p-6 hover:shadow-md transition-shadow ${h?"border-amber-200 bg-amber-50/20":"border-gray-200"}`,children:[s.jsxs("div",{className:"flex items-center justify-between mb-4",children:[s.jsx("div",{className:`p-2 rounded-lg ${m[u]}`,children:s.jsx(l,{className:"h-5 w-5 text-white"})}),i&&s.jsxs("div",{className:`flex items-center space-x-1 px-2 py-1 rounded-full text-xs font-medium ${i>0?"bg-green-100 text-green-700":"bg-red-100 text-red-700"}`,children:[i>0?s.jsx(Vr,{className:"h-3 w-3"}):s.jsx(ro,{className:"h-3 w-3"}),s.jsxs("span",{children:[Math.abs(i),"%"]})]})]}),s.jsxs("div",{className:"space-y-1",children:[s.jsx("h3",{className:"text-gray-600 text-sm font-medium",children:n}),s.jsx("p",{className:"text-2xl font-bold text-gray-900",children:a}),c&&s.jsx("p",{className:"text-gray-500 text-xs",children:c})]})]})}function k2({icon:n,title:a,description:l,href:i,color:c,badge:u}){const h={blue:"bg-blue-600",green:"bg-green-600",purple:"bg-purple-600",gray:"bg-gray-600"};return s.jsx("a",{href:i,className:"relative block group bg-white hover:bg-gray-50 rounded-lg p-4 border border-gray-200 hover:border-gray-300 transition-all duration-200",children:s.jsxs("div",{className:"flex items-center space-x-3",children:[u&&s.jsx("div",{className:"absolute -top-2 -right-2 bg-blue-600 text-white text-xs font-medium px-2 py-0.5 rounded-full z-10",children:u}),s.jsx("div",{className:`p-2 rounded-lg ${h[c]} group-hover:scale-105 transition-transform duration-200`,children:s.jsx(n,{className:"h-4 w-4 text-white"})}),s.jsxs("div",{className:"flex-1",children:[s.jsx("h4",{className:"font-medium text-gray-900 text-sm",children:a}),s.jsx("p",{className:"text-xs text-gray-500",children:l})]}),s.jsx(P_,{className:"h-4 w-4 text-gray-400 group-hover:text-gray-600 group-hover:translate-x-0.5 transition-all duration-200"})]})})}function C2({product:n,isOpen:a,onClose:l,onAddToCart:i}){const[c,u]=N.useState("piece"),[h,m]=N.useState(1);if(!a||!n)return null;const x={piece:{name:"Piece",icon:Me,price:Number(n.price_per_piece),stock:n.stock_in_pieces,unit:"pc",description:"Individual pieces",multiplier:1},sheet:{name:"Sheet",icon:c1,price:Number(n.price_per_piece)*Number(n.pieces_per_sheet),stock:Math.floor(n.stock_in_pieces/n.pieces_per_sheet),unit:"sheet",description:`${n.pieces_per_sheet} pieces per sheet`,multiplier:n.pieces_per_sheet},box:{name:"Box",icon:O_,price:Number(n.price_per_piece)*Number(n.pieces_per_sheet)*Number(n.sheets_per_box),stock:Math.floor(n.stock_in_pieces/(n.pieces_per_sheet*n.sheets_per_box)),unit:"box",description:`${n.sheets_per_box} sheets per box (${n.pieces_per_sheet*n.sheets_per_box} pieces)`,multiplier:n.pieces_per_sheet*n.sheets_per_box}},g=x[c],p=Math.min(g.stock,9999),b=g.price*h,j=g.multiplier*h,w=g.stock<=0,S=C=>{const L=h+C;L>=1&&L<=p&&m(L)},_=()=>{!w&&h>0&&(console.log("🎯 Variant Modal - Adding to cart:",{product:n.name,quantity:h,selectedVariant:c,currentVariant:g,totalPrice:b,totalPieces:j}),i(n,h,c),l(),m(1),u("piece"))};return s.jsx("div",{className:"fixed inset-0 bg-black/60 backdrop-blur-sm flex items-center justify-center z-50 p-4",children:s.jsxs("div",{className:"bg-white rounded-2xl shadow-2xl max-w-2xl w-full max-h-[90vh] overflow-hidden flex flex-col",children:[s.jsx("div",{className:"bg-white border-b border-gray-200 p-6 flex-shrink-0",children:s.jsxs("div",{className:"flex items-center justify-between",children:[s.jsxs("div",{className:"flex items-center space-x-3",children:[s.jsx("div",{className:"bg-blue-100 p-2 rounded-lg",children:s.jsx(Me,{className:"h-5 w-5 text-blue-600"})}),s.jsxs("div",{children:[s.jsx("h2",{className:"text-lg font-semibold text-gray-900",children:"Select Product Unit"}),s.jsx("p",{className:"text-sm text-gray-600",children:n.name})]})]}),s.jsx("button",{onClick:l,className:"p-2 text-gray-400 hover:text-gray-600 rounded-lg hover:bg-gray-100 transition-colors",title:"Close",children:s.jsx(Ft,{className:"h-5 w-5"})})]})}),s.jsxs("div",{className:"p-6 overflow-y-auto flex-1",children:[s.jsxs("div",{className:"mb-6",children:[s.jsxs("h3",{className:"text-lg font-bold text-gray-900 mb-4 flex items-center",children:[s.jsx("div",{className:"bg-blue-100 p-2 rounded-xl mr-3",children:s.jsx(Od,{className:"h-5 w-5 text-blue-600"})}),"Select Purchase Unit"]}),s.jsx("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-3",children:Object.entries(x).map(([C,L])=>{const B=L.icon,z=c===C,U=L.stock>0;return s.jsxs("button",{onClick:()=>U&&u(C),disabled:!U,className:`relative p-4 border-2 rounded-xl transition-all duration-300 transform hover:scale-105 ${z?"border-blue-500 bg-gradient-to-r from-blue-50 to-indigo-50 shadow-lg scale-105":U?"border-gray-200 hover:border-blue-300 hover:shadow-md":"border-gray-100 bg-gray-50 opacity-50 cursor-not-allowed"}`,children:[z&&s.jsx("div",{className:"absolute -top-2 -right-2 bg-gradient-to-r from-blue-500 to-blue-600 text-white rounded-full p-2 shadow-lg",children:s.jsx("div",{className:"w-3 h-3 bg-white rounded-full"})}),s.jsxs("div",{className:"text-center",children:[s.jsx("div",{className:`mx-auto mb-3 p-3 rounded-xl transition-all duration-300 ${z?"bg-gradient-to-r from-blue-500 to-blue-600 text-white shadow-md":"bg-gray-100 text-gray-600"}`,children:s.jsx(B,{className:"h-6 w-6 mx-auto"})}),s.jsx("h4",{className:`font-bold text-base mb-2 ${z?"text-blue-700":"text-gray-900"}`,children:L.name}),s.jsx("p",{className:"text-sm text-gray-600 mb-3 min-h-[2rem] flex items-center justify-center",children:L.description}),s.jsxs("div",{className:"space-y-2",children:[s.jsx("p",{className:`font-bold text-lg ${z?"text-blue-700":"text-gray-900"}`,children:re(L.price)}),s.jsxs("div",{className:`px-3 py-1 rounded-full text-xs font-semibold ${U?"bg-green-100 text-green-700 border border-green-200":"bg-red-100 text-red-700 border border-red-200"}`,children:["Stock: ",L.stock," ",L.unit]})]}),!U&&s.jsx("div",{className:"absolute inset-0 flex items-center justify-center bg-white bg-opacity-95 rounded-xl",children:s.jsx("span",{className:"text-red-600 font-bold text-sm bg-red-50 px-3 py-2 rounded-full border border-red-200",children:"Out of Stock"})})]})]},C)})})]}),!w&&s.jsxs("div",{className:"mb-6",children:[s.jsxs("h3",{className:"text-lg font-bold text-gray-900 mb-4 flex items-center",children:[s.jsx("div",{className:"bg-green-100 p-2 rounded-xl mr-3",children:s.jsx(Qt,{className:"h-5 w-5 text-green-600"})}),"Select Quantity"]}),s.jsxs("div",{className:"bg-gradient-to-r from-gray-50 to-gray-100 rounded-xl p-4",children:[s.jsxs("div",{className:"flex items-center justify-center space-x-4 mb-4",children:[s.jsx("button",{onClick:()=>S(-1),disabled:h<=1,className:"p-3 bg-white border-2 border-gray-300 rounded-xl hover:bg-gray-50 hover:border-blue-300 disabled:opacity-50 disabled:cursor-not-allowed transition-all duration-200 shadow-md hover:shadow-lg",children:s.jsx(kx,{className:"h-5 w-5 text-gray-600"})}),s.jsxs("div",{className:"flex flex-col items-center space-y-2",children:[s.jsx("input",{type:"number",value:h,onChange:C=>{const L=parseInt(C.target.value)||1;L>=1&&L<=p&&m(L)},min:"1",max:p,className:"w-24 text-center text-2xl font-bold text-gray-900 border-2 border-gray-300 rounded-xl px-3 py-2 focus:ring-2 focus:ring-blue-500 focus:border-blue-500 transition-all duration-200 shadow-md"}),s.jsx("div",{className:"bg-blue-100 text-blue-700 px-3 py-1 rounded-full text-sm font-bold border border-blue-200",children:g.unit})]}),s.jsx("button",{onClick:()=>S(1),disabled:h>=p,className:"p-3 bg-white border-2 border-gray-300 rounded-xl hover:bg-gray-50 hover:border-blue-300 disabled:opacity-50 disabled:cursor-not-allowed transition-all duration-200 shadow-md hover:shadow-lg",children:s.jsx(ol,{className:"h-5 w-5 text-gray-600"})})]}),s.jsxs("div",{className:"text-center space-y-2",children:[s.jsxs("div",{className:"bg-white rounded-xl p-3 border border-gray-200",children:[s.jsx("p",{className:"text-sm text-gray-600 mb-1",children:"Available Stock"}),s.jsxs("p",{className:"text-base font-bold text-gray-900",children:[p," ",g.unit]})]}),j>1&&s.jsx("div",{className:"bg-blue-50 border border-blue-200 rounded-xl p-2",children:s.jsxs("p",{className:"text-sm font-semibold text-blue-800",children:["📊 Total: ",j.toLocaleString()," pieces"]})})]})]})]}),s.jsxs("div",{className:"bg-gradient-to-r from-blue-50 to-indigo-50 rounded-xl p-4 mb-4 border border-blue-200",children:[s.jsxs("h4",{className:"text-base font-bold text-gray-900 mb-3 flex items-center",children:[s.jsx("div",{className:"bg-blue-100 p-2 rounded-xl mr-3",children:s.jsx(Me,{className:"h-4 w-4 text-blue-600"})}),"Order Summary"]}),s.jsxs("div",{className:"space-y-2",children:[s.jsxs("div",{className:"flex justify-between items-center py-1 border-b border-blue-200",children:[s.jsx("span",{className:"text-gray-700 font-medium",children:"Unit Price:"}),s.jsx("span",{className:"font-bold text-gray-900",children:re(g.price)})]}),s.jsxs("div",{className:"flex justify-between items-center py-1 border-b border-blue-200",children:[s.jsx("span",{className:"text-gray-700 font-medium",children:"Quantity:"}),s.jsxs("span",{className:"font-bold text-gray-900",children:[h," ",g.unit]})]}),s.jsxs("div",{className:"flex justify-between items-center pt-2",children:[s.jsx("span",{className:"text-lg font-bold text-gray-900",children:"Total Amount:"}),s.jsx("span",{className:"text-2xl font-bold text-blue-600",children:re(b)})]})]})]})]}),s.jsx("div",{className:"border-t border-gray-200 p-6 bg-gradient-to-r from-gray-50 to-gray-100 flex-shrink-0",children:s.jsxs("div",{className:"flex space-x-4",children:[s.jsx("button",{onClick:l,className:"flex-1 px-6 py-3 border-2 border-gray-300 text-gray-700 rounded-xl hover:bg-white hover:border-gray-400 transition-all duration-200 font-medium text-base shadow-md hover:shadow-lg",children:"Cancel"}),s.jsxs("button",{onClick:_,disabled:w||h===0,className:"flex-1 px-6 py-3 bg-gradient-to-r from-blue-600 to-blue-700 text-white rounded-xl hover:from-blue-700 hover:to-blue-800 disabled:from-gray-300 disabled:to-gray-400 disabled:cursor-not-allowed transition-all duration-200 font-medium text-base flex items-center justify-center space-x-2 shadow-lg hover:shadow-xl",children:[s.jsx(Qt,{className:"h-5 w-5"}),s.jsx("span",{children:w?"Out of Stock":`Add to Cart - ${re(b)}`})]})]})})]})})}function E2({products:n=[],onAddToCart:a,cartItems:l=[],className:i=""}){const[c,u]=N.useState(""),[h,m]=N.useState(n),[x,g]=N.useState(null),[p,b]=N.useState(!1),[j,w]=N.useState("all"),[S,_]=N.useState([]),[C,L]=N.useState([]);N.useEffect(()=>{(async()=>{try{const q=await Vt.getCategoryInsights();q.success&&L(q.data.top_value_categories||[])}catch(q){console.error("Failed to load intelligent categories:",q)}})()},[]),N.useEffect(()=>{const q=[...new Set(n.map(H=>H.category))].filter(Boolean).sort((H,ee)=>{const K=C.find(oe=>oe.name===H),te=C.find(oe=>oe.name===ee),de=K?.stats?.total_value||0;return(te?.stats?.total_value||0)-de});_(q)},[n,C]),N.useEffect(()=>{let D=n;if(j!=="all"&&(D=D.filter(q=>q.category===j)),c){const q=c.toLowerCase();D=D.filter(H=>H.name.toLowerCase().includes(q)||H.brand.toLowerCase().includes(q)||H.category.toLowerCase().includes(q))}m(D)},[c,j,n]);const B=D=>{D.stock_in_pieces>0&&(g(D),b(!0))},z=(D,q,H)=>{console.log("🔄 ProductSelector - Received:",{product:D.name,quantity:q,selectedVariant:H}),a(D,q,H),b(!1),g(null)},U=D=>D.stock_in_pieces>0;return s.jsxs("div",{className:`bg-white rounded-lg border border-gray-200 ${i}`,children:[s.jsxs("div",{className:"p-6 border-b border-gray-200",children:[s.jsx("h3",{className:"text-xl font-semibold text-gray-900 mb-4",children:"Select Products"}),s.jsxs("div",{className:"relative mb-4",children:[s.jsx(Ii,{className:"absolute left-3 top-3 h-5 w-5 text-gray-400"}),s.jsx("input",{type:"text",placeholder:"Search products...",value:c,onChange:D=>u(D.target.value),className:"w-full pl-10 pr-4 py-3 border border-gray-300 rounded-xl focus:ring-2 focus:ring-blue-500 focus:border-transparent transition-colors"})]}),s.jsxs("div",{className:"space-y-2",children:[s.jsxs("label",{className:"flex items-center text-sm font-medium text-gray-700",children:[s.jsx(Nx,{className:"h-4 w-4 mr-2"}),"Filter by Category"]}),s.jsxs("div",{className:"flex flex-wrap gap-2",children:[s.jsxs("button",{onClick:()=>w("all"),className:`px-3 py-2 rounded-lg text-sm font-medium transition-colors ${j==="all"?"bg-blue-100 text-blue-700 border-2 border-blue-300":"bg-gray-100 text-gray-700 hover:bg-gray-200 border-2 border-transparent"}`,children:[s.jsx(Gr,{className:"h-4 w-4 mr-1 inline"}),"All Categories"]}),S.map(D=>{const q=C.find(ee=>ee.name===D),H=q&&q.stats?.total_value>1e3;return s.jsxs("button",{onClick:()=>w(D),className:`px-3 py-2 rounded-lg text-sm font-medium transition-colors relative ${j===D?"bg-blue-100 text-blue-700 border-2 border-blue-300":"bg-gray-100 text-gray-700 hover:bg-gray-200 border-2 border-transparent"}`,children:[D,H&&s.jsx("span",{className:"absolute -top-1 -right-1 h-2 w-2 bg-green-500 rounded-full"})]},D)})]})]})]}),s.jsx("div",{className:"max-h-[600px] overflow-y-auto",children:h.length===0?s.jsxs("div",{className:"p-12 text-center text-gray-500",children:[s.jsx(Me,{className:"h-16 w-16 mx-auto mb-4 text-gray-300"}),s.jsx("p",{className:"text-xl font-medium text-gray-400",children:"No products found"}),s.jsx("p",{className:"text-gray-400 mt-2",children:"Try adjusting your search terms"})]}):s.jsx("div",{className:"p-4 space-y-3",children:h.map(D=>{const q=U(D);return s.jsxs("button",{onClick:()=>B(D),onKeyDown:H=>{(H.key==="Enter"||H.key===" ")&&(H.preventDefault(),B(D))},disabled:!q,className:`group p-6 border-2 rounded-2xl transition-all duration-300 text-left w-full transform hover:scale-[1.02] ${q?"border-gray-200 hover:border-blue-400 hover:shadow-xl hover:bg-gradient-to-r hover:from-blue-50 hover:to-indigo-50 cursor-pointer":"opacity-60 cursor-not-allowed border-gray-200"}`,children:[s.jsxs("div",{className:"flex items-center justify-between",children:[s.jsxs("div",{className:"flex items-center space-x-5 flex-1 min-w-0",children:[s.jsx("div",{className:`p-4 rounded-2xl transition-all duration-300 ${q?"bg-gradient-to-r from-blue-500 to-blue-600 text-white shadow-lg group-hover:from-blue-600 group-hover:to-blue-700":"bg-gray-200 text-gray-400"}`,children:s.jsx(Me,{className:"h-7 w-7"})}),s.jsxs("div",{className:"flex-1 min-w-0",children:[s.jsx("h4",{className:"font-bold text-gray-900 truncate text-xl mb-1",children:D.name}),s.jsxs("div",{className:"flex items-center space-x-3 mb-3",children:[s.jsx("span",{className:"bg-blue-100 text-blue-800 px-3 py-1 rounded-full text-sm font-semibold",children:D.brand}),s.jsx("span",{className:"text-gray-500 font-medium",children:D.category})]}),s.jsxs("div",{className:"flex items-center space-x-6",children:[s.jsxs("div",{className:"bg-green-50 px-4 py-2 rounded-xl border border-green-200",children:[s.jsxs("span",{className:"text-green-600 text-sm font-medium",children:["From"," "]}),s.jsx("span",{className:"font-bold text-green-700 text-lg",children:re(D.price_per_piece)}),s.jsx("span",{className:"text-green-600 text-sm font-medium",children:"/piece"})]}),s.jsxs("div",{className:`px-4 py-2 rounded-xl border ${D.stock_in_pieces<=(D.reorder_level||0)?"bg-amber-50 border-amber-200":"bg-gray-50 border-gray-200"}`,children:[s.jsxs("span",{className:"text-gray-600 text-sm font-medium",children:["Stock:"," "]}),s.jsx("span",{className:`font-bold text-lg ${D.stock_in_pieces<=(D.reorder_level||0)?"text-amber-600":"text-gray-800"}`,children:D.stock_in_pieces}),s.jsxs("span",{className:"text-gray-600 text-sm font-medium",children:[" ","pieces"]})]})]})]})]}),s.jsx("div",{className:"flex-shrink-0 ml-6",children:q?s.jsx("div",{className:"bg-gradient-to-r from-blue-600 to-blue-700 text-white p-4 rounded-2xl group-hover:from-blue-700 group-hover:to-blue-800 transition-all duration-300 shadow-lg",children:s.jsx(ol,{className:"h-6 w-6"})}):s.jsx("div",{className:"bg-gray-200 text-gray-500 px-6 py-3 rounded-2xl text-sm font-bold border-2 border-gray-300",children:"Out of Stock"})})]}),q&&D.stock_in_pieces<=(D.reorder_level||0)&&s.jsx("div",{className:"mt-4 p-3 bg-gradient-to-r from-amber-50 to-orange-50 border-l-4 border-amber-400 rounded-lg",children:s.jsxs("div",{className:"flex items-center space-x-2",children:[s.jsx("div",{className:"bg-amber-100 p-1 rounded-full",children:s.jsx(ks,{className:"h-4 w-4 text-amber-600"})}),s.jsxs("p",{className:"text-sm font-semibold text-amber-800",children:["⚠️ Low Stock Alert: Only ",D.stock_in_pieces," ","pieces remaining"]})]})})]},D.id)})})}),l.length>0&&s.jsx("div",{className:"p-4 border-t border-gray-200 bg-gray-50",children:s.jsxs("div",{className:"flex justify-between text-sm",children:[s.jsxs("span",{className:"text-gray-600",children:[l.length," item",l.length!==1?"s":""," in cart"]}),s.jsxs("span",{className:"font-medium text-gray-900",children:["Total:"," ",re(l.reduce((D,q)=>D+q.price*q.quantity,0))]})]})}),s.jsx(C2,{product:x,isOpen:p,onClose:()=>{b(!1),g(null)},onAddToCart:z})]})}function A2({items:n=[],onUpdateQuantity:a,onRemoveItem:l,onClearCart:i,className:c=""}){const u=n.reduce((g,p)=>g+p.totalPrice,0),h=u*.12,m=u+h,x=g=>g.totalPrice;return n.length===0?s.jsx("div",{className:`bg-white rounded-lg border border-gray-200 ${c}`,children:s.jsxs("div",{className:"p-6",children:[s.jsxs("div",{className:"flex items-center space-x-2 mb-4",children:[s.jsx(Qt,{className:"h-5 w-5 text-gray-600"}),s.jsx("h3",{className:"text-lg font-medium text-gray-900",children:"Shopping Cart"})]}),s.jsxs("div",{className:"text-center py-8",children:[s.jsx(Me,{className:"h-16 w-16 mx-auto mb-4 text-gray-300"}),s.jsx("p",{className:"text-lg font-medium text-gray-900 mb-2",children:"Your cart is empty"}),s.jsx("p",{className:"text-gray-500",children:"Add products to start a new transaction"})]})]})}):s.jsxs("div",{className:`bg-white rounded-lg border border-gray-200 ${c}`,children:[s.jsx("div",{className:"p-4 border-b border-gray-200",children:s.jsxs("div",{className:"flex items-center justify-between",children:[s.jsxs("div",{className:"flex items-center space-x-2",children:[s.jsx(Qt,{className:"h-5 w-5 text-gray-600"}),s.jsx("h3",{className:"text-lg font-medium text-gray-900",children:"Shopping Cart"}),s.jsxs("span",{className:"bg-blue-100 text-blue-800 text-xs font-medium px-2 py-1 rounded-full",children:[n.length," item",n.length!==1?"s":""]})]}),n.length>0&&s.jsx("button",{onClick:i,className:"text-sm text-red-600 hover:text-red-800 transition-colors",children:"Clear All"})]})}),s.jsx("div",{className:"max-h-80 overflow-y-auto",children:s.jsx("div",{className:"divide-y divide-gray-200",children:n.map(g=>s.jsxs("div",{className:"p-4",children:[s.jsxs("div",{className:"flex items-start space-x-3",children:[s.jsx("div",{className:"bg-gradient-to-br from-blue-500 to-blue-600 p-2 rounded-lg flex-shrink-0 shadow-sm",children:s.jsx(Me,{className:"h-4 w-4 text-white"})}),s.jsxs("div",{className:"flex-1 min-w-0",children:[s.jsx("h4",{className:"text-sm font-medium text-gray-900 truncate",children:g.name}),s.jsxs("p",{className:"text-xs text-gray-500 truncate",children:[g.product.brand," • ",g.product.category]}),s.jsxs("div",{className:"mt-1 flex items-center space-x-2",children:[s.jsxs("span",{className:"text-sm text-gray-600",children:[re(g.pricePerUnit)," per ",g.unit]}),s.jsxs("span",{className:"text-xs text-gray-500",children:["(",g.quantityInPieces," pieces total)"]})]})]}),s.jsx("button",{onClick:()=>l(g.id),className:"text-gray-400 hover:text-red-600 transition-colors",title:"Remove from cart",children:s.jsx(ul,{className:"h-4 w-4"})})]}),s.jsxs("div",{className:"mt-3 flex items-center justify-between",children:[s.jsxs("div",{className:"flex items-center space-x-2",children:[s.jsx("button",{onClick:()=>a(g.id,g.quantity-1),disabled:g.quantity<=1,className:"p-1 text-gray-400 hover:text-gray-600 transition-colors disabled:opacity-50 disabled:cursor-not-allowed",children:s.jsx(kx,{className:"h-4 w-4"})}),s.jsxs("div",{className:"flex items-center space-x-2",children:[s.jsx("span",{className:"text-sm font-medium text-gray-900 min-w-[2rem] text-center",children:g.quantity}),s.jsx("span",{className:"text-xs text-gray-500",children:g.unit})]}),s.jsx("button",{onClick:()=>a(g.id,g.quantity+1),className:"p-1 text-gray-400 hover:text-gray-600 transition-colors",children:s.jsx(ol,{className:"h-4 w-4"})})]}),s.jsxs("div",{className:"text-right",children:[s.jsx("div",{className:"text-sm font-semibold text-gray-900",children:re(x(g))}),g.quantity>1&&s.jsxs("div",{className:"text-xs text-gray-500",children:[g.quantity," × ",re(g.pricePerUnit)]})]})]}),g.quantityInPieces>g.product.stock_in_pieces*.8&&s.jsx("div",{className:"mt-2 p-2 bg-yellow-50 border border-yellow-200 rounded-md",children:s.jsxs("p",{className:"text-xs text-yellow-800",children:["High quantity: You're ordering ",g.quantityInPieces," ","pieces (",(g.quantityInPieces/g.product.stock_in_pieces*100).toFixed(1),"% of stock)"]})})]},g.id))})}),s.jsx("div",{className:"p-4 border-t border-gray-200 bg-gray-50",children:s.jsxs("div",{className:"space-y-2",children:[s.jsxs("div",{className:"flex justify-between text-sm",children:[s.jsx("span",{className:"text-gray-600",children:"Subtotal:"}),s.jsx("span",{className:"text-gray-900",children:re(u)})]}),s.jsxs("div",{className:"flex justify-between text-sm",children:[s.jsx("span",{className:"text-gray-600",children:"VAT (12%):"}),s.jsx("span",{className:"text-gray-900",children:re(h)})]}),s.jsxs("div",{className:"flex justify-between text-lg font-semibold border-t border-gray-200 pt-2",children:[s.jsx("span",{className:"text-gray-900",children:"Total:"}),s.jsx("span",{className:"text-gray-900",children:re(m)})]}),s.jsxs("div",{className:"text-xs text-gray-500 text-center",children:[n.reduce((g,p)=>g+p.quantity,0)," total items"]})]})})]})}const Ng=n=>{let a;const l=new Set,i=(g,p)=>{const b=typeof g=="function"?g(a):g;if(!Object.is(b,a)){const j=a;a=p??(typeof b!="object"||b===null)?b:Object.assign({},a,b),l.forEach(w=>w(a,j))}},c=()=>a,m={setState:i,getState:c,getInitialState:()=>x,subscribe:g=>(l.add(g),()=>l.delete(g))},x=a=n(i,c,m);return m},T2=(n=>n?Ng(n):Ng),R2=n=>n;function O2(n,a=R2){const l=rs.useSyncExternalStore(n.subscribe,rs.useCallback(()=>a(n.getState()),[n,a]),rs.useCallback(()=>a(n.getInitialState()),[n,a]));return rs.useDebugValue(l),l}const Sg=n=>{const a=T2(n),l=i=>O2(a,i);return Object.assign(l,a),l},D2=(n=>n?Sg(n):Sg);function Ax(n,a){let l;try{l=n()}catch{return}return{getItem:c=>{var u;const h=x=>x===null?null:JSON.parse(x,void 0),m=(u=l.getItem(c))!=null?u:null;return m instanceof Promise?m.then(h):h(m)},setItem:(c,u)=>l.setItem(c,JSON.stringify(u,void 0)),removeItem:c=>l.removeItem(c)}}const hd=n=>a=>{try{const l=n(a);return l instanceof Promise?l:{then(i){return hd(i)(l)},catch(i){return this}}}catch(l){return{then(i){return this},catch(i){return hd(i)(l)}}}},M2=(n,a)=>(l,i,c)=>{let u={storage:Ax(()=>localStorage),partialize:_=>_,version:0,merge:(_,C)=>({...C,..._}),...a},h=!1;const m=new Set,x=new Set;let g=u.storage;if(!g)return n((..._)=>{console.warn(`[zustand persist middleware] Unable to update item '${u.name}', the given storage is currently unavailable.`),l(..._)},i,c);const p=()=>{const _=u.partialize({...i()});return g.setItem(u.name,{state:_,version:u.version})},b=c.setState;c.setState=(_,C)=>(b(_,C),p());const j=n((..._)=>(l(..._),p()),i,c);c.getInitialState=()=>j;let w;const S=()=>{var _,C;if(!g)return;h=!1,m.forEach(B=>{var z;return B((z=i())!=null?z:j)});const L=((C=u.onRehydrateStorage)==null?void 0:C.call(u,(_=i())!=null?_:j))||void 0;return hd(g.getItem.bind(g))(u.name).then(B=>{if(B)if(typeof B.version=="number"&&B.version!==u.version){if(u.migrate){const z=u.migrate(B.state,B.version);return z instanceof Promise?z.then(U=>[!0,U]):[!0,z]}console.error("State loaded from storage couldn't be migrated since no migrate function was provided")}else return[!1,B.state];return[!1,void 0]}).then(B=>{var z;const[U,D]=B;if(w=u.merge(D,(z=i())!=null?z:j),l(w,!0),U)return p()}).then(()=>{L?.(w,void 0),w=i(),h=!0,x.forEach(B=>B(w))}).catch(B=>{L?.(void 0,B)})};return c.persist={setOptions:_=>{u={...u,..._},_.storage&&(g=_.storage)},clearStorage:()=>{g?.removeItem(u.name)},getOptions:()=>u,rehydrate:()=>S(),hasHydrated:()=>h,onHydrate:_=>(m.add(_),()=>{m.delete(_)}),onFinishHydration:_=>(x.add(_),()=>{x.delete(_)})},u.skipHydration||S(),w||j},U2=M2,P2=D2(U2((n,a)=>({cartItems:[],customer:null,paymentMethod:"cash",amountPaid:0,syncQueue:[],addToCart:(l,i,c)=>{console.log("🛒 POS Store - addToCart called with:",{productName:l.name,quantity:i,unit:c,productData:{pieces_per_sheet:l.pieces_per_sheet,sheets_per_box:l.sheets_per_box,price_per_piece:l.price_per_piece}});const u=a(),h=u.cartItems.findIndex(j=>j.product.id===l.id&&j.unit===c),m=Number(i),x=kg(m,c,l),g=Number(l.price_per_piece),p=L2(g,c,l),b=p*m;if(console.log("💰 POS Store - Calculated values:",{quantityInPieces:x,pricePerPiece:g,pricePerUnit:p,totalPrice:b,originalQuantity:i,numQuantity:m,unit:c}),h>=0){const j=[...u.cartItems],w=j[h],S=w.quantity+m,_=w.quantityInPieces+x,C=p*S;j[h]={...w,quantity:S,quantityInPieces:_,totalPrice:C},console.log("📝 Updated existing item:",j[h]),n({cartItems:j})}else{const j={id:`${l.id}-${c}`,productId:l.id,name:l.name,quantity:m,quantityInPieces:x,unit:c,pricePerUnit:p,pricePerPiece:g,totalPrice:b,product:{...l}};console.log("✨ Created new cart item:",j),n({cartItems:[...u.cartItems,j]})}},removeFromCart:l=>{const c=a().cartItems.filter(u=>u.id!==l);n({cartItems:c})},updateCartItemQuantity:(l,i,c)=>{const h=a().cartItems.map(m=>{if(m.id===l){const x=kg(c,m.unit,m.product),g=m.pricePerUnit*c;return{...m,quantity:c,quantityInPieces:x,totalPrice:g}}return m});n({cartItems:h})},clearCart:()=>{n({cartItems:[],customer:null,paymentMethod:"cash",amountPaid:0})},setCustomer:l=>n({customer:l}),setPaymentMethod:l=>n({paymentMethod:l}),setAmountPaid:l=>n({amountPaid:l}),addToSyncQueue:l=>{const i=a();n({syncQueue:[...i.syncQueue,{...l,id:Date.now().toString(),timestamp:new Date().toISOString(),synced:!1}]})},markAsSynced:l=>{const c=a().syncQueue.map(u=>u.id===l?{...u,synced:!0}:u);n({syncQueue:c})},clearSyncedItems:()=>{const i=a().syncQueue.filter(c=>!c.synced);n({syncQueue:i})},getCartTotal:()=>a().cartItems.reduce((i,c)=>i+c.totalPrice,0),getCartItemCount:()=>a().cartItems.reduce((i,c)=>i+c.quantity,0)}),{name:"medcure-pos-storage",storage:Ax(()=>localStorage),partialize:n=>({syncQueue:n.syncQueue,cartItems:n.cartItems,customer:n.customer,paymentMethod:n.paymentMethod})}));function kg(n,a,l){switch(a){case"piece":return n;case"sheet":return n*(l.pieces_per_sheet||1);case"box":return n*(l.sheets_per_box||1)*(l.pieces_per_sheet||1);default:return n}}function L2(n,a,l){switch(a){case"piece":return n;case"sheet":return n*(l.pieces_per_sheet||1);case"box":return n*(l.sheets_per_box||1)*(l.pieces_per_sheet||1);default:return n}}const Mr={getProducts:async()=>await pt.getProducts(),getActiveProducts:async()=>(await pt.getProducts()).filter(a=>!a.is_archived&&a.is_active!==!1),getAvailableProducts:async()=>(await pt.getProducts()).filter(a=>!a.is_archived&&a.is_active!==!1&&a.stock_in_pieces>0),getProductById:async n=>await pt.getProductById(n),searchProducts:async n=>await pt.searchProducts(n),addProduct:async n=>await pt.addProduct(n),updateProduct:async(n,a)=>await pt.updateProduct(n,a),deleteProduct:async n=>await pt.deleteProduct(n),archiveProduct:async(n,a=null)=>await pt.updateProduct(n,{is_archived:!0,archived_at:new Date().toISOString(),archived_by:a,is_active:!1}),restoreProduct:async n=>await pt.updateProduct(n,{is_archived:!1,archived_at:null,archived_by:null,is_active:!0}),getArchivedProducts:async()=>(await pt.getProducts()).filter(a=>a.is_archived),getLowStockProducts:async()=>await pt.getLowStockProducts(),getExpiringProducts:async(n=30)=>await pt.getExpiringProducts(n)},fd={processSale:async n=>await aa.processSale(n),getSales:async(n=1,a=50)=>await aa.getSales(n,a),getSalesByDateRange:async(n,a)=>await aa.getSalesByDateRange(n,a),voidSale:async(n,a)=>await aa.voidSale(n,a),getDailySalesSummary:async n=>await aa.getDailySalesSummary(n),getSalesAnalytics:async(n,a)=>await aa.getSalesAnalytics(n,a),getTodaysTransactions:async()=>{const n=new Date,a=new Date(n.getFullYear(),n.getMonth(),n.getDate()),l=new Date(n.getFullYear(),n.getMonth(),n.getDate(),23,59,59);console.log("📅 Getting today's transactions:",{startOfDay:a,endOfDay:l});const c=(await aa.getSalesByDateRange(a,l)).map(u=>({...u,items:u.sale_items?.map(h=>({id:h.product_id,product_id:h.product_id,name:h.products?.name||"Unknown Product",quantity:h.quantity,unit_type:h.unit_type,unit_price:h.unit_price,subtotal:h.total_price,total_price:h.total_price}))||[],subtotal:u.total_amount?u.total_amount/1.12:0,tax:u.total_amount?u.total_amount*.12/1.12:0,total:u.total_amount||0}));return console.log("🔄 Transformed transactions:",c),c}};function q2(){const{cartItems:n,addToCart:a,updateCartItemQuantity:l,removeFromCart:i,clearCart:c,getCartItemCount:u,getCartTotal:h}=P2(),[m,x]=N.useState(!1),[g,p]=N.useState(null),[b,j]=N.useState(null),[w,S]=N.useState([]),[_,C]=N.useState(!1),L=N.useCallback(async()=>{C(!0);try{const oe=await Mr.getAvailableProducts();console.log("🏪 [usePOS] Loaded available products for POS:",{availableProducts:oe.length}),S(oe)}catch(oe){console.error("Error loading products:",oe),j("Failed to load products")}finally{C(!1)}},[]);N.useEffect(()=>{L()},[L]);const B=N.useCallback((oe,Q=1,X="piece")=>{try{console.log("🎪 usePOS Hook - Received:",{productName:oe.name,quantity:Q,unit:X,typeof_quantity:typeof Q,typeof_unit:typeof X}),j(null),a(oe,Q,X)}catch(R){console.error("❌ Error in handleAddToCart:",R),j(R.message),setTimeout(()=>j(null),3e3)}},[a]),z=N.useCallback((oe,Q)=>{try{if(j(null),Q<=0){i(oe);return}l(oe,null,Q)}catch(X){j(X.message),setTimeout(()=>j(null),3e3)}},[l,i]),U=N.useCallback(oe=>{try{j(null),i(oe)}catch(Q){j(Q.message),setTimeout(()=>j(null),3e3)}},[i]),D=N.useCallback(()=>h(),[h]),q=N.useCallback(()=>D()*.12,[D]),H=N.useCallback(()=>D()+q(),[D,q]),ee=N.useCallback(()=>{try{j(null),c()}catch(oe){j(oe.message),setTimeout(()=>j(null),3e3)}},[c]),K=N.useCallback(async oe=>{x(!0),j(null);try{if(n.length===0)throw new Error("Cart is empty");const Q=H();if(oe.amount<Q)throw new Error("Insufficient payment amount");const X={items:n.map(J=>({product_id:J.productId,quantity_in_pieces:J.quantityInPieces,unit_type:J.unit,unit_quantity:J.quantity,price_per_unit:J.pricePerUnit,total_price:J.totalPrice})),total:Q,paymentMethod:oe.method,customer:oe.customer||null,cashierId:oe.cashierId||null};console.log("🚀 POS Hook - Sale data being sent:",X),console.log("🛒 POS Hook - Cart items:",n);const W={...await fd.processSale(X),payment:{method:oe.method,amount:oe.amount,change:oe.amount-Q},items:n.map(J=>({id:J.productId,name:J.name,unit:J.unit,quantity:J.quantity,quantityInPieces:J.quantityInPieces,pricePerUnit:J.pricePerUnit,totalPrice:J.totalPrice})),subtotal:D(),tax:q()};return p(W),c(),await L(),W}catch(Q){throw console.error("Payment processing error:",Q),j(Q.message),Q}finally{x(!1)}},[n,H,D,q,c,L]),te=N.useCallback(oe=>{const Q=H();return Math.max(0,oe-Q)},[H]),de=N.useCallback(oe=>{const Q={};oe.method||(Q.method="Payment method is required"),(!oe.amount||oe.amount<=0)&&(Q.amount="Payment amount is required");const X=H();return oe.amount<X&&(Q.amount="Insufficient payment amount"),{isValid:Object.keys(Q).length===0,errors:Q}},[H]),me=N.useCallback(()=>({itemCount:u(),subtotal:D(),tax:q(),total:H()}),[u,D,q,H]);return{cartItems:n,availableProducts:w,lastTransaction:g,isProcessing:m,isLoadingProducts:_,error:b,handleAddToCart:B,handleUpdateQuantity:z,handleRemoveItem:U,handleClearCart:ee,processPayment:K,loadAvailableProducts:L,calculateChange:te,validatePayment:de,getCartSummary:me,clearError:()=>j(null)}}function la(n,a={}){if(!n)return"";const l={year:"numeric",month:"short",day:"numeric",...a};return new Intl.DateTimeFormat("en-PH",l).format(new Date(n))}function z2(){const{user:n}=As(),{cartItems:a,availableProducts:l,isProcessing:i,error:c,handleAddToCart:u,handleUpdateQuantity:h,handleRemoveItem:m,handleClearCart:x,processPayment:g,calculateChange:p,getCartSummary:b,clearError:j}=q2(),[w,S]=N.useState(!1),[_,C]=N.useState({method:"cash",amount:0,customer_name:"",customer_phone:""}),[L,B]=N.useState(!1),[z,U]=N.useState(null),[D,q]=N.useState(!1),[H,ee]=N.useState([]),[K,te]=N.useState(!1),de=b();N.useEffect(()=>{(async()=>{if(D){te(!0);try{console.log("📊 Loading transaction history...");const R=await fd.getTodaysTransactions();console.log("📊 Received transaction history:",R),ee(R)}catch(R){console.error("Failed to load transaction history:",R)}finally{te(!1)}}})()},[D]);const me=()=>{a.length!==0&&(C({method:"cash",amount:de.total,customer_name:"",customer_phone:""}),S(!0))},oe=async()=>{try{const X={..._,cashierId:n?.id||null};console.log("💳 POS Page - Processing payment with data:",X);const R=await g(X);if(U(R),S(!1),B(!0),C({method:"cash",amount:0,customer_name:"",customer_phone:""}),D){console.log("🔄 Refreshing transaction history after payment...");const W=await fd.getTodaysTransactions();console.log("🔄 Updated transaction history:",W),ee(W)}}catch(X){console.error("❌ Payment processing error:",X)}},Q=()=>{B(!1),U(null)};return s.jsxs("div",{className:"space-y-6",children:[s.jsx("div",{className:"bg-white rounded-xl p-6 shadow-sm border border-gray-200",children:s.jsxs("div",{className:"flex items-center justify-between",children:[s.jsxs("div",{className:"flex items-center space-x-4",children:[s.jsx("div",{className:"bg-emerald-100 p-3 rounded-xl",children:s.jsx(Qt,{className:"h-8 w-8 text-emerald-600"})}),s.jsxs("div",{children:[s.jsxs("h1",{className:"text-2xl font-bold text-gray-900 flex items-center space-x-2",children:[s.jsx("span",{children:"Point of Sale"}),s.jsx("span",{className:"inline-flex items-center px-2.5 py-0.5 rounded-full text-xs font-medium bg-emerald-100 text-emerald-800",children:"Live"})]}),s.jsx("p",{className:"text-gray-600",children:"Process customer transactions securely and efficiently"})]})]}),s.jsx("div",{className:"flex items-center space-x-3",children:s.jsxs("button",{onClick:()=>q(!0),className:"group flex items-center space-x-2 px-4 py-2.5 bg-gray-50 border border-gray-200 text-gray-700 rounded-lg hover:bg-blue-50 hover:border-blue-200 hover:text-blue-700 transition-all duration-200",children:[s.jsx(Hu,{className:"h-4 w-4 group-hover:scale-110 transition-transform duration-200"}),s.jsx("span",{className:"font-medium",children:"Today's Transactions"})]})})]})}),c&&s.jsxs("div",{className:"bg-red-50 border border-red-200 text-red-700 px-4 py-3 rounded-lg flex justify-between items-center",children:[s.jsx("span",{children:c}),s.jsx("button",{onClick:j,className:"text-red-500 hover:text-red-700",children:"×"})]}),s.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-3 gap-6",children:[s.jsx("div",{className:"lg:col-span-2",children:s.jsx(E2,{products:l,onAddToCart:u,cartItems:a})}),s.jsxs("div",{className:"space-y-4",children:[s.jsx(A2,{items:a,onUpdateQuantity:h,onRemoveItem:m,onClearCart:x}),a.length>0&&s.jsxs("button",{onClick:me,className:"w-full bg-green-600 text-white px-6 py-3 rounded-lg hover:bg-green-700 transition-colors flex items-center justify-center space-x-2 font-medium text-lg shadow-lg hover:shadow-xl",children:[s.jsx(Bu,{className:"h-5 w-5"}),s.jsxs("span",{children:["Proceed to Checkout - ",re(de.total)]})]})]})]}),w&&s.jsx("div",{className:"fixed inset-0 bg-black/60 backdrop-blur-sm flex items-center justify-center z-50 p-4",children:s.jsxs("div",{className:"bg-white rounded-lg shadow-2xl max-w-md w-full mx-4 border border-gray-200",children:[s.jsx("div",{className:"bg-white border-b border-gray-200 p-6",children:s.jsxs("div",{className:"flex items-center space-x-4",children:[s.jsx("div",{className:"bg-green-100 p-3 rounded-lg",children:s.jsx(Bu,{className:"h-6 w-6 text-green-600"})}),s.jsxs("div",{children:[s.jsx("h2",{className:"text-xl font-semibold text-gray-900",children:"Process Payment"}),s.jsx("p",{className:"text-gray-600 text-sm",children:"Complete your transaction"})]})]})}),s.jsxs("div",{className:"p-6 space-y-6",children:[s.jsxs("div",{className:"bg-gray-50 rounded-lg p-4 border border-gray-200",children:[s.jsxs("div",{className:"flex items-center justify-between mb-4",children:[s.jsxs("h3",{className:"text-lg font-medium text-gray-900 flex items-center",children:[s.jsx(Mi,{className:"h-5 w-5 mr-2 text-gray-600"}),"Order Summary"]}),s.jsxs("span",{className:"bg-gray-200 text-gray-700 px-2 py-1 rounded text-sm font-medium",children:[a.length," item",a.length!==1?"s":""]})]}),s.jsxs("div",{className:"space-y-2 text-sm",children:[s.jsxs("div",{className:"flex justify-between py-1",children:[s.jsx("span",{className:"text-gray-600",children:"Subtotal"}),s.jsx("span",{className:"font-medium",children:re(de.subtotal)})]}),s.jsxs("div",{className:"flex justify-between py-1",children:[s.jsx("span",{className:"text-gray-600",children:"VAT (12%)"}),s.jsx("span",{className:"font-medium",children:re(de.tax)})]}),s.jsxs("div",{className:"flex justify-between py-2 border-t border-gray-300 font-semibold text-base",children:[s.jsx("span",{children:"Total"}),s.jsx("span",{className:"text-green-600",children:re(de.total)})]})]})]}),s.jsxs("div",{children:[s.jsx("h3",{className:"text-lg font-medium text-gray-900 mb-3",children:"Payment Method"}),s.jsxs("div",{className:"grid grid-cols-2 gap-3",children:[s.jsx("button",{onClick:()=>C(X=>({...X,method:"cash"})),className:`p-4 border-2 rounded-lg transition-colors ${_.method==="cash"?"border-green-500 bg-green-50 text-green-700":"border-gray-200 hover:border-gray-300 text-gray-700"}`,children:s.jsxs("div",{className:"flex items-center justify-center space-x-2",children:[s.jsx(ns,{className:"h-5 w-5"}),s.jsx("span",{className:"font-medium",children:"Cash"})]})}),s.jsx("button",{onClick:()=>C(X=>({...X,method:"gcash"})),className:`p-4 border-2 rounded-lg transition-colors ${_.method==="gcash"?"border-green-500 bg-green-50 text-green-700":"border-gray-200 hover:border-gray-300 text-gray-700"}`,children:s.jsxs("div",{className:"flex items-center justify-center space-x-2",children:[s.jsx(G1,{className:"h-5 w-5"}),s.jsx("span",{className:"font-medium",children:"GCash"})]})})]})]}),s.jsxs("div",{children:[s.jsx("label",{className:"block text-lg font-medium text-gray-900 mb-3",children:"Amount Received"}),s.jsxs("div",{className:"relative",children:[s.jsx("div",{className:"absolute inset-y-0 left-0 pl-3 flex items-center pointer-events-none",children:s.jsx("span",{className:"text-gray-500 text-lg",children:"₱"})}),s.jsx("input",{type:"number",value:_.amount,onChange:X=>C(R=>({...R,amount:parseFloat(X.target.value)||0})),step:"0.01",min:de.total,className:"w-full pl-8 pr-4 py-3 text-lg border border-gray-300 rounded-lg focus:ring-2 focus:ring-green-500 focus:border-green-500",placeholder:"0.00"})]}),_.amount>=de.total&&s.jsx("div",{className:"mt-3 bg-green-50 border border-green-200 rounded-lg p-3",children:s.jsxs("p",{className:"text-green-800 font-medium text-center",children:["Change:"," ",re(p(_.amount))]})})]}),s.jsxs("div",{children:[s.jsx("h4",{className:"text-base font-medium text-gray-900 mb-3",children:"Customer Information (Optional)"}),s.jsxs("div",{className:"grid grid-cols-2 gap-3",children:[s.jsx("input",{type:"text",placeholder:"Customer name",value:_.customer_name,onChange:X=>C(R=>({...R,customer_name:X.target.value})),className:"px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-green-500 focus:border-green-500"}),s.jsx("input",{type:"tel",placeholder:"Phone number",value:_.customer_phone,onChange:X=>C(R=>({...R,customer_phone:X.target.value})),className:"px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-green-500 focus:border-green-500"})]})]})]}),s.jsx("div",{className:"bg-gray-50 px-6 py-4 border-t border-gray-200",children:s.jsxs("div",{className:"flex space-x-3",children:[s.jsx("button",{onClick:()=>S(!1),className:"flex-1 px-4 py-2 border border-gray-300 text-gray-700 rounded-lg hover:bg-gray-100 font-medium transition-colors",children:"Cancel"}),s.jsx("button",{onClick:oe,disabled:i||_.amount<de.total,className:"flex-1 bg-green-600 text-white px-4 py-2 rounded-lg hover:bg-green-700 disabled:bg-gray-400 disabled:cursor-not-allowed font-medium transition-colors flex items-center justify-center space-x-2",children:i?s.jsxs(s.Fragment,{children:[s.jsx("div",{className:"animate-spin rounded-full h-4 w-4 border-b-2 border-white"}),s.jsx("span",{children:"Processing..."})]}):s.jsxs(s.Fragment,{children:[s.jsx(Bu,{className:"h-4 w-4"}),s.jsx("span",{children:"Complete Payment"})]})})]})})]})}),L&&z&&s.jsx("div",{className:"fixed inset-0 bg-black/60 backdrop-blur-sm flex items-center justify-center z-50 p-4",children:s.jsx("div",{className:"bg-white rounded-lg shadow-xl max-w-md w-full mx-4",children:s.jsxs("div",{className:"p-6",children:[s.jsxs("div",{className:"text-center mb-4",children:[s.jsx(Mi,{className:"h-8 w-8 mx-auto mb-2 text-green-600"}),s.jsx("h2",{className:"text-xl font-bold text-gray-900",children:"Transaction Complete"}),s.jsxs("p",{className:"text-gray-600",children:["Receipt #",z.id]})]}),s.jsxs("div",{className:"bg-gray-50 rounded-lg p-4 mb-4 font-mono text-sm",children:[s.jsxs("div",{className:"text-center border-b pb-2 mb-2",children:[s.jsx("h3",{className:"font-bold",children:"MEDCURE PRO"}),s.jsx("p",{className:"text-xs",children:"Pharmacy Management System"})]}),s.jsx("div",{className:"space-y-1 border-b pb-2 mb-2",children:z.items.map(X=>s.jsxs("div",{className:"flex justify-between",children:[s.jsxs("span",{children:[X.name," x",X.quantity]}),s.jsx("span",{children:re(X.subtotal)})]},`${X.id}-${X.quantity}`))}),s.jsxs("div",{className:"space-y-1",children:[s.jsxs("div",{className:"flex justify-between",children:[s.jsx("span",{children:"Subtotal:"}),s.jsx("span",{children:re(z.subtotal)})]}),s.jsxs("div",{className:"flex justify-between",children:[s.jsx("span",{children:"Tax:"}),s.jsx("span",{children:re(z.tax)})]}),s.jsxs("div",{className:"flex justify-between font-bold border-t pt-1",children:[s.jsx("span",{children:"Total:"}),s.jsx("span",{children:re(z.total)})]}),s.jsxs("div",{className:"flex justify-between",children:[s.jsxs("span",{children:["Payment (",z.payment.method,"):"]}),s.jsx("span",{children:re(z.payment.amount)})]}),s.jsxs("div",{className:"flex justify-between",children:[s.jsx("span",{children:"Change:"}),s.jsx("span",{children:re(z.payment.change)})]})]}),s.jsxs("div",{className:"text-center border-t pt-2 mt-2 text-xs",children:[s.jsx("p",{children:z.date?new Date(z.date).toLocaleString():new Date().toLocaleString()}),s.jsx("p",{children:"Thank you for your business!"})]})]}),s.jsx("button",{onClick:Q,className:"w-full bg-blue-600 text-white px-4 py-2 rounded-lg hover:bg-blue-700",children:"New Transaction"})]})})}),D&&s.jsx("div",{className:"fixed inset-0 bg-black/60 backdrop-blur-sm flex items-center justify-center z-50 p-4",children:s.jsxs("div",{className:"bg-white rounded-lg shadow-2xl max-w-6xl w-full mx-4 max-h-[90vh] overflow-hidden border border-gray-200",children:[s.jsx("div",{className:"bg-white border-b border-gray-200 p-6",children:s.jsxs("div",{className:"flex items-center justify-between",children:[s.jsxs("div",{className:"flex items-center space-x-4",children:[s.jsx("div",{className:"bg-blue-100 p-3 rounded-lg",children:s.jsx(Hu,{className:"h-6 w-6 text-blue-600"})}),s.jsxs("div",{children:[s.jsx("h2",{className:"text-xl font-semibold text-gray-900",children:"Transaction History"}),s.jsxs("p",{className:"text-gray-600 text-sm",children:["Sales for ",new Date().toLocaleDateString()]})]})]}),s.jsx("button",{onClick:()=>q(!1),className:"p-2 text-gray-400 hover:text-gray-600 rounded-lg hover:bg-gray-100 transition-colors",title:"Close",children:s.jsx(Ft,{className:"h-6 w-6"})})]})}),s.jsx("div",{className:"p-6 bg-white max-h-[calc(90vh-120px)] overflow-y-auto",children:K?s.jsxs("div",{className:"flex flex-col items-center justify-center py-16",children:[s.jsxs("div",{className:"relative",children:[s.jsx("div",{className:"animate-spin rounded-full h-16 w-16 border-4 border-blue-200 border-b-blue-600"}),s.jsx("div",{className:"absolute inset-0 flex items-center justify-center",children:s.jsx(Hu,{className:"h-6 w-6 text-blue-600"})})]}),s.jsxs("div",{className:"mt-6 text-center",children:[s.jsx("h3",{className:"text-lg font-semibold text-gray-900 mb-2",children:"Loading Transactions"}),s.jsx("p",{className:"text-gray-600",children:"Fetching today's sales data..."})]})]}):s.jsx(s.Fragment,{children:H.length===0?s.jsxs("div",{className:"text-center py-16",children:[s.jsx("div",{className:"bg-gray-100 rounded-full p-6 w-24 h-24 mx-auto mb-6 flex items-center justify-center",children:s.jsx(Gi,{className:"h-12 w-12 text-gray-400"})}),s.jsx("h3",{className:"text-xl font-bold text-gray-900 mb-3",children:"No Transactions Today"}),s.jsx("p",{className:"text-gray-600 text-lg max-w-md mx-auto",children:"Start processing sales to see transaction history here. Your completed transactions will appear in this view."}),s.jsx("div",{className:"mt-6 bg-blue-50 border border-blue-200 rounded-xl p-4 max-w-sm mx-auto",children:s.jsx("p",{className:"text-sm text-blue-800 font-medium",children:"💡 Tip: Completed sales will automatically appear here with full details."})})]}):s.jsxs(s.Fragment,{children:[s.jsxs("div",{className:"mb-6 grid grid-cols-1 md:grid-cols-3 gap-4",children:[s.jsx("div",{className:"bg-gray-50 border border-gray-200 rounded-lg p-4",children:s.jsxs("div",{className:"flex items-center space-x-3",children:[s.jsx("div",{className:"bg-blue-100 text-blue-600 p-2 rounded-lg",children:s.jsx(Mi,{className:"h-5 w-5"})}),s.jsxs("div",{children:[s.jsx("p",{className:"text-sm text-gray-600",children:"Total Transactions"}),s.jsx("p",{className:"text-xl font-semibold text-gray-900",children:H.length})]})]})}),s.jsx("div",{className:"bg-gray-50 border border-gray-200 rounded-lg p-4",children:s.jsxs("div",{className:"flex items-center space-x-3",children:[s.jsx("div",{className:"bg-green-100 text-green-600 p-2 rounded-lg",children:s.jsx(ns,{className:"h-5 w-5"})}),s.jsxs("div",{children:[s.jsx("p",{className:"text-sm text-gray-600",children:"Total Revenue"}),s.jsx("p",{className:"text-xl font-semibold text-gray-900",children:re(H.reduce((X,R)=>X+(R.total||0),0))})]})]})}),s.jsx("div",{className:"bg-gray-50 border border-gray-200 rounded-lg p-4",children:s.jsxs("div",{className:"flex items-center space-x-3",children:[s.jsx("div",{className:"bg-gray-100 text-gray-600 p-2 rounded-lg",children:s.jsx(Gi,{className:"h-5 w-5"})}),s.jsxs("div",{children:[s.jsx("p",{className:"text-sm text-gray-600",children:"Latest Sale"}),s.jsx("p",{className:"text-sm font-medium text-gray-900",children:H[0]?la(H[0].created_at):"N/A"})]})]})})]}),s.jsx("div",{className:"space-y-3",children:H.map(X=>s.jsxs("div",{className:"bg-white border border-gray-200 rounded-lg p-4 hover:border-gray-300 transition-colors",children:[s.jsxs("div",{className:"flex items-center justify-between mb-3",children:[s.jsxs("div",{className:"flex items-center space-x-3",children:[s.jsx("div",{className:"bg-green-100 text-green-600 p-2 rounded-lg",children:s.jsx(Mi,{className:"h-4 w-4"})}),s.jsxs("div",{children:[s.jsxs("h4",{className:"font-medium text-gray-900",children:["Transaction #",X.id?.slice(-8)||"N/A"]}),s.jsxs("div",{className:"flex items-center space-x-3 text-sm text-gray-600",children:[s.jsxs("span",{className:"flex items-center space-x-1",children:[s.jsx(Gi,{className:"h-3 w-3"}),s.jsx("span",{children:la(X.created_at)})]}),s.jsx("span",{className:"bg-gray-100 text-gray-700 px-2 py-1 rounded text-xs font-medium",children:X.payment_method?.toUpperCase()||"CASH"})]})]})]}),s.jsxs("div",{className:"text-right",children:[s.jsx("p",{className:"font-semibold text-gray-900",children:re(X.total||0)}),s.jsxs("p",{className:"text-sm text-gray-600",children:[X.items?.length||0," item",(X.items?.length||0)!==1?"s":""]})]})]}),X.items&&X.items.length>0&&s.jsx("div",{className:"border-t border-gray-100 pt-3",children:s.jsxs("div",{className:"space-y-1",children:[X.items.slice(0,3).map((R,W)=>s.jsxs("div",{className:"flex justify-between text-sm",children:[s.jsxs("span",{className:"text-gray-600",children:[R.name," x",R.quantity]}),s.jsx("span",{className:"text-gray-900",children:re(R.subtotal||0)})]},W)),X.items.length>3&&s.jsxs("p",{className:"text-xs text-gray-500 italic",children:["+",X.items.length-3," more item",X.items.length-3!==1?"s":""]})]})})]},X.id))})]})})})]})})]})}function Dd(n){const{stock_in_pieces:a,reorder_level:l}=n;return a===0?"out_of_stock":a<=l*.5?"critical_stock":a<=l?"low_stock":"in_stock"}function Md(n){if(!n.expiry_date)return"good";const a=new Date,l=new Date(n.expiry_date),i=Math.ceil((l-a)/(1e3*60*60*24));return i<0?"expired":i<=30?"expiring_soon":i<=90?"expiring_warning":"good"}const Vu=["All Categories","Pain Relief","Antibiotics","Antihistamine","Gastro","Diabetes","Cardiovascular","Respiratory","Dermatology","Vitamins"],$2=["All Brands","Unilab","Pfizer","Teva","Advil","AstraZeneca","Merck","Norvasc","Imodium","GSK","Johnson & Johnson"],B2={in_stock:{label:"In Stock",color:"green",bgColor:"bg-green-100",textColor:"text-green-800",borderColor:"border-green-200"},low_stock:{label:"Low Stock",color:"yellow",bgColor:"bg-yellow-100",textColor:"text-yellow-800",borderColor:"border-yellow-200"},critical_stock:{label:"Critical Stock",color:"orange",bgColor:"bg-orange-100",textColor:"text-orange-800",borderColor:"border-orange-200"},out_of_stock:{label:"Out of Stock",color:"red",bgColor:"bg-red-100",textColor:"text-red-800",borderColor:"border-red-200"}},H2={good:{label:"Good",color:"green",bgColor:"bg-green-100",textColor:"text-green-800",borderColor:"border-green-200"},expiring_warning:{label:"Expiring in 3 months",color:"blue",bgColor:"bg-blue-100",textColor:"text-blue-800",borderColor:"border-blue-200"},expiring_soon:{label:"Expiring Soon",color:"yellow",bgColor:"bg-yellow-100",textColor:"text-yellow-800",borderColor:"border-yellow-200"},expired:{label:"Expired",color:"red",bgColor:"bg-red-100",textColor:"text-red-800",borderColor:"border-red-200"}};function G2(n){const a=Dd(n);return B2[a]}function V2(n){const a=Md(n);return H2[a]}function Tx(n,a){const l=a.pieces_per_sheet||1,c=(a.sheets_per_box||1)*l;if(c>1){const u=Math.floor(n/c),h=n%c,m=Math.floor(h/l),x=h%l;return{boxes:u,sheets:m,pieces:x}}else if(l>1){const u=Math.floor(n/l),h=n%l;return{boxes:0,sheets:u,pieces:h}}else return{boxes:0,sheets:0,pieces:n}}function Q2({onSearch:n,onFilter:a,categories:l=[],brands:i=[],className:c=""}){const[u,h]=N.useState(""),[m,x]=N.useState({category:"All Categories",brand:"All Brands",stockStatus:"All",expiryStatus:"All"}),[g,p]=N.useState(!1);N.useEffect(()=>{const S=setTimeout(()=>{n(u)},300);return()=>clearTimeout(S)},[u,n]),N.useEffect(()=>{a(m)},[m,a]);const b=(S,_)=>{x(C=>({...C,[S]:_}))},j=()=>{x({category:"All Categories",brand:"All Brands",stockStatus:"All",expiryStatus:"All"})},w=Object.values(m).some(S=>S!=="All Categories"&&S!=="All Brands"&&S!=="All");return s.jsxs("div",{className:`bg-white rounded-lg border border-gray-200 p-4 ${c}`,children:[s.jsxs("div",{className:"flex items-center space-x-3 mb-4",children:[s.jsxs("div",{className:"flex-1 relative",children:[s.jsx(Ii,{className:"absolute left-3 top-3 h-4 w-4 text-gray-400"}),s.jsx("input",{type:"text",placeholder:"Search products by name, category, or brand...",value:u,onChange:S=>h(S.target.value),className:"w-full pl-10 pr-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent"})]}),s.jsxs("button",{onClick:()=>p(!g),className:`flex items-center space-x-2 px-3 py-2 border rounded-lg transition-colors ${g||w?"border-blue-500 bg-blue-50 text-blue-700":"border-gray-300 text-gray-700 hover:bg-gray-50"}`,children:[s.jsx(B1,{className:"h-4 w-4"}),s.jsx("span",{children:"Filters"}),w&&s.jsx("span",{className:"bg-blue-500 text-white text-xs rounded-full px-2 py-0.5 ml-1",children:Object.values(m).filter(S=>S!=="All Categories"&&S!=="All Brands"&&S!=="All").length})]})]}),g&&s.jsxs("div",{className:"border-t border-gray-200 pt-4",children:[s.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-4",children:[s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Category"}),s.jsxs("select",{value:m.category,onChange:S=>b("category",S.target.value),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent",children:[s.jsx("option",{value:"All Categories",children:"All Categories"}),l.map(S=>s.jsx("option",{value:S,children:S},S))]})]}),s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Brand"}),s.jsxs("select",{value:m.brand,onChange:S=>b("brand",S.target.value),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent",children:[s.jsx("option",{value:"All Brands",children:"All Brands"}),i.map(S=>s.jsx("option",{value:S,children:S},S))]})]}),s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Stock Status"}),s.jsxs("select",{value:m.stockStatus,onChange:S=>b("stockStatus",S.target.value),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent",children:[s.jsx("option",{value:"All",children:"All Stock Levels"}),s.jsx("option",{value:"in_stock",children:"In Stock"}),s.jsx("option",{value:"low_stock",children:"Low Stock"}),s.jsx("option",{value:"out_of_stock",children:"Out of Stock"})]})]}),s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Expiry Status"}),s.jsxs("select",{value:m.expiryStatus,onChange:S=>b("expiryStatus",S.target.value),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent",children:[s.jsx("option",{value:"All",children:"All Products"}),s.jsx("option",{value:"expiring_soon",children:"Expiring Soon"}),s.jsx("option",{value:"expired",children:"Expired"}),s.jsx("option",{value:"good",children:"Good Condition"})]})]})]}),w&&s.jsx("div",{className:"mt-4 flex justify-end",children:s.jsxs("button",{onClick:j,className:"flex items-center space-x-2 px-3 py-1 text-sm text-gray-600 hover:text-gray-800 transition-colors",children:[s.jsx(Ft,{className:"h-3 w-3"}),s.jsx("span",{children:"Clear all filters"})]})})]}),w&&!g&&s.jsx("div",{className:"flex flex-wrap gap-2 mt-3",children:Object.entries(m).map(([S,_])=>_==="All Categories"||_==="All Brands"||_==="All"?null:s.jsxs("span",{className:"inline-flex items-center space-x-1 px-2 py-1 bg-blue-100 text-blue-800 text-xs rounded-full",children:[s.jsx("span",{children:_}),s.jsx("button",{onClick:()=>b(S,S==="category"?"All Categories":S==="brand"?"All Brands":"All"),className:"hover:text-blue-600",children:s.jsx(Ft,{className:"h-3 w-3"})})]},S))})]})}function Y2({product:n,onEdit:a,onView:l,onDelete:i,showActions:c=!0}){const u=G2(n),h=V2(n),m=x=>{if(!x)return"No expiry";const g=new Date,p=new Date(x),b=Math.ceil((p-g)/(1e3*60*60*24));return b<0?"Expired":b===0?"Expires today":b<=30?`Expires in ${b} days`:la(x)};return s.jsxs("div",{className:"bg-white rounded-lg border border-gray-200 shadow-sm hover:shadow-md transition-shadow duration-200 overflow-hidden",children:[s.jsx("div",{className:"p-4 border-b border-gray-100",children:s.jsxs("div",{className:"flex items-start justify-between",children:[s.jsxs("div",{className:"flex-1 min-w-0",children:[s.jsx("div",{className:"flex items-center space-x-2 mb-2",children:n.is_archived&&s.jsxs("span",{className:"inline-flex items-center px-2 py-1 rounded-full text-xs font-medium bg-amber-100 text-amber-800",children:[s.jsx(so,{className:"h-3 w-3 mr-1"}),"Archived"]})}),s.jsx("h3",{className:"font-semibold text-gray-900 text-lg leading-tight truncate",children:n.name}),s.jsxs("div",{className:"mt-2 flex items-center space-x-3",children:[s.jsx("span",{className:"inline-flex items-center px-2 py-1 rounded-full text-xs font-medium bg-blue-100 text-blue-800",children:n.brand}),s.jsx("span",{className:"text-sm text-gray-600",children:n.category})]})]}),c&&s.jsxs("div",{className:"flex items-center space-x-1 ml-3",children:[s.jsx("button",{onClick:()=>l(n),className:"p-2 text-gray-400 hover:text-blue-600 hover:bg-blue-50 rounded-lg transition-colors",title:"View Details",children:s.jsx(Ua,{className:"h-4 w-4"})}),s.jsx("button",{onClick:()=>a(n),className:"p-2 text-gray-400 hover:text-green-600 hover:bg-green-50 rounded-lg transition-colors",title:"Edit Product",children:s.jsx(cl,{className:"h-4 w-4"})}),s.jsx("button",{onClick:()=>i(n),className:"p-2 text-gray-400 hover:text-red-600 hover:bg-red-50 rounded-lg transition-colors",title:"Delete Product",children:s.jsx(ul,{className:"h-4 w-4"})})]})]})}),s.jsxs("div",{className:"p-4 space-y-4",children:[s.jsxs("div",{className:"text-center",children:[s.jsx("div",{className:"text-2xl font-bold text-gray-900",children:re(n.price_per_piece)}),s.jsx("div",{className:"text-sm text-gray-500",children:"per piece"})]}),s.jsxs("div",{className:"grid grid-cols-2 gap-3",children:[s.jsxs("div",{children:[s.jsxs("div",{className:"flex items-center justify-between mb-1",children:[s.jsx("span",{className:"text-xs text-gray-500 uppercase tracking-wider font-medium",children:"Stock"}),s.jsx(Me,{className:"h-3 w-3 text-gray-400"})]}),s.jsxs("div",{className:`text-center py-2 px-3 rounded-lg text-sm font-semibold ${u.bgColor} ${u.textColor} border ${u.borderColor}`,children:[n.stock_in_pieces," pcs"]})]}),s.jsxs("div",{children:[s.jsxs("div",{className:"flex items-center justify-between mb-1",children:[s.jsx("span",{className:"text-xs text-gray-500 uppercase tracking-wider font-medium",children:"Expiry"}),s.jsx(ao,{className:"h-3 w-3 text-gray-400"})]}),s.jsx("div",{className:`text-center py-2 px-3 rounded-lg text-xs font-semibold ${h.bgColor} ${h.textColor} border ${h.borderColor}`,children:m(n.expiry_date)})]})]}),s.jsxs("div",{className:"space-y-2 pt-2 border-t border-gray-100",children:[s.jsxs("div",{className:"flex justify-between text-sm",children:[s.jsx("span",{className:"text-gray-500",children:"Category:"}),s.jsx("span",{className:"text-gray-900 font-medium",children:n.category})]}),s.jsxs("div",{className:"flex justify-between text-sm",children:[s.jsx("span",{className:"text-gray-500",children:"Brand:"}),s.jsx("span",{className:"text-gray-900 font-medium",children:n.brand})]}),s.jsxs("div",{className:"flex justify-between text-sm",children:[s.jsx("span",{className:"text-gray-500",children:"Product ID:"}),s.jsxs("span",{className:"text-gray-900 font-mono text-xs",children:["#",n.id.slice(-8)]})]})]}),n.stock_in_pieces<=n.reorder_level&&s.jsxs("div",{className:"flex items-center space-x-2 p-3 bg-amber-50 border border-amber-200 rounded-lg",children:[s.jsx(ks,{className:"h-4 w-4 text-amber-600 flex-shrink-0"}),s.jsxs("div",{className:"flex-1 min-w-0",children:[s.jsx("div",{className:"text-sm font-medium text-amber-800",children:"Low Stock Alert"}),s.jsxs("div",{className:"text-xs text-amber-700",children:["Reorder level: ",n.reorder_level," pieces"]})]})]})]})]})}function Rx(){const[n,a]=N.useState([]),[l,i]=N.useState(""),[c,u]=N.useState({category:"All Categories",brand:"All Brands",stockStatus:"All",expiryStatus:"All"}),[h,m]=N.useState("name"),[x,g]=N.useState("asc"),[p,b]=N.useState(!1);N.useEffect(()=>{j()},[]);const j=async()=>{b(!0);try{const q=await Mr.getProducts();a(q)}catch(q){console.error("Error loading products:",q)}finally{b(!1)}},w=N.useMemo(()=>{let q=[...n];if(q=q.filter(H=>!H.is_archived),l){const H=l.toLowerCase();q=q.filter(ee=>ee.name.toLowerCase().includes(H)||ee.brand.toLowerCase().includes(H)||ee.category.toLowerCase().includes(H)||ee.description.toLowerCase().includes(H))}if(c.category!=="All Categories"&&(q=q.filter(H=>H.category===c.category)),c.brand!=="All Brands"&&(q=q.filter(H=>H.brand===c.brand)),c.stockStatus!=="All"&&(q=q.filter(H=>c.stockStatus==="in_stock"?H.stock_in_pieces>H.reorder_level:c.stockStatus==="low_stock"?H.stock_in_pieces>0&&H.stock_in_pieces<=H.reorder_level:c.stockStatus==="out_of_stock"?H.stock_in_pieces<=0:!0)),c.expiryStatus!=="All"){const H=new Date;q=q.filter(ee=>{if(!ee.expiry_date)return c.expiryStatus==="good";const K=new Date(ee.expiry_date),te=Math.ceil((K-H)/(1e3*60*60*24));return c.expiryStatus==="expired"?te<0:c.expiryStatus==="expiring_soon"?te>=0&&te<=30:c.expiryStatus==="good"?te>30:!0})}return q.sort((H,ee)=>{let K=H[h],te=ee[h];return h==="stock"?(K=H.stock_in_pieces,te=ee.stock_in_pieces):h==="price"?(K=H.price_per_piece,te=ee.price_per_piece):h==="expiry"&&(K=H.expiry_date?new Date(H.expiry_date):new Date("9999-12-31"),te=ee.expiry_date?new Date(ee.expiry_date):new Date("9999-12-31")),typeof K=="string"&&(K=K.toLowerCase(),te=te.toLowerCase()),K<te?x==="asc"?-1:1:K>te?x==="asc"?1:-1:0}),q},[n,l,c,h,x]),S=N.useMemo(()=>{const q=n.filter(Q=>!Q.is_archived),H=q.length,ee=q.filter(Q=>Q.stock_in_pieces>0&&Q.stock_in_pieces<=Q.reorder_level).length,K=q.filter(Q=>Q.stock_in_pieces<=0).length,te=new Date,de=q.filter(Q=>{if(!Q.expiry_date)return!1;const X=new Date(Q.expiry_date),R=Math.ceil((X-te)/(1e3*60*60*24));return R>=0&&R<=30}).length,me=q.filter(Q=>Q.expiry_date?new Date(Q.expiry_date)<te:!1).length,oe=q.reduce((Q,X)=>Q+(X.price_per_piece||0)*(X.stock_in_pieces||0),0);return{totalProducts:H,lowStockProducts:ee,outOfStockProducts:K,expiringProducts:de,expiredProducts:me,totalValue:oe}},[n]);return{products:w,allProducts:n,analytics:S,searchTerm:l,filters:c,sortBy:h,sortOrder:x,isLoading:p,addProduct:async q=>{b(!0);try{const H=await Mr.addProduct(q);return a(ee=>[...ee,H]),H}catch(H){throw console.error("Error adding product:",H),H}finally{b(!1)}},updateProduct:async(q,H)=>{b(!0);try{const ee=await Mr.updateProduct(q,H);a(K=>K.map(te=>te.id===q?ee:te))}catch(ee){throw console.error("Error updating product:",ee),ee}finally{b(!1)}},deleteProduct:async q=>{b(!0);try{await Mr.deleteProduct(q),a(H=>H.filter(ee=>ee.id!==q))}catch(H){throw console.error("Error deleting product:",H),H}finally{b(!1)}},bulkUpdateStock:async q=>{b(!0);try{for(const H of q)await Mr.updateProduct(H.id,{stock_in_pieces:H.stock});await j()}catch(H){throw console.error("Error bulk updating stock:",H),H}finally{b(!1)}},loadProducts:j,handleSearch:q=>{i(q)},handleFilter:q=>{u(q)},handleSort:q=>{h===q?g(x==="asc"?"desc":"asc"):(m(q),g("asc"))}}}const F2=`
  .modal-scrollbar {
    scrollbar-width: thin;
    scrollbar-color: #cbd5e1 #f1f5f9;
  }
  
  .modal-scrollbar::-webkit-scrollbar {
    width: 8px;
  }
  
  .modal-scrollbar::-webkit-scrollbar-track {
    background: #f1f5f9;
    border-radius: 4px;
  }
  
  .modal-scrollbar::-webkit-scrollbar-thumb {
    background: #cbd5e1;
    border-radius: 4px;
    transition: background-color 0.2s ease;
  }
  
  .modal-scrollbar::-webkit-scrollbar-thumb:hover {
    background: #94a3b8;
  }
`;function I2(){const{products:n,allProducts:a,analytics:l,isLoading:i,addProduct:c,updateProduct:u,handleSearch:h,handleFilter:m,loadProducts:x}=Rx(),{user:g}=As(),[p,b]=N.useState("grid"),[j,w]=N.useState(!1),[S,_]=N.useState(!1),[C,L]=N.useState(!1),[B,z]=N.useState(!1),[U,D]=N.useState(!1),[q,H]=N.useState(null),[ee,K]=N.useState(1),[te]=N.useState(12),[de,me]=N.useState([]);rs.useEffect(()=>{const F=document.createElement("style");return F.textContent=F2,document.head.appendChild(F),()=>{document.head.removeChild(F)}},[]),rs.useEffect(()=>{oe()},[]);const oe=async()=>{try{console.log("🏷️ [Inventory] Loading dynamic categories...");const F=await Ur.getActiveCategories();if(F.success){const Z=F.data.map(ie=>ie.name);me(Z),console.log("✅ [Inventory] Loaded categories:",Z)}else console.warn("⚠️ [Inventory] Using fallback categories:",F.error),me(Vu.slice(1))}catch(F){console.error("❌ [Inventory] Error loading categories:",F),me(Vu.slice(1))}},Q=()=>de.length>0?de:Vu.slice(1),X=Math.ceil(n.length/te),R=(ee-1)*te,W=n.slice(R,R+te),J=F=>({...F,price:F.price_per_piece,stock:F.stock_in_pieces,expiry:F.expiry_date,reorderLevel:F.reorder_level,unit:"pieces"}),ye=F=>{H(F),L(!0)},E=F=>{H(F),_(!0)},I=async F=>{if(confirm(`Are you sure you want to archive ${F.name}? Archived products will be moved to the Management section and won't appear in active inventory.`))try{const Z=g?.id||"550e8400-e29b-41d4-a716-446655440001",ie=await Xn.archiveProduct(F.id,Z);ie.success?await x():alert("Error archiving product: "+ie.error)}catch(Z){alert("Error archiving product: "+Z.message)}};return s.jsxs("div",{className:"space-y-6",children:[s.jsx("div",{className:"bg-white rounded-xl p-6 shadow-sm border border-gray-200 mb-6",children:s.jsxs("div",{className:"flex flex-col lg:flex-row lg:items-center lg:justify-between",children:[s.jsxs("div",{className:"flex items-center space-x-4",children:[s.jsx("div",{className:"bg-blue-100 p-3 rounded-xl",children:s.jsx(Me,{className:"h-8 w-8 text-blue-600"})}),s.jsxs("div",{children:[s.jsxs("h1",{className:"text-2xl font-bold text-gray-900 flex items-center space-x-2",children:[s.jsx("span",{children:"Inventory Management"}),s.jsx("span",{className:"inline-flex items-center px-2.5 py-0.5 rounded-full text-xs font-medium bg-green-100 text-green-800",children:"Active"})]}),s.jsx("p",{className:"text-gray-600 mt-1",children:"Manage your pharmacy inventory, track stock levels, and monitor expiry dates"})]})]}),s.jsxs("div",{className:"flex items-center space-x-3 mt-4 lg:mt-0",children:[s.jsxs("button",{onClick:()=>z(!0),className:"group flex items-center space-x-2 px-4 py-2.5 bg-gray-50 border border-gray-200 text-gray-700 rounded-lg hover:bg-green-50 hover:border-green-200 hover:text-green-700 transition-all duration-200",children:[s.jsx(Ss,{className:"h-4 w-4 group-hover:scale-110 transition-transform duration-200"}),s.jsx("span",{className:"font-medium",children:"Export"})]}),s.jsxs("button",{onClick:()=>D(!0),className:"group flex items-center space-x-2 px-4 py-2.5 bg-gray-50 border border-gray-200 text-gray-700 rounded-lg hover:bg-blue-50 hover:border-blue-200 hover:text-blue-700 transition-all duration-200",children:[s.jsx(dd,{className:"h-4 w-4 group-hover:scale-110 transition-transform duration-200"}),s.jsx("span",{className:"font-medium",children:"Import"})]}),s.jsxs("button",{onClick:()=>w(!0),className:"group flex items-center space-x-2 px-5 py-2.5 bg-blue-600 text-white rounded-lg hover:bg-blue-700 transition-all duration-200 shadow-sm hover:shadow-md",children:[s.jsx(ol,{className:"h-4 w-4 group-hover:rotate-90 transition-transform duration-200"}),s.jsx("span",{className:"font-semibold",children:"Add Product"})]})]})]})}),s.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-6",children:[s.jsx(Li,{title:"Total Products",value:Cs(l.totalProducts),icon:Me,color:"blue"}),s.jsx(Li,{title:"Low Stock Items",value:Cs(l.lowStockProducts),icon:ro,color:"yellow",alert:l.lowStockProducts>0}),s.jsx(Li,{title:"Expiring Soon",value:Cs(l.expiringProducts),icon:ao,color:"red",alert:l.expiringProducts>0}),s.jsx(Li,{title:"Total Value",value:re(l.totalValue),icon:Vr,color:"green"})]}),s.jsx(Q2,{onSearch:h,onFilter:m,categories:Q().slice(1),brands:$2.slice(1)}),s.jsxs("div",{className:"flex items-center justify-between",children:[s.jsxs("p",{className:"text-sm text-gray-600",children:["Showing ",R+1,"-",Math.min(R+te,n.length)," of"," ",n.length," products"]}),s.jsxs("div",{className:"flex items-center space-x-3",children:[s.jsxs("div",{className:"flex items-center bg-white border-2 border-gray-200 rounded-xl p-1 shadow-sm",children:[s.jsx("button",{onClick:()=>b("grid"),className:`group flex items-center justify-center p-2.5 rounded-lg transition-all duration-200 ${p==="grid"?"bg-gradient-to-r from-blue-500 to-blue-600 text-white shadow-md":"text-gray-500 hover:text-gray-700 hover:bg-gray-50"}`,title:"Grid View",children:s.jsx(t1,{className:`h-4 w-4 ${p==="grid"?"scale-110":"group-hover:scale-110"} transition-transform duration-200`})}),s.jsx("button",{onClick:()=>b("table"),className:`group flex items-center justify-center p-2.5 rounded-lg transition-all duration-200 ${p==="table"?"bg-gradient-to-r from-blue-500 to-blue-600 text-white shadow-md":"text-gray-500 hover:text-gray-700 hover:bg-gray-50"}`,title:"Table View",children:s.jsx(f1,{className:`h-4 w-4 ${p==="table"?"scale-110":"group-hover:scale-110"} transition-transform duration-200`})})]}),s.jsxs("button",{className:"flex items-center space-x-2 px-3 py-2 text-sm text-gray-600 hover:text-gray-800 hover:bg-gray-50 rounded-lg transition-all duration-200",children:[s.jsx(yt,{className:"h-4 w-4"}),s.jsx("span",{children:"Refresh"})]})]})]}),p==="grid"?s.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 xl:grid-cols-4 gap-6",children:W.map(F=>s.jsx(Y2,{product:J(F),onEdit:E,onView:ye,onDelete:I},F.id))}):s.jsx("div",{className:"bg-white rounded-lg shadow-sm border border-gray-200 overflow-hidden",children:s.jsx("div",{className:"overflow-x-auto",children:s.jsxs("table",{className:"min-w-full divide-y divide-gray-200",children:[s.jsx("thead",{className:"bg-gray-50",children:s.jsxs("tr",{children:[s.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Product"}),s.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Category"}),s.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Stock"}),s.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Price"}),s.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Expiry"}),s.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Actions"})]})}),s.jsx("tbody",{className:"bg-white divide-y divide-gray-200",children:W.map(F=>s.jsx(K2,{product:F,onView:()=>ye(F),onEdit:()=>E(F),onDelete:()=>I(F)},F.id))})]})})}),i&&s.jsx("div",{className:"flex items-center justify-center py-8",children:s.jsx("div",{className:"animate-spin rounded-full h-8 w-8 border-b-2 border-blue-600"})}),!i&&n.length===0&&s.jsxs("div",{className:"text-center py-12",children:[s.jsx(Me,{className:"h-16 w-16 mx-auto mb-4 text-gray-300"}),s.jsx("h3",{className:"text-lg font-medium text-gray-900 mb-2",children:"No products found"}),s.jsx("p",{className:"text-gray-500",children:"Try adjusting your search terms or filters."})]}),X>1&&s.jsx("div",{className:"bg-white px-6 py-4 border-2 border-gray-200 rounded-xl shadow-sm",children:s.jsxs("div",{className:"flex items-center justify-between",children:[s.jsxs("div",{className:"text-sm font-medium text-gray-700",children:["Page"," ",s.jsx("span",{className:"text-blue-600 font-semibold",children:ee})," ","of"," ",s.jsx("span",{className:"text-blue-600 font-semibold",children:X})]}),s.jsxs("div",{className:"flex space-x-2",children:[s.jsx("button",{onClick:()=>K(Math.max(1,ee-1)),disabled:ee===1,className:"group flex items-center space-x-1 px-4 py-2 text-sm font-medium border-2 border-gray-200 rounded-lg hover:border-blue-300 hover:bg-blue-50 hover:text-blue-700 disabled:opacity-50 disabled:cursor-not-allowed disabled:hover:border-gray-200 disabled:hover:bg-white disabled:hover:text-gray-500 transition-all duration-200",children:s.jsx("span",{children:"Previous"})}),s.jsx("button",{onClick:()=>K(Math.min(X,ee+1)),disabled:ee===X,className:"group flex items-center space-x-1 px-4 py-2 text-sm font-medium border-2 border-gray-200 rounded-lg hover:border-blue-300 hover:bg-blue-50 hover:text-blue-700 disabled:opacity-50 disabled:cursor-not-allowed disabled:hover:border-gray-200 disabled:hover:bg-white disabled:hover:text-gray-500 transition-all duration-200",children:s.jsx("span",{children:"Next"})})]})]})}),j&&s.jsx(Cg,{title:"Add New Product",categories:Q(),onClose:()=>w(!1),onSave:async F=>{try{await c(F),w(!1)}catch(Z){alert("Error adding product: "+Z.message)}}}),S&&q&&s.jsx(Cg,{title:"Edit Product",product:q,categories:Q(),onClose:()=>{_(!1),H(null)},onSave:async F=>{try{await u(q.id,F),_(!1),H(null)}catch(Z){alert("Error updating product: "+Z.message)}}}),C&&q&&s.jsx(X2,{product:q,onClose:()=>{L(!1),H(null)},onEdit:()=>{L(!1),_(!0)}}),s.jsx(y2,{isOpen:B,onClose:()=>z(!1),products:a}),s.jsx(b2,{isOpen:U,onClose:()=>D(!1),onImport:async F=>{try{for(const Z of F)await c(Z);console.log(`Successfully imported ${F.length} products`)}catch(Z){throw new Error(`Import failed: ${Z.message}`)}}})]})}function Li({title:n,value:a,icon:l,color:i,alert:c}){const u={blue:"bg-blue-50 text-blue-600",yellow:"bg-yellow-50 text-yellow-600",red:"bg-red-50 text-red-600",green:"bg-green-50 text-green-600"};return s.jsx("div",{className:"bg-white rounded-lg shadow-sm border border-gray-200 p-6",children:s.jsxs("div",{className:"flex items-center justify-between",children:[s.jsxs("div",{children:[s.jsx("p",{className:"text-sm font-medium text-gray-600",children:n}),s.jsx("p",{className:"text-2xl font-bold text-gray-900 mt-2",children:a})]}),s.jsx("div",{className:`p-3 rounded-lg ${u[i]} ${c?"animate-pulse":""}`,children:s.jsx(l,{className:"h-6 w-6"})})]})})}function K2({product:n,onView:a,onEdit:l,onDelete:i}){const c=Dd(n),u=Md(n),h=Tx(n.stock_in_pieces,n),m=x=>{switch(x){case"critical_stock":case"expired":return"text-red-600 bg-red-50";case"low_stock":case"expiring_soon":return"text-yellow-600 bg-yellow-50";case"expiring_warning":return"text-orange-600 bg-orange-50";default:return"text-green-600 bg-green-50"}};return s.jsxs("tr",{className:"hover:bg-gray-50",children:[s.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:s.jsxs("div",{className:"flex items-center",children:[s.jsx("div",{className:"flex-shrink-0 h-10 w-10",children:s.jsx("div",{className:"h-10 w-10 rounded-lg bg-gray-100 flex items-center justify-center",children:s.jsx(Me,{className:"h-5 w-5 text-gray-400"})})}),s.jsxs("div",{className:"ml-4",children:[s.jsx("div",{className:"text-sm font-medium text-gray-900",children:n.name}),s.jsxs("div",{className:"text-sm text-gray-500 flex items-center space-x-2",children:[s.jsx("span",{children:n.brand}),s.jsx("span",{children:"•"}),s.jsx("span",{children:n.category})]})]})]})}),s.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:s.jsx("span",{className:"inline-flex px-2 py-1 text-xs font-medium bg-gray-100 text-gray-800 rounded-full",children:n.category})}),s.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:s.jsxs("div",{className:"text-sm text-gray-900",children:[s.jsxs("span",{className:`inline-flex px-2 py-1 text-xs font-medium rounded-full ${m(c)}`,children:[n.stock_in_pieces," pcs"]}),s.jsxs("div",{className:"text-xs text-gray-500 mt-1",children:[h.boxes>0&&`${h.boxes} box${h.boxes>1?"es":""} `,h.sheets>0&&`${h.sheets} sheet${h.sheets>1?"s":""} `,h.pieces>0&&`${h.pieces} pc${h.pieces>1?"s":""}`]})]})}),s.jsxs("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-900",children:[s.jsxs("div",{children:[re(n.price_per_piece),"/pc"]}),s.jsxs("div",{className:"text-xs text-gray-500",children:["Value:"," ",re(n.stock_in_pieces*n.price_per_piece)]})]}),s.jsxs("td",{className:"px-6 py-4 whitespace-nowrap",children:[s.jsx("div",{className:"text-sm text-gray-900",children:la(n.expiry_date)}),s.jsx("span",{className:`inline-flex px-2 py-1 text-xs font-medium rounded-full ${m(u)}`,children:u.replace("_"," ")})]}),s.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm font-medium",children:s.jsxs("div",{className:"flex items-center space-x-1",children:[s.jsx("button",{onClick:a,className:"group flex items-center justify-center p-2 text-blue-600 hover:text-blue-800 hover:bg-blue-50 rounded-lg transition-all duration-200",title:"View Details",children:s.jsx(Ua,{className:"h-4 w-4 group-hover:scale-110 transition-transform duration-200"})}),s.jsx("button",{onClick:l,className:"group flex items-center justify-center p-2 text-gray-600 hover:text-gray-800 hover:bg-gray-50 rounded-lg transition-all duration-200",title:"Edit Product",children:s.jsx(cl,{className:"h-4 w-4 group-hover:scale-110 transition-transform duration-200"})}),s.jsx("button",{onClick:i,className:"group flex items-center justify-center p-2 text-orange-600 hover:text-orange-800 hover:bg-orange-50 rounded-lg transition-all duration-200",title:"Archive Product",children:s.jsx(so,{className:"h-4 w-4 group-hover:scale-110 transition-transform duration-200"})})]})})]})}function Cg({title:n,product:a,categories:l,onClose:i,onSave:c}){const[u,h]=N.useState({name:a?.name||"",description:a?.description||"",category:a?.category||"Pain Relief",brand:a?.brand||"",cost_price:a?.cost_price||"",price_per_piece:a?.price_per_piece||"",margin_percentage:a?.margin_percentage||"",pieces_per_sheet:a?.pieces_per_sheet||1,sheets_per_box:a?.sheets_per_box||1,stock_in_pieces:a?.stock_in_pieces||"",reorder_level:a?.reorder_level||"",supplier:a?.supplier||"",expiry_date:a?.expiry_date?.split("T")[0]||""}),m=(w,S)=>!w||w<=0||!S||S<=0?0:((S-w)/w*100).toFixed(2),x=(w,S)=>!w||w<=0||!S||S<=0?0:(w*(1+S/100)).toFixed(2),g=w=>{const S=parseFloat(w)||0,_=parseFloat(u.price_per_piece)||0;h({...u,cost_price:w,margin_percentage:m(S,_)})},p=w=>{const S=parseFloat(w)||0,_=parseFloat(u.cost_price)||0;h({...u,price_per_piece:w,margin_percentage:m(_,S)})},b=w=>{const S=parseFloat(w)||0,_=parseFloat(u.cost_price)||0;h({...u,margin_percentage:w,price_per_piece:x(_,S)})},j=w=>{w.preventDefault();const S={...u,cost_price:u.cost_price===""?null:parseFloat(u.cost_price)||null,price_per_piece:u.price_per_piece===""?0:parseFloat(u.price_per_piece)||0,margin_percentage:u.margin_percentage===""?0:parseFloat(u.margin_percentage)||0,pieces_per_sheet:u.pieces_per_sheet===""?1:parseInt(u.pieces_per_sheet)||1,sheets_per_box:u.sheets_per_box===""?1:parseInt(u.sheets_per_box)||1,stock_in_pieces:u.stock_in_pieces===""?0:parseInt(u.stock_in_pieces)||0,reorder_level:u.reorder_level===""?0:parseInt(u.reorder_level)||0,expiry_date:u.expiry_date===""?null:u.expiry_date};c(S)};return s.jsx("div",{className:"fixed inset-0 bg-black/60 backdrop-blur-sm flex items-start justify-center z-50 p-4 py-8 overflow-y-auto",children:s.jsx("div",{className:"bg-white rounded-2xl shadow-2xl max-w-4xl w-full min-h-[90vh] max-h-fit flex flex-col my-auto",children:s.jsxs("div",{className:"flex flex-col h-full min-h-0",children:[s.jsxs("div",{className:"flex items-center justify-between p-6 border-b border-gray-200 bg-gradient-to-r from-blue-50 to-indigo-50 flex-shrink-0",children:[s.jsxs("div",{className:"flex items-center space-x-3",children:[s.jsx("div",{className:"p-2 bg-blue-100 rounded-xl",children:s.jsx(Me,{className:"h-6 w-6 text-blue-600"})}),s.jsx("h3",{className:"text-xl font-bold text-gray-900",children:n})]}),s.jsx("button",{onClick:i,className:"group p-2 text-gray-400 hover:text-gray-600 hover:bg-gray-100 rounded-xl transition-all duration-200",children:s.jsx(Ft,{className:"h-6 w-6 group-hover:scale-110 transition-transform duration-200"})})]}),s.jsx("div",{className:"flex-1 overflow-y-auto p-6 modal-scrollbar",children:s.jsx("form",{onSubmit:j,className:"space-y-8",children:s.jsxs("div",{className:"space-y-8",children:[s.jsxs("div",{className:"bg-gray-50 rounded-xl p-6",children:[s.jsxs("h4",{className:"text-lg font-semibold text-gray-900 mb-6 flex items-center",children:[s.jsx(Me,{className:"h-5 w-5 mr-2 text-gray-600"}),"Basic Information"]}),s.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-semibold text-gray-700 mb-2",children:"Product Name *"}),s.jsx("input",{type:"text",required:!0,value:u.name,onChange:w=>h({...u,name:w.target.value}),className:"w-full px-4 py-3 border-2 border-gray-200 rounded-xl focus:ring-2 focus:ring-blue-500 focus:border-blue-500 transition-all duration-200 hover:border-gray-300",placeholder:"Enter product name"})]}),s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-semibold text-gray-700 mb-2",children:"Category *"}),s.jsxs("select",{required:!0,value:u.category,onChange:w=>h({...u,category:w.target.value}),className:"w-full px-4 py-3 border-2 border-gray-200 rounded-xl focus:ring-2 focus:ring-blue-500 focus:border-blue-500 transition-all duration-200 hover:border-gray-300",children:[s.jsx("option",{value:"",children:"Select category"}),l.map(w=>s.jsx("option",{value:w,children:w},w))]})]}),s.jsxs("div",{className:"md:col-span-2",children:[s.jsx("label",{className:"block text-sm font-semibold text-gray-700 mb-2",children:"Description"}),s.jsx("textarea",{value:u.description,onChange:w=>h({...u,description:w.target.value}),rows:3,className:"w-full px-4 py-3 border-2 border-gray-200 rounded-xl focus:ring-2 focus:ring-blue-500 focus:border-blue-500 transition-all duration-200 hover:border-gray-300 resize-none",placeholder:"Enter product description"})]}),s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-semibold text-gray-700 mb-2",children:"Brand"}),s.jsx("input",{type:"text",value:u.brand,onChange:w=>h({...u,brand:w.target.value}),className:"w-full px-4 py-3 border-2 border-gray-200 rounded-xl focus:ring-2 focus:ring-blue-500 focus:border-blue-500 transition-all duration-200 hover:border-gray-300",placeholder:"Enter brand name"})]})]})]}),s.jsxs("div",{className:"bg-gradient-to-br from-blue-50 to-indigo-50 rounded-xl p-6 border-2 border-blue-100",children:[s.jsxs("h4",{className:"text-lg font-semibold text-gray-900 mb-6 flex items-center",children:[s.jsx(ns,{className:"h-6 w-6 mr-2 text-blue-600"}),"Enhanced Pricing Structure"]}),s.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-6",children:[s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-semibold text-gray-700 mb-2",children:"Cost Price (₱)"}),s.jsx("input",{type:"number",step:"0.01",value:u.cost_price,onChange:w=>g(w.target.value),className:"w-full px-4 py-3 border-2 border-gray-200 rounded-xl focus:ring-2 focus:ring-blue-500 focus:border-blue-500 transition-all duration-200 hover:border-gray-300",placeholder:"0.00"})]}),s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-semibold text-gray-700 mb-2",children:"Selling Price (₱) *"}),s.jsx("input",{type:"number",step:"0.01",required:!0,value:u.price_per_piece,onChange:w=>p(w.target.value),className:"w-full px-4 py-3 border-2 border-blue-200 rounded-xl focus:ring-2 focus:ring-blue-500 focus:border-blue-500 transition-all duration-200 hover:border-blue-300 bg-white",placeholder:"0.00"})]}),s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-semibold text-gray-700 mb-2",children:"Margin (%)"}),s.jsx("input",{type:"number",step:"0.01",value:u.margin_percentage,onChange:w=>b(w.target.value),className:"w-full px-4 py-3 border-2 border-gray-200 rounded-xl focus:ring-2 focus:ring-blue-500 focus:border-blue-500 transition-all duration-200 hover:border-gray-300",placeholder:"0.00",readOnly:!u.cost_price||u.cost_price<=0})]})]}),u.cost_price&&u.price_per_piece&&s.jsxs("div",{className:"mt-6 p-4 bg-white/70 backdrop-blur-sm rounded-xl border border-blue-200",children:[s.jsx("h5",{className:"text-sm font-semibold text-gray-700 mb-3",children:"Pricing Summary"}),s.jsxs("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-4 text-sm",children:[s.jsxs("div",{className:"text-center p-3 bg-gray-50 rounded-lg",children:[s.jsx("div",{className:"text-xs text-gray-500 uppercase tracking-wide",children:"Cost Price"}),s.jsxs("div",{className:"text-lg font-bold text-gray-900",children:["₱",parseFloat(u.cost_price).toFixed(2)]})]}),s.jsxs("div",{className:"text-center p-3 bg-blue-50 rounded-lg",children:[s.jsx("div",{className:"text-xs text-blue-600 uppercase tracking-wide",children:"Selling Price"}),s.jsxs("div",{className:"text-lg font-bold text-blue-900",children:["₱",parseFloat(u.price_per_piece).toFixed(2)]})]}),s.jsxs("div",{className:"text-center p-3 bg-green-50 rounded-lg",children:[s.jsx("div",{className:"text-xs text-green-600 uppercase tracking-wide",children:"Profit per Unit"}),s.jsxs("div",{className:"text-lg font-bold text-green-700",children:["₱",(parseFloat(u.price_per_piece)-parseFloat(u.cost_price)).toFixed(2)]})]}),s.jsxs("div",{className:"text-center p-3 bg-purple-50 rounded-lg",children:[s.jsx("div",{className:"text-xs text-purple-600 uppercase tracking-wide",children:"Margin"}),s.jsxs("div",{className:"text-lg font-bold text-purple-700",children:[u.margin_percentage,"%"]})]})]})]})]}),s.jsxs("div",{className:"bg-gray-50 rounded-xl p-6",children:[s.jsxs("h4",{className:"text-lg font-semibold text-gray-900 mb-6 flex items-center",children:[s.jsx(Me,{className:"h-5 w-5 mr-2 text-gray-600"}),"Stock Management"]}),s.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-semibold text-gray-700 mb-2",children:"Stock (Pieces) *"}),s.jsx("input",{type:"number",required:!0,value:u.stock_in_pieces,onChange:w=>h({...u,stock_in_pieces:w.target.value}),className:"w-full px-4 py-3 border-2 border-gray-200 rounded-xl focus:ring-2 focus:ring-blue-500 focus:border-blue-500 transition-all duration-200 hover:border-gray-300",placeholder:"Enter stock quantity"})]}),s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-semibold text-gray-700 mb-2",children:"Pieces per Sheet"}),s.jsx("input",{type:"number",min:"1",value:u.pieces_per_sheet,onChange:w=>h({...u,pieces_per_sheet:w.target.value}),className:"w-full px-4 py-3 border-2 border-gray-200 rounded-xl focus:ring-2 focus:ring-blue-500 focus:border-blue-500 transition-all duration-200 hover:border-gray-300",placeholder:"1"})]}),s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-semibold text-gray-700 mb-2",children:"Sheets per Box"}),s.jsx("input",{type:"number",min:"1",value:u.sheets_per_box,onChange:w=>h({...u,sheets_per_box:w.target.value}),className:"w-full px-4 py-3 border-2 border-gray-200 rounded-xl focus:ring-2 focus:ring-blue-500 focus:border-blue-500 transition-all duration-200 hover:border-gray-300",placeholder:"1"})]}),s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-semibold text-gray-700 mb-2",children:"Reorder Level"}),s.jsx("input",{type:"number",value:u.reorder_level,onChange:w=>h({...u,reorder_level:w.target.value}),className:"w-full px-4 py-3 border-2 border-gray-200 rounded-xl focus:ring-2 focus:ring-blue-500 focus:border-blue-500 transition-all duration-200 hover:border-gray-300",placeholder:"0"})]}),s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-semibold text-gray-700 mb-2",children:"Supplier"}),s.jsx("input",{type:"text",value:u.supplier,onChange:w=>h({...u,supplier:w.target.value}),className:"w-full px-4 py-3 border-2 border-gray-200 rounded-xl focus:ring-2 focus:ring-blue-500 focus:border-blue-500 transition-all duration-200 hover:border-gray-300",placeholder:"Enter supplier name"})]}),s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-semibold text-gray-700 mb-2",children:"Expiry Date"}),s.jsx("input",{type:"date",value:u.expiry_date,onChange:w=>h({...u,expiry_date:w.target.value}),className:"w-full px-4 py-3 border-2 border-gray-200 rounded-xl focus:ring-2 focus:ring-blue-500 focus:border-blue-500 transition-all duration-200 hover:border-gray-300"})]})]})]})]})})}),s.jsx("div",{className:"border-t border-gray-200 bg-gray-50 px-6 py-4 flex-shrink-0",children:s.jsxs("div",{className:"flex justify-end space-x-3",children:[s.jsx("button",{type:"button",onClick:i,className:"group px-6 py-2.5 border-2 border-gray-200 text-gray-700 font-medium rounded-xl hover:border-gray-300 hover:bg-gray-50 transition-all duration-200",children:"Cancel"}),s.jsx("button",{type:"submit",onClick:j,className:"group px-6 py-2.5 bg-gradient-to-r from-blue-600 to-blue-700 text-white font-semibold rounded-xl hover:from-blue-700 hover:to-blue-800 shadow-lg hover:shadow-xl transition-all duration-200 hover:scale-105 active:scale-95",children:s.jsx("span",{className:"flex items-center space-x-2",children:s.jsx("span",{children:a?"Update Product":"Add Product"})})})]})})]})})})}function X2({product:n,onClose:a,onEdit:l}){const i=Dd(n),c=Md(n),u=Tx(n.stock_in_pieces,n);return s.jsx("div",{className:"fixed inset-0 bg-black/60 backdrop-blur-sm flex items-start justify-center z-50 p-4 py-8 overflow-y-auto",children:s.jsx("div",{className:"bg-white rounded-2xl shadow-2xl max-w-4xl w-full min-h-[90vh] max-h-fit flex flex-col my-auto",children:s.jsxs("div",{className:"flex flex-col h-full min-h-0",children:[s.jsxs("div",{className:"flex items-center justify-between p-6 border-b border-gray-200 bg-gradient-to-r from-green-50 to-emerald-50 flex-shrink-0",children:[s.jsxs("div",{className:"flex items-center space-x-3",children:[s.jsx("div",{className:"p-2 bg-green-100 rounded-xl",children:s.jsx(Ua,{className:"h-6 w-6 text-green-600"})}),s.jsx("h3",{className:"text-xl font-bold text-gray-900",children:"Product Details"})]}),s.jsxs("div",{className:"flex items-center space-x-2",children:[s.jsxs("button",{onClick:l,className:"group flex items-center space-x-2 px-4 py-2.5 bg-gradient-to-r from-blue-600 to-blue-700 text-white font-semibold rounded-xl hover:from-blue-700 hover:to-blue-800 shadow-lg hover:shadow-xl transition-all duration-200 hover:scale-105 active:scale-95",children:[s.jsx(cl,{className:"h-4 w-4 group-hover:rotate-12 transition-transform duration-200"}),s.jsx("span",{children:"Edit"})]}),s.jsx("button",{onClick:a,className:"group p-2 text-gray-400 hover:text-gray-600 hover:bg-gray-100 rounded-xl transition-all duration-200",children:s.jsx(Ft,{className:"h-6 w-6 group-hover:scale-110 transition-transform duration-200"})})]})]}),s.jsx("div",{className:"flex-1 overflow-y-auto p-6 modal-scrollbar",children:s.jsxs("div",{className:"space-y-8",children:[s.jsxs("div",{className:"bg-gray-50 rounded-xl p-6",children:[s.jsxs("h4",{className:"text-xl font-bold text-gray-900 mb-6 flex items-center",children:[s.jsx(Me,{className:"h-6 w-6 mr-3 text-blue-600"}),"Basic Information"]}),s.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[s.jsxs("div",{className:"bg-white rounded-lg p-4 shadow-sm",children:[s.jsx("span",{className:"text-sm font-semibold text-gray-600 uppercase tracking-wide",children:"Product Name"}),s.jsx("p",{className:"text-lg font-semibold text-gray-900 mt-1",children:n.name})]}),s.jsxs("div",{className:"bg-white rounded-lg p-4 shadow-sm",children:[s.jsx("span",{className:"text-sm font-semibold text-gray-600 uppercase tracking-wide",children:"Brand"}),s.jsx("p",{className:"text-lg font-semibold text-gray-900 mt-1",children:n.brand||"Not specified"})]}),s.jsxs("div",{className:"bg-white rounded-lg p-4 shadow-sm",children:[s.jsx("span",{className:"text-sm font-semibold text-gray-600 uppercase tracking-wide",children:"Category"}),s.jsx("p",{className:"text-lg font-semibold text-gray-900 mt-1",children:s.jsx("span",{className:"inline-flex items-center px-3 py-1 rounded-full text-sm font-medium bg-blue-100 text-blue-800",children:n.category})})]}),s.jsxs("div",{className:"bg-white rounded-lg p-4 shadow-sm md:col-span-1",children:[s.jsx("span",{className:"text-sm font-semibold text-gray-600 uppercase tracking-wide",children:"Status"}),s.jsx("p",{className:"text-lg font-semibold text-gray-900 mt-1",children:s.jsx("span",{className:"inline-flex items-center px-3 py-1 rounded-full text-sm font-medium bg-green-100 text-green-800",children:"Active"})})]}),n.description&&s.jsxs("div",{className:"bg-white rounded-lg p-4 shadow-sm md:col-span-2",children:[s.jsx("span",{className:"text-sm font-semibold text-gray-600 uppercase tracking-wide",children:"Description"}),s.jsx("p",{className:"text-base text-gray-800 mt-2 leading-relaxed",children:n.description})]})]})]}),s.jsxs("div",{className:"bg-gradient-to-br from-blue-50 to-indigo-50 rounded-xl p-6 border border-blue-100",children:[s.jsxs("h4",{className:"text-xl font-bold text-gray-900 mb-6 flex items-center",children:[s.jsx(Me,{className:"h-6 w-6 mr-3 text-indigo-600"}),"Stock Information"]}),s.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[s.jsxs("div",{className:"bg-white rounded-xl p-6 shadow-sm border border-blue-100",children:[s.jsx("span",{className:"text-sm font-semibold text-gray-600 uppercase tracking-wide",children:"Current Stock"}),s.jsxs("div",{className:"mt-3",children:[s.jsxs("p",{className:"text-2xl font-bold text-gray-900",children:[n.stock_in_pieces.toLocaleString()," pieces"]}),s.jsx("span",{className:`mt-2 inline-flex px-4 py-2 text-sm font-bold rounded-xl ${i==="critical_stock"?"bg-red-100 text-red-800 border border-red-200":i==="low_stock"?"bg-yellow-100 text-yellow-800 border border-yellow-200":"bg-green-100 text-green-800 border border-green-200"}`,children:i.replace("_"," ").toUpperCase()})]})]}),s.jsxs("div",{className:"bg-white rounded-xl p-6 shadow-sm border border-blue-100",children:[s.jsx("span",{className:"text-sm font-semibold text-gray-600 uppercase tracking-wide",children:"Stock Breakdown"}),s.jsxs("div",{className:"mt-3 space-y-2",children:[s.jsxs("p",{className:"text-lg font-semibold text-gray-900",children:[u.boxes," boxes, ",u.sheets," ","sheets, ",u.pieces," pieces"]}),s.jsxs("div",{className:"text-sm text-gray-600 space-y-1",children:[s.jsxs("p",{children:["•"," ",s.jsx("span",{className:"font-medium",children:n.pieces_per_sheet})," ","pieces per sheet"]}),s.jsxs("p",{children:["•"," ",s.jsx("span",{className:"font-medium",children:n.sheets_per_box})," ","sheets per box"]})]})]})]}),s.jsxs("div",{className:"bg-white rounded-xl p-6 shadow-sm border border-blue-100",children:[s.jsx("span",{className:"text-sm font-semibold text-gray-600 uppercase tracking-wide",children:"Reorder Level"}),s.jsxs("p",{className:"text-xl font-bold text-gray-900 mt-2",children:[n.reorder_level," pieces"]})]}),s.jsxs("div",{className:"bg-white rounded-xl p-6 shadow-sm border border-blue-100",children:[s.jsx("span",{className:"text-sm font-semibold text-gray-600 uppercase tracking-wide",children:"Stock Status"}),s.jsx("p",{className:"text-lg font-semibold text-gray-900 mt-2",children:n.stock_in_pieces<=n.reorder_level?s.jsx("span",{className:"text-red-600",children:"⚠️ Needs Reorder"}):s.jsx("span",{className:"text-green-600",children:"✅ Adequate Stock"})})]})]})]}),s.jsxs("div",{className:"bg-gradient-to-br from-green-50 to-emerald-50 rounded-xl p-6 border border-green-100",children:[s.jsxs("h4",{className:"text-xl font-bold text-gray-900 mb-6 flex items-center",children:[s.jsx(ns,{className:"h-6 w-6 mr-3 text-green-600"}),"Pricing Information"]}),s.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-6",children:[s.jsxs("div",{className:"bg-white rounded-xl p-6 shadow-sm border border-green-100",children:[s.jsx("span",{className:"text-sm font-semibold text-gray-600 uppercase tracking-wide",children:"Price per Piece"}),s.jsx("p",{className:"text-2xl font-bold text-green-700 mt-2",children:re(n.price_per_piece)})]}),s.jsxs("div",{className:"bg-white rounded-xl p-6 shadow-sm border border-green-100",children:[s.jsx("span",{className:"text-sm font-semibold text-gray-600 uppercase tracking-wide",children:"Price per Sheet"}),s.jsx("p",{className:"text-xl font-bold text-gray-900 mt-2",children:re(n.price_per_piece*n.pieces_per_sheet)})]}),s.jsxs("div",{className:"bg-white rounded-xl p-6 shadow-sm border border-green-100",children:[s.jsx("span",{className:"text-sm font-semibold text-gray-600 uppercase tracking-wide",children:"Price per Box"}),s.jsx("p",{className:"text-xl font-bold text-gray-900 mt-2",children:re(n.price_per_piece*n.pieces_per_sheet*n.sheets_per_box)})]}),s.jsxs("div",{className:"bg-white rounded-xl p-6 shadow-sm border border-green-100",children:[s.jsx("span",{className:"text-sm font-semibold text-gray-600 uppercase tracking-wide",children:"Total Stock Value"}),s.jsx("p",{className:"text-2xl font-bold text-green-700 mt-2",children:re(n.stock_in_pieces*n.price_per_piece)})]})]})]}),s.jsxs("div",{className:"bg-gray-50 rounded-xl p-6",children:[s.jsxs("h4",{className:"text-xl font-bold text-gray-900 mb-6 flex items-center",children:[s.jsx(Me,{className:"h-6 w-6 mr-3 text-purple-600"}),"Additional Information"]}),s.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[s.jsxs("div",{className:"bg-white rounded-lg p-4 shadow-sm",children:[s.jsx("span",{className:"text-sm font-semibold text-gray-600 uppercase tracking-wide",children:"Supplier"}),s.jsx("p",{className:"text-lg font-semibold text-gray-900 mt-1",children:n.supplier||"Not specified"})]}),s.jsxs("div",{className:"bg-white rounded-lg p-4 shadow-sm",children:[s.jsx("span",{className:"text-sm font-semibold text-gray-600 uppercase tracking-wide",children:"Batch Number"}),s.jsx("p",{className:"text-lg font-mono font-bold text-gray-900 mt-1 bg-gray-100 px-2 py-1 rounded",children:n.batch_number})]}),s.jsxs("div",{className:"bg-white rounded-lg p-4 shadow-sm",children:[s.jsx("span",{className:"text-sm font-semibold text-gray-600 uppercase tracking-wide",children:"Expiry Date"}),s.jsxs("div",{className:"mt-2",children:[s.jsx("p",{className:"text-lg font-semibold text-gray-900",children:la(n.expiry_date)}),s.jsx("span",{className:`mt-1 inline-flex px-3 py-1 text-sm font-bold rounded-xl ${c==="expired"?"bg-red-100 text-red-800 border border-red-200":c==="expiring_soon"?"bg-orange-100 text-orange-800 border border-orange-200":c==="expiring_warning"?"bg-yellow-100 text-yellow-800 border border-yellow-200":"bg-green-100 text-green-800 border border-green-200"}`,children:c.replace("_"," ").toUpperCase()})]})]}),s.jsxs("div",{className:"bg-white rounded-lg p-4 shadow-sm",children:[s.jsx("span",{className:"text-sm font-semibold text-gray-600 uppercase tracking-wide",children:"Last Updated"}),s.jsx("p",{className:"text-lg font-semibold text-gray-900 mt-1",children:la(new Date)})]})]})]})]})})]})})})}const Eg={getAuditLogs:async(n={})=>{try{console.log("🔍 [AuditService] Fetching audit logs with filters:",n);const{limit:a=50,offset:l=0,action_type:i="all",user_id:c=null,date_from:u=null,date_to:h=null,search:m=null}=n;let x=ne.from("stock_movements").select(`
          id,
          movement_type,
          quantity,
          reason,
          stock_before,
          stock_after,
          created_at,
          reference_type,
          reference_id,
          products!inner(name, brand, category),
          users!inner(first_name, last_name, email, role)
        `).order("created_at",{ascending:!1});i!=="all"&&(x=x.eq("movement_type",i)),c&&(x=x.eq("user_id",c)),u&&(x=x.gte("created_at",u)),h&&(x=x.lte("created_at",h)),x=x.range(l,l+a-1);const{data:g,error:p}=await x;if(p)return console.error("❌ [AuditService] Error fetching audit logs:",p),{success:!1,error:p.message,data:[]};const b=g.map(j=>({id:j.id,action:Z2(j),user:`${j.users.first_name} ${j.users.last_name}`,userRole:j.users.role,userEmail:j.users.email,details:J2(j),timestamp:j.created_at,product:j.products.name,productBrand:j.products.brand,category:j.products.category,quantity:j.quantity,stockBefore:j.stock_before,stockAfter:j.stock_after,referenceType:j.reference_type,referenceId:j.reference_id}));return console.log("✅ [AuditService] Audit logs fetched successfully:",b.length),{success:!0,data:b,total:b.length}}catch(a){return console.error("❌ [AuditService] Error in getAuditLogs:",a),{success:!1,error:a.message,data:[]}}},getAuditSummary:async(n=30)=>{try{console.log("📊 [AuditService] Fetching audit summary for last",n,"days");const a=new Date;a.setDate(a.getDate()-n);const{data:l,error:i}=await ne.from("stock_movements").select("movement_type, created_at, users!inner(id, first_name, last_name)").gte("created_at",a.toISOString());if(i)return console.error("❌ [AuditService] Error fetching audit summary:",i),{success:!1,error:i.message,data:null};const c={totalActions:l.length,stockIn:l.filter(u=>u.movement_type==="in").length,stockOut:l.filter(u=>u.movement_type==="out").length,adjustments:l.filter(u=>u.movement_type==="adjustment").length,uniqueUsers:[...new Set(l.map(u=>u.users.id))].length,dateRange:n,fromDate:a.toISOString(),toDate:new Date().toISOString()};return console.log("✅ [AuditService] Audit summary calculated:",c),{success:!0,data:c}}catch(a){return console.error("❌ [AuditService] Error in getAuditSummary:",a),{success:!1,error:a.message,data:null}}},getUserActivityLogs:async(n,a=20)=>{try{console.log("👤 [AuditService] Fetching user activity logs for user:",n);const{data:l,error:i}=await ne.from("stock_movements").select(`
          id,
          movement_type,
          quantity,
          reason,
          created_at,
          products!inner(name, brand)
        `).eq("user_id",n).order("created_at",{ascending:!1}).limit(a);return i?(console.error("❌ [AuditService] Error fetching user activity:",i),{success:!1,error:i.message,data:[]}):(console.log("✅ [AuditService] User activity logs fetched:",l.length),{success:!0,data:l})}catch(l){return console.error("❌ [AuditService] Error in getUserActivityLogs:",l),{success:!1,error:l.message,data:[]}}}},qi={generateSalesReport:async(n={})=>{try{console.log("📈 [ReportsService] Generating sales report with range:",n);const{startDate:a=new Date(Date.now()-720*60*60*1e3).toISOString(),endDate:l=new Date().toISOString()}=n,{data:i,error:c}=await ne.from("sales").select(`
          id,
          total_amount,
          payment_method,
          status,
          created_at,
          users!inner(first_name, last_name),
          sale_items!inner(
            quantity,
            unit_price,
            total_price,
            products!inner(name, category)
          )
        `).gte("created_at",a).lte("created_at",l).eq("status","completed").order("created_at",{ascending:!1});if(c)return console.error("❌ [ReportsService] Error fetching sales data:",c),{success:!1,error:c.message,data:null};const u={period:{startDate:a,endDate:l,days:Math.ceil((new Date(l)-new Date(a))/(1e3*60*60*24))},summary:{totalSales:i.reduce((h,m)=>h+parseFloat(m.total_amount),0),totalTransactions:i.length,averageTransaction:i.length>0?i.reduce((h,m)=>h+parseFloat(m.total_amount),0)/i.length:0,uniqueCustomers:[...new Set(i.map(h=>h.users.id))].length},paymentMethods:{cash:i.filter(h=>h.payment_method==="cash").reduce((h,m)=>h+parseFloat(m.total_amount),0),card:i.filter(h=>h.payment_method==="card").reduce((h,m)=>h+parseFloat(m.total_amount),0),digital:i.filter(h=>h.payment_method==="digital").reduce((h,m)=>h+parseFloat(m.total_amount),0)},topProducts:W2(i),dailyTrends:eN(i),categoryBreakdown:tN(i)};return console.log("✅ [ReportsService] Sales report generated successfully"),{success:!0,data:u}}catch(a){return console.error("❌ [ReportsService] Error in generateSalesReport:",a),{success:!1,error:a.message,data:null}}},generateInventoryReport:async()=>{try{console.log("📦 [ReportsService] Generating inventory report");const{data:n,error:a}=await ne.from("products").select(`
          id,
          name,
          brand,
          category,
          stock_in_pieces,
          reorder_level,
          price_per_piece,
          cost_price,
          expiry_date,
          is_active,
          is_archived,
          created_at
        `).eq("is_active",!0).eq("is_archived",!1);if(a)return console.error("❌ [ReportsService] Error fetching products:",a),{success:!1,error:a.message,data:null};const l={summary:{totalProducts:n.length,totalStockValue:n.reduce((i,c)=>i+c.stock_in_pieces*c.price_per_piece,0),totalCostValue:n.reduce((i,c)=>i+c.stock_in_pieces*(c.cost_price||0),0),averageStockLevel:n.length>0?n.reduce((i,c)=>i+c.stock_in_pieces,0)/n.length:0},stockLevels:{outOfStock:n.filter(i=>i.stock_in_pieces===0).length,lowStock:n.filter(i=>i.stock_in_pieces>0&&i.stock_in_pieces<=i.reorder_level).length,normalStock:n.filter(i=>i.stock_in_pieces>i.reorder_level).length},expiryAnalysis:sN(n),categoryAnalysis:aN(n),topValueProducts:rN(n),lowStockAlerts:n.filter(i=>i.stock_in_pieces<=i.reorder_level&&i.stock_in_pieces>0)};return console.log("✅ [ReportsService] Inventory report generated successfully"),{success:!0,data:l}}catch(n){return console.error("❌ [ReportsService] Error in generateInventoryReport:",n),{success:!1,error:n.message,data:null}}},generateFinancialReport:async(n={})=>{try{console.log("💰 [ReportsService] Generating financial report");const{startDate:a=new Date(Date.now()-720*60*60*1e3).toISOString(),endDate:l=new Date().toISOString()}=n,[i,c]=await Promise.all([ne.from("sales").select(`
            id,
            total_amount,
            created_at,
            sale_items!inner(
              quantity,
              unit_price,
              total_price,
              products!inner(cost_price, price_per_piece, name)
            )
          `).gte("created_at",a).lte("created_at",l).eq("status","completed"),ne.from("products").select("stock_in_pieces, cost_price, price_per_piece").eq("is_active",!0).eq("is_archived",!1)]);if(i.error||c.error)return console.error("❌ [ReportsService] Error fetching financial data:",i.error||c.error),{success:!1,error:(i.error||c.error).message,data:null};const u=i.data.reduce((b,j)=>b+parseFloat(j.total_amount),0),h=i.data.reduce((b,j)=>b+j.sale_items.reduce((w,S)=>{const _=S.products.cost_price||0;return w+S.quantity*_},0),0),m=u-h,x=u>0?m/u*100:0,g=c.data.reduce((b,j)=>b+j.stock_in_pieces*(j.cost_price||0),0),p={period:{startDate:a,endDate:l,days:Math.ceil((new Date(l)-new Date(a))/(1e3*60*60*24))},revenue:{total:u,average:i.data.length>0?u/i.data.length:0,daily:u/Math.max(1,Math.ceil((new Date(l)-new Date(a))/(1e3*60*60*24)))},costs:{total:h,percentage:u>0?h/u*100:0},profit:{gross:m,margin:x},inventory:{currentValue:g,turnover:g>0?h/g:0}};return console.log("✅ [ReportsService] Financial report generated successfully"),{success:!0,data:p}}catch(a){return console.error("❌ [ReportsService] Error in generateFinancialReport:",a),{success:!1,error:a.message,data:null}}},exportReportToCSV:async(n,a)=>{try{console.log("📄 [ReportsService] Exporting report to CSV:",n);let l="";switch(n){case"sales":l=nN(a);break;case"inventory":l=lN(a);break;case"financial":l=iN(a);break;default:throw new Error("Unsupported report type")}return{success:!0,data:l,filename:`${n}_report_${new Date().toISOString().split("T")[0]}.csv`}}catch(l){return console.error("❌ [ReportsService] Error in exportReportToCSV:",l),{success:!1,error:l.message,data:null}}}};function Z2(n){switch(n.movement_type){case"in":return"Stock Added";case"out":return"Stock Removed";case"adjustment":return"Stock Adjusted";default:return"Stock Movement"}}function J2(n){const a=n.products.name,l=Math.abs(n.quantity),i=n.movement_type==="in"?"added to":n.movement_type==="out"?"removed from":"adjusted for";return`${l} units ${i} ${a} (${n.stock_before} → ${n.stock_after})`}function W2(n){const a={};return n.forEach(l=>{l.sale_items.forEach(i=>{const c=i.products.name;a[c]||(a[c]={name:c,quantity:0,revenue:0}),a[c].quantity+=i.quantity,a[c].revenue+=parseFloat(i.total_price)})}),Object.values(a).sort((l,i)=>i.revenue-l.revenue).slice(0,10)}function eN(n){const a={};return n.forEach(l=>{const i=l.created_at.split("T")[0];a[i]||(a[i]={date:i,sales:0,transactions:0}),a[i].sales+=parseFloat(l.total_amount),a[i].transactions+=1}),Object.values(a).sort((l,i)=>new Date(l.date)-new Date(i.date))}function tN(n){const a={};return n.forEach(l=>{l.sale_items.forEach(i=>{const c=i.products.category||"Uncategorized";a[c]||(a[c]={category:c,revenue:0,quantity:0}),a[c].revenue+=parseFloat(i.total_price),a[c].quantity+=i.quantity})}),Object.values(a).sort((l,i)=>i.revenue-l.revenue)}function sN(n){const a=new Date,l={expired:0,expiring30:0,expiring90:0,valid:0};return n.forEach(i=>{if(!i.expiry_date){l.valid++;return}const c=new Date(i.expiry_date),u=Math.ceil((c-a)/(1e3*60*60*24));u<0?l.expired++:u<=30?l.expiring30++:u<=90?l.expiring90++:l.valid++}),l}function aN(n){const a={};return n.forEach(l=>{const i=l.category||"Uncategorized";a[i]||(a[i]={category:i,products:0,totalValue:0,totalStock:0}),a[i].products++,a[i].totalValue+=l.stock_in_pieces*l.price_per_piece,a[i].totalStock+=l.stock_in_pieces}),Object.values(a).sort((l,i)=>i.totalValue-l.totalValue)}function rN(n){return n.map(a=>({...a,totalValue:a.stock_in_pieces*a.price_per_piece})).sort((a,l)=>l.totalValue-a.totalValue).slice(0,10)}function nN(n){let a=`Date,Transaction Count,Total Revenue,Average Transaction,Payment Method Breakdown
`;return n.dailyTrends.forEach(l=>{a+=`${l.date},${l.transactions},${l.sales},${l.sales/l.transactions}
`}),a}function lN(n){let a=`Product Name,Category,Stock Level,Unit Price,Total Value,Status
`;return n.topValueProducts.forEach(l=>{const i=l.stock_in_pieces===0?"Out of Stock":l.stock_in_pieces<=l.reorder_level?"Low Stock":"Normal";a+=`${l.name},${l.category},${l.stock_in_pieces},${l.price_per_piece},${l.totalValue},${i}
`}),a}function iN(n){let a=`Metric,Value
`;return a+=`Total Revenue,${n.revenue.total}
`,a+=`Total Costs,${n.costs.total}
`,a+=`Gross Profit,${n.profit.gross}
`,a+=`Profit Margin,${n.profit.margin}%
`,a+=`Inventory Value,${n.inventory.currentValue}
`,a}function oN(){const[n,a]=N.useState([]),[l,i]=N.useState(!1),c=(m,x)=>{a(g=>[...g,{test:m,result:x,timestamp:new Date().toISOString()}])},u=async()=>{i(!0),a([]);try{const m=localStorage.getItem("medcure-current-user");if(m){const x=JSON.parse(m);c("Current User Check",{success:!0,user:x});const g=await na.updateLastLogin(x.id);c("Update Last Login",g);const p=await Da.getUsers();c("Get Updated Users",p)}else c("Current User Check",{success:!1,error:"No user logged in"})}catch(m){c("Test Error",{success:!1,error:m.message})}try{const m=await Da.getUsers();c("Database Connection",m)}catch(m){c("Database Connection",{success:!1,error:m.message})}i(!1)},h=async()=>{try{const m=localStorage.getItem("medcure-current-user");if(m){const x=JSON.parse(m),g=new Date().toISOString();x.last_login=g,localStorage.setItem("medcure-current-user",JSON.stringify(x)),c("Manual LocalStorage Update",{success:!0,message:"Updated localStorage last_login",timestamp:g}),setTimeout(()=>window.location.reload(),1e3)}}catch(m){c("Manual Update Error",{success:!1,error:m.message})}};return s.jsxs("div",{className:"bg-white rounded-xl p-6 shadow-sm border border-gray-200",children:[s.jsx("h3",{className:"text-lg font-semibold text-gray-900 mb-4",children:"Login Tracking Test"}),s.jsxs("div",{className:"space-y-4",children:[s.jsxs("div",{className:"flex space-x-3",children:[s.jsx("button",{onClick:u,disabled:l,className:"px-4 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700 disabled:bg-gray-400",children:l?"Running Tests...":"Run Login Tracking Tests"}),s.jsx("button",{onClick:h,className:"px-4 py-2 bg-green-600 text-white rounded-lg hover:bg-green-700",children:"Manually Update Last Login (LocalStorage)"})]}),n.length>0&&s.jsxs("div",{className:"mt-6",children:[s.jsx("h4",{className:"font-medium text-gray-900 mb-3",children:"Test Results:"}),s.jsx("div",{className:"space-y-2 max-h-96 overflow-y-auto",children:n.map((m,x)=>s.jsxs("div",{className:`p-3 rounded-lg border ${m.result.success?"bg-green-50 border-green-200":"bg-red-50 border-red-200"}`,children:[s.jsxs("div",{className:"flex justify-between items-start",children:[s.jsx("span",{className:"font-medium text-gray-900",children:m.test}),s.jsx("span",{className:"text-xs text-gray-500",children:new Date(m.timestamp).toLocaleTimeString()})]}),s.jsx("pre",{className:"text-xs text-gray-600 mt-1 whitespace-pre-wrap",children:JSON.stringify(m.result,null,2)})]},x))})]}),s.jsxs("div",{className:"mt-6 p-4 bg-blue-50 border border-blue-200 rounded-lg",children:[s.jsx("h4",{className:"font-medium text-blue-900 mb-2",children:"Debug Instructions:"}),s.jsxs("ol",{className:"text-sm text-blue-800 space-y-1 list-decimal list-inside",children:[s.jsx("li",{children:"Run the login tracking tests to see what's happening"}),s.jsx("li",{children:"Check the browser console for detailed error messages"}),s.jsx("li",{children:'Use "Manually Update Last Login" to force update for testing'}),s.jsx("li",{children:"Refresh the Management page to see if changes appear"}),s.jsx("li",{children:"Check if the database tables exist in Supabase"})]})]})]})]})}async function Ag(){console.log("🔍 Testing database connection...");try{const{data:n,error:a}=await ne.from("users").select("count(*)").limit(1);if(a)return console.error("❌ Database connection failed:",a),{success:!1,error:a.message};console.log("✅ Database connection successful");const[l,i,c]=await Promise.all([ne.from("users").select("*",{count:"exact",head:!0}),ne.from("products").select("*",{count:"exact",head:!0}),ne.from("sales").select("*",{count:"exact",head:!0})]),u={users:l.count||0,products:i.count||0,sales:c.count||0};return console.log("📊 Database counts:",u),{success:!0,counts:u}}catch(n){return console.error("❌ Database test failed:",n),{success:!1,error:n.message}}}async function Tg(){console.log("🌱 Seeding sample data...");try{const{data:n}=await ne.from("users").select("id").limit(1);if(n&&n.length>0)return console.log("ℹ️ Data already exists, skipping seed"),{success:!0,message:"Data already exists"};const{data:a,error:l}=await ne.from("users").insert([{first_name:"John",last_name:"Admin",email:"admin@medcure.com",role:"admin",is_active:!0},{first_name:"Sarah",last_name:"Pharmacist",email:"sarah@medcure.com",role:"pharmacist",is_active:!0}]).select();if(l)throw l;console.log(`✅ Created ${a.length} users`);const{data:i,error:c}=await ne.from("products").insert([{name:"Paracetamol 500mg",brand:"Generic",category:"Pain Relief",stock_in_pieces:500,price_per_piece:2.5,reorder_level:50,is_active:!0},{name:"Vitamin C 1000mg",brand:"VitaMax",category:"Vitamins",stock_in_pieces:300,price_per_piece:8,reorder_level:40,is_active:!0},{name:"Cough Syrup",brand:"CoughAway",category:"Cold & Flu",stock_in_pieces:15,price_per_piece:45,reorder_level:20,is_active:!0}]).select();if(c)throw c;console.log(`✅ Created ${i.length} products`);const{data:u,error:h}=await ne.from("sales").insert([{user_id:a[0].id,total_amount:125.5,payment_method:"cash",customer_name:"Walk-in Customer",status:"completed"},{user_id:a[1].id,total_amount:67,payment_method:"card",customer_name:"John Doe",status:"completed"}]).select();if(h)throw h;console.log(`✅ Created ${u.length} sales`);const m=u.reduce((x,g)=>x+g.total_amount,0);return console.log(`🎉 Sample data created! Total sales value: ₱${m.toFixed(2)}`),{success:!0,counts:{users:a.length,products:i.length,sales:u.length},totalSales:m}}catch(n){return console.error("❌ Sample data creation failed:",n),{success:!1,error:n.message}}}typeof window<"u"&&(window.dbDebug={test:Ag,seed:Tg,both:async()=>{const n=await Ag();return n.success&&n.counts.users===0?await Tg():n}},console.log(`
🛠️ DATABASE DEBUG TOOLS LOADED

Available in browser console:
- dbDebug.test()  - Test database connection and count data
- dbDebug.seed()  - Create sample data if database is empty  
- dbDebug.both()  - Test and seed if needed

Run: await dbDebug.both()
  `));function cN(){const[n,a]=N.useState("users"),[l,i]=N.useState({totalUsers:0,activeUsers:0,totalProducts:0,lowStockItems:0,todaySales:0,systemUptime:"99.9%",storageUsed:"0 GB",storageTotal:"10 GB"}),[c,u]=N.useState(!0),h=[{id:"users",label:"User Management",icon:al},{id:"categories",label:"Categories",icon:Gr},{id:"archived",label:"Archived Products",icon:so},{id:"settings",label:"System Settings",icon:qr},{id:"reports",label:"Reports",icon:Lr},{id:"audit",label:"Audit Logs",icon:_x},{id:"backup",label:"Backup & Security",icon:Ki},{id:"debug",label:"Login Debug",icon:Oa}];N.useEffect(()=>{m(),typeof window<"u"&&(window.debugManagement={refreshData:m,checkServices:async()=>{console.log("🔍 Testing all services...");try{const x=await cd.getDashboardData(),g=await Da.getUsers(),p=await Ur.getAllCategories(),b=await Xn.getArchivedProducts();console.log("📊 Service Status:",{dashboard:{success:x.success,dataKeys:x.data?Object.keys(x.data):[]},users:{success:g.success,count:g.data?.length||0},categories:{success:p.success,count:p.data?.length||0},archived:{success:b.success,count:b.data?.length||0}})}catch(x){console.error("❌ Service test failed:",x)}}})},[]);const m=async()=>{try{u(!0),console.log("🔍 [Management] Loading system stats...");const x=await cd.getDashboardData();if(console.log("📊 [Management] Dashboard response:",{success:x.success,hasData:!!x.data,dataKeys:x.data?Object.keys(x.data):[]}),x.success){const g=x.data;console.log("✅ [Management] Setting system stats:",{totalUsers:g.totalUsers||0,activeUsers:g.activeUsers||0,totalProducts:g.totalProducts||0,lowStockItems:g.lowStockItems||0,todaySales:g.todaySales||0}),i({totalUsers:g.totalUsers||0,activeUsers:g.activeUsers||0,totalProducts:g.totalProducts||0,lowStockItems:g.lowStockItems||0,todaySales:g.todaySales||0,systemUptime:"99.9%",storageUsed:"2.3 GB",storageTotal:"10 GB"})}else console.error("❌ [Management] Dashboard data failed:",x.error),i({totalUsers:0,activeUsers:0,totalProducts:0,lowStockItems:0,todaySales:0,systemUptime:"99.9%",storageUsed:"2.3 GB",storageTotal:"10 GB"})}catch(x){console.error("❌ [Management] Error loading system stats:",x),i({totalUsers:0,activeUsers:0,totalProducts:0,lowStockItems:0,todaySales:0,systemUptime:"99.9%",storageUsed:"2.3 GB",storageTotal:"10 GB"})}finally{u(!1)}};return s.jsxs("div",{className:"space-y-6",children:[s.jsx("div",{className:"bg-white rounded-xl p-6 shadow-sm border border-gray-200",children:s.jsxs("div",{className:"flex justify-between items-center",children:[s.jsxs("div",{className:"flex items-center space-x-4",children:[s.jsx("div",{className:"bg-orange-100 p-3 rounded-xl",children:s.jsx(qr,{className:"h-8 w-8 text-orange-600"})}),s.jsxs("div",{children:[s.jsxs("h1",{className:"text-2xl font-bold text-gray-900 flex items-center space-x-2",children:[s.jsx("span",{children:"System Management"}),s.jsx("span",{className:"inline-flex items-center px-2.5 py-0.5 rounded-full text-xs font-medium bg-orange-100 text-orange-800",children:"Admin"})]}),s.jsx("p",{className:"text-gray-600 mt-1",children:"Manage users, settings, and system configuration with full administrative control"})]})]}),s.jsxs("div",{className:"flex space-x-3",children:[s.jsxs("button",{className:"group flex items-center space-x-2 px-4 py-2.5 bg-gray-50 border border-gray-200 text-gray-700 rounded-lg hover:bg-gray-100 hover:border-gray-300 transition-all duration-200",children:[s.jsx(Ss,{className:"h-4 w-4 group-hover:scale-110 transition-transform duration-200"}),s.jsx("span",{className:"font-medium",children:"Export Data"})]}),s.jsxs("button",{className:"group flex items-center space-x-2 px-4 py-2.5 bg-orange-600 text-white rounded-lg hover:bg-orange-700 transition-all duration-200 shadow-sm hover:shadow-md",children:[s.jsx(yt,{className:"h-4 w-4 group-hover:rotate-180 transition-transform duration-300"}),s.jsx("span",{className:"font-medium",children:"Refresh"})]})]})]})}),s.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-6",children:[s.jsxs("div",{className:"bg-white p-6 rounded-lg shadow-sm border border-gray-200",children:[s.jsxs("div",{className:"flex items-center justify-between",children:[s.jsxs("div",{children:[s.jsx("p",{className:"text-sm font-medium text-gray-600",children:"Total Users"}),s.jsx("p",{className:"text-2xl font-bold text-gray-900",children:c?"...":l.totalUsers})]}),s.jsx("div",{className:"h-12 w-12 bg-blue-100 rounded-lg flex items-center justify-center",children:s.jsx(al,{className:"h-6 w-6 text-blue-600"})})]}),s.jsxs("p",{className:"text-xs text-green-600 mt-2",children:[l.activeUsers," active users"]})]}),s.jsxs("div",{className:"bg-white p-6 rounded-lg shadow-sm border border-gray-200",children:[s.jsxs("div",{className:"flex items-center justify-between",children:[s.jsxs("div",{children:[s.jsx("p",{className:"text-sm font-medium text-gray-600",children:"Products"}),s.jsx("p",{className:"text-2xl font-bold text-gray-900",children:c?"...":Cs(l.totalProducts)})]}),s.jsx("div",{className:"h-12 w-12 bg-green-100 rounded-lg flex items-center justify-center",children:s.jsx(Me,{className:"h-6 w-6 text-green-600"})})]}),s.jsxs("p",{className:"text-xs text-red-600 mt-2",children:[l.lowStockItems," low stock items"]})]}),s.jsxs("div",{className:"bg-white p-6 rounded-lg shadow-sm border border-gray-200",children:[s.jsxs("div",{className:"flex items-center justify-between",children:[s.jsxs("div",{children:[s.jsx("p",{className:"text-sm font-medium text-gray-600",children:"Today's Sales"}),s.jsx("p",{className:"text-2xl font-bold text-gray-900",children:c?"...":re(l.todaySales)})]}),s.jsx("div",{className:"h-12 w-12 bg-yellow-100 rounded-lg flex items-center justify-center",children:s.jsx(ns,{className:"h-6 w-6 text-yellow-600"})})]}),s.jsx("p",{className:"text-xs text-green-600 mt-2",children:"↗ System active"})]}),s.jsxs("div",{className:"bg-white p-6 rounded-lg shadow-sm border border-gray-200",children:[s.jsxs("div",{className:"flex items-center justify-between",children:[s.jsxs("div",{children:[s.jsx("p",{className:"text-sm font-medium text-gray-600",children:"System Status"}),s.jsx("p",{className:"text-2xl font-bold text-gray-900",children:l.systemUptime})]}),s.jsx("div",{className:"h-12 w-12 bg-green-100 rounded-lg flex items-center justify-center",children:s.jsx(Oa,{className:"h-6 w-6 text-green-600"})})]}),s.jsxs("p",{className:"text-xs text-gray-600 mt-2",children:[l.storageUsed," / ",l.storageTotal," used"]})]})]}),s.jsxs("div",{className:"bg-white rounded-lg shadow-sm border border-gray-200",children:[s.jsx("div",{className:"border-b border-gray-200",children:s.jsx("nav",{className:"flex space-x-8 px-6",children:h.map(x=>{const g=x.icon;return s.jsxs("button",{onClick:()=>a(x.id),className:`flex items-center space-x-2 py-4 px-1 border-b-2 font-medium text-sm ${n===x.id?"border-blue-500 text-blue-600":"border-transparent text-gray-500 hover:text-gray-700 hover:border-gray-300"}`,children:[s.jsx(g,{className:"h-4 w-4"}),s.jsx("span",{children:x.label})]},x.id)})})}),s.jsxs("div",{className:"p-6",children:[n==="users"&&s.jsx(uN,{}),n==="categories"&&s.jsx(dN,{}),n==="archived"&&s.jsx(hN,{}),n==="settings"&&s.jsx(fN,{}),n==="reports"&&s.jsx(mN,{}),n==="audit"&&s.jsx(gN,{}),n==="backup"&&s.jsx(pN,{}),n==="debug"&&s.jsx(oN,{})]})]})]})}function uN(){const[n,a]=N.useState([]),[l,i]=N.useState(!0);N.useEffect(()=>{c()},[]);const c=async()=>{try{i(!0),console.log("👥 [UserManagement] Loading users with real login data...");const u=await Da.getUsers();if(console.log("📊 [UserManagement] User service response:",{success:u.success,dataCount:u.data?u.data.length:0,hasError:!!u.error}),u.success&&u.data){const h=await Promise.all(u.data.map(async m=>{try{const x=await na.getLoginHistory(m.id,1);let g=m.last_login;if(x.success&&x.data.length>0){const p=x.data[0];p.action_type==="login"&&p.metadata?.timestamp&&(g=p.metadata.timestamp)}return{...m,last_login:g,is_online:na.isUserOnline(g),formatted_last_login:na.formatLastLogin(g)}}catch(x){return console.warn(`⚠️ [UserManagement] Failed to get login data for user ${m.id}:`,x),{...m,is_online:!1,formatted_last_login:m.last_login?na.formatLastLogin(m.last_login):"Never"}}}));console.log("✅ [UserManagement] Enhanced users with login data:",h),a(h)}else console.warn("⚠️ [UserManagement] Using fallback data:",u.error),a(u.data.map(h=>({...h,is_online:!1,formatted_last_login:h.last_login?na.formatLastLogin(h.last_login):"Never"})))}catch(u){console.error("❌ [UserManagement] Error loading users:",u),a([{id:1,first_name:"John",last_name:"Admin",email:"admin@medcure.com",role:"admin",is_active:!0,last_login:"2024-01-15T10:30:00Z",is_online:!1,formatted_last_login:"5 days ago"},{id:2,first_name:"Sarah",last_name:"Pharmacist",email:"sarah@medcure.com",role:"manager",is_active:!0,last_login:"2024-01-15T09:15:00Z",is_online:!1,formatted_last_login:"5 days ago"}])}finally{i(!1)}};return s.jsxs("div",{children:[s.jsxs("div",{className:"flex justify-between items-center mb-6",children:[s.jsx("h3",{className:"text-lg font-medium text-gray-900",children:"User Management"}),s.jsxs("div",{className:"flex space-x-2",children:[s.jsxs("button",{onClick:c,className:"bg-gray-100 text-gray-700 px-3 py-2 rounded-lg hover:bg-gray-200 flex items-center space-x-2 text-sm",children:[s.jsx(yt,{className:"h-4 w-4"}),s.jsx("span",{children:"Refresh"})]}),s.jsxs("button",{className:"bg-blue-600 text-white px-4 py-2 rounded-lg hover:bg-blue-700 flex items-center space-x-2",children:[s.jsx(s2,{className:"h-4 w-4"}),s.jsx("span",{children:"Add User"})]})]})]}),l?s.jsx("div",{className:"flex items-center justify-center py-8",children:s.jsx("div",{className:"animate-spin rounded-full h-8 w-8 border-b-2 border-blue-600"})}):s.jsx("div",{className:"overflow-x-auto",children:s.jsxs("table",{className:"min-w-full divide-y divide-gray-200",children:[s.jsx("thead",{className:"bg-gray-50",children:s.jsxs("tr",{children:[s.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"User"}),s.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Role"}),s.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Status"}),s.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Last Login"}),s.jsx("th",{className:"px-6 py-3 text-right text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Actions"})]})}),s.jsx("tbody",{className:"bg-white divide-y divide-gray-200",children:n.map(u=>s.jsxs("tr",{children:[s.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:s.jsxs("div",{children:[s.jsxs("div",{className:"text-sm font-medium text-gray-900",children:[u.first_name," ",u.last_name]}),s.jsx("div",{className:"text-sm text-gray-500",children:u.email})]})}),s.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:s.jsx("span",{className:"px-2 py-1 text-xs font-medium bg-blue-100 text-blue-800 rounded-full",children:u.role})}),s.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:s.jsxs("div",{className:"flex items-center space-x-2",children:[s.jsx("span",{className:`px-2 py-1 text-xs font-medium rounded-full ${u.is_active?"bg-green-100 text-green-800":"bg-red-100 text-red-800"}`,children:u.is_active?"Active":"Inactive"}),u.is_online&&s.jsxs("span",{className:"inline-flex items-center px-2 py-1 text-xs font-medium bg-green-100 text-green-800 rounded-full",children:[s.jsx("div",{className:"w-1.5 h-1.5 bg-green-400 rounded-full mr-1 animate-pulse"}),"Online"]})]})}),s.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-900",children:s.jsxs("div",{className:"flex items-center space-x-2",children:[s.jsx("span",{className:u.is_online?"text-green-600 font-medium":"",children:u.formatted_last_login||"Never"}),u.is_online&&s.jsx("div",{className:"w-2 h-2 bg-green-400 rounded-full animate-pulse"})]})}),s.jsxs("td",{className:"px-6 py-4 whitespace-nowrap text-right text-sm font-medium space-x-2",children:[s.jsx("button",{className:"text-blue-600 hover:text-blue-900",children:s.jsx(cl,{className:"h-4 w-4"})}),s.jsx("button",{className:"text-red-600 hover:text-red-900",children:s.jsx(ul,{className:"h-4 w-4"})})]})]},u.id))})]})})]})}function dN(){const[n,a]=N.useState([]),[l,i]=N.useState(!0),[c,u]=N.useState(!1),[h,m]=N.useState(!1),[x,g]=N.useState(null),[p,b]=N.useState(null),[j,w]=N.useState(!1);N.useEffect(()=>{S(),_()},[]);const S=async()=>{try{i(!0),console.log("🏷️ [CategoryManagement] Loading categories with real-time stats...");const U=await Ur.getAllCategories();if(console.log("📊 [CategoryManagement] Category service response:",{success:U.success,dataCount:U.data?U.data.length:0,hasError:!!U.error}),U.success){const D=await Promise.all(U.data.map(async q=>{const H=await Vt.calculateCategoryStats(q.id);return{...q,stats:H}}));console.log("✅ [CategoryManagement] Setting categories with real-time stats:",D),a(D)}else console.error("❌ [CategoryManagement] Categories failed to load:",U.error),a([])}catch(U){console.error("❌ [CategoryManagement] Error loading categories:",U),a([])}finally{i(!1)}},_=async()=>{try{console.log("📈 [CategoryManagement] Loading category insights...");const U=await Vt.getCategoryInsights();U.success&&(b(U.data),console.log("✅ [CategoryManagement] Category insights loaded:",U.data))}catch(U){console.error("❌ [CategoryManagement] Error loading insights:",U)}},C=async U=>{const D=await Ur.createCategory(U);D.success?(await S(),await _(),u(!1)):alert("Error creating category: "+D.error)},L=async U=>{const D=await Ur.updateCategory(x.id,U);D.success?(await S(),await _(),m(!1),g(null)):alert("Error updating category: "+D.error)},B=async U=>{if(confirm(`Are you sure you want to delete the category "${U.name}"? This action cannot be undone if there are no products associated with it.`)){const D=await Ur.deleteCategory(U.id);D.success?(await S(),await _()):alert("Error deleting category: "+D.error)}},z=async()=>{try{w(!0),console.log("🔄 [CategoryManagement] Updating all category statistics...");const U=await Vt.updateAllCategoryStats();U.success?(await S(),await _(),alert(`✅ Successfully updated ${U.updated} category statistics!`)):alert("Error updating statistics: "+U.error)}catch(U){console.error("❌ Error updating category stats:",U),alert("Error updating statistics: "+U.message)}finally{w(!1)}};return s.jsxs("div",{children:[s.jsxs("div",{className:"flex justify-between items-center mb-6",children:[s.jsxs("div",{children:[s.jsx("h3",{className:"text-lg font-medium text-gray-900",children:"Professional Category Management"}),s.jsx("p",{className:"text-sm text-gray-600",children:"Intelligent category system with real-time calculations and auto-creation"})]}),s.jsxs("div",{className:"flex space-x-2",children:[s.jsxs("button",{onClick:z,disabled:j,className:"bg-green-600 text-white px-4 py-2 rounded-lg hover:bg-green-700 flex items-center space-x-2 disabled:opacity-50",children:[s.jsx(yt,{className:`h-4 w-4 ${j?"animate-spin":""}`}),s.jsx("span",{children:j?"Updating...":"Refresh Stats"})]}),s.jsxs("button",{onClick:()=>u(!0),className:"bg-blue-600 text-white px-4 py-2 rounded-lg hover:bg-blue-700 flex items-center space-x-2",children:[s.jsx(J_,{className:"h-4 w-4"}),s.jsx("span",{children:"Add Category"})]})]})]}),p&&s.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-4 mb-6",children:[s.jsxs("div",{className:"bg-gradient-to-r from-blue-500 to-blue-600 p-4 rounded-lg text-white",children:[s.jsxs("div",{className:"flex items-center justify-between",children:[s.jsxs("div",{children:[s.jsx("p",{className:"text-blue-100 text-sm",children:"Total Categories"}),s.jsx("p",{className:"text-2xl font-bold",children:p.total_categories})]}),s.jsx(Gr,{className:"h-8 w-8 text-blue-200"})]}),s.jsxs("p",{className:"text-xs text-blue-200 mt-2",children:[p.auto_created_categories.length," auto-created"]})]}),s.jsxs("div",{className:"bg-gradient-to-r from-green-500 to-green-600 p-4 rounded-lg text-white",children:[s.jsxs("div",{className:"flex items-center justify-between",children:[s.jsxs("div",{children:[s.jsx("p",{className:"text-green-100 text-sm",children:"Total Value"}),s.jsx("p",{className:"text-2xl font-bold",children:re(p.total_value)})]}),s.jsx(ns,{className:"h-8 w-8 text-green-200"})]}),s.jsxs("p",{className:"text-xs text-green-200 mt-2",children:[p.total_products," total products"]})]}),s.jsxs("div",{className:"bg-gradient-to-r from-yellow-500 to-yellow-600 p-4 rounded-lg text-white",children:[s.jsxs("div",{className:"flex items-center justify-between",children:[s.jsxs("div",{children:[s.jsx("p",{className:"text-yellow-100 text-sm",children:"Needs Attention"}),s.jsx("p",{className:"text-2xl font-bold",children:p.categories_needing_attention.length})]}),s.jsx(ro,{className:"h-8 w-8 text-yellow-200"})]}),s.jsxs("p",{className:"text-xs text-yellow-200 mt-2",children:[p.total_low_stock," low stock items"]})]}),s.jsxs("div",{className:"bg-gradient-to-r from-purple-500 to-purple-600 p-4 rounded-lg text-white",children:[s.jsxs("div",{className:"flex items-center justify-between",children:[s.jsxs("div",{children:[s.jsx("p",{className:"text-purple-100 text-sm",children:"Low Performing"}),s.jsx("p",{className:"text-2xl font-bold",children:p.low_performing_categories.length})]}),s.jsx(Lr,{className:"h-8 w-8 text-purple-200"})]}),s.jsx("p",{className:"text-xs text-purple-200 mt-2",children:"Categories under ₱1,000"})]})]}),l?s.jsx("div",{className:"flex items-center justify-center py-8",children:s.jsx("div",{className:"animate-spin rounded-full h-8 w-8 border-b-2 border-blue-600"})}):s.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6",children:n.map(U=>s.jsx(xN,{category:U,onEdit:D=>{g(D),m(!0)},onDelete:B},U.id))}),c&&s.jsx(Rg,{title:"Add New Category",onClose:()=>u(!1),onSave:C}),h&&x&&s.jsx(Rg,{title:"Edit Category",category:x,onClose:()=>{m(!1),g(null)},onSave:L})]})}function hN(){const[n,a]=N.useState([]),[l,i]=N.useState(!0);N.useEffect(()=>{c()},[]);const c=async()=>{try{i(!0),console.log("📦 [ArchivedProducts] Loading archived products...");const m=await Xn.getArchivedProducts();console.log("📊 [ArchivedProducts] Archive service response:",{success:m.success,dataCount:m.data?m.data.length:0,hasError:!!m.error}),m.success?(console.log("✅ [ArchivedProducts] Setting archived products:",m.data),a(m.data)):(console.error("❌ [ArchivedProducts] Failed to load:",m.error),a([]))}catch(m){console.error("❌ [ArchivedProducts] Error loading archived products:",m),a([])}finally{i(!1)}},u=async m=>{if(confirm(`Are you sure you want to restore "${m.name}"?`)){const x=await Xn.restoreProduct(m.id);x.success?await c():alert("Error restoring product: "+x.error)}},h=async m=>{if(confirm(`PERMANENT DELETE: Are you sure you want to permanently delete "${m.name}"? This action cannot be undone!`)){const x=await Xn.permanentlyDeleteProduct(m.id);x.success?await c():alert("Error permanently deleting product: "+x.error)}};return s.jsxs("div",{children:[s.jsxs("div",{className:"flex justify-between items-center mb-6",children:[s.jsxs("div",{children:[s.jsx("h3",{className:"text-lg font-medium text-gray-900",children:"Archived Products"}),s.jsx("p",{className:"text-sm text-gray-600",children:"Manage archived products and restore when needed"})]}),s.jsxs("div",{className:"text-sm text-gray-600",children:[n.length," archived products"]})]}),l?s.jsx("div",{className:"flex items-center justify-center py-8",children:s.jsx("div",{className:"animate-spin rounded-full h-8 w-8 border-b-2 border-blue-600"})}):n.length===0?s.jsxs("div",{className:"text-center py-12",children:[s.jsx(so,{className:"h-16 w-16 mx-auto mb-4 text-gray-300"}),s.jsx("h3",{className:"text-lg font-medium text-gray-900 mb-2",children:"No Archived Products"}),s.jsx("p",{className:"text-gray-500",children:"Products that are archived will appear here."})]}):s.jsx("div",{className:"bg-white border border-gray-200 rounded-lg overflow-hidden",children:s.jsx("div",{className:"overflow-x-auto",children:s.jsxs("table",{className:"min-w-full divide-y divide-gray-200",children:[s.jsx("thead",{className:"bg-gray-50",children:s.jsxs("tr",{children:[s.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Product"}),s.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Category"}),s.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Archived Date"}),s.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Archived By"}),s.jsx("th",{className:"px-6 py-3 text-right text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Actions"})]})}),s.jsx("tbody",{className:"bg-white divide-y divide-gray-200",children:n.map(m=>s.jsxs("tr",{className:"hover:bg-gray-50",children:[s.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:s.jsxs("div",{className:"flex items-center",children:[s.jsx("div",{className:"flex-shrink-0 h-10 w-10",children:s.jsx("div",{className:"h-10 w-10 rounded-lg bg-gray-100 flex items-center justify-center",children:s.jsx(Me,{className:"h-5 w-5 text-gray-400"})})}),s.jsxs("div",{className:"ml-4",children:[s.jsx("div",{className:"text-sm font-medium text-gray-900",children:m.name}),s.jsx("div",{className:"text-sm text-gray-500",children:m.brand})]})]})}),s.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:s.jsx("span",{className:"inline-flex px-2 py-1 text-xs font-medium bg-gray-100 text-gray-800 rounded-full",children:m.category_name||m.category})}),s.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-900",children:la(m.archived_at)}),s.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-900",children:m.archived_by_name||"System"}),s.jsxs("td",{className:"px-6 py-4 whitespace-nowrap text-right text-sm font-medium space-x-2",children:[s.jsx("button",{onClick:()=>u(m),className:"text-green-600 hover:text-green-900",title:"Restore Product",children:s.jsx(M1,{className:"h-4 w-4"})}),s.jsx("button",{onClick:()=>h(m),className:"text-red-600 hover:text-red-900",title:"Permanently Delete",children:s.jsx(ul,{className:"h-4 w-4"})})]})]},m.id))})]})})})]})}function fN(){return s.jsxs("div",{className:"space-y-6",children:[s.jsx("h3",{className:"text-lg font-medium text-gray-900",children:"System Settings"}),s.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-6",children:[s.jsxs("div",{className:"bg-gray-50 p-6 rounded-lg",children:[s.jsx("h4",{className:"text-base font-medium text-gray-900 mb-4",children:"General Settings"}),s.jsxs("div",{className:"space-y-4",children:[s.jsxs("div",{children:[s.jsx("label",{htmlFor:"pharmacy-name",className:"block text-sm font-medium text-gray-700 mb-2",children:"Pharmacy Name"}),s.jsx("input",{id:"pharmacy-name",type:"text",defaultValue:"MedCure Pharmacy",className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent"})]}),s.jsxs("div",{children:[s.jsx("label",{htmlFor:"tax-rate",className:"block text-sm font-medium text-gray-700 mb-2",children:"Tax Rate (%)"}),s.jsx("input",{id:"tax-rate",type:"number",defaultValue:"12",className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent"})]}),s.jsxs("div",{children:[s.jsx("label",{htmlFor:"currency",className:"block text-sm font-medium text-gray-700 mb-2",children:"Currency"}),s.jsxs("select",{id:"currency",className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent",children:[s.jsx("option",{value:"PHP",children:"Philippine Peso (₱)"}),s.jsx("option",{value:"USD",children:"US Dollar ($)"})]})]})]})]}),s.jsxs("div",{className:"bg-gray-50 p-6 rounded-lg",children:[s.jsx("h4",{className:"text-base font-medium text-gray-900 mb-4",children:"Notifications"}),s.jsxs("div",{className:"space-y-4",children:[s.jsxs("div",{className:"flex items-center justify-between",children:[s.jsxs("div",{children:[s.jsx("p",{className:"text-sm font-medium text-gray-900",children:"Low Stock Alerts"}),s.jsx("p",{className:"text-xs text-gray-500",children:"Get notified when products are running low"})]}),s.jsx("input",{type:"checkbox",defaultChecked:!0,className:"h-4 w-4 text-blue-600"})]}),s.jsxs("div",{className:"flex items-center justify-between",children:[s.jsxs("div",{children:[s.jsx("p",{className:"text-sm font-medium text-gray-900",children:"Expiry Alerts"}),s.jsx("p",{className:"text-xs text-gray-500",children:"Get notified about expiring products"})]}),s.jsx("input",{type:"checkbox",defaultChecked:!0,className:"h-4 w-4 text-blue-600"})]}),s.jsxs("div",{className:"flex items-center justify-between",children:[s.jsxs("div",{children:[s.jsx("p",{className:"text-sm font-medium text-gray-900",children:"Sales Reports"}),s.jsx("p",{className:"text-xs text-gray-500",children:"Daily sales summary notifications"})]}),s.jsx("input",{type:"checkbox",className:"h-4 w-4 text-blue-600"})]})]})]})]}),s.jsx("div",{className:"flex justify-end",children:s.jsxs("button",{className:"bg-blue-600 text-white px-6 py-2 rounded-lg hover:bg-blue-700 flex items-center space-x-2",children:[s.jsx(ud,{className:"h-4 w-4"}),s.jsx("span",{children:"Save Settings"})]})})]})}function mN(){const[n,a]=N.useState("sales"),[l,i]=N.useState("30"),[c,u]=N.useState(!1),[h,m]=N.useState(null),x=async p=>{try{u(!0),console.log("📊 [Reports] Generating report:",p);const b=new Date().toISOString(),j=new Date(Date.now()-parseInt(l)*24*60*60*1e3).toISOString();let w;switch(p){case"sales":w=await qi.generateSalesReport({startDate:j,endDate:b});break;case"inventory":w=await qi.generateInventoryReport();break;case"financial":w=await qi.generateFinancialReport({startDate:j,endDate:b});break;default:throw new Error("Unknown report type")}w.success?(m(w.data),console.log("✅ [Reports] Report generated successfully:",w.data)):(console.error("❌ [Reports] Report generation failed:",w.error),alert("Error generating report: "+w.error))}catch(b){console.error("❌ [Reports] Error generating report:",b),alert("Error generating report: "+b.message)}finally{u(!1)}},g=async p=>{if(!h){alert("Please generate a report first");return}try{console.log("📄 [Reports] Exporting report:",p);const b=await qi.exportReportToCSV(p,h);if(b.success){const j=new Blob([b.data],{type:"text/csv"}),w=window.URL.createObjectURL(j),S=document.createElement("a");S.href=w,S.download=b.filename,S.click(),window.URL.revokeObjectURL(w),console.log("✅ [Reports] Report exported successfully")}else alert("Error exporting report: "+b.error)}catch(b){console.error("❌ [Reports] Error exporting report:",b),alert("Error exporting report: "+b.message)}};return s.jsxs("div",{className:"space-y-6",children:[s.jsx("h3",{className:"text-lg font-medium text-gray-900",children:"Reports & Analytics"}),s.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6",children:[s.jsxs("div",{className:"bg-gradient-to-r from-blue-500 to-blue-600 p-6 rounded-lg text-white",children:[s.jsxs("div",{className:"flex items-center justify-between",children:[s.jsxs("div",{children:[s.jsx("h4",{className:"text-lg font-medium",children:"Sales Report"}),s.jsx("p",{className:"text-blue-100",children:"Generate sales analytics"})]}),s.jsx(Vr,{className:"h-8 w-8 text-blue-200"})]}),s.jsxs("button",{onClick:()=>x("sales"),disabled:c,className:"mt-4 bg-white text-blue-600 px-4 py-2 rounded-lg hover:bg-blue-50 flex items-center space-x-2 disabled:opacity-50",children:[s.jsx(Ss,{className:"h-4 w-4"}),s.jsx("span",{children:c&&n==="sales"?"Generating...":"Generate"})]})]}),s.jsxs("div",{className:"bg-gradient-to-r from-green-500 to-green-600 p-6 rounded-lg text-white",children:[s.jsxs("div",{className:"flex items-center justify-between",children:[s.jsxs("div",{children:[s.jsx("h4",{className:"text-lg font-medium",children:"Inventory Report"}),s.jsx("p",{className:"text-green-100",children:"Stock levels and movement"})]}),s.jsx(Me,{className:"h-8 w-8 text-green-200"})]}),s.jsxs("button",{onClick:()=>x("inventory"),disabled:c,className:"mt-4 bg-white text-green-600 px-4 py-2 rounded-lg hover:bg-green-50 flex items-center space-x-2 disabled:opacity-50",children:[s.jsx(Ss,{className:"h-4 w-4"}),s.jsx("span",{children:c&&n==="inventory"?"Generating...":"Generate"})]})]}),s.jsxs("div",{className:"bg-gradient-to-r from-yellow-500 to-yellow-600 p-6 rounded-lg text-white",children:[s.jsxs("div",{className:"flex items-center justify-between",children:[s.jsxs("div",{children:[s.jsx("h4",{className:"text-lg font-medium",children:"Financial Report"}),s.jsx("p",{className:"text-yellow-100",children:"Revenue and profit analysis"})]}),s.jsx(ns,{className:"h-8 w-8 text-yellow-200"})]}),s.jsxs("button",{onClick:()=>x("financial"),disabled:c,className:"mt-4 bg-white text-yellow-600 px-4 py-2 rounded-lg hover:bg-yellow-50 flex items-center space-x-2 disabled:opacity-50",children:[s.jsx(Ss,{className:"h-4 w-4"}),s.jsx("span",{children:c&&n==="financial"?"Generating...":"Generate"})]})]})]}),s.jsxs("div",{className:"bg-gray-50 p-6 rounded-lg",children:[s.jsx("h4",{className:"text-base font-medium text-gray-900 mb-4",children:"Report Filters"}),s.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:[s.jsxs("div",{children:[s.jsx("label",{htmlFor:"date-range",className:"block text-sm font-medium text-gray-700 mb-2",children:"Date Range"}),s.jsxs("select",{id:"date-range",value:l,onChange:p=>i(p.target.value),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent",children:[s.jsx("option",{value:"1",children:"Today"}),s.jsx("option",{value:"7",children:"This Week"}),s.jsx("option",{value:"30",children:"This Month"}),s.jsx("option",{value:"90",children:"This Quarter"}),s.jsx("option",{value:"365",children:"This Year"})]})]}),s.jsxs("div",{children:[s.jsx("label",{htmlFor:"report-type",className:"block text-sm font-medium text-gray-700 mb-2",children:"Report Type"}),s.jsxs("select",{id:"report-type",value:n,onChange:p=>a(p.target.value),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent",children:[s.jsx("option",{value:"sales",children:"Sales Report"}),s.jsx("option",{value:"inventory",children:"Inventory Report"}),s.jsx("option",{value:"financial",children:"Financial Report"})]})]}),s.jsxs("div",{children:[s.jsx("label",{htmlFor:"format",className:"block text-sm font-medium text-gray-700 mb-2",children:"Export Format"}),s.jsx("button",{onClick:()=>g(n),disabled:!h||c,className:"w-full px-3 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700 disabled:opacity-50 disabled:cursor-not-allowed",children:"Export as CSV"})]})]})]}),h&&s.jsxs("div",{className:"bg-white border border-gray-200 rounded-lg p-6",children:[s.jsx("h4",{className:"text-lg font-medium text-gray-900 mb-4",children:"Report Results"}),s.jsx(yN,{data:h,type:n})]})]})}function gN(){const[n,a]=N.useState([]),[l,i]=N.useState(!0),[c,u]=N.useState({action_type:"all",search:"",limit:50}),[h,m]=N.useState(null);N.useEffect(()=>{const g=async()=>{try{i(!0),console.log("📋 [AuditLogs] Loading audit logs with filters:",c);const b=await Eg.getAuditLogs(c);console.log("📊 [AuditLogs] Audit service response:",{success:b.success,dataCount:b.data?b.data.length:0,hasError:!!b.error}),b.success?(console.log("✅ [AuditLogs] Setting audit logs:",b.data),a(b.data)):(console.error("❌ [AuditLogs] Failed to load audit logs:",b.error),a([{id:1,action:"Product Updated",user:"Sarah Pharmacist",details:"Updated stock for Paracetamol 500mg",timestamp:"2024-01-15T11:30:00Z"},{id:2,action:"Sale Completed",user:"Mike Cashier",details:"Sale #INV-001234 - Total: ₱2,450.00",timestamp:"2024-01-15T11:25:00Z"},{id:3,action:"User Login",user:"John Admin",details:"Administrator logged in from 192.168.1.100",timestamp:"2024-01-15T10:30:00Z"}]))}catch(b){console.error("❌ [AuditLogs] Error loading audit logs:",b),a([])}finally{i(!1)}},p=async()=>{try{console.log("📊 [AuditLogs] Loading audit summary...");const b=await Eg.getAuditSummary(30);b.success&&(console.log("✅ [AuditLogs] Audit summary loaded:",b.data),m(b.data))}catch(b){console.error("❌ [AuditLogs] Error loading audit summary:",b)}};g(),p()},[c]);const x=(g,p)=>{u(b=>({...b,[g]:p}))};return s.jsxs("div",{className:"space-y-6",children:[s.jsxs("div",{className:"flex justify-between items-center",children:[s.jsxs("div",{children:[s.jsx("h3",{className:"text-lg font-medium text-gray-900",children:"Audit Logs"}),h&&s.jsxs("p",{className:"text-sm text-gray-600",children:[h.totalActions," actions in the last"," ",h.dateRange," days"]})]}),s.jsxs("div",{className:"flex space-x-3",children:[s.jsx("input",{type:"text",placeholder:"Search logs...",value:c.search,onChange:g=>x("search",g.target.value),className:"px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent"}),s.jsxs("select",{value:c.action_type,onChange:g=>x("action_type",g.target.value),className:"px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent",children:[s.jsx("option",{value:"all",children:"All Actions"}),s.jsx("option",{value:"in",children:"Stock Added"}),s.jsx("option",{value:"out",children:"Stock Removed"}),s.jsx("option",{value:"adjustment",children:"Adjustments"})]})]})]}),h&&s.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-4",children:[s.jsxs("div",{className:"bg-blue-50 p-4 rounded-lg",children:[s.jsx("div",{className:"text-2xl font-bold text-blue-600",children:h.totalActions}),s.jsx("div",{className:"text-sm text-blue-700",children:"Total Actions"})]}),s.jsxs("div",{className:"bg-green-50 p-4 rounded-lg",children:[s.jsx("div",{className:"text-2xl font-bold text-green-600",children:h.stockIn}),s.jsx("div",{className:"text-sm text-green-700",children:"Stock Added"})]}),s.jsxs("div",{className:"bg-red-50 p-4 rounded-lg",children:[s.jsx("div",{className:"text-2xl font-bold text-red-600",children:h.stockOut}),s.jsx("div",{className:"text-sm text-red-700",children:"Stock Removed"})]}),s.jsxs("div",{className:"bg-yellow-50 p-4 rounded-lg",children:[s.jsx("div",{className:"text-2xl font-bold text-yellow-600",children:h.adjustments}),s.jsx("div",{className:"text-sm text-yellow-700",children:"Adjustments"})]})]}),s.jsx("div",{className:"bg-white border border-gray-200 rounded-lg overflow-hidden",children:s.jsx("div",{className:"divide-y divide-gray-200",children:l?s.jsx("div",{className:"flex items-center justify-center py-8",children:s.jsx("div",{className:"animate-spin rounded-full h-8 w-8 border-b-2 border-blue-600"})}):n.length===0?s.jsxs("div",{className:"text-center py-8",children:[s.jsx(Oa,{className:"h-16 w-16 mx-auto mb-4 text-gray-300"}),s.jsx("h3",{className:"text-lg font-medium text-gray-900 mb-2",children:"No Audit Logs"}),s.jsx("p",{className:"text-gray-500",children:"No activity logs found matching your criteria."})]}):n.map(g=>s.jsx("div",{className:"p-4 hover:bg-gray-50",children:s.jsxs("div",{className:"flex items-center justify-between",children:[s.jsxs("div",{className:"flex items-center space-x-3",children:[s.jsx("div",{className:"h-8 w-8 bg-blue-100 rounded-full flex items-center justify-center",children:s.jsx(Oa,{className:"h-4 w-4 text-blue-600"})}),s.jsxs("div",{children:[s.jsx("p",{className:"text-sm font-medium text-gray-900",children:g.action}),s.jsx("p",{className:"text-sm text-gray-500",children:g.details}),g.product&&s.jsxs("p",{className:"text-xs text-gray-400",children:["Product: ",g.product," | Category: ",g.category]})]})]}),s.jsxs("div",{className:"text-right",children:[s.jsx("p",{className:"text-sm font-medium text-gray-900",children:g.user}),g.userRole&&s.jsx("p",{className:"text-xs text-gray-500 capitalize",children:g.userRole}),s.jsx("p",{className:"text-xs text-gray-500",children:la(g.timestamp)})]})]})},g.id))})})]})}function xN({category:n,onEdit:a,onDelete:l}){const i=n.stats||{total_products:0,active_products:0,total_value:0,total_profit_potential:0,low_stock_count:0,out_of_stock_count:0,average_price:0},c=i.total_value>0?(i.total_profit_potential/i.total_value*100).toFixed(1):0,h=i.total_value>5e4?"green":i.total_value>1e4?"blue":i.total_value>1e3?"yellow":"red",m={green:"border-green-200 bg-green-50",blue:"border-blue-200 bg-blue-50",yellow:"border-yellow-200 bg-yellow-50",red:"border-red-200 bg-red-50"};return s.jsxs("div",{className:`bg-white rounded-lg border-2 p-6 hover:shadow-lg transition-all duration-200 ${m[h]}`,children:[s.jsxs("div",{className:"flex items-center justify-between mb-4",children:[s.jsxs("div",{className:"flex items-center space-x-3",children:[s.jsx("div",{className:"h-12 w-12 rounded-lg flex items-center justify-center",style:{backgroundColor:n.color+"20",color:n.color},children:s.jsx(Gr,{className:"h-6 w-6"})}),s.jsxs("div",{children:[s.jsxs("h4",{className:"text-lg font-medium text-gray-900 flex items-center space-x-2",children:[s.jsx("span",{children:n.name}),n.metadata?.auto_created&&s.jsx("span",{className:"inline-flex items-center px-2 py-0.5 text-xs font-medium bg-purple-100 text-purple-700 rounded-full",children:"Auto"})]}),s.jsx("p",{className:"text-sm text-gray-500",children:n.description})]})]}),s.jsxs("div",{className:"flex items-center space-x-1",children:[s.jsx("button",{onClick:()=>a(n),className:"text-gray-400 hover:text-gray-600 p-1 rounded transition-colors",children:s.jsx(cl,{className:"h-4 w-4"})}),s.jsx("button",{onClick:()=>l(n),className:"text-gray-400 hover:text-red-600 p-1 rounded transition-colors",children:s.jsx(ul,{className:"h-4 w-4"})})]})]}),s.jsxs("div",{className:"mb-4 p-3 bg-white rounded-lg border border-gray-200",children:[s.jsxs("h5",{className:"text-sm font-semibold text-gray-700 mb-2 flex items-center",children:[s.jsx(ns,{className:"h-4 w-4 mr-1 text-green-600"}),"Financial Overview"]}),s.jsxs("div",{className:"grid grid-cols-2 gap-3",children:[s.jsxs("div",{children:[s.jsx("p",{className:"text-xs text-gray-500",children:"Total Value"}),s.jsx("p",{className:"text-lg font-bold text-green-600",children:re(i.total_value)})]}),s.jsxs("div",{children:[s.jsx("p",{className:"text-xs text-gray-500",children:"Profit Potential"}),s.jsx("p",{className:"text-lg font-bold text-blue-600",children:re(i.total_profit_potential)})]}),s.jsxs("div",{children:[s.jsx("p",{className:"text-xs text-gray-500",children:"Avg. Price"}),s.jsx("p",{className:"text-sm font-medium text-gray-700",children:re(i.average_price)})]}),s.jsxs("div",{children:[s.jsx("p",{className:"text-xs text-gray-500",children:"Margin"}),s.jsxs("p",{className:`text-sm font-medium ${c>20?"text-green-600":c>10?"text-yellow-600":"text-red-600"}`,children:[c,"%"]})]})]})]}),s.jsxs("div",{className:"grid grid-cols-2 gap-4 mb-4",children:[s.jsxs("div",{className:"text-center p-2 bg-gray-50 rounded-lg",children:[s.jsx("p",{className:"text-sm font-medium text-gray-600",children:"Products"}),s.jsx("p",{className:"text-xl font-bold text-gray-900",children:i.active_products}),s.jsxs("p",{className:"text-xs text-gray-500",children:[i.total_products," total"]})]}),s.jsxs("div",{className:"text-center p-2 bg-gray-50 rounded-lg",children:[s.jsx("p",{className:"text-sm font-medium text-gray-600",children:"Issues"}),s.jsx("p",{className:`text-xl font-bold ${i.low_stock_count>0?"text-red-600":"text-green-600"}`,children:i.low_stock_count}),s.jsx("p",{className:"text-xs text-gray-500",children:"low stock"})]})]}),s.jsxs("div",{className:"flex items-center justify-between",children:[s.jsxs("div",{className:"flex items-center space-x-2",children:[s.jsx("span",{className:`inline-flex px-2 py-1 text-xs font-medium rounded-full ${n.is_active?"bg-green-100 text-green-800":"bg-gray-100 text-gray-800"}`,children:n.is_active?"Active":"Inactive"}),i.out_of_stock_count>0&&s.jsxs("span",{className:"inline-flex px-2 py-1 text-xs font-medium bg-red-100 text-red-800 rounded-full",children:[i.out_of_stock_count," out of stock"]})]}),s.jsx("div",{className:`text-xs font-medium ${h==="green"?"text-green-600":h==="blue"?"text-blue-600":h==="yellow"?"text-yellow-600":"text-red-600"}`,children:h==="green"?"🔥 High Value":h==="blue"?"📈 Good":h==="yellow"?"⚠️ Moderate":"🔻 Low Value"})]})]})}function Rg({title:n,category:a,onClose:l,onSave:i}){const[c,u]=N.useState({name:a?.name||"",description:a?.description||"",color:a?.color||"#3B82F6",icon:a?.icon||"Package",sort_order:a?.sort_order||0,is_active:a?.is_active??!0}),h=g=>{g.preventDefault(),i(c)},m=["Package","Heart","Shield","Zap","Thermometer","Stomach","Droplets","Cross","Baby","FileText"],x=["#EF4444","#F59E0B","#10B981","#3B82F6","#6366F1","#8B5CF6","#EC4899","#F97316","#84CC16","#6B7280"];return s.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50",children:s.jsx("div",{className:"bg-white rounded-lg shadow-xl max-w-md w-full mx-4",children:s.jsxs("div",{className:"p-6",children:[s.jsxs("div",{className:"flex items-center justify-between mb-6",children:[s.jsx("h3",{className:"text-xl font-semibold text-gray-900",children:n}),s.jsx("button",{onClick:l,className:"text-gray-400 hover:text-gray-600",children:s.jsx(Ft,{className:"h-6 w-6"})})]}),s.jsxs("form",{onSubmit:h,className:"space-y-4",children:[s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Category Name *"}),s.jsx("input",{type:"text",required:!0,value:c.name,onChange:g=>u({...c,name:g.target.value}),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent"})]}),s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Description"}),s.jsx("textarea",{value:c.description,onChange:g=>u({...c,description:g.target.value}),rows:3,className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent"})]}),s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Color"}),s.jsx("div",{className:"flex space-x-2",children:x.map(g=>s.jsx("button",{type:"button",onClick:()=>u({...c,color:g}),className:`h-8 w-8 rounded border-2 ${c.color===g?"border-gray-900":"border-gray-300"}`,style:{backgroundColor:g}},g))})]}),s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Icon"}),s.jsx("select",{value:c.icon,onChange:g=>u({...c,icon:g.target.value}),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent",children:m.map(g=>s.jsx("option",{value:g,children:g},g))})]}),s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Sort Order"}),s.jsx("input",{type:"number",value:c.sort_order,onChange:g=>u({...c,sort_order:parseInt(g.target.value)||0}),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent"})]}),s.jsxs("div",{className:"flex items-center",children:[s.jsx("input",{type:"checkbox",id:"is_active",checked:c.is_active,onChange:g=>u({...c,is_active:g.target.checked}),className:"h-4 w-4 text-blue-600 rounded"}),s.jsx("label",{htmlFor:"is_active",className:"ml-2 text-sm text-gray-700",children:"Active"})]}),s.jsxs("div",{className:"flex justify-end space-x-3 pt-6 border-t",children:[s.jsx("button",{type:"button",onClick:l,className:"px-4 py-2 border border-gray-300 text-gray-700 rounded-lg hover:bg-gray-50",children:"Cancel"}),s.jsx("button",{type:"submit",className:"px-4 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700",children:a?"Update Category":"Create Category"})]})]})]})})})}function pN(){return s.jsxs("div",{className:"space-y-6",children:[s.jsx("h3",{className:"text-lg font-medium text-gray-900",children:"Backup & Security"}),s.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-6",children:[s.jsxs("div",{className:"bg-gray-50 p-6 rounded-lg",children:[s.jsx("h4",{className:"text-base font-medium text-gray-900 mb-4",children:"Data Backup"}),s.jsxs("div",{className:"space-y-4",children:[s.jsxs("div",{className:"flex items-center justify-between",children:[s.jsxs("div",{children:[s.jsx("p",{className:"text-sm font-medium text-gray-900",children:"Auto Backup"}),s.jsx("p",{className:"text-xs text-gray-500",children:"Last backup: Today at 3:00 AM"})]}),s.jsx("input",{type:"checkbox",defaultChecked:!0,className:"h-4 w-4 text-blue-600"})]}),s.jsxs("div",{children:[s.jsx("label",{htmlFor:"backup-frequency",className:"block text-sm font-medium text-gray-700 mb-2",children:"Backup Frequency"}),s.jsxs("select",{id:"backup-frequency",className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent",children:[s.jsx("option",{value:"daily",children:"Daily"}),s.jsx("option",{value:"weekly",children:"Weekly"}),s.jsx("option",{value:"monthly",children:"Monthly"})]})]}),s.jsxs("button",{className:"w-full bg-blue-600 text-white px-4 py-2 rounded-lg hover:bg-blue-700 flex items-center justify-center space-x-2",children:[s.jsx(Ss,{className:"h-4 w-4"}),s.jsx("span",{children:"Create Backup Now"})]})]})]}),s.jsxs("div",{className:"bg-gray-50 p-6 rounded-lg",children:[s.jsx("h4",{className:"text-base font-medium text-gray-900 mb-4",children:"Security"}),s.jsxs("div",{className:"space-y-4",children:[s.jsxs("div",{className:"flex items-center justify-between",children:[s.jsxs("div",{children:[s.jsx("p",{className:"text-sm font-medium text-gray-900",children:"Two-Factor Authentication"}),s.jsx("p",{className:"text-xs text-gray-500",children:"Add extra security to accounts"})]}),s.jsx("input",{type:"checkbox",className:"h-4 w-4 text-blue-600"})]}),s.jsxs("div",{className:"flex items-center justify-between",children:[s.jsxs("div",{children:[s.jsx("p",{className:"text-sm font-medium text-gray-900",children:"Session Timeout"}),s.jsx("p",{className:"text-xs text-gray-500",children:"Auto logout after inactivity"})]}),s.jsxs("select",{className:"px-2 py-1 border border-gray-300 rounded text-sm",children:[s.jsx("option",{value:"30",children:"30 min"}),s.jsx("option",{value:"60",children:"1 hour"}),s.jsx("option",{value:"120",children:"2 hours"})]})]}),s.jsxs("div",{className:"flex items-center justify-between",children:[s.jsxs("div",{children:[s.jsx("p",{className:"text-sm font-medium text-gray-900",children:"Password Policy"}),s.jsx("p",{className:"text-xs text-gray-500",children:"Enforce strong passwords"})]}),s.jsx("input",{type:"checkbox",defaultChecked:!0,className:"h-4 w-4 text-blue-600"})]})]})]})]}),s.jsx("div",{className:"bg-green-50 border border-green-200 p-4 rounded-lg",children:s.jsxs("div",{className:"flex items-center space-x-3",children:[s.jsx("div",{className:"h-8 w-8 bg-green-100 rounded-full flex items-center justify-center",children:s.jsx(Ki,{className:"h-4 w-4 text-green-600"})}),s.jsxs("div",{children:[s.jsx("p",{className:"text-sm font-medium text-green-900",children:"System Status: Secure"}),s.jsx("p",{className:"text-xs text-green-700",children:"All security measures are active and functioning properly"})]})]})})]})}function yN({data:n,type:a}){if(!n)return null;switch(a){case"sales":return s.jsx(bN,{data:n});case"inventory":return s.jsx(vN,{data:n});case"financial":return s.jsx(jN,{data:n});default:return s.jsx("div",{children:"Unknown report type"})}}function bN({data:n}){return s.jsxs("div",{className:"space-y-6",children:[s.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:[s.jsxs("div",{className:"bg-blue-50 p-4 rounded-lg",children:[s.jsx("div",{className:"text-2xl font-bold text-blue-600",children:re(n.summary.totalSales)}),s.jsx("div",{className:"text-sm text-blue-700",children:"Total Sales"})]}),s.jsxs("div",{className:"bg-green-50 p-4 rounded-lg",children:[s.jsx("div",{className:"text-2xl font-bold text-green-600",children:n.summary.totalTransactions}),s.jsx("div",{className:"text-sm text-green-700",children:"Transactions"})]}),s.jsxs("div",{className:"bg-yellow-50 p-4 rounded-lg",children:[s.jsx("div",{className:"text-2xl font-bold text-yellow-600",children:re(n.summary.averageTransaction)}),s.jsx("div",{className:"text-sm text-yellow-700",children:"Average Transaction"})]})]}),s.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[s.jsxs("div",{children:[s.jsx("h5",{className:"text-base font-medium text-gray-900 mb-3",children:"Payment Methods"}),s.jsxs("div",{className:"space-y-2",children:[s.jsxs("div",{className:"flex justify-between",children:[s.jsx("span",{className:"text-sm text-gray-600",children:"Cash"}),s.jsx("span",{className:"text-sm font-medium",children:re(n.paymentMethods.cash)})]}),s.jsxs("div",{className:"flex justify-between",children:[s.jsx("span",{className:"text-sm text-gray-600",children:"Card"}),s.jsx("span",{className:"text-sm font-medium",children:re(n.paymentMethods.card)})]}),s.jsxs("div",{className:"flex justify-between",children:[s.jsx("span",{className:"text-sm text-gray-600",children:"Digital"}),s.jsx("span",{className:"text-sm font-medium",children:re(n.paymentMethods.digital)})]})]})]}),s.jsxs("div",{children:[s.jsx("h5",{className:"text-base font-medium text-gray-900 mb-3",children:"Top Products"}),s.jsx("div",{className:"space-y-2",children:n.topProducts.slice(0,5).map((a,l)=>s.jsxs("div",{className:"flex justify-between",children:[s.jsx("span",{className:"text-sm text-gray-600 truncate",children:a.name}),s.jsx("span",{className:"text-sm font-medium",children:re(a.revenue)})]},l))})]})]})]})}function vN({data:n}){return s.jsxs("div",{className:"space-y-6",children:[s.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-4",children:[s.jsxs("div",{className:"bg-blue-50 p-4 rounded-lg",children:[s.jsx("div",{className:"text-2xl font-bold text-blue-600",children:n.summary.totalProducts}),s.jsx("div",{className:"text-sm text-blue-700",children:"Total Products"})]}),s.jsxs("div",{className:"bg-green-50 p-4 rounded-lg",children:[s.jsx("div",{className:"text-2xl font-bold text-green-600",children:re(n.summary.totalStockValue)}),s.jsx("div",{className:"text-sm text-green-700",children:"Stock Value"})]}),s.jsxs("div",{className:"bg-red-50 p-4 rounded-lg",children:[s.jsx("div",{className:"text-2xl font-bold text-red-600",children:n.stockLevels.lowStock}),s.jsx("div",{className:"text-sm text-red-700",children:"Low Stock Items"})]}),s.jsxs("div",{className:"bg-yellow-50 p-4 rounded-lg",children:[s.jsx("div",{className:"text-2xl font-bold text-yellow-600",children:n.stockLevels.outOfStock}),s.jsx("div",{className:"text-sm text-yellow-700",children:"Out of Stock"})]})]}),s.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[s.jsxs("div",{children:[s.jsx("h5",{className:"text-base font-medium text-gray-900 mb-3",children:"Expiry Analysis"}),s.jsxs("div",{className:"space-y-2",children:[s.jsxs("div",{className:"flex justify-between",children:[s.jsx("span",{className:"text-sm text-gray-600",children:"Expired"}),s.jsx("span",{className:"text-sm font-medium text-red-600",children:n.expiryAnalysis.expired})]}),s.jsxs("div",{className:"flex justify-between",children:[s.jsx("span",{className:"text-sm text-gray-600",children:"Expiring (30 days)"}),s.jsx("span",{className:"text-sm font-medium text-yellow-600",children:n.expiryAnalysis.expiring30})]}),s.jsxs("div",{className:"flex justify-between",children:[s.jsx("span",{className:"text-sm text-gray-600",children:"Expiring (90 days)"}),s.jsx("span",{className:"text-sm font-medium text-orange-600",children:n.expiryAnalysis.expiring90})]})]})]}),s.jsxs("div",{children:[s.jsx("h5",{className:"text-base font-medium text-gray-900 mb-3",children:"Top Value Products"}),s.jsx("div",{className:"space-y-2",children:n.topValueProducts.slice(0,5).map((a,l)=>s.jsxs("div",{className:"flex justify-between",children:[s.jsx("span",{className:"text-sm text-gray-600 truncate",children:a.name}),s.jsx("span",{className:"text-sm font-medium",children:re(a.totalValue)})]},l))})]})]})]})}function jN({data:n}){return s.jsxs("div",{className:"space-y-6",children:[s.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-4",children:[s.jsxs("div",{className:"bg-green-50 p-4 rounded-lg",children:[s.jsx("div",{className:"text-2xl font-bold text-green-600",children:re(n.revenue.total)}),s.jsx("div",{className:"text-sm text-green-700",children:"Total Revenue"})]}),s.jsxs("div",{className:"bg-red-50 p-4 rounded-lg",children:[s.jsx("div",{className:"text-2xl font-bold text-red-600",children:re(n.costs.total)}),s.jsx("div",{className:"text-sm text-red-700",children:"Total Costs"})]}),s.jsxs("div",{className:"bg-blue-50 p-4 rounded-lg",children:[s.jsx("div",{className:"text-2xl font-bold text-blue-600",children:re(n.profit.gross)}),s.jsx("div",{className:"text-sm text-blue-700",children:"Gross Profit"})]}),s.jsxs("div",{className:"bg-yellow-50 p-4 rounded-lg",children:[s.jsxs("div",{className:"text-2xl font-bold text-yellow-600",children:[n.profit.margin.toFixed(1),"%"]}),s.jsx("div",{className:"text-sm text-yellow-700",children:"Profit Margin"})]})]}),s.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[s.jsxs("div",{children:[s.jsx("h5",{className:"text-base font-medium text-gray-900 mb-3",children:"Revenue Breakdown"}),s.jsxs("div",{className:"space-y-2",children:[s.jsxs("div",{className:"flex justify-between",children:[s.jsx("span",{className:"text-sm text-gray-600",children:"Daily Average"}),s.jsx("span",{className:"text-sm font-medium",children:re(n.revenue.daily)})]}),s.jsxs("div",{className:"flex justify-between",children:[s.jsx("span",{className:"text-sm text-gray-600",children:"Per Transaction"}),s.jsx("span",{className:"text-sm font-medium",children:re(n.revenue.average)})]})]})]}),s.jsxs("div",{children:[s.jsx("h5",{className:"text-base font-medium text-gray-900 mb-3",children:"Inventory Metrics"}),s.jsxs("div",{className:"space-y-2",children:[s.jsxs("div",{className:"flex justify-between",children:[s.jsx("span",{className:"text-sm text-gray-600",children:"Current Value"}),s.jsx("span",{className:"text-sm font-medium",children:re(n.inventory.currentValue)})]}),s.jsxs("div",{className:"flex justify-between",children:[s.jsx("span",{className:"text-sm text-gray-600",children:"Turnover Ratio"}),s.jsx("span",{className:"text-sm font-medium",children:n.inventory.turnover.toFixed(2)})]})]})]})]})]})}function wN(){const{allProducts:n,analytics:a,isLoading:l}=Rx(),[i,c]=N.useState("30"),[u,h]=N.useState(null),[m,x]=N.useState(!1);N.useEffect(()=>{(async()=>{x(!0);try{const b=await Vt.getCategoryInsights();b.success&&h(b.data)}catch(b){console.error("Failed to load category insights:",b)}finally{x(!1)}})()},[n]),console.log("🔍 [AnalyticsPage] Debug Info:",{allProductsCount:n?.length||0,analyticsData:a,categoryInsights:u,isLoading:l,firstProduct:n?.[0]});const g=N.useMemo(()=>{if(console.log("📊 [AnalyticsPage] Debug Info:",{allProductsCount:n?.length||0,analyticsFromHook:a,isLoading:l}),!n||!n.length)return console.log("⚠️ [AnalyticsPage] No products available for analytics"),{categoryStats:[],stockLevels:{outOfStock:0,lowStock:0,normalStock:0},expiryAnalysis:{expired:0,expiring30:0,expiring90:0},topProducts:[]};const p=n.filter(U=>!U.is_archived);console.log("📊 Active products for analytics:",p.length);const j=[...new Set(p.map(U=>U.category||"Uncategorized"))].map(U=>{const D=p.filter(ee=>(ee.category||"Uncategorized")===U),q=D.reduce((ee,K)=>ee+(K.stock_in_pieces||0)*(K.price_per_piece||0),0),H=D.reduce((ee,K)=>ee+(K.stock_in_pieces||0),0);return{category:U,products:D.length,totalValue:q,totalStock:H,avgPrice:D.length>0?D.reduce((ee,K)=>ee+(K.price_per_piece||0),0)/D.length:0}}),w={outOfStock:p.filter(U=>(U.stock_in_pieces||0)===0).length,lowStock:p.filter(U=>(U.stock_in_pieces||0)>0&&(U.stock_in_pieces||0)<=(U.reorder_level||10)).length,normalStock:p.filter(U=>(U.stock_in_pieces||0)>(U.reorder_level||10)).length},S=new Date,_=p.filter(U=>U.expiry_date?new Date(U.expiry_date)<S:!1).length,C=p.filter(U=>{if(!U.expiry_date)return!1;const D=new Date(U.expiry_date),q=Math.ceil((D-S)/(1e3*60*60*24));return q>=0&&q<=30}).length,L=p.filter(U=>{if(!U.expiry_date)return!1;const D=new Date(U.expiry_date),q=Math.ceil((D-S)/(1e3*60*60*24));return q>30&&q<=90}).length,B=[...p].sort((U,D)=>(D.stock_in_pieces||0)*(D.price_per_piece||0)-(U.stock_in_pieces||0)*(U.price_per_piece||0)).slice(0,10),z={categoryStats:j,stockLevels:w,expiryAnalysis:{expired:_,expiring30:C,expiring90:L},topProducts:B};return console.log("📊 [AnalyticsPage] Analytics calculated:",z),z},[n]);return l?s.jsx("div",{className:"flex items-center justify-center py-12",children:s.jsx("div",{className:"animate-spin rounded-full h-8 w-8 border-b-2 border-blue-600"})}):!g||!n?.length?s.jsxs("div",{className:"space-y-6",children:[s.jsx("div",{className:"flex flex-col lg:flex-row lg:items-center lg:justify-between",children:s.jsxs("div",{children:[s.jsx("h1",{className:"text-3xl font-bold text-gray-900",children:"Analytics Dashboard"}),s.jsx("p",{className:"text-gray-600 mt-1",children:"Comprehensive insights into your pharmacy operations and inventory performance."})]})}),s.jsxs("div",{className:"bg-yellow-50 border border-yellow-200 rounded-lg p-6 text-center",children:[s.jsx(Me,{className:"mx-auto h-12 w-12 text-yellow-400 mb-4"}),s.jsx("h3",{className:"text-lg font-medium text-yellow-800 mb-2",children:"No Data Available"}),s.jsx("p",{className:"text-yellow-700",children:"No products found in the inventory. Add some products to see analytics data."})]})]}):s.jsxs("div",{className:"space-y-6",children:[s.jsx("div",{className:"bg-white rounded-xl p-6 shadow-sm border border-gray-200",children:s.jsxs("div",{className:"flex flex-col lg:flex-row lg:items-center lg:justify-between",children:[s.jsxs("div",{className:"flex items-center space-x-4",children:[s.jsx("div",{className:"bg-purple-100 p-3 rounded-xl",children:s.jsx(Lr,{className:"h-8 w-8 text-purple-600"})}),s.jsxs("div",{children:[s.jsxs("h1",{className:"text-2xl font-bold text-gray-900 flex items-center space-x-2",children:[s.jsx("span",{children:"Analytics Dashboard"}),s.jsx("span",{className:"inline-flex items-center px-2.5 py-0.5 rounded-full text-xs font-medium bg-purple-100 text-purple-800",children:"Real-time"})]}),s.jsx("p",{className:"text-gray-600 mt-1",children:"Comprehensive insights into your pharmacy operations and inventory performance"})]})]}),s.jsxs("div",{className:"flex items-center space-x-3 mt-4 lg:mt-0",children:[s.jsxs("select",{value:i,onChange:p=>c(p.target.value),className:"px-4 py-2.5 bg-gray-50 border border-gray-200 rounded-lg focus:ring-2 focus:ring-purple-500 focus:border-purple-500 text-gray-700 font-medium transition-all duration-200",children:[s.jsx("option",{value:"7",children:"Last 7 days"}),s.jsx("option",{value:"30",children:"Last 30 days"}),s.jsx("option",{value:"90",children:"Last 90 days"}),s.jsx("option",{value:"365",children:"Last year"})]}),s.jsxs("button",{className:"group flex items-center space-x-2 px-4 py-2.5 bg-gray-50 border border-gray-200 text-gray-700 rounded-lg hover:bg-gray-100 hover:border-gray-300 transition-all duration-200",children:[s.jsx(Nx,{className:"h-4 w-4 group-hover:scale-110 transition-transform duration-200"}),s.jsx("span",{className:"font-medium",children:"Filters"})]}),s.jsxs("button",{className:"group flex items-center space-x-2 px-4 py-2.5 bg-purple-600 text-white rounded-lg hover:bg-purple-700 transition-all duration-200 shadow-sm hover:shadow-md",children:[s.jsx(Ss,{className:"h-4 w-4 group-hover:scale-110 transition-transform duration-200"}),s.jsx("span",{className:"font-medium",children:"Export Report"})]})]})]})}),s.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-6",children:[s.jsx(zi,{title:"Total Revenue",value:re(a.totalValue),change:"+12.5%",trend:"up",icon:ns,color:"green"}),s.jsx(zi,{title:"Total Products",value:Cs(a.totalProducts),change:"+5.2%",trend:"up",icon:Me,color:"blue"}),s.jsx(zi,{title:"Low Stock Items",value:Cs(a.lowStockProducts),change:"-2.1%",trend:"down",icon:ks,color:a.lowStockProducts>0?"yellow":"green"}),s.jsx(zi,{title:"Avg. Product Value",value:a.totalProducts>0?re(a.totalValue/a.totalProducts):re(0),change:"+3.8%",trend:"up",icon:Vr,color:"purple"})]}),s.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-6",children:[s.jsxs("div",{className:"bg-white rounded-lg shadow-sm border border-gray-200 p-6",children:[s.jsxs("div",{className:"flex items-center justify-between mb-6",children:[s.jsx("h3",{className:"text-lg font-semibold text-gray-900",children:"Category Distribution"}),s.jsx(yt,{className:"h-5 w-5 text-gray-400"})]}),g&&s.jsx("div",{className:"space-y-4",children:g.categoryStats.map((p,b)=>s.jsxs("div",{className:"flex items-center justify-between",children:[s.jsxs("div",{className:"flex items-center space-x-3",children:[s.jsx("div",{className:`w-4 h-4 rounded ${b%6===0?"bg-blue-500":b%6===1?"bg-green-500":b%6===2?"bg-yellow-500":b%6===3?"bg-red-500":b%6===4?"bg-purple-500":"bg-pink-500"}`}),s.jsx("span",{className:"text-sm font-medium text-gray-900",children:p.category})]}),s.jsxs("div",{className:"text-right",children:[s.jsxs("div",{className:"text-sm font-semibold text-gray-900",children:[p.products," products"]}),s.jsx("div",{className:"text-xs text-gray-500",children:re(p.totalValue)})]})]},p.category))})]}),s.jsxs("div",{className:"bg-white rounded-lg shadow-sm border border-gray-200 p-6",children:[s.jsxs("div",{className:"flex items-center justify-between mb-6",children:[s.jsx("h3",{className:"text-lg font-semibold text-gray-900",children:"Stock Level Analysis"}),s.jsx(yt,{className:"h-5 w-5 text-gray-400"})]}),g&&s.jsxs("div",{className:"space-y-4",children:[s.jsxs("div",{className:"flex items-center justify-between p-4 bg-green-50 rounded-lg",children:[s.jsxs("div",{className:"flex items-center space-x-3",children:[s.jsx("div",{className:"w-3 h-3 bg-green-500 rounded-full"}),s.jsx("span",{className:"text-sm font-medium text-gray-900",children:"Normal Stock"})]}),s.jsx("span",{className:"text-lg font-bold text-green-600",children:g.stockLevels.normalStock})]}),s.jsxs("div",{className:"flex items-center justify-between p-4 bg-yellow-50 rounded-lg",children:[s.jsxs("div",{className:"flex items-center space-x-3",children:[s.jsx("div",{className:"w-3 h-3 bg-yellow-500 rounded-full"}),s.jsx("span",{className:"text-sm font-medium text-gray-900",children:"Low Stock"})]}),s.jsx("span",{className:"text-lg font-bold text-yellow-600",children:g.stockLevels.lowStock})]}),s.jsxs("div",{className:"flex items-center justify-between p-4 bg-red-50 rounded-lg",children:[s.jsxs("div",{className:"flex items-center space-x-3",children:[s.jsx("div",{className:"w-3 h-3 bg-red-500 rounded-full"}),s.jsx("span",{className:"text-sm font-medium text-gray-900",children:"Out of Stock"})]}),s.jsx("span",{className:"text-lg font-bold text-red-600",children:g.stockLevels.outOfStock})]})]})]})]}),u&&s.jsxs("div",{className:"bg-white rounded-lg shadow-sm border border-gray-200 p-6",children:[s.jsxs("div",{className:"flex items-center justify-between mb-6",children:[s.jsxs("h3",{className:"text-lg font-semibold text-gray-900 flex items-center space-x-2",children:[s.jsx(Gr,{className:"h-5 w-5 text-blue-600"}),s.jsx("span",{children:"Intelligent Category Insights"})]}),s.jsx("div",{className:"text-xs text-blue-600 bg-blue-50 px-2 py-1 rounded",children:"Enhanced Analytics"})]}),s.jsxs("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-4 mb-6",children:[s.jsxs("div",{className:"text-center p-4 bg-blue-50 rounded-lg",children:[s.jsx("div",{className:"text-2xl font-bold text-blue-600",children:u.total_categories}),s.jsx("div",{className:"text-xs text-gray-600",children:"Total Categories"})]}),s.jsxs("div",{className:"text-center p-4 bg-green-50 rounded-lg",children:[s.jsx("div",{className:"text-2xl font-bold text-green-600",children:re(u.total_value)}),s.jsx("div",{className:"text-xs text-gray-600",children:"Total Value"})]}),s.jsxs("div",{className:"text-center p-4 bg-purple-50 rounded-lg",children:[s.jsx("div",{className:"text-2xl font-bold text-purple-600",children:u.auto_created_categories?.length||0}),s.jsx("div",{className:"text-xs text-gray-600",children:"Auto-Created"})]}),s.jsxs("div",{className:"text-center p-4 bg-orange-50 rounded-lg",children:[s.jsx("div",{className:"text-2xl font-bold text-orange-600",children:u.categories_needing_attention?.length||0}),s.jsx("div",{className:"text-xs text-gray-600",children:"Need Attention"})]})]}),u.top_value_categories?.length>0&&s.jsxs("div",{children:[s.jsx("h4",{className:"font-medium text-gray-900 mb-3",children:"Top Value Categories"}),s.jsx("div",{className:"space-y-2",children:u.top_value_categories.slice(0,5).map((p,b)=>s.jsxs("div",{className:"flex items-center justify-between p-3 bg-gray-50 rounded-lg",children:[s.jsxs("div",{className:"flex items-center space-x-3",children:[s.jsx("div",{className:`w-3 h-3 rounded-full ${b===0?"bg-yellow-500":b===1?"bg-gray-400":b===2?"bg-orange-500":"bg-blue-500"}`}),s.jsx("span",{className:"text-sm font-medium",children:p.name})]}),s.jsxs("div",{className:"text-right",children:[s.jsx("div",{className:"text-sm font-bold text-gray-900",children:re(p.stats?.total_value||0)}),s.jsxs("div",{className:"text-xs text-gray-500",children:[p.stats?.total_products||0," products"]})]})]},p.name))})]})]}),s.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-6",children:[s.jsxs("div",{className:"bg-white rounded-lg shadow-sm border border-gray-200 p-6",children:[s.jsxs("div",{className:"flex items-center justify-between mb-6",children:[s.jsx("h3",{className:"text-lg font-semibold text-gray-900",children:"Expiry Analysis"}),s.jsx(ao,{className:"h-5 w-5 text-gray-400"})]}),g&&s.jsxs("div",{className:"space-y-4",children:[s.jsxs("div",{className:"flex items-center justify-between p-4 bg-red-50 rounded-lg",children:[s.jsxs("div",{children:[s.jsx("div",{className:"text-sm font-medium text-gray-900",children:"Expired Products"}),s.jsx("div",{className:"text-xs text-gray-500",children:"Already expired"})]}),s.jsx("span",{className:"text-xl font-bold text-red-600",children:g.expiryAnalysis.expired})]}),s.jsxs("div",{className:"flex items-center justify-between p-4 bg-orange-50 rounded-lg",children:[s.jsxs("div",{children:[s.jsx("div",{className:"text-sm font-medium text-gray-900",children:"Expiring in 30 Days"}),s.jsx("div",{className:"text-xs text-gray-500",children:"Immediate attention needed"})]}),s.jsx("span",{className:"text-xl font-bold text-orange-600",children:g.expiryAnalysis.expiring30})]}),s.jsxs("div",{className:"flex items-center justify-between p-4 bg-yellow-50 rounded-lg",children:[s.jsxs("div",{children:[s.jsx("div",{className:"text-sm font-medium text-gray-900",children:"Expiring in 90 Days"}),s.jsx("div",{className:"text-xs text-gray-500",children:"Plan for clearance"})]}),s.jsx("span",{className:"text-xl font-bold text-yellow-600",children:g.expiryAnalysis.expiring90})]})]})]}),s.jsxs("div",{className:"bg-white rounded-lg shadow-sm border border-gray-200 p-6",children:[s.jsxs("div",{className:"flex items-center justify-between mb-6",children:[s.jsx("h3",{className:"text-lg font-semibold text-gray-900",children:"Top Products by Value"}),s.jsx(Lr,{className:"h-5 w-5 text-gray-400"})]}),g&&s.jsx("div",{className:"space-y-3",children:g.topProducts.slice(0,5).map((p,b)=>s.jsxs("div",{className:"flex items-center space-x-3",children:[s.jsx("div",{className:"flex-shrink-0 w-8 h-8 bg-blue-100 rounded-full flex items-center justify-center",children:s.jsx("span",{className:"text-sm font-semibold text-blue-600",children:b+1})}),s.jsxs("div",{className:"flex-1 min-w-0",children:[s.jsx("div",{className:"text-sm font-medium text-gray-900 truncate",children:p.name}),s.jsxs("div",{className:"text-xs text-gray-500",children:[p.category," • ",p.stock_in_pieces," units"]})]}),s.jsxs("div",{className:"text-right",children:[s.jsx("div",{className:"text-sm font-semibold text-gray-900",children:re(p.stock_in_pieces*p.price_per_piece)}),s.jsxs("div",{className:"text-xs text-gray-500",children:[re(p.price_per_piece),"/unit"]})]})]},p.id))})]})]}),s.jsxs("div",{className:"bg-white rounded-lg shadow-sm border border-gray-200 p-6",children:[s.jsxs("div",{className:"flex items-center justify-between mb-6",children:[s.jsx("h3",{className:"text-lg font-semibold text-gray-900",children:"Recent Activity"}),s.jsx(yt,{className:"h-5 w-5 text-gray-400"})]}),s.jsxs("div",{className:"space-y-4",children:[s.jsx($i,{title:"Product sold",description:"Paracetamol 500mg - 2 units",time:"2 minutes ago",icon:Qt,color:"green"}),s.jsx($i,{title:"Stock updated",description:"Amoxicillin 250mg - Added 100 units",time:"15 minutes ago",icon:Me,color:"blue"}),s.jsx($i,{title:"Low stock alert",description:"Aspirin 325mg below reorder level",time:"1 hour ago",icon:ks,color:"yellow"}),s.jsx($i,{title:"New user registered",description:"Dr. Sarah Johnson added as manager",time:"2 hours ago",icon:al,color:"purple"})]})]})]})}function zi({title:n,value:a,change:l,trend:i,icon:c,color:u}){const h={green:"bg-green-50 text-green-600",blue:"bg-blue-50 text-blue-600",yellow:"bg-yellow-50 text-yellow-600",red:"bg-red-50 text-red-600",purple:"bg-purple-50 text-purple-600"},m=i==="up"?Vr:ro,x=i==="up"?"text-green-600":"text-red-600",g=m;return s.jsx("div",{className:"bg-white rounded-lg shadow-sm border border-gray-200 p-6",children:s.jsxs("div",{className:"flex items-center justify-between",children:[s.jsxs("div",{children:[s.jsx("p",{className:"text-sm font-medium text-gray-600",children:n}),s.jsx("p",{className:"text-2xl font-bold text-gray-900 mt-2",children:a}),s.jsxs("div",{className:"flex items-center mt-2",children:[s.jsx(g,{className:`h-4 w-4 ${x} mr-1`}),s.jsx("span",{className:`text-sm font-medium ${x}`,children:l}),s.jsx("span",{className:"text-sm text-gray-500 ml-1",children:"vs last period"})]})]}),s.jsx("div",{className:`p-3 rounded-lg ${h[u]}`,children:s.jsx(c,{className:"h-6 w-6"})})]})})}function $i({title:n,description:a,time:l,icon:i,color:c}){const u={green:"bg-green-100 text-green-600",blue:"bg-blue-100 text-blue-600",yellow:"bg-yellow-100 text-yellow-600",red:"bg-red-100 text-red-600",purple:"bg-purple-100 text-purple-600"};return s.jsxs("div",{className:"flex items-start space-x-3 p-4 bg-gray-50 rounded-lg",children:[s.jsx("div",{className:`p-2 rounded-lg ${u[c]}`,children:s.jsx(i,{className:"h-4 w-4"})}),s.jsxs("div",{className:"flex-1 min-w-0",children:[s.jsx("div",{className:"text-sm font-medium text-gray-900",children:n}),s.jsx("div",{className:"text-sm text-gray-600",children:a})]}),s.jsx("div",{className:"text-xs text-gray-400",children:l})]})}function _N(){const{user:n}=As(),[a,l]=N.useState("profile"),[i,c]=N.useState(!1),[u,h]=N.useState(!1),[m,x]=N.useState({firstName:n?.firstName||"",lastName:n?.lastName||"",email:n?.email||"",phone:""}),[g,p]=N.useState({lowStockAlerts:!0,expiryWarnings:!0,dailyReports:!1,systemUpdates:!0}),[b,j]=N.useState({currentPassword:"",newPassword:"",confirmPassword:""}),w=async _=>{c(!0);try{await new Promise(C=>setTimeout(C,1e3)),console.log(`Saving ${_} settings...`)}catch(C){console.error("Error saving settings:",C)}finally{c(!1)}},S=[{id:"profile",label:"Profile",icon:Cx},{id:"notifications",label:"Notifications",icon:Td},{id:"security",label:"Security",icon:Ki}];return s.jsxs("div",{className:"space-y-6",children:[s.jsx("div",{className:"bg-white rounded-xl p-6 shadow-sm border border-gray-200",children:s.jsxs("div",{className:"flex items-center space-x-4",children:[s.jsx("div",{className:"bg-gray-100 p-3 rounded-xl",children:s.jsx(qr,{className:"h-8 w-8 text-gray-600"})}),s.jsxs("div",{children:[s.jsxs("h1",{className:"text-2xl font-bold text-gray-900 flex items-center space-x-2",children:[s.jsx("span",{children:"Settings"}),s.jsx("span",{className:"inline-flex items-center px-2.5 py-0.5 rounded-full text-xs font-medium bg-gray-100 text-gray-800",children:"Personal"})]}),s.jsx("p",{className:"text-gray-600 mt-1",children:"Manage your account preferences and security settings"})]})]})}),s.jsx("div",{className:"bg-white rounded-lg shadow-sm border border-gray-200 overflow-hidden",children:s.jsxs("div",{className:"flex flex-col md:flex-row",children:[s.jsx("div",{className:"md:w-64 bg-gray-50 border-r border-gray-200",children:s.jsx("nav",{className:"p-4 space-y-2",children:S.map(_=>{const C=_.icon;return s.jsxs("button",{onClick:()=>l(_.id),className:`w-full flex items-center space-x-3 px-3 py-2 rounded-lg text-sm font-medium transition-colors ${a===_.id?"bg-blue-100 text-blue-700":"text-gray-600 hover:bg-gray-100 hover:text-gray-900"}`,children:[s.jsx(C,{className:"h-4 w-4"}),s.jsx("span",{children:_.label})]},_.id)})})}),s.jsxs("div",{className:"flex-1 p-6",children:[a==="profile"&&s.jsx("div",{className:"space-y-6",children:s.jsxs("div",{children:[s.jsx("h3",{className:"text-lg font-semibold text-gray-900 mb-4",children:"Profile Information"}),s.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"First Name"}),s.jsx("input",{type:"text",value:m.firstName,onChange:_=>x({...m,firstName:_.target.value}),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent"})]}),s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Last Name"}),s.jsx("input",{type:"text",value:m.lastName,onChange:_=>x({...m,lastName:_.target.value}),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent"})]}),s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Email Address"}),s.jsxs("div",{className:"relative",children:[s.jsx(j1,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 h-4 w-4 text-gray-400"}),s.jsx("input",{type:"email",value:m.email,onChange:_=>x({...m,email:_.target.value}),className:"w-full pl-10 pr-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent"})]})]}),s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Phone Number"}),s.jsxs("div",{className:"relative",children:[s.jsx(C1,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 h-4 w-4 text-gray-400"}),s.jsx("input",{type:"tel",value:m.phone,onChange:_=>x({...m,phone:_.target.value}),className:"w-full pl-10 pr-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent"})]})]})]}),s.jsx("div",{className:"flex justify-end mt-6",children:s.jsxs("button",{onClick:()=>w("profile"),disabled:i,className:"flex items-center space-x-2 px-4 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700 disabled:opacity-50 transition-colors",children:[i?s.jsx(yt,{className:"h-4 w-4 animate-spin"}):s.jsx(ud,{className:"h-4 w-4"}),s.jsx("span",{children:"Save Changes"})]})})]})}),a==="notifications"&&s.jsx("div",{className:"space-y-6",children:s.jsxs("div",{children:[s.jsx("h3",{className:"text-lg font-semibold text-gray-900 mb-4",children:"Notification Preferences"}),s.jsx("div",{className:"space-y-4",children:[{key:"lowStockAlerts",label:"Low Stock Alerts",description:"Get notified when products are running low"},{key:"expiryWarnings",label:"Expiry Warnings",description:"Alerts for products nearing expiration"},{key:"dailyReports",label:"Daily Reports",description:"Receive daily sales and inventory summaries"},{key:"systemUpdates",label:"System Updates",description:"Important system notifications and updates"}].map(_=>s.jsxs("div",{className:"flex items-center justify-between p-4 bg-gray-50 rounded-lg",children:[s.jsxs("div",{children:[s.jsx("div",{className:"text-sm font-medium text-gray-900",children:_.label}),s.jsx("div",{className:"text-sm text-gray-500",children:_.description})]}),s.jsxs("label",{className:"relative inline-flex items-center cursor-pointer",children:[s.jsx("input",{type:"checkbox",checked:g[_.key],onChange:C=>p({...g,[_.key]:C.target.checked}),className:"sr-only peer"}),s.jsx("div",{className:"w-11 h-6 bg-gray-200 peer-focus:outline-none peer-focus:ring-4 peer-focus:ring-blue-300 rounded-full peer peer-checked:after:translate-x-full peer-checked:after:border-white after:content-[''] after:absolute after:top-[2px] after:left-[2px] after:bg-white after:rounded-full after:h-5 after:w-5 after:transition-all peer-checked:bg-blue-600"})]})]},_.key))}),s.jsx("div",{className:"flex justify-end mt-6",children:s.jsxs("button",{onClick:()=>w("notifications"),disabled:i,className:"flex items-center space-x-2 px-4 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700 disabled:opacity-50 transition-colors",children:[i?s.jsx(yt,{className:"h-4 w-4 animate-spin"}):s.jsx(ud,{className:"h-4 w-4"}),s.jsx("span",{children:"Save Changes"})]})})]})}),a==="security"&&s.jsx("div",{className:"space-y-6",children:s.jsxs("div",{children:[s.jsx("h3",{className:"text-lg font-semibold text-gray-900 mb-4",children:"Security Settings"}),s.jsxs("div",{className:"bg-gray-50 rounded-lg p-6",children:[s.jsx("h4",{className:"text-sm font-medium text-gray-900 mb-4",children:"Change Password"}),s.jsxs("div",{className:"space-y-4",children:[s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Current Password"}),s.jsxs("div",{className:"relative",children:[s.jsx(Di,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 h-4 w-4 text-gray-400"}),s.jsx("input",{type:u?"text":"password",value:b.currentPassword,onChange:_=>j({...b,currentPassword:_.target.value}),className:"w-full pl-10 pr-10 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent"}),s.jsx("button",{type:"button",onClick:()=>h(!u),className:"absolute right-3 top-1/2 transform -translate-y-1/2 text-gray-400 hover:text-gray-600",children:u?s.jsx(Rd,{className:"h-4 w-4"}):s.jsx(Ua,{className:"h-4 w-4"})})]})]}),s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"New Password"}),s.jsxs("div",{className:"relative",children:[s.jsx(Di,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 h-4 w-4 text-gray-400"}),s.jsx("input",{type:u?"text":"password",value:b.newPassword,onChange:_=>j({...b,newPassword:_.target.value}),className:"w-full pl-10 pr-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent"})]})]}),s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Confirm New Password"}),s.jsxs("div",{className:"relative",children:[s.jsx(Di,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 h-4 w-4 text-gray-400"}),s.jsx("input",{type:u?"text":"password",value:b.confirmPassword,onChange:_=>j({...b,confirmPassword:_.target.value}),className:"w-full pl-10 pr-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent"})]})]})]}),s.jsx("div",{className:"flex justify-end mt-4",children:s.jsxs("button",{onClick:()=>w("password"),disabled:i,className:"flex items-center space-x-2 px-4 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700 disabled:opacity-50 transition-colors",children:[i?s.jsx(yt,{className:"h-4 w-4 animate-spin"}):s.jsx(Di,{className:"h-4 w-4"}),s.jsx("span",{children:"Update Password"})]})})]}),s.jsx("div",{className:"bg-yellow-50 border border-yellow-200 rounded-lg p-4",children:s.jsxs("div",{className:"flex items-start space-x-3",children:[s.jsx(Ki,{className:"h-5 w-5 text-yellow-600 mt-0.5"}),s.jsxs("div",{children:[s.jsx("h4",{className:"text-sm font-medium text-yellow-900",children:"Security Tips"}),s.jsxs("ul",{className:"text-sm text-yellow-700 mt-1 space-y-1",children:[s.jsx("li",{children:"• Use a strong password with at least 8 characters"}),s.jsx("li",{children:"• Include uppercase, lowercase, numbers, and symbols"}),s.jsx("li",{children:"• Don't reuse passwords from other accounts"}),s.jsx("li",{children:"• Log out when using shared computers"})]})]})]})})]})})]})]})})]})}function NN(){return s.jsx("div",{className:"min-h-screen bg-gray-50 flex items-center justify-center p-4",children:s.jsxs("div",{className:"text-center",children:[s.jsx("div",{className:"w-24 h-24 bg-red-100 rounded-full flex items-center justify-center mx-auto mb-6",children:s.jsx("svg",{className:"w-12 h-12 text-red-600",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:s.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 9v2m0 4h.01m-6.938 4h13.856c1.54 0 2.502-1.667 1.732-2.5L13.732 4c-.77-.833-1.964-.833-2.732 0L3.732 16.5c-.77.833.192 2.5 1.732 2.5z"})})}),s.jsx("h1",{className:"text-4xl font-bold text-gray-900 mb-4",children:"Access Denied"}),s.jsx("p",{className:"text-gray-600 text-lg mb-8",children:"You don't have permission to access this page."}),s.jsx(Wn,{to:"/dashboard",className:"bg-blue-600 text-white px-6 py-3 rounded-lg hover:bg-blue-700 transition-colors",children:"Go to Dashboard"})]})})}const SN=new rj({defaultOptions:{queries:{staleTime:1e3*60*5,cacheTime:1e3*60*10,retry:(n,a)=>a.status===404?!1:n<2}}});function kN(){const{isLoadingAuth:n,user:a}=As();return n?s.jsx(y_,{}):s.jsxs(ev,{children:[s.jsx(ss,{path:"/login",element:s.jsx(Ea,{title:"Login Error",children:a?s.jsx(Jn,{to:"/dashboard",replace:!0}):s.jsx(w2,{})})}),s.jsx(ss,{path:"/dashboard",element:s.jsx(Ea,{title:"Dashboard Error",children:s.jsx(Ta,{children:s.jsx(_2,{})})})}),s.jsx(ss,{path:"/pos",element:s.jsx(Ea,{title:"POS System Error",children:s.jsx(Ta,{children:s.jsx(z2,{})})})}),s.jsx(ss,{path:"/inventory",element:s.jsx(Ea,{title:"Inventory Error",children:s.jsx(Ta,{children:s.jsx(I2,{})})})}),s.jsx(ss,{path:"/management",element:s.jsx(Ea,{title:"Management Error",children:s.jsx(Ta,{requiredRole:"admin",children:s.jsx(cN,{})})})}),s.jsx(ss,{path:"/analytics",element:s.jsx(Ea,{title:"Analytics Error",children:s.jsx(Ta,{requiredRole:["admin","manager"],children:s.jsx(wN,{})})})}),s.jsx(ss,{path:"/settings",element:s.jsx(Ea,{title:"Settings Error",children:s.jsx(Ta,{children:s.jsx(_N,{})})})}),s.jsx(ss,{path:"/unauthorized",element:s.jsx(NN,{})}),s.jsx(ss,{path:"/",element:s.jsx(Jn,{to:"/dashboard",replace:!0})})]})}function CN(){return s.jsx(Ex,{title:"Application Error",message:"The pharmacy management system encountered an unexpected error. Please refresh the page or contact support if the problem persists.",onError:(n,a)=>{console.error("Global application error:",n,a)},children:s.jsxs(lj,{client:SN,children:[s.jsx(yx,{children:s.jsx(h2,{children:s.jsx(_v,{children:s.jsx("div",{className:"App",children:s.jsx(kN,{})})})})}),s.jsx(cj,{initialIsOpen:!1})]})})}ub.createRoot(document.getElementById("root")).render(s.jsx(N.StrictMode,{children:s.jsx(CN,{})}));
