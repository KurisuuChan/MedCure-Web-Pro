(function(){const a=document.createElement("link").relList;if(a&&a.supports&&a.supports("modulepreload"))return;for(const c of document.querySelectorAll('link[rel="modulepreload"]'))i(c);new MutationObserver(c=>{for(const u of c)if(u.type==="childList")for(const h of u.addedNodes)h.tagName==="LINK"&&h.rel==="modulepreload"&&i(h)}).observe(document,{childList:!0,subtree:!0});function l(c){const u={};return c.integrity&&(u.integrity=c.integrity),c.referrerPolicy&&(u.referrerPolicy=c.referrerPolicy),c.crossOrigin==="use-credentials"?u.credentials="include":c.crossOrigin==="anonymous"?u.credentials="omit":u.credentials="same-origin",u}function i(c){if(c.ep)return;c.ep=!0;const u=l(c);fetch(c.href,u)}})();function md(n){return n&&n.__esModule&&Object.prototype.hasOwnProperty.call(n,"default")?n.default:n}function Wy(n){if(Object.prototype.hasOwnProperty.call(n,"__esModule"))return n;var a=n.default;if(typeof a=="function"){var l=function i(){var c=!1;try{c=this instanceof i}catch{}return c?Reflect.construct(a,arguments,this.constructor):a.apply(this,arguments)};l.prototype=a.prototype}else l={};return Object.defineProperty(l,"__esModule",{value:!0}),Object.keys(n).forEach(function(i){var c=Object.getOwnPropertyDescriptor(n,i);Object.defineProperty(l,i,c.get?c:{enumerable:!0,get:function(){return n[i]}})}),l}var bu={exports:{}},Hn={};/**
 * @license React
 * react-jsx-runtime.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var A0;function ev(){if(A0)return Hn;A0=1;var n=Symbol.for("react.transitional.element"),a=Symbol.for("react.fragment");function l(i,c,u){var h=null;if(u!==void 0&&(h=""+u),c.key!==void 0&&(h=""+c.key),"key"in c){u={};for(var m in c)m!=="key"&&(u[m]=c[m])}else u=c;return c=u.ref,{$$typeof:n,type:i,key:h,ref:c!==void 0?c:null,props:u}}return Hn.Fragment=a,Hn.jsx=l,Hn.jsxs=l,Hn}var T0;function tv(){return T0||(T0=1,bu.exports=ev()),bu.exports}var s=tv(),ju={exports:{}},pe={};/**
 * @license React
 * react.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var R0;function sv(){if(R0)return pe;R0=1;var n=Symbol.for("react.transitional.element"),a=Symbol.for("react.portal"),l=Symbol.for("react.fragment"),i=Symbol.for("react.strict_mode"),c=Symbol.for("react.profiler"),u=Symbol.for("react.consumer"),h=Symbol.for("react.context"),m=Symbol.for("react.forward_ref"),x=Symbol.for("react.suspense"),g=Symbol.for("react.memo"),p=Symbol.for("react.lazy"),v=Symbol.iterator;function j(E){return E===null||typeof E!="object"?null:(E=v&&E[v]||E["@@iterator"],typeof E=="function"?E:null)}var w={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},N=Object.assign,_={};function C(E,I,F){this.props=E,this.context=I,this.refs=_,this.updater=F||w}C.prototype.isReactComponent={},C.prototype.setState=function(E,I){if(typeof E!="object"&&typeof E!="function"&&E!=null)throw Error("takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,E,I,"setState")},C.prototype.forceUpdate=function(E){this.updater.enqueueForceUpdate(this,E,"forceUpdate")};function O(){}O.prototype=C.prototype;function q(E,I,F){this.props=E,this.context=I,this.refs=_,this.updater=F||w}var L=q.prototype=new O;L.constructor=q,N(L,C.prototype),L.isPureReactComponent=!0;var z=Array.isArray,Q={H:null,A:null,T:null,S:null,V:null},H=Object.prototype.hasOwnProperty;function Y(E,I,F,Z,ie,Se){return F=Se.ref,{$$typeof:n,type:E,key:I,ref:F!==void 0?F:null,props:Se}}function se(E,I){return Y(E.type,I,void 0,void 0,void 0,E.props)}function K(E){return typeof E=="object"&&E!==null&&E.$$typeof===n}function ee(E){var I={"=":"=0",":":"=2"};return"$"+E.replace(/[=:]/g,function(F){return I[F]})}var he=/\/+/g;function xe(E,I){return typeof E=="object"&&E!==null&&E.key!=null?ee(""+E.key):I.toString(36)}function oe(){}function G(E){switch(E.status){case"fulfilled":return E.value;case"rejected":throw E.reason;default:switch(typeof E.status=="string"?E.then(oe,oe):(E.status="pending",E.then(function(I){E.status==="pending"&&(E.status="fulfilled",E.value=I)},function(I){E.status==="pending"&&(E.status="rejected",E.reason=I)})),E.status){case"fulfilled":return E.value;case"rejected":throw E.reason}}throw E}function X(E,I,F,Z,ie){var Se=typeof E;(Se==="undefined"||Se==="boolean")&&(E=null);var fe=!1;if(E===null)fe=!0;else switch(Se){case"bigint":case"string":case"number":fe=!0;break;case"object":switch(E.$$typeof){case n:case a:fe=!0;break;case p:return fe=E._init,X(fe(E._payload),I,F,Z,ie)}}if(fe)return ie=ie(E),fe=Z===""?"."+xe(E,0):Z,z(ie)?(F="",fe!=null&&(F=fe.replace(he,"$&/")+"/"),X(ie,I,F,"",function(As){return As})):ie!=null&&(K(ie)&&(ie=se(ie,F+(ie.key==null||E&&E.key===ie.key?"":(""+ie.key).replace(he,"$&/")+"/")+fe)),I.push(ie)),1;fe=0;var vt=Z===""?".":Z+":";if(z(E))for(var Le=0;Le<E.length;Le++)Z=E[Le],Se=vt+xe(Z,Le),fe+=X(Z,I,F,Se,ie);else if(Le=j(E),typeof Le=="function")for(E=Le.call(E),Le=0;!(Z=E.next()).done;)Z=Z.value,Se=vt+xe(Z,Le++),fe+=X(Z,I,F,Se,ie);else if(Se==="object"){if(typeof E.then=="function")return X(G(E),I,F,Z,ie);throw I=String(E),Error("Objects are not valid as a React child (found: "+(I==="[object Object]"?"object with keys {"+Object.keys(E).join(", ")+"}":I)+"). If you meant to render a collection of children, use an array instead.")}return fe}function R(E,I,F){if(E==null)return E;var Z=[],ie=0;return X(E,Z,"","",function(Se){return I.call(F,Se,ie++)}),Z}function W(E){if(E._status===-1){var I=E._result;I=I(),I.then(function(F){(E._status===0||E._status===-1)&&(E._status=1,E._result=F)},function(F){(E._status===0||E._status===-1)&&(E._status=2,E._result=F)}),E._status===-1&&(E._status=0,E._result=I)}if(E._status===1)return E._result.default;throw E._result}var J=typeof reportError=="function"?reportError:function(E){if(typeof window=="object"&&typeof window.ErrorEvent=="function"){var I=new window.ErrorEvent("error",{bubbles:!0,cancelable:!0,message:typeof E=="object"&&E!==null&&typeof E.message=="string"?String(E.message):String(E),error:E});if(!window.dispatchEvent(I))return}else if(typeof process=="object"&&typeof process.emit=="function"){process.emit("uncaughtException",E);return}console.error(E)};function ye(){}return pe.Children={map:R,forEach:function(E,I,F){R(E,function(){I.apply(this,arguments)},F)},count:function(E){var I=0;return R(E,function(){I++}),I},toArray:function(E){return R(E,function(I){return I})||[]},only:function(E){if(!K(E))throw Error("React.Children.only expected to receive a single React element child.");return E}},pe.Component=C,pe.Fragment=l,pe.Profiler=c,pe.PureComponent=q,pe.StrictMode=i,pe.Suspense=x,pe.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE=Q,pe.__COMPILER_RUNTIME={__proto__:null,c:function(E){return Q.H.useMemoCache(E)}},pe.cache=function(E){return function(){return E.apply(null,arguments)}},pe.cloneElement=function(E,I,F){if(E==null)throw Error("The argument must be a React element, but you passed "+E+".");var Z=N({},E.props),ie=E.key,Se=void 0;if(I!=null)for(fe in I.ref!==void 0&&(Se=void 0),I.key!==void 0&&(ie=""+I.key),I)!H.call(I,fe)||fe==="key"||fe==="__self"||fe==="__source"||fe==="ref"&&I.ref===void 0||(Z[fe]=I[fe]);var fe=arguments.length-2;if(fe===1)Z.children=F;else if(1<fe){for(var vt=Array(fe),Le=0;Le<fe;Le++)vt[Le]=arguments[Le+2];Z.children=vt}return Y(E.type,ie,void 0,void 0,Se,Z)},pe.createContext=function(E){return E={$$typeof:h,_currentValue:E,_currentValue2:E,_threadCount:0,Provider:null,Consumer:null},E.Provider=E,E.Consumer={$$typeof:u,_context:E},E},pe.createElement=function(E,I,F){var Z,ie={},Se=null;if(I!=null)for(Z in I.key!==void 0&&(Se=""+I.key),I)H.call(I,Z)&&Z!=="key"&&Z!=="__self"&&Z!=="__source"&&(ie[Z]=I[Z]);var fe=arguments.length-2;if(fe===1)ie.children=F;else if(1<fe){for(var vt=Array(fe),Le=0;Le<fe;Le++)vt[Le]=arguments[Le+2];ie.children=vt}if(E&&E.defaultProps)for(Z in fe=E.defaultProps,fe)ie[Z]===void 0&&(ie[Z]=fe[Z]);return Y(E,Se,void 0,void 0,null,ie)},pe.createRef=function(){return{current:null}},pe.forwardRef=function(E){return{$$typeof:m,render:E}},pe.isValidElement=K,pe.lazy=function(E){return{$$typeof:p,_payload:{_status:-1,_result:E},_init:W}},pe.memo=function(E,I){return{$$typeof:g,type:E,compare:I===void 0?null:I}},pe.startTransition=function(E){var I=Q.T,F={};Q.T=F;try{var Z=E(),ie=Q.S;ie!==null&&ie(F,Z),typeof Z=="object"&&Z!==null&&typeof Z.then=="function"&&Z.then(ye,J)}catch(Se){J(Se)}finally{Q.T=I}},pe.unstable_useCacheRefresh=function(){return Q.H.useCacheRefresh()},pe.use=function(E){return Q.H.use(E)},pe.useActionState=function(E,I,F){return Q.H.useActionState(E,I,F)},pe.useCallback=function(E,I){return Q.H.useCallback(E,I)},pe.useContext=function(E){return Q.H.useContext(E)},pe.useDebugValue=function(){},pe.useDeferredValue=function(E,I){return Q.H.useDeferredValue(E,I)},pe.useEffect=function(E,I,F){var Z=Q.H;if(typeof F=="function")throw Error("useEffect CRUD overload is not enabled in this build of React.");return Z.useEffect(E,I)},pe.useId=function(){return Q.H.useId()},pe.useImperativeHandle=function(E,I,F){return Q.H.useImperativeHandle(E,I,F)},pe.useInsertionEffect=function(E,I){return Q.H.useInsertionEffect(E,I)},pe.useLayoutEffect=function(E,I){return Q.H.useLayoutEffect(E,I)},pe.useMemo=function(E,I){return Q.H.useMemo(E,I)},pe.useOptimistic=function(E,I){return Q.H.useOptimistic(E,I)},pe.useReducer=function(E,I,F){return Q.H.useReducer(E,I,F)},pe.useRef=function(E){return Q.H.useRef(E)},pe.useState=function(E){return Q.H.useState(E)},pe.useSyncExternalStore=function(E,I,F){return Q.H.useSyncExternalStore(E,I,F)},pe.useTransition=function(){return Q.H.useTransition()},pe.version="19.1.1",pe}var O0;function gd(){return O0||(O0=1,ju.exports=sv()),ju.exports}var S=gd();const as=md(S);var wu={exports:{}},Gn={},_u={exports:{}},Nu={};/**
 * @license React
 * scheduler.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var D0;function av(){return D0||(D0=1,(function(n){function a(R,W){var J=R.length;R.push(W);e:for(;0<J;){var ye=J-1>>>1,E=R[ye];if(0<c(E,W))R[ye]=W,R[J]=E,J=ye;else break e}}function l(R){return R.length===0?null:R[0]}function i(R){if(R.length===0)return null;var W=R[0],J=R.pop();if(J!==W){R[0]=J;e:for(var ye=0,E=R.length,I=E>>>1;ye<I;){var F=2*(ye+1)-1,Z=R[F],ie=F+1,Se=R[ie];if(0>c(Z,J))ie<E&&0>c(Se,Z)?(R[ye]=Se,R[ie]=J,ye=ie):(R[ye]=Z,R[F]=J,ye=F);else if(ie<E&&0>c(Se,J))R[ye]=Se,R[ie]=J,ye=ie;else break e}}return W}function c(R,W){var J=R.sortIndex-W.sortIndex;return J!==0?J:R.id-W.id}if(n.unstable_now=void 0,typeof performance=="object"&&typeof performance.now=="function"){var u=performance;n.unstable_now=function(){return u.now()}}else{var h=Date,m=h.now();n.unstable_now=function(){return h.now()-m}}var x=[],g=[],p=1,v=null,j=3,w=!1,N=!1,_=!1,C=!1,O=typeof setTimeout=="function"?setTimeout:null,q=typeof clearTimeout=="function"?clearTimeout:null,L=typeof setImmediate<"u"?setImmediate:null;function z(R){for(var W=l(g);W!==null;){if(W.callback===null)i(g);else if(W.startTime<=R)i(g),W.sortIndex=W.expirationTime,a(x,W);else break;W=l(g)}}function Q(R){if(_=!1,z(R),!N)if(l(x)!==null)N=!0,H||(H=!0,xe());else{var W=l(g);W!==null&&X(Q,W.startTime-R)}}var H=!1,Y=-1,se=5,K=-1;function ee(){return C?!0:!(n.unstable_now()-K<se)}function he(){if(C=!1,H){var R=n.unstable_now();K=R;var W=!0;try{e:{N=!1,_&&(_=!1,q(Y),Y=-1),w=!0;var J=j;try{t:{for(z(R),v=l(x);v!==null&&!(v.expirationTime>R&&ee());){var ye=v.callback;if(typeof ye=="function"){v.callback=null,j=v.priorityLevel;var E=ye(v.expirationTime<=R);if(R=n.unstable_now(),typeof E=="function"){v.callback=E,z(R),W=!0;break t}v===l(x)&&i(x),z(R)}else i(x);v=l(x)}if(v!==null)W=!0;else{var I=l(g);I!==null&&X(Q,I.startTime-R),W=!1}}break e}finally{v=null,j=J,w=!1}W=void 0}}finally{W?xe():H=!1}}}var xe;if(typeof L=="function")xe=function(){L(he)};else if(typeof MessageChannel<"u"){var oe=new MessageChannel,G=oe.port2;oe.port1.onmessage=he,xe=function(){G.postMessage(null)}}else xe=function(){O(he,0)};function X(R,W){Y=O(function(){R(n.unstable_now())},W)}n.unstable_IdlePriority=5,n.unstable_ImmediatePriority=1,n.unstable_LowPriority=4,n.unstable_NormalPriority=3,n.unstable_Profiling=null,n.unstable_UserBlockingPriority=2,n.unstable_cancelCallback=function(R){R.callback=null},n.unstable_forceFrameRate=function(R){0>R||125<R?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):se=0<R?Math.floor(1e3/R):5},n.unstable_getCurrentPriorityLevel=function(){return j},n.unstable_next=function(R){switch(j){case 1:case 2:case 3:var W=3;break;default:W=j}var J=j;j=W;try{return R()}finally{j=J}},n.unstable_requestPaint=function(){C=!0},n.unstable_runWithPriority=function(R,W){switch(R){case 1:case 2:case 3:case 4:case 5:break;default:R=3}var J=j;j=R;try{return W()}finally{j=J}},n.unstable_scheduleCallback=function(R,W,J){var ye=n.unstable_now();switch(typeof J=="object"&&J!==null?(J=J.delay,J=typeof J=="number"&&0<J?ye+J:ye):J=ye,R){case 1:var E=-1;break;case 2:E=250;break;case 5:E=1073741823;break;case 4:E=1e4;break;default:E=5e3}return E=J+E,R={id:p++,callback:W,priorityLevel:R,startTime:J,expirationTime:E,sortIndex:-1},J>ye?(R.sortIndex=J,a(g,R),l(x)===null&&R===l(g)&&(_?(q(Y),Y=-1):_=!0,X(Q,J-ye))):(R.sortIndex=E,a(x,R),N||w||(N=!0,H||(H=!0,xe()))),R},n.unstable_shouldYield=ee,n.unstable_wrapCallback=function(R){var W=j;return function(){var J=j;j=W;try{return R.apply(this,arguments)}finally{j=J}}}})(Nu)),Nu}var M0;function rv(){return M0||(M0=1,_u.exports=av()),_u.exports}var Su={exports:{}},ot={};/**
 * @license React
 * react-dom.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var U0;function nv(){if(U0)return ot;U0=1;var n=gd();function a(x){var g="https://react.dev/errors/"+x;if(1<arguments.length){g+="?args[]="+encodeURIComponent(arguments[1]);for(var p=2;p<arguments.length;p++)g+="&args[]="+encodeURIComponent(arguments[p])}return"Minified React error #"+x+"; visit "+g+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}function l(){}var i={d:{f:l,r:function(){throw Error(a(522))},D:l,C:l,L:l,m:l,X:l,S:l,M:l},p:0,findDOMNode:null},c=Symbol.for("react.portal");function u(x,g,p){var v=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:c,key:v==null?null:""+v,children:x,containerInfo:g,implementation:p}}var h=n.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE;function m(x,g){if(x==="font")return"";if(typeof g=="string")return g==="use-credentials"?g:""}return ot.__DOM_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE=i,ot.createPortal=function(x,g){var p=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!g||g.nodeType!==1&&g.nodeType!==9&&g.nodeType!==11)throw Error(a(299));return u(x,g,null,p)},ot.flushSync=function(x){var g=h.T,p=i.p;try{if(h.T=null,i.p=2,x)return x()}finally{h.T=g,i.p=p,i.d.f()}},ot.preconnect=function(x,g){typeof x=="string"&&(g?(g=g.crossOrigin,g=typeof g=="string"?g==="use-credentials"?g:"":void 0):g=null,i.d.C(x,g))},ot.prefetchDNS=function(x){typeof x=="string"&&i.d.D(x)},ot.preinit=function(x,g){if(typeof x=="string"&&g&&typeof g.as=="string"){var p=g.as,v=m(p,g.crossOrigin),j=typeof g.integrity=="string"?g.integrity:void 0,w=typeof g.fetchPriority=="string"?g.fetchPriority:void 0;p==="style"?i.d.S(x,typeof g.precedence=="string"?g.precedence:void 0,{crossOrigin:v,integrity:j,fetchPriority:w}):p==="script"&&i.d.X(x,{crossOrigin:v,integrity:j,fetchPriority:w,nonce:typeof g.nonce=="string"?g.nonce:void 0})}},ot.preinitModule=function(x,g){if(typeof x=="string")if(typeof g=="object"&&g!==null){if(g.as==null||g.as==="script"){var p=m(g.as,g.crossOrigin);i.d.M(x,{crossOrigin:p,integrity:typeof g.integrity=="string"?g.integrity:void 0,nonce:typeof g.nonce=="string"?g.nonce:void 0})}}else g==null&&i.d.M(x)},ot.preload=function(x,g){if(typeof x=="string"&&typeof g=="object"&&g!==null&&typeof g.as=="string"){var p=g.as,v=m(p,g.crossOrigin);i.d.L(x,p,{crossOrigin:v,integrity:typeof g.integrity=="string"?g.integrity:void 0,nonce:typeof g.nonce=="string"?g.nonce:void 0,type:typeof g.type=="string"?g.type:void 0,fetchPriority:typeof g.fetchPriority=="string"?g.fetchPriority:void 0,referrerPolicy:typeof g.referrerPolicy=="string"?g.referrerPolicy:void 0,imageSrcSet:typeof g.imageSrcSet=="string"?g.imageSrcSet:void 0,imageSizes:typeof g.imageSizes=="string"?g.imageSizes:void 0,media:typeof g.media=="string"?g.media:void 0})}},ot.preloadModule=function(x,g){if(typeof x=="string")if(g){var p=m(g.as,g.crossOrigin);i.d.m(x,{as:typeof g.as=="string"&&g.as!=="script"?g.as:void 0,crossOrigin:p,integrity:typeof g.integrity=="string"?g.integrity:void 0})}else i.d.m(x)},ot.requestFormReset=function(x){i.d.r(x)},ot.unstable_batchedUpdates=function(x,g){return x(g)},ot.useFormState=function(x,g,p){return h.H.useFormState(x,g,p)},ot.useFormStatus=function(){return h.H.useHostTransitionStatus()},ot.version="19.1.1",ot}var P0;function lv(){if(P0)return Su.exports;P0=1;function n(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(n)}catch(a){console.error(a)}}return n(),Su.exports=nv(),Su.exports}/**
 * @license React
 * react-dom-client.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var L0;function iv(){if(L0)return Gn;L0=1;var n=rv(),a=gd(),l=lv();function i(e){var t="https://react.dev/errors/"+e;if(1<arguments.length){t+="?args[]="+encodeURIComponent(arguments[1]);for(var r=2;r<arguments.length;r++)t+="&args[]="+encodeURIComponent(arguments[r])}return"Minified React error #"+e+"; visit "+t+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}function c(e){return!(!e||e.nodeType!==1&&e.nodeType!==9&&e.nodeType!==11)}function u(e){var t=e,r=e;if(e.alternate)for(;t.return;)t=t.return;else{e=t;do t=e,(t.flags&4098)!==0&&(r=t.return),e=t.return;while(e)}return t.tag===3?r:null}function h(e){if(e.tag===13){var t=e.memoizedState;if(t===null&&(e=e.alternate,e!==null&&(t=e.memoizedState)),t!==null)return t.dehydrated}return null}function m(e){if(u(e)!==e)throw Error(i(188))}function x(e){var t=e.alternate;if(!t){if(t=u(e),t===null)throw Error(i(188));return t!==e?null:e}for(var r=e,o=t;;){var d=r.return;if(d===null)break;var f=d.alternate;if(f===null){if(o=d.return,o!==null){r=o;continue}break}if(d.child===f.child){for(f=d.child;f;){if(f===r)return m(d),e;if(f===o)return m(d),t;f=f.sibling}throw Error(i(188))}if(r.return!==o.return)r=d,o=f;else{for(var y=!1,b=d.child;b;){if(b===r){y=!0,r=d,o=f;break}if(b===o){y=!0,o=d,r=f;break}b=b.sibling}if(!y){for(b=f.child;b;){if(b===r){y=!0,r=f,o=d;break}if(b===o){y=!0,o=f,r=d;break}b=b.sibling}if(!y)throw Error(i(189))}}if(r.alternate!==o)throw Error(i(190))}if(r.tag!==3)throw Error(i(188));return r.stateNode.current===r?e:t}function g(e){var t=e.tag;if(t===5||t===26||t===27||t===6)return e;for(e=e.child;e!==null;){if(t=g(e),t!==null)return t;e=e.sibling}return null}var p=Object.assign,v=Symbol.for("react.element"),j=Symbol.for("react.transitional.element"),w=Symbol.for("react.portal"),N=Symbol.for("react.fragment"),_=Symbol.for("react.strict_mode"),C=Symbol.for("react.profiler"),O=Symbol.for("react.provider"),q=Symbol.for("react.consumer"),L=Symbol.for("react.context"),z=Symbol.for("react.forward_ref"),Q=Symbol.for("react.suspense"),H=Symbol.for("react.suspense_list"),Y=Symbol.for("react.memo"),se=Symbol.for("react.lazy"),K=Symbol.for("react.activity"),ee=Symbol.for("react.memo_cache_sentinel"),he=Symbol.iterator;function xe(e){return e===null||typeof e!="object"?null:(e=he&&e[he]||e["@@iterator"],typeof e=="function"?e:null)}var oe=Symbol.for("react.client.reference");function G(e){if(e==null)return null;if(typeof e=="function")return e.$$typeof===oe?null:e.displayName||e.name||null;if(typeof e=="string")return e;switch(e){case N:return"Fragment";case C:return"Profiler";case _:return"StrictMode";case Q:return"Suspense";case H:return"SuspenseList";case K:return"Activity"}if(typeof e=="object")switch(e.$$typeof){case w:return"Portal";case L:return(e.displayName||"Context")+".Provider";case q:return(e._context.displayName||"Context")+".Consumer";case z:var t=e.render;return e=e.displayName,e||(e=t.displayName||t.name||"",e=e!==""?"ForwardRef("+e+")":"ForwardRef"),e;case Y:return t=e.displayName||null,t!==null?t:G(e.type)||"Memo";case se:t=e._payload,e=e._init;try{return G(e(t))}catch{}}return null}var X=Array.isArray,R=a.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,W=l.__DOM_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,J={pending:!1,data:null,method:null,action:null},ye=[],E=-1;function I(e){return{current:e}}function F(e){0>E||(e.current=ye[E],ye[E]=null,E--)}function Z(e,t){E++,ye[E]=e.current,e.current=t}var ie=I(null),Se=I(null),fe=I(null),vt=I(null);function Le(e,t){switch(Z(fe,t),Z(Se,e),Z(ie,null),t.nodeType){case 9:case 11:e=(e=t.documentElement)&&(e=e.namespaceURI)?a0(e):0;break;default:if(e=t.tagName,t=t.namespaceURI)t=a0(t),e=r0(t,e);else switch(e){case"svg":e=1;break;case"math":e=2;break;default:e=0}}F(ie),Z(ie,e)}function As(){F(ie),F(Se),F(fe)}function ro(e){e.memoizedState!==null&&Z(vt,e);var t=ie.current,r=r0(t,e.type);t!==r&&(Z(Se,e),Z(ie,r))}function ul(e){Se.current===e&&(F(ie),F(Se)),vt.current===e&&(F(vt),Ln._currentValue=J)}var no=Object.prototype.hasOwnProperty,lo=n.unstable_scheduleCallback,io=n.unstable_cancelCallback,Rx=n.unstable_shouldYield,Ox=n.unstable_requestPaint,Kt=n.unstable_now,Dx=n.unstable_getCurrentPriorityLevel,Pd=n.unstable_ImmediatePriority,Ld=n.unstable_UserBlockingPriority,dl=n.unstable_NormalPriority,Mx=n.unstable_LowPriority,qd=n.unstable_IdlePriority,Ux=n.log,Px=n.unstable_setDisableYieldValue,Vr=null,bt=null;function Ts(e){if(typeof Ux=="function"&&Px(e),bt&&typeof bt.setStrictMode=="function")try{bt.setStrictMode(Vr,e)}catch{}}var jt=Math.clz32?Math.clz32:zx,Lx=Math.log,qx=Math.LN2;function zx(e){return e>>>=0,e===0?32:31-(Lx(e)/qx|0)|0}var hl=256,fl=4194304;function oa(e){var t=e&42;if(t!==0)return t;switch(e&-e){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:return 64;case 128:return 128;case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return e&4194048;case 4194304:case 8388608:case 16777216:case 33554432:return e&62914560;case 67108864:return 67108864;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 0;default:return e}}function ml(e,t,r){var o=e.pendingLanes;if(o===0)return 0;var d=0,f=e.suspendedLanes,y=e.pingedLanes;e=e.warmLanes;var b=o&134217727;return b!==0?(o=b&~f,o!==0?d=oa(o):(y&=b,y!==0?d=oa(y):r||(r=b&~e,r!==0&&(d=oa(r))))):(b=o&~f,b!==0?d=oa(b):y!==0?d=oa(y):r||(r=o&~e,r!==0&&(d=oa(r)))),d===0?0:t!==0&&t!==d&&(t&f)===0&&(f=d&-d,r=t&-t,f>=r||f===32&&(r&4194048)!==0)?t:d}function Qr(e,t){return(e.pendingLanes&~(e.suspendedLanes&~e.pingedLanes)&t)===0}function $x(e,t){switch(e){case 1:case 2:case 4:case 8:case 64:return t+250;case 16:case 32:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return t+5e3;case 4194304:case 8388608:case 16777216:case 33554432:return-1;case 67108864:case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function zd(){var e=hl;return hl<<=1,(hl&4194048)===0&&(hl=256),e}function $d(){var e=fl;return fl<<=1,(fl&62914560)===0&&(fl=4194304),e}function oo(e){for(var t=[],r=0;31>r;r++)t.push(e);return t}function Yr(e,t){e.pendingLanes|=t,t!==268435456&&(e.suspendedLanes=0,e.pingedLanes=0,e.warmLanes=0)}function Bx(e,t,r,o,d,f){var y=e.pendingLanes;e.pendingLanes=r,e.suspendedLanes=0,e.pingedLanes=0,e.warmLanes=0,e.expiredLanes&=r,e.entangledLanes&=r,e.errorRecoveryDisabledLanes&=r,e.shellSuspendCounter=0;var b=e.entanglements,k=e.expirationTimes,M=e.hiddenUpdates;for(r=y&~r;0<r;){var $=31-jt(r),V=1<<$;b[$]=0,k[$]=-1;var U=M[$];if(U!==null)for(M[$]=null,$=0;$<U.length;$++){var P=U[$];P!==null&&(P.lane&=-536870913)}r&=~V}o!==0&&Bd(e,o,0),f!==0&&d===0&&e.tag!==0&&(e.suspendedLanes|=f&~(y&~t))}function Bd(e,t,r){e.pendingLanes|=t,e.suspendedLanes&=~t;var o=31-jt(t);e.entangledLanes|=t,e.entanglements[o]=e.entanglements[o]|1073741824|r&4194090}function Hd(e,t){var r=e.entangledLanes|=t;for(e=e.entanglements;r;){var o=31-jt(r),d=1<<o;d&t|e[o]&t&&(e[o]|=t),r&=~d}}function co(e){switch(e){case 2:e=1;break;case 8:e=4;break;case 32:e=16;break;case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:e=128;break;case 268435456:e=134217728;break;default:e=0}return e}function uo(e){return e&=-e,2<e?8<e?(e&134217727)!==0?32:268435456:8:2}function Gd(){var e=W.p;return e!==0?e:(e=window.event,e===void 0?32:_0(e.type))}function Hx(e,t){var r=W.p;try{return W.p=e,t()}finally{W.p=r}}var Rs=Math.random().toString(36).slice(2),lt="__reactFiber$"+Rs,ht="__reactProps$"+Rs,Pa="__reactContainer$"+Rs,ho="__reactEvents$"+Rs,Gx="__reactListeners$"+Rs,Vx="__reactHandles$"+Rs,Vd="__reactResources$"+Rs,Fr="__reactMarker$"+Rs;function fo(e){delete e[lt],delete e[ht],delete e[ho],delete e[Gx],delete e[Vx]}function La(e){var t=e[lt];if(t)return t;for(var r=e.parentNode;r;){if(t=r[Pa]||r[lt]){if(r=t.alternate,t.child!==null||r!==null&&r.child!==null)for(e=o0(e);e!==null;){if(r=e[lt])return r;e=o0(e)}return t}e=r,r=e.parentNode}return null}function qa(e){if(e=e[lt]||e[Pa]){var t=e.tag;if(t===5||t===6||t===13||t===26||t===27||t===3)return e}return null}function Ir(e){var t=e.tag;if(t===5||t===26||t===27||t===6)return e.stateNode;throw Error(i(33))}function za(e){var t=e[Vd];return t||(t=e[Vd]={hoistableStyles:new Map,hoistableScripts:new Map}),t}function Ze(e){e[Fr]=!0}var Qd=new Set,Yd={};function ca(e,t){$a(e,t),$a(e+"Capture",t)}function $a(e,t){for(Yd[e]=t,e=0;e<t.length;e++)Qd.add(t[e])}var Qx=RegExp("^[:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD][:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD\\-.0-9\\u00B7\\u0300-\\u036F\\u203F-\\u2040]*$"),Fd={},Id={};function Yx(e){return no.call(Id,e)?!0:no.call(Fd,e)?!1:Qx.test(e)?Id[e]=!0:(Fd[e]=!0,!1)}function gl(e,t,r){if(Yx(t))if(r===null)e.removeAttribute(t);else{switch(typeof r){case"undefined":case"function":case"symbol":e.removeAttribute(t);return;case"boolean":var o=t.toLowerCase().slice(0,5);if(o!=="data-"&&o!=="aria-"){e.removeAttribute(t);return}}e.setAttribute(t,""+r)}}function xl(e,t,r){if(r===null)e.removeAttribute(t);else{switch(typeof r){case"undefined":case"function":case"symbol":case"boolean":e.removeAttribute(t);return}e.setAttribute(t,""+r)}}function is(e,t,r,o){if(o===null)e.removeAttribute(r);else{switch(typeof o){case"undefined":case"function":case"symbol":case"boolean":e.removeAttribute(r);return}e.setAttributeNS(t,r,""+o)}}var mo,Kd;function Ba(e){if(mo===void 0)try{throw Error()}catch(r){var t=r.stack.trim().match(/\n( *(at )?)/);mo=t&&t[1]||"",Kd=-1<r.stack.indexOf(`
    at`)?" (<anonymous>)":-1<r.stack.indexOf("@")?"@unknown:0:0":""}return`
`+mo+e+Kd}var go=!1;function xo(e,t){if(!e||go)return"";go=!0;var r=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{var o={DetermineComponentFrameRoot:function(){try{if(t){var V=function(){throw Error()};if(Object.defineProperty(V.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(V,[])}catch(P){var U=P}Reflect.construct(e,[],V)}else{try{V.call()}catch(P){U=P}e.call(V.prototype)}}else{try{throw Error()}catch(P){U=P}(V=e())&&typeof V.catch=="function"&&V.catch(function(){})}}catch(P){if(P&&U&&typeof P.stack=="string")return[P.stack,U.stack]}return[null,null]}};o.DetermineComponentFrameRoot.displayName="DetermineComponentFrameRoot";var d=Object.getOwnPropertyDescriptor(o.DetermineComponentFrameRoot,"name");d&&d.configurable&&Object.defineProperty(o.DetermineComponentFrameRoot,"name",{value:"DetermineComponentFrameRoot"});var f=o.DetermineComponentFrameRoot(),y=f[0],b=f[1];if(y&&b){var k=y.split(`
`),M=b.split(`
`);for(d=o=0;o<k.length&&!k[o].includes("DetermineComponentFrameRoot");)o++;for(;d<M.length&&!M[d].includes("DetermineComponentFrameRoot");)d++;if(o===k.length||d===M.length)for(o=k.length-1,d=M.length-1;1<=o&&0<=d&&k[o]!==M[d];)d--;for(;1<=o&&0<=d;o--,d--)if(k[o]!==M[d]){if(o!==1||d!==1)do if(o--,d--,0>d||k[o]!==M[d]){var $=`
`+k[o].replace(" at new "," at ");return e.displayName&&$.includes("<anonymous>")&&($=$.replace("<anonymous>",e.displayName)),$}while(1<=o&&0<=d);break}}}finally{go=!1,Error.prepareStackTrace=r}return(r=e?e.displayName||e.name:"")?Ba(r):""}function Fx(e){switch(e.tag){case 26:case 27:case 5:return Ba(e.type);case 16:return Ba("Lazy");case 13:return Ba("Suspense");case 19:return Ba("SuspenseList");case 0:case 15:return xo(e.type,!1);case 11:return xo(e.type.render,!1);case 1:return xo(e.type,!0);case 31:return Ba("Activity");default:return""}}function Xd(e){try{var t="";do t+=Fx(e),e=e.return;while(e);return t}catch(r){return`
Error generating stack: `+r.message+`
`+r.stack}}function At(e){switch(typeof e){case"bigint":case"boolean":case"number":case"string":case"undefined":return e;case"object":return e;default:return""}}function Zd(e){var t=e.type;return(e=e.nodeName)&&e.toLowerCase()==="input"&&(t==="checkbox"||t==="radio")}function Ix(e){var t=Zd(e)?"checked":"value",r=Object.getOwnPropertyDescriptor(e.constructor.prototype,t),o=""+e[t];if(!e.hasOwnProperty(t)&&typeof r<"u"&&typeof r.get=="function"&&typeof r.set=="function"){var d=r.get,f=r.set;return Object.defineProperty(e,t,{configurable:!0,get:function(){return d.call(this)},set:function(y){o=""+y,f.call(this,y)}}),Object.defineProperty(e,t,{enumerable:r.enumerable}),{getValue:function(){return o},setValue:function(y){o=""+y},stopTracking:function(){e._valueTracker=null,delete e[t]}}}}function pl(e){e._valueTracker||(e._valueTracker=Ix(e))}function Jd(e){if(!e)return!1;var t=e._valueTracker;if(!t)return!0;var r=t.getValue(),o="";return e&&(o=Zd(e)?e.checked?"true":"false":e.value),e=o,e!==r?(t.setValue(e),!0):!1}function yl(e){if(e=e||(typeof document<"u"?document:void 0),typeof e>"u")return null;try{return e.activeElement||e.body}catch{return e.body}}var Kx=/[\n"\\]/g;function Tt(e){return e.replace(Kx,function(t){return"\\"+t.charCodeAt(0).toString(16)+" "})}function po(e,t,r,o,d,f,y,b){e.name="",y!=null&&typeof y!="function"&&typeof y!="symbol"&&typeof y!="boolean"?e.type=y:e.removeAttribute("type"),t!=null?y==="number"?(t===0&&e.value===""||e.value!=t)&&(e.value=""+At(t)):e.value!==""+At(t)&&(e.value=""+At(t)):y!=="submit"&&y!=="reset"||e.removeAttribute("value"),t!=null?yo(e,y,At(t)):r!=null?yo(e,y,At(r)):o!=null&&e.removeAttribute("value"),d==null&&f!=null&&(e.defaultChecked=!!f),d!=null&&(e.checked=d&&typeof d!="function"&&typeof d!="symbol"),b!=null&&typeof b!="function"&&typeof b!="symbol"&&typeof b!="boolean"?e.name=""+At(b):e.removeAttribute("name")}function Wd(e,t,r,o,d,f,y,b){if(f!=null&&typeof f!="function"&&typeof f!="symbol"&&typeof f!="boolean"&&(e.type=f),t!=null||r!=null){if(!(f!=="submit"&&f!=="reset"||t!=null))return;r=r!=null?""+At(r):"",t=t!=null?""+At(t):r,b||t===e.value||(e.value=t),e.defaultValue=t}o=o??d,o=typeof o!="function"&&typeof o!="symbol"&&!!o,e.checked=b?e.checked:!!o,e.defaultChecked=!!o,y!=null&&typeof y!="function"&&typeof y!="symbol"&&typeof y!="boolean"&&(e.name=y)}function yo(e,t,r){t==="number"&&yl(e.ownerDocument)===e||e.defaultValue===""+r||(e.defaultValue=""+r)}function Ha(e,t,r,o){if(e=e.options,t){t={};for(var d=0;d<r.length;d++)t["$"+r[d]]=!0;for(r=0;r<e.length;r++)d=t.hasOwnProperty("$"+e[r].value),e[r].selected!==d&&(e[r].selected=d),d&&o&&(e[r].defaultSelected=!0)}else{for(r=""+At(r),t=null,d=0;d<e.length;d++){if(e[d].value===r){e[d].selected=!0,o&&(e[d].defaultSelected=!0);return}t!==null||e[d].disabled||(t=e[d])}t!==null&&(t.selected=!0)}}function eh(e,t,r){if(t!=null&&(t=""+At(t),t!==e.value&&(e.value=t),r==null)){e.defaultValue!==t&&(e.defaultValue=t);return}e.defaultValue=r!=null?""+At(r):""}function th(e,t,r,o){if(t==null){if(o!=null){if(r!=null)throw Error(i(92));if(X(o)){if(1<o.length)throw Error(i(93));o=o[0]}r=o}r==null&&(r=""),t=r}r=At(t),e.defaultValue=r,o=e.textContent,o===r&&o!==""&&o!==null&&(e.value=o)}function Ga(e,t){if(t){var r=e.firstChild;if(r&&r===e.lastChild&&r.nodeType===3){r.nodeValue=t;return}}e.textContent=t}var Xx=new Set("animationIterationCount aspectRatio borderImageOutset borderImageSlice borderImageWidth boxFlex boxFlexGroup boxOrdinalGroup columnCount columns flex flexGrow flexPositive flexShrink flexNegative flexOrder gridArea gridRow gridRowEnd gridRowSpan gridRowStart gridColumn gridColumnEnd gridColumnSpan gridColumnStart fontWeight lineClamp lineHeight opacity order orphans scale tabSize widows zIndex zoom fillOpacity floodOpacity stopOpacity strokeDasharray strokeDashoffset strokeMiterlimit strokeOpacity strokeWidth MozAnimationIterationCount MozBoxFlex MozBoxFlexGroup MozLineClamp msAnimationIterationCount msFlex msZoom msFlexGrow msFlexNegative msFlexOrder msFlexPositive msFlexShrink msGridColumn msGridColumnSpan msGridRow msGridRowSpan WebkitAnimationIterationCount WebkitBoxFlex WebKitBoxFlexGroup WebkitBoxOrdinalGroup WebkitColumnCount WebkitColumns WebkitFlex WebkitFlexGrow WebkitFlexPositive WebkitFlexShrink WebkitLineClamp".split(" "));function sh(e,t,r){var o=t.indexOf("--")===0;r==null||typeof r=="boolean"||r===""?o?e.setProperty(t,""):t==="float"?e.cssFloat="":e[t]="":o?e.setProperty(t,r):typeof r!="number"||r===0||Xx.has(t)?t==="float"?e.cssFloat=r:e[t]=(""+r).trim():e[t]=r+"px"}function ah(e,t,r){if(t!=null&&typeof t!="object")throw Error(i(62));if(e=e.style,r!=null){for(var o in r)!r.hasOwnProperty(o)||t!=null&&t.hasOwnProperty(o)||(o.indexOf("--")===0?e.setProperty(o,""):o==="float"?e.cssFloat="":e[o]="");for(var d in t)o=t[d],t.hasOwnProperty(d)&&r[d]!==o&&sh(e,d,o)}else for(var f in t)t.hasOwnProperty(f)&&sh(e,f,t[f])}function vo(e){if(e.indexOf("-")===-1)return!1;switch(e){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var Zx=new Map([["acceptCharset","accept-charset"],["htmlFor","for"],["httpEquiv","http-equiv"],["crossOrigin","crossorigin"],["accentHeight","accent-height"],["alignmentBaseline","alignment-baseline"],["arabicForm","arabic-form"],["baselineShift","baseline-shift"],["capHeight","cap-height"],["clipPath","clip-path"],["clipRule","clip-rule"],["colorInterpolation","color-interpolation"],["colorInterpolationFilters","color-interpolation-filters"],["colorProfile","color-profile"],["colorRendering","color-rendering"],["dominantBaseline","dominant-baseline"],["enableBackground","enable-background"],["fillOpacity","fill-opacity"],["fillRule","fill-rule"],["floodColor","flood-color"],["floodOpacity","flood-opacity"],["fontFamily","font-family"],["fontSize","font-size"],["fontSizeAdjust","font-size-adjust"],["fontStretch","font-stretch"],["fontStyle","font-style"],["fontVariant","font-variant"],["fontWeight","font-weight"],["glyphName","glyph-name"],["glyphOrientationHorizontal","glyph-orientation-horizontal"],["glyphOrientationVertical","glyph-orientation-vertical"],["horizAdvX","horiz-adv-x"],["horizOriginX","horiz-origin-x"],["imageRendering","image-rendering"],["letterSpacing","letter-spacing"],["lightingColor","lighting-color"],["markerEnd","marker-end"],["markerMid","marker-mid"],["markerStart","marker-start"],["overlinePosition","overline-position"],["overlineThickness","overline-thickness"],["paintOrder","paint-order"],["panose-1","panose-1"],["pointerEvents","pointer-events"],["renderingIntent","rendering-intent"],["shapeRendering","shape-rendering"],["stopColor","stop-color"],["stopOpacity","stop-opacity"],["strikethroughPosition","strikethrough-position"],["strikethroughThickness","strikethrough-thickness"],["strokeDasharray","stroke-dasharray"],["strokeDashoffset","stroke-dashoffset"],["strokeLinecap","stroke-linecap"],["strokeLinejoin","stroke-linejoin"],["strokeMiterlimit","stroke-miterlimit"],["strokeOpacity","stroke-opacity"],["strokeWidth","stroke-width"],["textAnchor","text-anchor"],["textDecoration","text-decoration"],["textRendering","text-rendering"],["transformOrigin","transform-origin"],["underlinePosition","underline-position"],["underlineThickness","underline-thickness"],["unicodeBidi","unicode-bidi"],["unicodeRange","unicode-range"],["unitsPerEm","units-per-em"],["vAlphabetic","v-alphabetic"],["vHanging","v-hanging"],["vIdeographic","v-ideographic"],["vMathematical","v-mathematical"],["vectorEffect","vector-effect"],["vertAdvY","vert-adv-y"],["vertOriginX","vert-origin-x"],["vertOriginY","vert-origin-y"],["wordSpacing","word-spacing"],["writingMode","writing-mode"],["xmlnsXlink","xmlns:xlink"],["xHeight","x-height"]]),Jx=/^[\u0000-\u001F ]*j[\r\n\t]*a[\r\n\t]*v[\r\n\t]*a[\r\n\t]*s[\r\n\t]*c[\r\n\t]*r[\r\n\t]*i[\r\n\t]*p[\r\n\t]*t[\r\n\t]*:/i;function vl(e){return Jx.test(""+e)?"javascript:throw new Error('React has blocked a javascript: URL as a security precaution.')":e}var bo=null;function jo(e){return e=e.target||e.srcElement||window,e.correspondingUseElement&&(e=e.correspondingUseElement),e.nodeType===3?e.parentNode:e}var Va=null,Qa=null;function rh(e){var t=qa(e);if(t&&(e=t.stateNode)){var r=e[ht]||null;e:switch(e=t.stateNode,t.type){case"input":if(po(e,r.value,r.defaultValue,r.defaultValue,r.checked,r.defaultChecked,r.type,r.name),t=r.name,r.type==="radio"&&t!=null){for(r=e;r.parentNode;)r=r.parentNode;for(r=r.querySelectorAll('input[name="'+Tt(""+t)+'"][type="radio"]'),t=0;t<r.length;t++){var o=r[t];if(o!==e&&o.form===e.form){var d=o[ht]||null;if(!d)throw Error(i(90));po(o,d.value,d.defaultValue,d.defaultValue,d.checked,d.defaultChecked,d.type,d.name)}}for(t=0;t<r.length;t++)o=r[t],o.form===e.form&&Jd(o)}break e;case"textarea":eh(e,r.value,r.defaultValue);break e;case"select":t=r.value,t!=null&&Ha(e,!!r.multiple,t,!1)}}}var wo=!1;function nh(e,t,r){if(wo)return e(t,r);wo=!0;try{var o=e(t);return o}finally{if(wo=!1,(Va!==null||Qa!==null)&&(ri(),Va&&(t=Va,e=Qa,Qa=Va=null,rh(t),e)))for(t=0;t<e.length;t++)rh(e[t])}}function Kr(e,t){var r=e.stateNode;if(r===null)return null;var o=r[ht]||null;if(o===null)return null;r=o[t];e:switch(t){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(o=!o.disabled)||(e=e.type,o=!(e==="button"||e==="input"||e==="select"||e==="textarea")),e=!o;break e;default:e=!1}if(e)return null;if(r&&typeof r!="function")throw Error(i(231,t,typeof r));return r}var os=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),_o=!1;if(os)try{var Xr={};Object.defineProperty(Xr,"passive",{get:function(){_o=!0}}),window.addEventListener("test",Xr,Xr),window.removeEventListener("test",Xr,Xr)}catch{_o=!1}var Os=null,No=null,bl=null;function lh(){if(bl)return bl;var e,t=No,r=t.length,o,d="value"in Os?Os.value:Os.textContent,f=d.length;for(e=0;e<r&&t[e]===d[e];e++);var y=r-e;for(o=1;o<=y&&t[r-o]===d[f-o];o++);return bl=d.slice(e,1<o?1-o:void 0)}function jl(e){var t=e.keyCode;return"charCode"in e?(e=e.charCode,e===0&&t===13&&(e=13)):e=t,e===10&&(e=13),32<=e||e===13?e:0}function wl(){return!0}function ih(){return!1}function ft(e){function t(r,o,d,f,y){this._reactName=r,this._targetInst=d,this.type=o,this.nativeEvent=f,this.target=y,this.currentTarget=null;for(var b in e)e.hasOwnProperty(b)&&(r=e[b],this[b]=r?r(f):f[b]);return this.isDefaultPrevented=(f.defaultPrevented!=null?f.defaultPrevented:f.returnValue===!1)?wl:ih,this.isPropagationStopped=ih,this}return p(t.prototype,{preventDefault:function(){this.defaultPrevented=!0;var r=this.nativeEvent;r&&(r.preventDefault?r.preventDefault():typeof r.returnValue!="unknown"&&(r.returnValue=!1),this.isDefaultPrevented=wl)},stopPropagation:function(){var r=this.nativeEvent;r&&(r.stopPropagation?r.stopPropagation():typeof r.cancelBubble!="unknown"&&(r.cancelBubble=!0),this.isPropagationStopped=wl)},persist:function(){},isPersistent:wl}),t}var ua={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(e){return e.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},_l=ft(ua),Zr=p({},ua,{view:0,detail:0}),Wx=ft(Zr),So,ko,Jr,Nl=p({},Zr,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:Eo,button:0,buttons:0,relatedTarget:function(e){return e.relatedTarget===void 0?e.fromElement===e.srcElement?e.toElement:e.fromElement:e.relatedTarget},movementX:function(e){return"movementX"in e?e.movementX:(e!==Jr&&(Jr&&e.type==="mousemove"?(So=e.screenX-Jr.screenX,ko=e.screenY-Jr.screenY):ko=So=0,Jr=e),So)},movementY:function(e){return"movementY"in e?e.movementY:ko}}),oh=ft(Nl),ep=p({},Nl,{dataTransfer:0}),tp=ft(ep),sp=p({},Zr,{relatedTarget:0}),Co=ft(sp),ap=p({},ua,{animationName:0,elapsedTime:0,pseudoElement:0}),rp=ft(ap),np=p({},ua,{clipboardData:function(e){return"clipboardData"in e?e.clipboardData:window.clipboardData}}),lp=ft(np),ip=p({},ua,{data:0}),ch=ft(ip),op={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},cp={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},up={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function dp(e){var t=this.nativeEvent;return t.getModifierState?t.getModifierState(e):(e=up[e])?!!t[e]:!1}function Eo(){return dp}var hp=p({},Zr,{key:function(e){if(e.key){var t=op[e.key]||e.key;if(t!=="Unidentified")return t}return e.type==="keypress"?(e=jl(e),e===13?"Enter":String.fromCharCode(e)):e.type==="keydown"||e.type==="keyup"?cp[e.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:Eo,charCode:function(e){return e.type==="keypress"?jl(e):0},keyCode:function(e){return e.type==="keydown"||e.type==="keyup"?e.keyCode:0},which:function(e){return e.type==="keypress"?jl(e):e.type==="keydown"||e.type==="keyup"?e.keyCode:0}}),fp=ft(hp),mp=p({},Nl,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),uh=ft(mp),gp=p({},Zr,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:Eo}),xp=ft(gp),pp=p({},ua,{propertyName:0,elapsedTime:0,pseudoElement:0}),yp=ft(pp),vp=p({},Nl,{deltaX:function(e){return"deltaX"in e?e.deltaX:"wheelDeltaX"in e?-e.wheelDeltaX:0},deltaY:function(e){return"deltaY"in e?e.deltaY:"wheelDeltaY"in e?-e.wheelDeltaY:"wheelDelta"in e?-e.wheelDelta:0},deltaZ:0,deltaMode:0}),bp=ft(vp),jp=p({},ua,{newState:0,oldState:0}),wp=ft(jp),_p=[9,13,27,32],Ao=os&&"CompositionEvent"in window,Wr=null;os&&"documentMode"in document&&(Wr=document.documentMode);var Np=os&&"TextEvent"in window&&!Wr,dh=os&&(!Ao||Wr&&8<Wr&&11>=Wr),hh=" ",fh=!1;function mh(e,t){switch(e){case"keyup":return _p.indexOf(t.keyCode)!==-1;case"keydown":return t.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function gh(e){return e=e.detail,typeof e=="object"&&"data"in e?e.data:null}var Ya=!1;function Sp(e,t){switch(e){case"compositionend":return gh(t);case"keypress":return t.which!==32?null:(fh=!0,hh);case"textInput":return e=t.data,e===hh&&fh?null:e;default:return null}}function kp(e,t){if(Ya)return e==="compositionend"||!Ao&&mh(e,t)?(e=lh(),bl=No=Os=null,Ya=!1,e):null;switch(e){case"paste":return null;case"keypress":if(!(t.ctrlKey||t.altKey||t.metaKey)||t.ctrlKey&&t.altKey){if(t.char&&1<t.char.length)return t.char;if(t.which)return String.fromCharCode(t.which)}return null;case"compositionend":return dh&&t.locale!=="ko"?null:t.data;default:return null}}var Cp={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function xh(e){var t=e&&e.nodeName&&e.nodeName.toLowerCase();return t==="input"?!!Cp[e.type]:t==="textarea"}function ph(e,t,r,o){Va?Qa?Qa.push(o):Qa=[o]:Va=o,t=ui(t,"onChange"),0<t.length&&(r=new _l("onChange","change",null,r,o),e.push({event:r,listeners:t}))}var en=null,tn=null;function Ep(e){Jm(e,0)}function Sl(e){var t=Ir(e);if(Jd(t))return e}function yh(e,t){if(e==="change")return t}var vh=!1;if(os){var To;if(os){var Ro="oninput"in document;if(!Ro){var bh=document.createElement("div");bh.setAttribute("oninput","return;"),Ro=typeof bh.oninput=="function"}To=Ro}else To=!1;vh=To&&(!document.documentMode||9<document.documentMode)}function jh(){en&&(en.detachEvent("onpropertychange",wh),tn=en=null)}function wh(e){if(e.propertyName==="value"&&Sl(tn)){var t=[];ph(t,tn,e,jo(e)),nh(Ep,t)}}function Ap(e,t,r){e==="focusin"?(jh(),en=t,tn=r,en.attachEvent("onpropertychange",wh)):e==="focusout"&&jh()}function Tp(e){if(e==="selectionchange"||e==="keyup"||e==="keydown")return Sl(tn)}function Rp(e,t){if(e==="click")return Sl(t)}function Op(e,t){if(e==="input"||e==="change")return Sl(t)}function Dp(e,t){return e===t&&(e!==0||1/e===1/t)||e!==e&&t!==t}var wt=typeof Object.is=="function"?Object.is:Dp;function sn(e,t){if(wt(e,t))return!0;if(typeof e!="object"||e===null||typeof t!="object"||t===null)return!1;var r=Object.keys(e),o=Object.keys(t);if(r.length!==o.length)return!1;for(o=0;o<r.length;o++){var d=r[o];if(!no.call(t,d)||!wt(e[d],t[d]))return!1}return!0}function _h(e){for(;e&&e.firstChild;)e=e.firstChild;return e}function Nh(e,t){var r=_h(e);e=0;for(var o;r;){if(r.nodeType===3){if(o=e+r.textContent.length,e<=t&&o>=t)return{node:r,offset:t-e};e=o}e:{for(;r;){if(r.nextSibling){r=r.nextSibling;break e}r=r.parentNode}r=void 0}r=_h(r)}}function Sh(e,t){return e&&t?e===t?!0:e&&e.nodeType===3?!1:t&&t.nodeType===3?Sh(e,t.parentNode):"contains"in e?e.contains(t):e.compareDocumentPosition?!!(e.compareDocumentPosition(t)&16):!1:!1}function kh(e){e=e!=null&&e.ownerDocument!=null&&e.ownerDocument.defaultView!=null?e.ownerDocument.defaultView:window;for(var t=yl(e.document);t instanceof e.HTMLIFrameElement;){try{var r=typeof t.contentWindow.location.href=="string"}catch{r=!1}if(r)e=t.contentWindow;else break;t=yl(e.document)}return t}function Oo(e){var t=e&&e.nodeName&&e.nodeName.toLowerCase();return t&&(t==="input"&&(e.type==="text"||e.type==="search"||e.type==="tel"||e.type==="url"||e.type==="password")||t==="textarea"||e.contentEditable==="true")}var Mp=os&&"documentMode"in document&&11>=document.documentMode,Fa=null,Do=null,an=null,Mo=!1;function Ch(e,t,r){var o=r.window===r?r.document:r.nodeType===9?r:r.ownerDocument;Mo||Fa==null||Fa!==yl(o)||(o=Fa,"selectionStart"in o&&Oo(o)?o={start:o.selectionStart,end:o.selectionEnd}:(o=(o.ownerDocument&&o.ownerDocument.defaultView||window).getSelection(),o={anchorNode:o.anchorNode,anchorOffset:o.anchorOffset,focusNode:o.focusNode,focusOffset:o.focusOffset}),an&&sn(an,o)||(an=o,o=ui(Do,"onSelect"),0<o.length&&(t=new _l("onSelect","select",null,t,r),e.push({event:t,listeners:o}),t.target=Fa)))}function da(e,t){var r={};return r[e.toLowerCase()]=t.toLowerCase(),r["Webkit"+e]="webkit"+t,r["Moz"+e]="moz"+t,r}var Ia={animationend:da("Animation","AnimationEnd"),animationiteration:da("Animation","AnimationIteration"),animationstart:da("Animation","AnimationStart"),transitionrun:da("Transition","TransitionRun"),transitionstart:da("Transition","TransitionStart"),transitioncancel:da("Transition","TransitionCancel"),transitionend:da("Transition","TransitionEnd")},Uo={},Eh={};os&&(Eh=document.createElement("div").style,"AnimationEvent"in window||(delete Ia.animationend.animation,delete Ia.animationiteration.animation,delete Ia.animationstart.animation),"TransitionEvent"in window||delete Ia.transitionend.transition);function ha(e){if(Uo[e])return Uo[e];if(!Ia[e])return e;var t=Ia[e],r;for(r in t)if(t.hasOwnProperty(r)&&r in Eh)return Uo[e]=t[r];return e}var Ah=ha("animationend"),Th=ha("animationiteration"),Rh=ha("animationstart"),Up=ha("transitionrun"),Pp=ha("transitionstart"),Lp=ha("transitioncancel"),Oh=ha("transitionend"),Dh=new Map,Po="abort auxClick beforeToggle cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");Po.push("scrollEnd");function qt(e,t){Dh.set(e,t),ca(t,[e])}var Mh=new WeakMap;function Rt(e,t){if(typeof e=="object"&&e!==null){var r=Mh.get(e);return r!==void 0?r:(t={value:e,source:t,stack:Xd(t)},Mh.set(e,t),t)}return{value:e,source:t,stack:Xd(t)}}var Ot=[],Ka=0,Lo=0;function kl(){for(var e=Ka,t=Lo=Ka=0;t<e;){var r=Ot[t];Ot[t++]=null;var o=Ot[t];Ot[t++]=null;var d=Ot[t];Ot[t++]=null;var f=Ot[t];if(Ot[t++]=null,o!==null&&d!==null){var y=o.pending;y===null?d.next=d:(d.next=y.next,y.next=d),o.pending=d}f!==0&&Uh(r,d,f)}}function Cl(e,t,r,o){Ot[Ka++]=e,Ot[Ka++]=t,Ot[Ka++]=r,Ot[Ka++]=o,Lo|=o,e.lanes|=o,e=e.alternate,e!==null&&(e.lanes|=o)}function qo(e,t,r,o){return Cl(e,t,r,o),El(e)}function Xa(e,t){return Cl(e,null,null,t),El(e)}function Uh(e,t,r){e.lanes|=r;var o=e.alternate;o!==null&&(o.lanes|=r);for(var d=!1,f=e.return;f!==null;)f.childLanes|=r,o=f.alternate,o!==null&&(o.childLanes|=r),f.tag===22&&(e=f.stateNode,e===null||e._visibility&1||(d=!0)),e=f,f=f.return;return e.tag===3?(f=e.stateNode,d&&t!==null&&(d=31-jt(r),e=f.hiddenUpdates,o=e[d],o===null?e[d]=[t]:o.push(t),t.lane=r|536870912),f):null}function El(e){if(50<An)throw An=0,Vc=null,Error(i(185));for(var t=e.return;t!==null;)e=t,t=e.return;return e.tag===3?e.stateNode:null}var Za={};function qp(e,t,r,o){this.tag=e,this.key=r,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.refCleanup=this.ref=null,this.pendingProps=t,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=o,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function _t(e,t,r,o){return new qp(e,t,r,o)}function zo(e){return e=e.prototype,!(!e||!e.isReactComponent)}function cs(e,t){var r=e.alternate;return r===null?(r=_t(e.tag,t,e.key,e.mode),r.elementType=e.elementType,r.type=e.type,r.stateNode=e.stateNode,r.alternate=e,e.alternate=r):(r.pendingProps=t,r.type=e.type,r.flags=0,r.subtreeFlags=0,r.deletions=null),r.flags=e.flags&65011712,r.childLanes=e.childLanes,r.lanes=e.lanes,r.child=e.child,r.memoizedProps=e.memoizedProps,r.memoizedState=e.memoizedState,r.updateQueue=e.updateQueue,t=e.dependencies,r.dependencies=t===null?null:{lanes:t.lanes,firstContext:t.firstContext},r.sibling=e.sibling,r.index=e.index,r.ref=e.ref,r.refCleanup=e.refCleanup,r}function Ph(e,t){e.flags&=65011714;var r=e.alternate;return r===null?(e.childLanes=0,e.lanes=t,e.child=null,e.subtreeFlags=0,e.memoizedProps=null,e.memoizedState=null,e.updateQueue=null,e.dependencies=null,e.stateNode=null):(e.childLanes=r.childLanes,e.lanes=r.lanes,e.child=r.child,e.subtreeFlags=0,e.deletions=null,e.memoizedProps=r.memoizedProps,e.memoizedState=r.memoizedState,e.updateQueue=r.updateQueue,e.type=r.type,t=r.dependencies,e.dependencies=t===null?null:{lanes:t.lanes,firstContext:t.firstContext}),e}function Al(e,t,r,o,d,f){var y=0;if(o=e,typeof e=="function")zo(e)&&(y=1);else if(typeof e=="string")y=$y(e,r,ie.current)?26:e==="html"||e==="head"||e==="body"?27:5;else e:switch(e){case K:return e=_t(31,r,t,d),e.elementType=K,e.lanes=f,e;case N:return fa(r.children,d,f,t);case _:y=8,d|=24;break;case C:return e=_t(12,r,t,d|2),e.elementType=C,e.lanes=f,e;case Q:return e=_t(13,r,t,d),e.elementType=Q,e.lanes=f,e;case H:return e=_t(19,r,t,d),e.elementType=H,e.lanes=f,e;default:if(typeof e=="object"&&e!==null)switch(e.$$typeof){case O:case L:y=10;break e;case q:y=9;break e;case z:y=11;break e;case Y:y=14;break e;case se:y=16,o=null;break e}y=29,r=Error(i(130,e===null?"null":typeof e,"")),o=null}return t=_t(y,r,t,d),t.elementType=e,t.type=o,t.lanes=f,t}function fa(e,t,r,o){return e=_t(7,e,o,t),e.lanes=r,e}function $o(e,t,r){return e=_t(6,e,null,t),e.lanes=r,e}function Bo(e,t,r){return t=_t(4,e.children!==null?e.children:[],e.key,t),t.lanes=r,t.stateNode={containerInfo:e.containerInfo,pendingChildren:null,implementation:e.implementation},t}var Ja=[],Wa=0,Tl=null,Rl=0,Dt=[],Mt=0,ma=null,us=1,ds="";function ga(e,t){Ja[Wa++]=Rl,Ja[Wa++]=Tl,Tl=e,Rl=t}function Lh(e,t,r){Dt[Mt++]=us,Dt[Mt++]=ds,Dt[Mt++]=ma,ma=e;var o=us;e=ds;var d=32-jt(o)-1;o&=~(1<<d),r+=1;var f=32-jt(t)+d;if(30<f){var y=d-d%5;f=(o&(1<<y)-1).toString(32),o>>=y,d-=y,us=1<<32-jt(t)+d|r<<d|o,ds=f+e}else us=1<<f|r<<d|o,ds=e}function Ho(e){e.return!==null&&(ga(e,1),Lh(e,1,0))}function Go(e){for(;e===Tl;)Tl=Ja[--Wa],Ja[Wa]=null,Rl=Ja[--Wa],Ja[Wa]=null;for(;e===ma;)ma=Dt[--Mt],Dt[Mt]=null,ds=Dt[--Mt],Dt[Mt]=null,us=Dt[--Mt],Dt[Mt]=null}var ct=null,Be=null,Ce=!1,xa=null,Xt=!1,Vo=Error(i(519));function pa(e){var t=Error(i(418,""));throw ln(Rt(t,e)),Vo}function qh(e){var t=e.stateNode,r=e.type,o=e.memoizedProps;switch(t[lt]=e,t[ht]=o,r){case"dialog":we("cancel",t),we("close",t);break;case"iframe":case"object":case"embed":we("load",t);break;case"video":case"audio":for(r=0;r<Rn.length;r++)we(Rn[r],t);break;case"source":we("error",t);break;case"img":case"image":case"link":we("error",t),we("load",t);break;case"details":we("toggle",t);break;case"input":we("invalid",t),Wd(t,o.value,o.defaultValue,o.checked,o.defaultChecked,o.type,o.name,!0),pl(t);break;case"select":we("invalid",t);break;case"textarea":we("invalid",t),th(t,o.value,o.defaultValue,o.children),pl(t)}r=o.children,typeof r!="string"&&typeof r!="number"&&typeof r!="bigint"||t.textContent===""+r||o.suppressHydrationWarning===!0||s0(t.textContent,r)?(o.popover!=null&&(we("beforetoggle",t),we("toggle",t)),o.onScroll!=null&&we("scroll",t),o.onScrollEnd!=null&&we("scrollend",t),o.onClick!=null&&(t.onclick=di),t=!0):t=!1,t||pa(e)}function zh(e){for(ct=e.return;ct;)switch(ct.tag){case 5:case 13:Xt=!1;return;case 27:case 3:Xt=!0;return;default:ct=ct.return}}function rn(e){if(e!==ct)return!1;if(!Ce)return zh(e),Ce=!0,!1;var t=e.tag,r;if((r=t!==3&&t!==27)&&((r=t===5)&&(r=e.type,r=!(r!=="form"&&r!=="button")||lu(e.type,e.memoizedProps)),r=!r),r&&Be&&pa(e),zh(e),t===13){if(e=e.memoizedState,e=e!==null?e.dehydrated:null,!e)throw Error(i(317));e:{for(e=e.nextSibling,t=0;e;){if(e.nodeType===8)if(r=e.data,r==="/$"){if(t===0){Be=$t(e.nextSibling);break e}t--}else r!=="$"&&r!=="$!"&&r!=="$?"||t++;e=e.nextSibling}Be=null}}else t===27?(t=Be,Is(e.type)?(e=uu,uu=null,Be=e):Be=t):Be=ct?$t(e.stateNode.nextSibling):null;return!0}function nn(){Be=ct=null,Ce=!1}function $h(){var e=xa;return e!==null&&(xt===null?xt=e:xt.push.apply(xt,e),xa=null),e}function ln(e){xa===null?xa=[e]:xa.push(e)}var Qo=I(null),ya=null,hs=null;function Ds(e,t,r){Z(Qo,t._currentValue),t._currentValue=r}function fs(e){e._currentValue=Qo.current,F(Qo)}function Yo(e,t,r){for(;e!==null;){var o=e.alternate;if((e.childLanes&t)!==t?(e.childLanes|=t,o!==null&&(o.childLanes|=t)):o!==null&&(o.childLanes&t)!==t&&(o.childLanes|=t),e===r)break;e=e.return}}function Fo(e,t,r,o){var d=e.child;for(d!==null&&(d.return=e);d!==null;){var f=d.dependencies;if(f!==null){var y=d.child;f=f.firstContext;e:for(;f!==null;){var b=f;f=d;for(var k=0;k<t.length;k++)if(b.context===t[k]){f.lanes|=r,b=f.alternate,b!==null&&(b.lanes|=r),Yo(f.return,r,e),o||(y=null);break e}f=b.next}}else if(d.tag===18){if(y=d.return,y===null)throw Error(i(341));y.lanes|=r,f=y.alternate,f!==null&&(f.lanes|=r),Yo(y,r,e),y=null}else y=d.child;if(y!==null)y.return=d;else for(y=d;y!==null;){if(y===e){y=null;break}if(d=y.sibling,d!==null){d.return=y.return,y=d;break}y=y.return}d=y}}function on(e,t,r,o){e=null;for(var d=t,f=!1;d!==null;){if(!f){if((d.flags&524288)!==0)f=!0;else if((d.flags&262144)!==0)break}if(d.tag===10){var y=d.alternate;if(y===null)throw Error(i(387));if(y=y.memoizedProps,y!==null){var b=d.type;wt(d.pendingProps.value,y.value)||(e!==null?e.push(b):e=[b])}}else if(d===vt.current){if(y=d.alternate,y===null)throw Error(i(387));y.memoizedState.memoizedState!==d.memoizedState.memoizedState&&(e!==null?e.push(Ln):e=[Ln])}d=d.return}e!==null&&Fo(t,e,r,o),t.flags|=262144}function Ol(e){for(e=e.firstContext;e!==null;){if(!wt(e.context._currentValue,e.memoizedValue))return!0;e=e.next}return!1}function va(e){ya=e,hs=null,e=e.dependencies,e!==null&&(e.firstContext=null)}function it(e){return Bh(ya,e)}function Dl(e,t){return ya===null&&va(e),Bh(e,t)}function Bh(e,t){var r=t._currentValue;if(t={context:t,memoizedValue:r,next:null},hs===null){if(e===null)throw Error(i(308));hs=t,e.dependencies={lanes:0,firstContext:t},e.flags|=524288}else hs=hs.next=t;return r}var zp=typeof AbortController<"u"?AbortController:function(){var e=[],t=this.signal={aborted:!1,addEventListener:function(r,o){e.push(o)}};this.abort=function(){t.aborted=!0,e.forEach(function(r){return r()})}},$p=n.unstable_scheduleCallback,Bp=n.unstable_NormalPriority,Fe={$$typeof:L,Consumer:null,Provider:null,_currentValue:null,_currentValue2:null,_threadCount:0};function Io(){return{controller:new zp,data:new Map,refCount:0}}function cn(e){e.refCount--,e.refCount===0&&$p(Bp,function(){e.controller.abort()})}var un=null,Ko=0,er=0,tr=null;function Hp(e,t){if(un===null){var r=un=[];Ko=0,er=Zc(),tr={status:"pending",value:void 0,then:function(o){r.push(o)}}}return Ko++,t.then(Hh,Hh),t}function Hh(){if(--Ko===0&&un!==null){tr!==null&&(tr.status="fulfilled");var e=un;un=null,er=0,tr=null;for(var t=0;t<e.length;t++)(0,e[t])()}}function Gp(e,t){var r=[],o={status:"pending",value:null,reason:null,then:function(d){r.push(d)}};return e.then(function(){o.status="fulfilled",o.value=t;for(var d=0;d<r.length;d++)(0,r[d])(t)},function(d){for(o.status="rejected",o.reason=d,d=0;d<r.length;d++)(0,r[d])(void 0)}),o}var Gh=R.S;R.S=function(e,t){typeof t=="object"&&t!==null&&typeof t.then=="function"&&Hp(e,t),Gh!==null&&Gh(e,t)};var ba=I(null);function Xo(){var e=ba.current;return e!==null?e:Ue.pooledCache}function Ml(e,t){t===null?Z(ba,ba.current):Z(ba,t.pool)}function Vh(){var e=Xo();return e===null?null:{parent:Fe._currentValue,pool:e}}var dn=Error(i(460)),Qh=Error(i(474)),Ul=Error(i(542)),Zo={then:function(){}};function Yh(e){return e=e.status,e==="fulfilled"||e==="rejected"}function Pl(){}function Fh(e,t,r){switch(r=e[r],r===void 0?e.push(t):r!==t&&(t.then(Pl,Pl),t=r),t.status){case"fulfilled":return t.value;case"rejected":throw e=t.reason,Kh(e),e;default:if(typeof t.status=="string")t.then(Pl,Pl);else{if(e=Ue,e!==null&&100<e.shellSuspendCounter)throw Error(i(482));e=t,e.status="pending",e.then(function(o){if(t.status==="pending"){var d=t;d.status="fulfilled",d.value=o}},function(o){if(t.status==="pending"){var d=t;d.status="rejected",d.reason=o}})}switch(t.status){case"fulfilled":return t.value;case"rejected":throw e=t.reason,Kh(e),e}throw hn=t,dn}}var hn=null;function Ih(){if(hn===null)throw Error(i(459));var e=hn;return hn=null,e}function Kh(e){if(e===dn||e===Ul)throw Error(i(483))}var Ms=!1;function Jo(e){e.updateQueue={baseState:e.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,lanes:0,hiddenCallbacks:null},callbacks:null}}function Wo(e,t){e=e.updateQueue,t.updateQueue===e&&(t.updateQueue={baseState:e.baseState,firstBaseUpdate:e.firstBaseUpdate,lastBaseUpdate:e.lastBaseUpdate,shared:e.shared,callbacks:null})}function Us(e){return{lane:e,tag:0,payload:null,callback:null,next:null}}function Ps(e,t,r){var o=e.updateQueue;if(o===null)return null;if(o=o.shared,(Ee&2)!==0){var d=o.pending;return d===null?t.next=t:(t.next=d.next,d.next=t),o.pending=t,t=El(e),Uh(e,null,r),t}return Cl(e,o,t,r),El(e)}function fn(e,t,r){if(t=t.updateQueue,t!==null&&(t=t.shared,(r&4194048)!==0)){var o=t.lanes;o&=e.pendingLanes,r|=o,t.lanes=r,Hd(e,r)}}function ec(e,t){var r=e.updateQueue,o=e.alternate;if(o!==null&&(o=o.updateQueue,r===o)){var d=null,f=null;if(r=r.firstBaseUpdate,r!==null){do{var y={lane:r.lane,tag:r.tag,payload:r.payload,callback:null,next:null};f===null?d=f=y:f=f.next=y,r=r.next}while(r!==null);f===null?d=f=t:f=f.next=t}else d=f=t;r={baseState:o.baseState,firstBaseUpdate:d,lastBaseUpdate:f,shared:o.shared,callbacks:o.callbacks},e.updateQueue=r;return}e=r.lastBaseUpdate,e===null?r.firstBaseUpdate=t:e.next=t,r.lastBaseUpdate=t}var tc=!1;function mn(){if(tc){var e=tr;if(e!==null)throw e}}function gn(e,t,r,o){tc=!1;var d=e.updateQueue;Ms=!1;var f=d.firstBaseUpdate,y=d.lastBaseUpdate,b=d.shared.pending;if(b!==null){d.shared.pending=null;var k=b,M=k.next;k.next=null,y===null?f=M:y.next=M,y=k;var $=e.alternate;$!==null&&($=$.updateQueue,b=$.lastBaseUpdate,b!==y&&(b===null?$.firstBaseUpdate=M:b.next=M,$.lastBaseUpdate=k))}if(f!==null){var V=d.baseState;y=0,$=M=k=null,b=f;do{var U=b.lane&-536870913,P=U!==b.lane;if(P?(Ne&U)===U:(o&U)===U){U!==0&&U===er&&(tc=!0),$!==null&&($=$.next={lane:0,tag:b.tag,payload:b.payload,callback:null,next:null});e:{var de=e,ce=b;U=t;var Oe=r;switch(ce.tag){case 1:if(de=ce.payload,typeof de=="function"){V=de.call(Oe,V,U);break e}V=de;break e;case 3:de.flags=de.flags&-65537|128;case 0:if(de=ce.payload,U=typeof de=="function"?de.call(Oe,V,U):de,U==null)break e;V=p({},V,U);break e;case 2:Ms=!0}}U=b.callback,U!==null&&(e.flags|=64,P&&(e.flags|=8192),P=d.callbacks,P===null?d.callbacks=[U]:P.push(U))}else P={lane:U,tag:b.tag,payload:b.payload,callback:b.callback,next:null},$===null?(M=$=P,k=V):$=$.next=P,y|=U;if(b=b.next,b===null){if(b=d.shared.pending,b===null)break;P=b,b=P.next,P.next=null,d.lastBaseUpdate=P,d.shared.pending=null}}while(!0);$===null&&(k=V),d.baseState=k,d.firstBaseUpdate=M,d.lastBaseUpdate=$,f===null&&(d.shared.lanes=0),Vs|=y,e.lanes=y,e.memoizedState=V}}function Xh(e,t){if(typeof e!="function")throw Error(i(191,e));e.call(t)}function Zh(e,t){var r=e.callbacks;if(r!==null)for(e.callbacks=null,e=0;e<r.length;e++)Xh(r[e],t)}var sr=I(null),Ll=I(0);function Jh(e,t){e=bs,Z(Ll,e),Z(sr,t),bs=e|t.baseLanes}function sc(){Z(Ll,bs),Z(sr,sr.current)}function ac(){bs=Ll.current,F(sr),F(Ll)}var Ls=0,ve=null,Te=null,Qe=null,ql=!1,ar=!1,ja=!1,zl=0,xn=0,rr=null,Vp=0;function Ge(){throw Error(i(321))}function rc(e,t){if(t===null)return!1;for(var r=0;r<t.length&&r<e.length;r++)if(!wt(e[r],t[r]))return!1;return!0}function nc(e,t,r,o,d,f){return Ls=f,ve=t,t.memoizedState=null,t.updateQueue=null,t.lanes=0,R.H=e===null||e.memoizedState===null?Pf:Lf,ja=!1,f=r(o,d),ja=!1,ar&&(f=ef(t,r,o,d)),Wh(e),f}function Wh(e){R.H=Ql;var t=Te!==null&&Te.next!==null;if(Ls=0,Qe=Te=ve=null,ql=!1,xn=0,rr=null,t)throw Error(i(300));e===null||Je||(e=e.dependencies,e!==null&&Ol(e)&&(Je=!0))}function ef(e,t,r,o){ve=e;var d=0;do{if(ar&&(rr=null),xn=0,ar=!1,25<=d)throw Error(i(301));if(d+=1,Qe=Te=null,e.updateQueue!=null){var f=e.updateQueue;f.lastEffect=null,f.events=null,f.stores=null,f.memoCache!=null&&(f.memoCache.index=0)}R.H=Zp,f=t(r,o)}while(ar);return f}function Qp(){var e=R.H,t=e.useState()[0];return t=typeof t.then=="function"?pn(t):t,e=e.useState()[0],(Te!==null?Te.memoizedState:null)!==e&&(ve.flags|=1024),t}function lc(){var e=zl!==0;return zl=0,e}function ic(e,t,r){t.updateQueue=e.updateQueue,t.flags&=-2053,e.lanes&=~r}function oc(e){if(ql){for(e=e.memoizedState;e!==null;){var t=e.queue;t!==null&&(t.pending=null),e=e.next}ql=!1}Ls=0,Qe=Te=ve=null,ar=!1,xn=zl=0,rr=null}function mt(){var e={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return Qe===null?ve.memoizedState=Qe=e:Qe=Qe.next=e,Qe}function Ye(){if(Te===null){var e=ve.alternate;e=e!==null?e.memoizedState:null}else e=Te.next;var t=Qe===null?ve.memoizedState:Qe.next;if(t!==null)Qe=t,Te=e;else{if(e===null)throw ve.alternate===null?Error(i(467)):Error(i(310));Te=e,e={memoizedState:Te.memoizedState,baseState:Te.baseState,baseQueue:Te.baseQueue,queue:Te.queue,next:null},Qe===null?ve.memoizedState=Qe=e:Qe=Qe.next=e}return Qe}function cc(){return{lastEffect:null,events:null,stores:null,memoCache:null}}function pn(e){var t=xn;return xn+=1,rr===null&&(rr=[]),e=Fh(rr,e,t),t=ve,(Qe===null?t.memoizedState:Qe.next)===null&&(t=t.alternate,R.H=t===null||t.memoizedState===null?Pf:Lf),e}function $l(e){if(e!==null&&typeof e=="object"){if(typeof e.then=="function")return pn(e);if(e.$$typeof===L)return it(e)}throw Error(i(438,String(e)))}function uc(e){var t=null,r=ve.updateQueue;if(r!==null&&(t=r.memoCache),t==null){var o=ve.alternate;o!==null&&(o=o.updateQueue,o!==null&&(o=o.memoCache,o!=null&&(t={data:o.data.map(function(d){return d.slice()}),index:0})))}if(t==null&&(t={data:[],index:0}),r===null&&(r=cc(),ve.updateQueue=r),r.memoCache=t,r=t.data[t.index],r===void 0)for(r=t.data[t.index]=Array(e),o=0;o<e;o++)r[o]=ee;return t.index++,r}function ms(e,t){return typeof t=="function"?t(e):t}function Bl(e){var t=Ye();return dc(t,Te,e)}function dc(e,t,r){var o=e.queue;if(o===null)throw Error(i(311));o.lastRenderedReducer=r;var d=e.baseQueue,f=o.pending;if(f!==null){if(d!==null){var y=d.next;d.next=f.next,f.next=y}t.baseQueue=d=f,o.pending=null}if(f=e.baseState,d===null)e.memoizedState=f;else{t=d.next;var b=y=null,k=null,M=t,$=!1;do{var V=M.lane&-536870913;if(V!==M.lane?(Ne&V)===V:(Ls&V)===V){var U=M.revertLane;if(U===0)k!==null&&(k=k.next={lane:0,revertLane:0,action:M.action,hasEagerState:M.hasEagerState,eagerState:M.eagerState,next:null}),V===er&&($=!0);else if((Ls&U)===U){M=M.next,U===er&&($=!0);continue}else V={lane:0,revertLane:M.revertLane,action:M.action,hasEagerState:M.hasEagerState,eagerState:M.eagerState,next:null},k===null?(b=k=V,y=f):k=k.next=V,ve.lanes|=U,Vs|=U;V=M.action,ja&&r(f,V),f=M.hasEagerState?M.eagerState:r(f,V)}else U={lane:V,revertLane:M.revertLane,action:M.action,hasEagerState:M.hasEagerState,eagerState:M.eagerState,next:null},k===null?(b=k=U,y=f):k=k.next=U,ve.lanes|=V,Vs|=V;M=M.next}while(M!==null&&M!==t);if(k===null?y=f:k.next=b,!wt(f,e.memoizedState)&&(Je=!0,$&&(r=tr,r!==null)))throw r;e.memoizedState=f,e.baseState=y,e.baseQueue=k,o.lastRenderedState=f}return d===null&&(o.lanes=0),[e.memoizedState,o.dispatch]}function hc(e){var t=Ye(),r=t.queue;if(r===null)throw Error(i(311));r.lastRenderedReducer=e;var o=r.dispatch,d=r.pending,f=t.memoizedState;if(d!==null){r.pending=null;var y=d=d.next;do f=e(f,y.action),y=y.next;while(y!==d);wt(f,t.memoizedState)||(Je=!0),t.memoizedState=f,t.baseQueue===null&&(t.baseState=f),r.lastRenderedState=f}return[f,o]}function tf(e,t,r){var o=ve,d=Ye(),f=Ce;if(f){if(r===void 0)throw Error(i(407));r=r()}else r=t();var y=!wt((Te||d).memoizedState,r);y&&(d.memoizedState=r,Je=!0),d=d.queue;var b=rf.bind(null,o,d,e);if(yn(2048,8,b,[e]),d.getSnapshot!==t||y||Qe!==null&&Qe.memoizedState.tag&1){if(o.flags|=2048,nr(9,Hl(),af.bind(null,o,d,r,t),null),Ue===null)throw Error(i(349));f||(Ls&124)!==0||sf(o,t,r)}return r}function sf(e,t,r){e.flags|=16384,e={getSnapshot:t,value:r},t=ve.updateQueue,t===null?(t=cc(),ve.updateQueue=t,t.stores=[e]):(r=t.stores,r===null?t.stores=[e]:r.push(e))}function af(e,t,r,o){t.value=r,t.getSnapshot=o,nf(t)&&lf(e)}function rf(e,t,r){return r(function(){nf(t)&&lf(e)})}function nf(e){var t=e.getSnapshot;e=e.value;try{var r=t();return!wt(e,r)}catch{return!0}}function lf(e){var t=Xa(e,2);t!==null&&Et(t,e,2)}function fc(e){var t=mt();if(typeof e=="function"){var r=e;if(e=r(),ja){Ts(!0);try{r()}finally{Ts(!1)}}}return t.memoizedState=t.baseState=e,t.queue={pending:null,lanes:0,dispatch:null,lastRenderedReducer:ms,lastRenderedState:e},t}function of(e,t,r,o){return e.baseState=r,dc(e,Te,typeof o=="function"?o:ms)}function Yp(e,t,r,o,d){if(Vl(e))throw Error(i(485));if(e=t.action,e!==null){var f={payload:d,action:e,next:null,isTransition:!0,status:"pending",value:null,reason:null,listeners:[],then:function(y){f.listeners.push(y)}};R.T!==null?r(!0):f.isTransition=!1,o(f),r=t.pending,r===null?(f.next=t.pending=f,cf(t,f)):(f.next=r.next,t.pending=r.next=f)}}function cf(e,t){var r=t.action,o=t.payload,d=e.state;if(t.isTransition){var f=R.T,y={};R.T=y;try{var b=r(d,o),k=R.S;k!==null&&k(y,b),uf(e,t,b)}catch(M){mc(e,t,M)}finally{R.T=f}}else try{f=r(d,o),uf(e,t,f)}catch(M){mc(e,t,M)}}function uf(e,t,r){r!==null&&typeof r=="object"&&typeof r.then=="function"?r.then(function(o){df(e,t,o)},function(o){return mc(e,t,o)}):df(e,t,r)}function df(e,t,r){t.status="fulfilled",t.value=r,hf(t),e.state=r,t=e.pending,t!==null&&(r=t.next,r===t?e.pending=null:(r=r.next,t.next=r,cf(e,r)))}function mc(e,t,r){var o=e.pending;if(e.pending=null,o!==null){o=o.next;do t.status="rejected",t.reason=r,hf(t),t=t.next;while(t!==o)}e.action=null}function hf(e){e=e.listeners;for(var t=0;t<e.length;t++)(0,e[t])()}function ff(e,t){return t}function mf(e,t){if(Ce){var r=Ue.formState;if(r!==null){e:{var o=ve;if(Ce){if(Be){t:{for(var d=Be,f=Xt;d.nodeType!==8;){if(!f){d=null;break t}if(d=$t(d.nextSibling),d===null){d=null;break t}}f=d.data,d=f==="F!"||f==="F"?d:null}if(d){Be=$t(d.nextSibling),o=d.data==="F!";break e}}pa(o)}o=!1}o&&(t=r[0])}}return r=mt(),r.memoizedState=r.baseState=t,o={pending:null,lanes:0,dispatch:null,lastRenderedReducer:ff,lastRenderedState:t},r.queue=o,r=Df.bind(null,ve,o),o.dispatch=r,o=fc(!1),f=vc.bind(null,ve,!1,o.queue),o=mt(),d={state:t,dispatch:null,action:e,pending:null},o.queue=d,r=Yp.bind(null,ve,d,f,r),d.dispatch=r,o.memoizedState=e,[t,r,!1]}function gf(e){var t=Ye();return xf(t,Te,e)}function xf(e,t,r){if(t=dc(e,t,ff)[0],e=Bl(ms)[0],typeof t=="object"&&t!==null&&typeof t.then=="function")try{var o=pn(t)}catch(y){throw y===dn?Ul:y}else o=t;t=Ye();var d=t.queue,f=d.dispatch;return r!==t.memoizedState&&(ve.flags|=2048,nr(9,Hl(),Fp.bind(null,d,r),null)),[o,f,e]}function Fp(e,t){e.action=t}function pf(e){var t=Ye(),r=Te;if(r!==null)return xf(t,r,e);Ye(),t=t.memoizedState,r=Ye();var o=r.queue.dispatch;return r.memoizedState=e,[t,o,!1]}function nr(e,t,r,o){return e={tag:e,create:r,deps:o,inst:t,next:null},t=ve.updateQueue,t===null&&(t=cc(),ve.updateQueue=t),r=t.lastEffect,r===null?t.lastEffect=e.next=e:(o=r.next,r.next=e,e.next=o,t.lastEffect=e),e}function Hl(){return{destroy:void 0,resource:void 0}}function yf(){return Ye().memoizedState}function Gl(e,t,r,o){var d=mt();o=o===void 0?null:o,ve.flags|=e,d.memoizedState=nr(1|t,Hl(),r,o)}function yn(e,t,r,o){var d=Ye();o=o===void 0?null:o;var f=d.memoizedState.inst;Te!==null&&o!==null&&rc(o,Te.memoizedState.deps)?d.memoizedState=nr(t,f,r,o):(ve.flags|=e,d.memoizedState=nr(1|t,f,r,o))}function vf(e,t){Gl(8390656,8,e,t)}function bf(e,t){yn(2048,8,e,t)}function jf(e,t){return yn(4,2,e,t)}function wf(e,t){return yn(4,4,e,t)}function _f(e,t){if(typeof t=="function"){e=e();var r=t(e);return function(){typeof r=="function"?r():t(null)}}if(t!=null)return e=e(),t.current=e,function(){t.current=null}}function Nf(e,t,r){r=r!=null?r.concat([e]):null,yn(4,4,_f.bind(null,t,e),r)}function gc(){}function Sf(e,t){var r=Ye();t=t===void 0?null:t;var o=r.memoizedState;return t!==null&&rc(t,o[1])?o[0]:(r.memoizedState=[e,t],e)}function kf(e,t){var r=Ye();t=t===void 0?null:t;var o=r.memoizedState;if(t!==null&&rc(t,o[1]))return o[0];if(o=e(),ja){Ts(!0);try{e()}finally{Ts(!1)}}return r.memoizedState=[o,t],o}function xc(e,t,r){return r===void 0||(Ls&1073741824)!==0?e.memoizedState=t:(e.memoizedState=r,e=Am(),ve.lanes|=e,Vs|=e,r)}function Cf(e,t,r,o){return wt(r,t)?r:sr.current!==null?(e=xc(e,r,o),wt(e,t)||(Je=!0),e):(Ls&42)===0?(Je=!0,e.memoizedState=r):(e=Am(),ve.lanes|=e,Vs|=e,t)}function Ef(e,t,r,o,d){var f=W.p;W.p=f!==0&&8>f?f:8;var y=R.T,b={};R.T=b,vc(e,!1,t,r);try{var k=d(),M=R.S;if(M!==null&&M(b,k),k!==null&&typeof k=="object"&&typeof k.then=="function"){var $=Gp(k,o);vn(e,t,$,Ct(e))}else vn(e,t,o,Ct(e))}catch(V){vn(e,t,{then:function(){},status:"rejected",reason:V},Ct())}finally{W.p=f,R.T=y}}function Ip(){}function pc(e,t,r,o){if(e.tag!==5)throw Error(i(476));var d=Af(e).queue;Ef(e,d,t,J,r===null?Ip:function(){return Tf(e),r(o)})}function Af(e){var t=e.memoizedState;if(t!==null)return t;t={memoizedState:J,baseState:J,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:ms,lastRenderedState:J},next:null};var r={};return t.next={memoizedState:r,baseState:r,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:ms,lastRenderedState:r},next:null},e.memoizedState=t,e=e.alternate,e!==null&&(e.memoizedState=t),t}function Tf(e){var t=Af(e).next.queue;vn(e,t,{},Ct())}function yc(){return it(Ln)}function Rf(){return Ye().memoizedState}function Of(){return Ye().memoizedState}function Kp(e){for(var t=e.return;t!==null;){switch(t.tag){case 24:case 3:var r=Ct();e=Us(r);var o=Ps(t,e,r);o!==null&&(Et(o,t,r),fn(o,t,r)),t={cache:Io()},e.payload=t;return}t=t.return}}function Xp(e,t,r){var o=Ct();r={lane:o,revertLane:0,action:r,hasEagerState:!1,eagerState:null,next:null},Vl(e)?Mf(t,r):(r=qo(e,t,r,o),r!==null&&(Et(r,e,o),Uf(r,t,o)))}function Df(e,t,r){var o=Ct();vn(e,t,r,o)}function vn(e,t,r,o){var d={lane:o,revertLane:0,action:r,hasEagerState:!1,eagerState:null,next:null};if(Vl(e))Mf(t,d);else{var f=e.alternate;if(e.lanes===0&&(f===null||f.lanes===0)&&(f=t.lastRenderedReducer,f!==null))try{var y=t.lastRenderedState,b=f(y,r);if(d.hasEagerState=!0,d.eagerState=b,wt(b,y))return Cl(e,t,d,0),Ue===null&&kl(),!1}catch{}finally{}if(r=qo(e,t,d,o),r!==null)return Et(r,e,o),Uf(r,t,o),!0}return!1}function vc(e,t,r,o){if(o={lane:2,revertLane:Zc(),action:o,hasEagerState:!1,eagerState:null,next:null},Vl(e)){if(t)throw Error(i(479))}else t=qo(e,r,o,2),t!==null&&Et(t,e,2)}function Vl(e){var t=e.alternate;return e===ve||t!==null&&t===ve}function Mf(e,t){ar=ql=!0;var r=e.pending;r===null?t.next=t:(t.next=r.next,r.next=t),e.pending=t}function Uf(e,t,r){if((r&4194048)!==0){var o=t.lanes;o&=e.pendingLanes,r|=o,t.lanes=r,Hd(e,r)}}var Ql={readContext:it,use:$l,useCallback:Ge,useContext:Ge,useEffect:Ge,useImperativeHandle:Ge,useLayoutEffect:Ge,useInsertionEffect:Ge,useMemo:Ge,useReducer:Ge,useRef:Ge,useState:Ge,useDebugValue:Ge,useDeferredValue:Ge,useTransition:Ge,useSyncExternalStore:Ge,useId:Ge,useHostTransitionStatus:Ge,useFormState:Ge,useActionState:Ge,useOptimistic:Ge,useMemoCache:Ge,useCacheRefresh:Ge},Pf={readContext:it,use:$l,useCallback:function(e,t){return mt().memoizedState=[e,t===void 0?null:t],e},useContext:it,useEffect:vf,useImperativeHandle:function(e,t,r){r=r!=null?r.concat([e]):null,Gl(4194308,4,_f.bind(null,t,e),r)},useLayoutEffect:function(e,t){return Gl(4194308,4,e,t)},useInsertionEffect:function(e,t){Gl(4,2,e,t)},useMemo:function(e,t){var r=mt();t=t===void 0?null:t;var o=e();if(ja){Ts(!0);try{e()}finally{Ts(!1)}}return r.memoizedState=[o,t],o},useReducer:function(e,t,r){var o=mt();if(r!==void 0){var d=r(t);if(ja){Ts(!0);try{r(t)}finally{Ts(!1)}}}else d=t;return o.memoizedState=o.baseState=d,e={pending:null,lanes:0,dispatch:null,lastRenderedReducer:e,lastRenderedState:d},o.queue=e,e=e.dispatch=Xp.bind(null,ve,e),[o.memoizedState,e]},useRef:function(e){var t=mt();return e={current:e},t.memoizedState=e},useState:function(e){e=fc(e);var t=e.queue,r=Df.bind(null,ve,t);return t.dispatch=r,[e.memoizedState,r]},useDebugValue:gc,useDeferredValue:function(e,t){var r=mt();return xc(r,e,t)},useTransition:function(){var e=fc(!1);return e=Ef.bind(null,ve,e.queue,!0,!1),mt().memoizedState=e,[!1,e]},useSyncExternalStore:function(e,t,r){var o=ve,d=mt();if(Ce){if(r===void 0)throw Error(i(407));r=r()}else{if(r=t(),Ue===null)throw Error(i(349));(Ne&124)!==0||sf(o,t,r)}d.memoizedState=r;var f={value:r,getSnapshot:t};return d.queue=f,vf(rf.bind(null,o,f,e),[e]),o.flags|=2048,nr(9,Hl(),af.bind(null,o,f,r,t),null),r},useId:function(){var e=mt(),t=Ue.identifierPrefix;if(Ce){var r=ds,o=us;r=(o&~(1<<32-jt(o)-1)).toString(32)+r,t="«"+t+"R"+r,r=zl++,0<r&&(t+="H"+r.toString(32)),t+="»"}else r=Vp++,t="«"+t+"r"+r.toString(32)+"»";return e.memoizedState=t},useHostTransitionStatus:yc,useFormState:mf,useActionState:mf,useOptimistic:function(e){var t=mt();t.memoizedState=t.baseState=e;var r={pending:null,lanes:0,dispatch:null,lastRenderedReducer:null,lastRenderedState:null};return t.queue=r,t=vc.bind(null,ve,!0,r),r.dispatch=t,[e,t]},useMemoCache:uc,useCacheRefresh:function(){return mt().memoizedState=Kp.bind(null,ve)}},Lf={readContext:it,use:$l,useCallback:Sf,useContext:it,useEffect:bf,useImperativeHandle:Nf,useInsertionEffect:jf,useLayoutEffect:wf,useMemo:kf,useReducer:Bl,useRef:yf,useState:function(){return Bl(ms)},useDebugValue:gc,useDeferredValue:function(e,t){var r=Ye();return Cf(r,Te.memoizedState,e,t)},useTransition:function(){var e=Bl(ms)[0],t=Ye().memoizedState;return[typeof e=="boolean"?e:pn(e),t]},useSyncExternalStore:tf,useId:Rf,useHostTransitionStatus:yc,useFormState:gf,useActionState:gf,useOptimistic:function(e,t){var r=Ye();return of(r,Te,e,t)},useMemoCache:uc,useCacheRefresh:Of},Zp={readContext:it,use:$l,useCallback:Sf,useContext:it,useEffect:bf,useImperativeHandle:Nf,useInsertionEffect:jf,useLayoutEffect:wf,useMemo:kf,useReducer:hc,useRef:yf,useState:function(){return hc(ms)},useDebugValue:gc,useDeferredValue:function(e,t){var r=Ye();return Te===null?xc(r,e,t):Cf(r,Te.memoizedState,e,t)},useTransition:function(){var e=hc(ms)[0],t=Ye().memoizedState;return[typeof e=="boolean"?e:pn(e),t]},useSyncExternalStore:tf,useId:Rf,useHostTransitionStatus:yc,useFormState:pf,useActionState:pf,useOptimistic:function(e,t){var r=Ye();return Te!==null?of(r,Te,e,t):(r.baseState=e,[e,r.queue.dispatch])},useMemoCache:uc,useCacheRefresh:Of},lr=null,bn=0;function Yl(e){var t=bn;return bn+=1,lr===null&&(lr=[]),Fh(lr,e,t)}function jn(e,t){t=t.props.ref,e.ref=t!==void 0?t:null}function Fl(e,t){throw t.$$typeof===v?Error(i(525)):(e=Object.prototype.toString.call(t),Error(i(31,e==="[object Object]"?"object with keys {"+Object.keys(t).join(", ")+"}":e)))}function qf(e){var t=e._init;return t(e._payload)}function zf(e){function t(T,A){if(e){var D=T.deletions;D===null?(T.deletions=[A],T.flags|=16):D.push(A)}}function r(T,A){if(!e)return null;for(;A!==null;)t(T,A),A=A.sibling;return null}function o(T){for(var A=new Map;T!==null;)T.key!==null?A.set(T.key,T):A.set(T.index,T),T=T.sibling;return A}function d(T,A){return T=cs(T,A),T.index=0,T.sibling=null,T}function f(T,A,D){return T.index=D,e?(D=T.alternate,D!==null?(D=D.index,D<A?(T.flags|=67108866,A):D):(T.flags|=67108866,A)):(T.flags|=1048576,A)}function y(T){return e&&T.alternate===null&&(T.flags|=67108866),T}function b(T,A,D,B){return A===null||A.tag!==6?(A=$o(D,T.mode,B),A.return=T,A):(A=d(A,D),A.return=T,A)}function k(T,A,D,B){var ae=D.type;return ae===N?$(T,A,D.props.children,B,D.key):A!==null&&(A.elementType===ae||typeof ae=="object"&&ae!==null&&ae.$$typeof===se&&qf(ae)===A.type)?(A=d(A,D.props),jn(A,D),A.return=T,A):(A=Al(D.type,D.key,D.props,null,T.mode,B),jn(A,D),A.return=T,A)}function M(T,A,D,B){return A===null||A.tag!==4||A.stateNode.containerInfo!==D.containerInfo||A.stateNode.implementation!==D.implementation?(A=Bo(D,T.mode,B),A.return=T,A):(A=d(A,D.children||[]),A.return=T,A)}function $(T,A,D,B,ae){return A===null||A.tag!==7?(A=fa(D,T.mode,B,ae),A.return=T,A):(A=d(A,D),A.return=T,A)}function V(T,A,D){if(typeof A=="string"&&A!==""||typeof A=="number"||typeof A=="bigint")return A=$o(""+A,T.mode,D),A.return=T,A;if(typeof A=="object"&&A!==null){switch(A.$$typeof){case j:return D=Al(A.type,A.key,A.props,null,T.mode,D),jn(D,A),D.return=T,D;case w:return A=Bo(A,T.mode,D),A.return=T,A;case se:var B=A._init;return A=B(A._payload),V(T,A,D)}if(X(A)||xe(A))return A=fa(A,T.mode,D,null),A.return=T,A;if(typeof A.then=="function")return V(T,Yl(A),D);if(A.$$typeof===L)return V(T,Dl(T,A),D);Fl(T,A)}return null}function U(T,A,D,B){var ae=A!==null?A.key:null;if(typeof D=="string"&&D!==""||typeof D=="number"||typeof D=="bigint")return ae!==null?null:b(T,A,""+D,B);if(typeof D=="object"&&D!==null){switch(D.$$typeof){case j:return D.key===ae?k(T,A,D,B):null;case w:return D.key===ae?M(T,A,D,B):null;case se:return ae=D._init,D=ae(D._payload),U(T,A,D,B)}if(X(D)||xe(D))return ae!==null?null:$(T,A,D,B,null);if(typeof D.then=="function")return U(T,A,Yl(D),B);if(D.$$typeof===L)return U(T,A,Dl(T,D),B);Fl(T,D)}return null}function P(T,A,D,B,ae){if(typeof B=="string"&&B!==""||typeof B=="number"||typeof B=="bigint")return T=T.get(D)||null,b(A,T,""+B,ae);if(typeof B=="object"&&B!==null){switch(B.$$typeof){case j:return T=T.get(B.key===null?D:B.key)||null,k(A,T,B,ae);case w:return T=T.get(B.key===null?D:B.key)||null,M(A,T,B,ae);case se:var be=B._init;return B=be(B._payload),P(T,A,D,B,ae)}if(X(B)||xe(B))return T=T.get(D)||null,$(A,T,B,ae,null);if(typeof B.then=="function")return P(T,A,D,Yl(B),ae);if(B.$$typeof===L)return P(T,A,D,Dl(A,B),ae);Fl(A,B)}return null}function de(T,A,D,B){for(var ae=null,be=null,le=A,ue=A=0,et=null;le!==null&&ue<D.length;ue++){le.index>ue?(et=le,le=null):et=le.sibling;var ke=U(T,le,D[ue],B);if(ke===null){le===null&&(le=et);break}e&&le&&ke.alternate===null&&t(T,le),A=f(ke,A,ue),be===null?ae=ke:be.sibling=ke,be=ke,le=et}if(ue===D.length)return r(T,le),Ce&&ga(T,ue),ae;if(le===null){for(;ue<D.length;ue++)le=V(T,D[ue],B),le!==null&&(A=f(le,A,ue),be===null?ae=le:be.sibling=le,be=le);return Ce&&ga(T,ue),ae}for(le=o(le);ue<D.length;ue++)et=P(le,T,ue,D[ue],B),et!==null&&(e&&et.alternate!==null&&le.delete(et.key===null?ue:et.key),A=f(et,A,ue),be===null?ae=et:be.sibling=et,be=et);return e&&le.forEach(function(Ws){return t(T,Ws)}),Ce&&ga(T,ue),ae}function ce(T,A,D,B){if(D==null)throw Error(i(151));for(var ae=null,be=null,le=A,ue=A=0,et=null,ke=D.next();le!==null&&!ke.done;ue++,ke=D.next()){le.index>ue?(et=le,le=null):et=le.sibling;var Ws=U(T,le,ke.value,B);if(Ws===null){le===null&&(le=et);break}e&&le&&Ws.alternate===null&&t(T,le),A=f(Ws,A,ue),be===null?ae=Ws:be.sibling=Ws,be=Ws,le=et}if(ke.done)return r(T,le),Ce&&ga(T,ue),ae;if(le===null){for(;!ke.done;ue++,ke=D.next())ke=V(T,ke.value,B),ke!==null&&(A=f(ke,A,ue),be===null?ae=ke:be.sibling=ke,be=ke);return Ce&&ga(T,ue),ae}for(le=o(le);!ke.done;ue++,ke=D.next())ke=P(le,T,ue,ke.value,B),ke!==null&&(e&&ke.alternate!==null&&le.delete(ke.key===null?ue:ke.key),A=f(ke,A,ue),be===null?ae=ke:be.sibling=ke,be=ke);return e&&le.forEach(function(Jy){return t(T,Jy)}),Ce&&ga(T,ue),ae}function Oe(T,A,D,B){if(typeof D=="object"&&D!==null&&D.type===N&&D.key===null&&(D=D.props.children),typeof D=="object"&&D!==null){switch(D.$$typeof){case j:e:{for(var ae=D.key;A!==null;){if(A.key===ae){if(ae=D.type,ae===N){if(A.tag===7){r(T,A.sibling),B=d(A,D.props.children),B.return=T,T=B;break e}}else if(A.elementType===ae||typeof ae=="object"&&ae!==null&&ae.$$typeof===se&&qf(ae)===A.type){r(T,A.sibling),B=d(A,D.props),jn(B,D),B.return=T,T=B;break e}r(T,A);break}else t(T,A);A=A.sibling}D.type===N?(B=fa(D.props.children,T.mode,B,D.key),B.return=T,T=B):(B=Al(D.type,D.key,D.props,null,T.mode,B),jn(B,D),B.return=T,T=B)}return y(T);case w:e:{for(ae=D.key;A!==null;){if(A.key===ae)if(A.tag===4&&A.stateNode.containerInfo===D.containerInfo&&A.stateNode.implementation===D.implementation){r(T,A.sibling),B=d(A,D.children||[]),B.return=T,T=B;break e}else{r(T,A);break}else t(T,A);A=A.sibling}B=Bo(D,T.mode,B),B.return=T,T=B}return y(T);case se:return ae=D._init,D=ae(D._payload),Oe(T,A,D,B)}if(X(D))return de(T,A,D,B);if(xe(D)){if(ae=xe(D),typeof ae!="function")throw Error(i(150));return D=ae.call(D),ce(T,A,D,B)}if(typeof D.then=="function")return Oe(T,A,Yl(D),B);if(D.$$typeof===L)return Oe(T,A,Dl(T,D),B);Fl(T,D)}return typeof D=="string"&&D!==""||typeof D=="number"||typeof D=="bigint"?(D=""+D,A!==null&&A.tag===6?(r(T,A.sibling),B=d(A,D),B.return=T,T=B):(r(T,A),B=$o(D,T.mode,B),B.return=T,T=B),y(T)):r(T,A)}return function(T,A,D,B){try{bn=0;var ae=Oe(T,A,D,B);return lr=null,ae}catch(le){if(le===dn||le===Ul)throw le;var be=_t(29,le,null,T.mode);return be.lanes=B,be.return=T,be}finally{}}}var ir=zf(!0),$f=zf(!1),Ut=I(null),Zt=null;function qs(e){var t=e.alternate;Z(Ie,Ie.current&1),Z(Ut,e),Zt===null&&(t===null||sr.current!==null||t.memoizedState!==null)&&(Zt=e)}function Bf(e){if(e.tag===22){if(Z(Ie,Ie.current),Z(Ut,e),Zt===null){var t=e.alternate;t!==null&&t.memoizedState!==null&&(Zt=e)}}else zs()}function zs(){Z(Ie,Ie.current),Z(Ut,Ut.current)}function gs(e){F(Ut),Zt===e&&(Zt=null),F(Ie)}var Ie=I(0);function Il(e){for(var t=e;t!==null;){if(t.tag===13){var r=t.memoizedState;if(r!==null&&(r=r.dehydrated,r===null||r.data==="$?"||cu(r)))return t}else if(t.tag===19&&t.memoizedProps.revealOrder!==void 0){if((t.flags&128)!==0)return t}else if(t.child!==null){t.child.return=t,t=t.child;continue}if(t===e)break;for(;t.sibling===null;){if(t.return===null||t.return===e)return null;t=t.return}t.sibling.return=t.return,t=t.sibling}return null}function bc(e,t,r,o){t=e.memoizedState,r=r(o,t),r=r==null?t:p({},t,r),e.memoizedState=r,e.lanes===0&&(e.updateQueue.baseState=r)}var jc={enqueueSetState:function(e,t,r){e=e._reactInternals;var o=Ct(),d=Us(o);d.payload=t,r!=null&&(d.callback=r),t=Ps(e,d,o),t!==null&&(Et(t,e,o),fn(t,e,o))},enqueueReplaceState:function(e,t,r){e=e._reactInternals;var o=Ct(),d=Us(o);d.tag=1,d.payload=t,r!=null&&(d.callback=r),t=Ps(e,d,o),t!==null&&(Et(t,e,o),fn(t,e,o))},enqueueForceUpdate:function(e,t){e=e._reactInternals;var r=Ct(),o=Us(r);o.tag=2,t!=null&&(o.callback=t),t=Ps(e,o,r),t!==null&&(Et(t,e,r),fn(t,e,r))}};function Hf(e,t,r,o,d,f,y){return e=e.stateNode,typeof e.shouldComponentUpdate=="function"?e.shouldComponentUpdate(o,f,y):t.prototype&&t.prototype.isPureReactComponent?!sn(r,o)||!sn(d,f):!0}function Gf(e,t,r,o){e=t.state,typeof t.componentWillReceiveProps=="function"&&t.componentWillReceiveProps(r,o),typeof t.UNSAFE_componentWillReceiveProps=="function"&&t.UNSAFE_componentWillReceiveProps(r,o),t.state!==e&&jc.enqueueReplaceState(t,t.state,null)}function wa(e,t){var r=t;if("ref"in t){r={};for(var o in t)o!=="ref"&&(r[o]=t[o])}if(e=e.defaultProps){r===t&&(r=p({},r));for(var d in e)r[d]===void 0&&(r[d]=e[d])}return r}var Kl=typeof reportError=="function"?reportError:function(e){if(typeof window=="object"&&typeof window.ErrorEvent=="function"){var t=new window.ErrorEvent("error",{bubbles:!0,cancelable:!0,message:typeof e=="object"&&e!==null&&typeof e.message=="string"?String(e.message):String(e),error:e});if(!window.dispatchEvent(t))return}else if(typeof process=="object"&&typeof process.emit=="function"){process.emit("uncaughtException",e);return}console.error(e)};function Vf(e){Kl(e)}function Qf(e){console.error(e)}function Yf(e){Kl(e)}function Xl(e,t){try{var r=e.onUncaughtError;r(t.value,{componentStack:t.stack})}catch(o){setTimeout(function(){throw o})}}function Ff(e,t,r){try{var o=e.onCaughtError;o(r.value,{componentStack:r.stack,errorBoundary:t.tag===1?t.stateNode:null})}catch(d){setTimeout(function(){throw d})}}function wc(e,t,r){return r=Us(r),r.tag=3,r.payload={element:null},r.callback=function(){Xl(e,t)},r}function If(e){return e=Us(e),e.tag=3,e}function Kf(e,t,r,o){var d=r.type.getDerivedStateFromError;if(typeof d=="function"){var f=o.value;e.payload=function(){return d(f)},e.callback=function(){Ff(t,r,o)}}var y=r.stateNode;y!==null&&typeof y.componentDidCatch=="function"&&(e.callback=function(){Ff(t,r,o),typeof d!="function"&&(Qs===null?Qs=new Set([this]):Qs.add(this));var b=o.stack;this.componentDidCatch(o.value,{componentStack:b!==null?b:""})})}function Jp(e,t,r,o,d){if(r.flags|=32768,o!==null&&typeof o=="object"&&typeof o.then=="function"){if(t=r.alternate,t!==null&&on(t,r,d,!0),r=Ut.current,r!==null){switch(r.tag){case 13:return Zt===null?Yc():r.alternate===null&&He===0&&(He=3),r.flags&=-257,r.flags|=65536,r.lanes=d,o===Zo?r.flags|=16384:(t=r.updateQueue,t===null?r.updateQueue=new Set([o]):t.add(o),Ic(e,o,d)),!1;case 22:return r.flags|=65536,o===Zo?r.flags|=16384:(t=r.updateQueue,t===null?(t={transitions:null,markerInstances:null,retryQueue:new Set([o])},r.updateQueue=t):(r=t.retryQueue,r===null?t.retryQueue=new Set([o]):r.add(o)),Ic(e,o,d)),!1}throw Error(i(435,r.tag))}return Ic(e,o,d),Yc(),!1}if(Ce)return t=Ut.current,t!==null?((t.flags&65536)===0&&(t.flags|=256),t.flags|=65536,t.lanes=d,o!==Vo&&(e=Error(i(422),{cause:o}),ln(Rt(e,r)))):(o!==Vo&&(t=Error(i(423),{cause:o}),ln(Rt(t,r))),e=e.current.alternate,e.flags|=65536,d&=-d,e.lanes|=d,o=Rt(o,r),d=wc(e.stateNode,o,d),ec(e,d),He!==4&&(He=2)),!1;var f=Error(i(520),{cause:o});if(f=Rt(f,r),En===null?En=[f]:En.push(f),He!==4&&(He=2),t===null)return!0;o=Rt(o,r),r=t;do{switch(r.tag){case 3:return r.flags|=65536,e=d&-d,r.lanes|=e,e=wc(r.stateNode,o,e),ec(r,e),!1;case 1:if(t=r.type,f=r.stateNode,(r.flags&128)===0&&(typeof t.getDerivedStateFromError=="function"||f!==null&&typeof f.componentDidCatch=="function"&&(Qs===null||!Qs.has(f))))return r.flags|=65536,d&=-d,r.lanes|=d,d=If(d),Kf(d,e,r,o),ec(r,d),!1}r=r.return}while(r!==null);return!1}var Xf=Error(i(461)),Je=!1;function at(e,t,r,o){t.child=e===null?$f(t,null,r,o):ir(t,e.child,r,o)}function Zf(e,t,r,o,d){r=r.render;var f=t.ref;if("ref"in o){var y={};for(var b in o)b!=="ref"&&(y[b]=o[b])}else y=o;return va(t),o=nc(e,t,r,y,f,d),b=lc(),e!==null&&!Je?(ic(e,t,d),xs(e,t,d)):(Ce&&b&&Ho(t),t.flags|=1,at(e,t,o,d),t.child)}function Jf(e,t,r,o,d){if(e===null){var f=r.type;return typeof f=="function"&&!zo(f)&&f.defaultProps===void 0&&r.compare===null?(t.tag=15,t.type=f,Wf(e,t,f,o,d)):(e=Al(r.type,null,o,t,t.mode,d),e.ref=t.ref,e.return=t,t.child=e)}if(f=e.child,!Tc(e,d)){var y=f.memoizedProps;if(r=r.compare,r=r!==null?r:sn,r(y,o)&&e.ref===t.ref)return xs(e,t,d)}return t.flags|=1,e=cs(f,o),e.ref=t.ref,e.return=t,t.child=e}function Wf(e,t,r,o,d){if(e!==null){var f=e.memoizedProps;if(sn(f,o)&&e.ref===t.ref)if(Je=!1,t.pendingProps=o=f,Tc(e,d))(e.flags&131072)!==0&&(Je=!0);else return t.lanes=e.lanes,xs(e,t,d)}return _c(e,t,r,o,d)}function em(e,t,r){var o=t.pendingProps,d=o.children,f=e!==null?e.memoizedState:null;if(o.mode==="hidden"){if((t.flags&128)!==0){if(o=f!==null?f.baseLanes|r:r,e!==null){for(d=t.child=e.child,f=0;d!==null;)f=f|d.lanes|d.childLanes,d=d.sibling;t.childLanes=f&~o}else t.childLanes=0,t.child=null;return tm(e,t,o,r)}if((r&536870912)!==0)t.memoizedState={baseLanes:0,cachePool:null},e!==null&&Ml(t,f!==null?f.cachePool:null),f!==null?Jh(t,f):sc(),Bf(t);else return t.lanes=t.childLanes=536870912,tm(e,t,f!==null?f.baseLanes|r:r,r)}else f!==null?(Ml(t,f.cachePool),Jh(t,f),zs(),t.memoizedState=null):(e!==null&&Ml(t,null),sc(),zs());return at(e,t,d,r),t.child}function tm(e,t,r,o){var d=Xo();return d=d===null?null:{parent:Fe._currentValue,pool:d},t.memoizedState={baseLanes:r,cachePool:d},e!==null&&Ml(t,null),sc(),Bf(t),e!==null&&on(e,t,o,!0),null}function Zl(e,t){var r=t.ref;if(r===null)e!==null&&e.ref!==null&&(t.flags|=4194816);else{if(typeof r!="function"&&typeof r!="object")throw Error(i(284));(e===null||e.ref!==r)&&(t.flags|=4194816)}}function _c(e,t,r,o,d){return va(t),r=nc(e,t,r,o,void 0,d),o=lc(),e!==null&&!Je?(ic(e,t,d),xs(e,t,d)):(Ce&&o&&Ho(t),t.flags|=1,at(e,t,r,d),t.child)}function sm(e,t,r,o,d,f){return va(t),t.updateQueue=null,r=ef(t,o,r,d),Wh(e),o=lc(),e!==null&&!Je?(ic(e,t,f),xs(e,t,f)):(Ce&&o&&Ho(t),t.flags|=1,at(e,t,r,f),t.child)}function am(e,t,r,o,d){if(va(t),t.stateNode===null){var f=Za,y=r.contextType;typeof y=="object"&&y!==null&&(f=it(y)),f=new r(o,f),t.memoizedState=f.state!==null&&f.state!==void 0?f.state:null,f.updater=jc,t.stateNode=f,f._reactInternals=t,f=t.stateNode,f.props=o,f.state=t.memoizedState,f.refs={},Jo(t),y=r.contextType,f.context=typeof y=="object"&&y!==null?it(y):Za,f.state=t.memoizedState,y=r.getDerivedStateFromProps,typeof y=="function"&&(bc(t,r,y,o),f.state=t.memoizedState),typeof r.getDerivedStateFromProps=="function"||typeof f.getSnapshotBeforeUpdate=="function"||typeof f.UNSAFE_componentWillMount!="function"&&typeof f.componentWillMount!="function"||(y=f.state,typeof f.componentWillMount=="function"&&f.componentWillMount(),typeof f.UNSAFE_componentWillMount=="function"&&f.UNSAFE_componentWillMount(),y!==f.state&&jc.enqueueReplaceState(f,f.state,null),gn(t,o,f,d),mn(),f.state=t.memoizedState),typeof f.componentDidMount=="function"&&(t.flags|=4194308),o=!0}else if(e===null){f=t.stateNode;var b=t.memoizedProps,k=wa(r,b);f.props=k;var M=f.context,$=r.contextType;y=Za,typeof $=="object"&&$!==null&&(y=it($));var V=r.getDerivedStateFromProps;$=typeof V=="function"||typeof f.getSnapshotBeforeUpdate=="function",b=t.pendingProps!==b,$||typeof f.UNSAFE_componentWillReceiveProps!="function"&&typeof f.componentWillReceiveProps!="function"||(b||M!==y)&&Gf(t,f,o,y),Ms=!1;var U=t.memoizedState;f.state=U,gn(t,o,f,d),mn(),M=t.memoizedState,b||U!==M||Ms?(typeof V=="function"&&(bc(t,r,V,o),M=t.memoizedState),(k=Ms||Hf(t,r,k,o,U,M,y))?($||typeof f.UNSAFE_componentWillMount!="function"&&typeof f.componentWillMount!="function"||(typeof f.componentWillMount=="function"&&f.componentWillMount(),typeof f.UNSAFE_componentWillMount=="function"&&f.UNSAFE_componentWillMount()),typeof f.componentDidMount=="function"&&(t.flags|=4194308)):(typeof f.componentDidMount=="function"&&(t.flags|=4194308),t.memoizedProps=o,t.memoizedState=M),f.props=o,f.state=M,f.context=y,o=k):(typeof f.componentDidMount=="function"&&(t.flags|=4194308),o=!1)}else{f=t.stateNode,Wo(e,t),y=t.memoizedProps,$=wa(r,y),f.props=$,V=t.pendingProps,U=f.context,M=r.contextType,k=Za,typeof M=="object"&&M!==null&&(k=it(M)),b=r.getDerivedStateFromProps,(M=typeof b=="function"||typeof f.getSnapshotBeforeUpdate=="function")||typeof f.UNSAFE_componentWillReceiveProps!="function"&&typeof f.componentWillReceiveProps!="function"||(y!==V||U!==k)&&Gf(t,f,o,k),Ms=!1,U=t.memoizedState,f.state=U,gn(t,o,f,d),mn();var P=t.memoizedState;y!==V||U!==P||Ms||e!==null&&e.dependencies!==null&&Ol(e.dependencies)?(typeof b=="function"&&(bc(t,r,b,o),P=t.memoizedState),($=Ms||Hf(t,r,$,o,U,P,k)||e!==null&&e.dependencies!==null&&Ol(e.dependencies))?(M||typeof f.UNSAFE_componentWillUpdate!="function"&&typeof f.componentWillUpdate!="function"||(typeof f.componentWillUpdate=="function"&&f.componentWillUpdate(o,P,k),typeof f.UNSAFE_componentWillUpdate=="function"&&f.UNSAFE_componentWillUpdate(o,P,k)),typeof f.componentDidUpdate=="function"&&(t.flags|=4),typeof f.getSnapshotBeforeUpdate=="function"&&(t.flags|=1024)):(typeof f.componentDidUpdate!="function"||y===e.memoizedProps&&U===e.memoizedState||(t.flags|=4),typeof f.getSnapshotBeforeUpdate!="function"||y===e.memoizedProps&&U===e.memoizedState||(t.flags|=1024),t.memoizedProps=o,t.memoizedState=P),f.props=o,f.state=P,f.context=k,o=$):(typeof f.componentDidUpdate!="function"||y===e.memoizedProps&&U===e.memoizedState||(t.flags|=4),typeof f.getSnapshotBeforeUpdate!="function"||y===e.memoizedProps&&U===e.memoizedState||(t.flags|=1024),o=!1)}return f=o,Zl(e,t),o=(t.flags&128)!==0,f||o?(f=t.stateNode,r=o&&typeof r.getDerivedStateFromError!="function"?null:f.render(),t.flags|=1,e!==null&&o?(t.child=ir(t,e.child,null,d),t.child=ir(t,null,r,d)):at(e,t,r,d),t.memoizedState=f.state,e=t.child):e=xs(e,t,d),e}function rm(e,t,r,o){return nn(),t.flags|=256,at(e,t,r,o),t.child}var Nc={dehydrated:null,treeContext:null,retryLane:0,hydrationErrors:null};function Sc(e){return{baseLanes:e,cachePool:Vh()}}function kc(e,t,r){return e=e!==null?e.childLanes&~r:0,t&&(e|=Pt),e}function nm(e,t,r){var o=t.pendingProps,d=!1,f=(t.flags&128)!==0,y;if((y=f)||(y=e!==null&&e.memoizedState===null?!1:(Ie.current&2)!==0),y&&(d=!0,t.flags&=-129),y=(t.flags&32)!==0,t.flags&=-33,e===null){if(Ce){if(d?qs(t):zs(),Ce){var b=Be,k;if(k=b){e:{for(k=b,b=Xt;k.nodeType!==8;){if(!b){b=null;break e}if(k=$t(k.nextSibling),k===null){b=null;break e}}b=k}b!==null?(t.memoizedState={dehydrated:b,treeContext:ma!==null?{id:us,overflow:ds}:null,retryLane:536870912,hydrationErrors:null},k=_t(18,null,null,0),k.stateNode=b,k.return=t,t.child=k,ct=t,Be=null,k=!0):k=!1}k||pa(t)}if(b=t.memoizedState,b!==null&&(b=b.dehydrated,b!==null))return cu(b)?t.lanes=32:t.lanes=536870912,null;gs(t)}return b=o.children,o=o.fallback,d?(zs(),d=t.mode,b=Jl({mode:"hidden",children:b},d),o=fa(o,d,r,null),b.return=t,o.return=t,b.sibling=o,t.child=b,d=t.child,d.memoizedState=Sc(r),d.childLanes=kc(e,y,r),t.memoizedState=Nc,o):(qs(t),Cc(t,b))}if(k=e.memoizedState,k!==null&&(b=k.dehydrated,b!==null)){if(f)t.flags&256?(qs(t),t.flags&=-257,t=Ec(e,t,r)):t.memoizedState!==null?(zs(),t.child=e.child,t.flags|=128,t=null):(zs(),d=o.fallback,b=t.mode,o=Jl({mode:"visible",children:o.children},b),d=fa(d,b,r,null),d.flags|=2,o.return=t,d.return=t,o.sibling=d,t.child=o,ir(t,e.child,null,r),o=t.child,o.memoizedState=Sc(r),o.childLanes=kc(e,y,r),t.memoizedState=Nc,t=d);else if(qs(t),cu(b)){if(y=b.nextSibling&&b.nextSibling.dataset,y)var M=y.dgst;y=M,o=Error(i(419)),o.stack="",o.digest=y,ln({value:o,source:null,stack:null}),t=Ec(e,t,r)}else if(Je||on(e,t,r,!1),y=(r&e.childLanes)!==0,Je||y){if(y=Ue,y!==null&&(o=r&-r,o=(o&42)!==0?1:co(o),o=(o&(y.suspendedLanes|r))!==0?0:o,o!==0&&o!==k.retryLane))throw k.retryLane=o,Xa(e,o),Et(y,e,o),Xf;b.data==="$?"||Yc(),t=Ec(e,t,r)}else b.data==="$?"?(t.flags|=192,t.child=e.child,t=null):(e=k.treeContext,Be=$t(b.nextSibling),ct=t,Ce=!0,xa=null,Xt=!1,e!==null&&(Dt[Mt++]=us,Dt[Mt++]=ds,Dt[Mt++]=ma,us=e.id,ds=e.overflow,ma=t),t=Cc(t,o.children),t.flags|=4096);return t}return d?(zs(),d=o.fallback,b=t.mode,k=e.child,M=k.sibling,o=cs(k,{mode:"hidden",children:o.children}),o.subtreeFlags=k.subtreeFlags&65011712,M!==null?d=cs(M,d):(d=fa(d,b,r,null),d.flags|=2),d.return=t,o.return=t,o.sibling=d,t.child=o,o=d,d=t.child,b=e.child.memoizedState,b===null?b=Sc(r):(k=b.cachePool,k!==null?(M=Fe._currentValue,k=k.parent!==M?{parent:M,pool:M}:k):k=Vh(),b={baseLanes:b.baseLanes|r,cachePool:k}),d.memoizedState=b,d.childLanes=kc(e,y,r),t.memoizedState=Nc,o):(qs(t),r=e.child,e=r.sibling,r=cs(r,{mode:"visible",children:o.children}),r.return=t,r.sibling=null,e!==null&&(y=t.deletions,y===null?(t.deletions=[e],t.flags|=16):y.push(e)),t.child=r,t.memoizedState=null,r)}function Cc(e,t){return t=Jl({mode:"visible",children:t},e.mode),t.return=e,e.child=t}function Jl(e,t){return e=_t(22,e,null,t),e.lanes=0,e.stateNode={_visibility:1,_pendingMarkers:null,_retryCache:null,_transitions:null},e}function Ec(e,t,r){return ir(t,e.child,null,r),e=Cc(t,t.pendingProps.children),e.flags|=2,t.memoizedState=null,e}function lm(e,t,r){e.lanes|=t;var o=e.alternate;o!==null&&(o.lanes|=t),Yo(e.return,t,r)}function Ac(e,t,r,o,d){var f=e.memoizedState;f===null?e.memoizedState={isBackwards:t,rendering:null,renderingStartTime:0,last:o,tail:r,tailMode:d}:(f.isBackwards=t,f.rendering=null,f.renderingStartTime=0,f.last=o,f.tail=r,f.tailMode=d)}function im(e,t,r){var o=t.pendingProps,d=o.revealOrder,f=o.tail;if(at(e,t,o.children,r),o=Ie.current,(o&2)!==0)o=o&1|2,t.flags|=128;else{if(e!==null&&(e.flags&128)!==0)e:for(e=t.child;e!==null;){if(e.tag===13)e.memoizedState!==null&&lm(e,r,t);else if(e.tag===19)lm(e,r,t);else if(e.child!==null){e.child.return=e,e=e.child;continue}if(e===t)break e;for(;e.sibling===null;){if(e.return===null||e.return===t)break e;e=e.return}e.sibling.return=e.return,e=e.sibling}o&=1}switch(Z(Ie,o),d){case"forwards":for(r=t.child,d=null;r!==null;)e=r.alternate,e!==null&&Il(e)===null&&(d=r),r=r.sibling;r=d,r===null?(d=t.child,t.child=null):(d=r.sibling,r.sibling=null),Ac(t,!1,d,r,f);break;case"backwards":for(r=null,d=t.child,t.child=null;d!==null;){if(e=d.alternate,e!==null&&Il(e)===null){t.child=d;break}e=d.sibling,d.sibling=r,r=d,d=e}Ac(t,!0,r,null,f);break;case"together":Ac(t,!1,null,null,void 0);break;default:t.memoizedState=null}return t.child}function xs(e,t,r){if(e!==null&&(t.dependencies=e.dependencies),Vs|=t.lanes,(r&t.childLanes)===0)if(e!==null){if(on(e,t,r,!1),(r&t.childLanes)===0)return null}else return null;if(e!==null&&t.child!==e.child)throw Error(i(153));if(t.child!==null){for(e=t.child,r=cs(e,e.pendingProps),t.child=r,r.return=t;e.sibling!==null;)e=e.sibling,r=r.sibling=cs(e,e.pendingProps),r.return=t;r.sibling=null}return t.child}function Tc(e,t){return(e.lanes&t)!==0?!0:(e=e.dependencies,!!(e!==null&&Ol(e)))}function Wp(e,t,r){switch(t.tag){case 3:Le(t,t.stateNode.containerInfo),Ds(t,Fe,e.memoizedState.cache),nn();break;case 27:case 5:ro(t);break;case 4:Le(t,t.stateNode.containerInfo);break;case 10:Ds(t,t.type,t.memoizedProps.value);break;case 13:var o=t.memoizedState;if(o!==null)return o.dehydrated!==null?(qs(t),t.flags|=128,null):(r&t.child.childLanes)!==0?nm(e,t,r):(qs(t),e=xs(e,t,r),e!==null?e.sibling:null);qs(t);break;case 19:var d=(e.flags&128)!==0;if(o=(r&t.childLanes)!==0,o||(on(e,t,r,!1),o=(r&t.childLanes)!==0),d){if(o)return im(e,t,r);t.flags|=128}if(d=t.memoizedState,d!==null&&(d.rendering=null,d.tail=null,d.lastEffect=null),Z(Ie,Ie.current),o)break;return null;case 22:case 23:return t.lanes=0,em(e,t,r);case 24:Ds(t,Fe,e.memoizedState.cache)}return xs(e,t,r)}function om(e,t,r){if(e!==null)if(e.memoizedProps!==t.pendingProps)Je=!0;else{if(!Tc(e,r)&&(t.flags&128)===0)return Je=!1,Wp(e,t,r);Je=(e.flags&131072)!==0}else Je=!1,Ce&&(t.flags&1048576)!==0&&Lh(t,Rl,t.index);switch(t.lanes=0,t.tag){case 16:e:{e=t.pendingProps;var o=t.elementType,d=o._init;if(o=d(o._payload),t.type=o,typeof o=="function")zo(o)?(e=wa(o,e),t.tag=1,t=am(null,t,o,e,r)):(t.tag=0,t=_c(null,t,o,e,r));else{if(o!=null){if(d=o.$$typeof,d===z){t.tag=11,t=Zf(null,t,o,e,r);break e}else if(d===Y){t.tag=14,t=Jf(null,t,o,e,r);break e}}throw t=G(o)||o,Error(i(306,t,""))}}return t;case 0:return _c(e,t,t.type,t.pendingProps,r);case 1:return o=t.type,d=wa(o,t.pendingProps),am(e,t,o,d,r);case 3:e:{if(Le(t,t.stateNode.containerInfo),e===null)throw Error(i(387));o=t.pendingProps;var f=t.memoizedState;d=f.element,Wo(e,t),gn(t,o,null,r);var y=t.memoizedState;if(o=y.cache,Ds(t,Fe,o),o!==f.cache&&Fo(t,[Fe],r,!0),mn(),o=y.element,f.isDehydrated)if(f={element:o,isDehydrated:!1,cache:y.cache},t.updateQueue.baseState=f,t.memoizedState=f,t.flags&256){t=rm(e,t,o,r);break e}else if(o!==d){d=Rt(Error(i(424)),t),ln(d),t=rm(e,t,o,r);break e}else{switch(e=t.stateNode.containerInfo,e.nodeType){case 9:e=e.body;break;default:e=e.nodeName==="HTML"?e.ownerDocument.body:e}for(Be=$t(e.firstChild),ct=t,Ce=!0,xa=null,Xt=!0,r=$f(t,null,o,r),t.child=r;r;)r.flags=r.flags&-3|4096,r=r.sibling}else{if(nn(),o===d){t=xs(e,t,r);break e}at(e,t,o,r)}t=t.child}return t;case 26:return Zl(e,t),e===null?(r=h0(t.type,null,t.pendingProps,null))?t.memoizedState=r:Ce||(r=t.type,e=t.pendingProps,o=hi(fe.current).createElement(r),o[lt]=t,o[ht]=e,nt(o,r,e),Ze(o),t.stateNode=o):t.memoizedState=h0(t.type,e.memoizedProps,t.pendingProps,e.memoizedState),null;case 27:return ro(t),e===null&&Ce&&(o=t.stateNode=c0(t.type,t.pendingProps,fe.current),ct=t,Xt=!0,d=Be,Is(t.type)?(uu=d,Be=$t(o.firstChild)):Be=d),at(e,t,t.pendingProps.children,r),Zl(e,t),e===null&&(t.flags|=4194304),t.child;case 5:return e===null&&Ce&&((d=o=Be)&&(o=Cy(o,t.type,t.pendingProps,Xt),o!==null?(t.stateNode=o,ct=t,Be=$t(o.firstChild),Xt=!1,d=!0):d=!1),d||pa(t)),ro(t),d=t.type,f=t.pendingProps,y=e!==null?e.memoizedProps:null,o=f.children,lu(d,f)?o=null:y!==null&&lu(d,y)&&(t.flags|=32),t.memoizedState!==null&&(d=nc(e,t,Qp,null,null,r),Ln._currentValue=d),Zl(e,t),at(e,t,o,r),t.child;case 6:return e===null&&Ce&&((e=r=Be)&&(r=Ey(r,t.pendingProps,Xt),r!==null?(t.stateNode=r,ct=t,Be=null,e=!0):e=!1),e||pa(t)),null;case 13:return nm(e,t,r);case 4:return Le(t,t.stateNode.containerInfo),o=t.pendingProps,e===null?t.child=ir(t,null,o,r):at(e,t,o,r),t.child;case 11:return Zf(e,t,t.type,t.pendingProps,r);case 7:return at(e,t,t.pendingProps,r),t.child;case 8:return at(e,t,t.pendingProps.children,r),t.child;case 12:return at(e,t,t.pendingProps.children,r),t.child;case 10:return o=t.pendingProps,Ds(t,t.type,o.value),at(e,t,o.children,r),t.child;case 9:return d=t.type._context,o=t.pendingProps.children,va(t),d=it(d),o=o(d),t.flags|=1,at(e,t,o,r),t.child;case 14:return Jf(e,t,t.type,t.pendingProps,r);case 15:return Wf(e,t,t.type,t.pendingProps,r);case 19:return im(e,t,r);case 31:return o=t.pendingProps,r=t.mode,o={mode:o.mode,children:o.children},e===null?(r=Jl(o,r),r.ref=t.ref,t.child=r,r.return=t,t=r):(r=cs(e.child,o),r.ref=t.ref,t.child=r,r.return=t,t=r),t;case 22:return em(e,t,r);case 24:return va(t),o=it(Fe),e===null?(d=Xo(),d===null&&(d=Ue,f=Io(),d.pooledCache=f,f.refCount++,f!==null&&(d.pooledCacheLanes|=r),d=f),t.memoizedState={parent:o,cache:d},Jo(t),Ds(t,Fe,d)):((e.lanes&r)!==0&&(Wo(e,t),gn(t,null,null,r),mn()),d=e.memoizedState,f=t.memoizedState,d.parent!==o?(d={parent:o,cache:o},t.memoizedState=d,t.lanes===0&&(t.memoizedState=t.updateQueue.baseState=d),Ds(t,Fe,o)):(o=f.cache,Ds(t,Fe,o),o!==d.cache&&Fo(t,[Fe],r,!0))),at(e,t,t.pendingProps.children,r),t.child;case 29:throw t.pendingProps}throw Error(i(156,t.tag))}function ps(e){e.flags|=4}function cm(e,t){if(t.type!=="stylesheet"||(t.state.loading&4)!==0)e.flags&=-16777217;else if(e.flags|=16777216,!p0(t)){if(t=Ut.current,t!==null&&((Ne&4194048)===Ne?Zt!==null:(Ne&62914560)!==Ne&&(Ne&536870912)===0||t!==Zt))throw hn=Zo,Qh;e.flags|=8192}}function Wl(e,t){t!==null&&(e.flags|=4),e.flags&16384&&(t=e.tag!==22?$d():536870912,e.lanes|=t,dr|=t)}function wn(e,t){if(!Ce)switch(e.tailMode){case"hidden":t=e.tail;for(var r=null;t!==null;)t.alternate!==null&&(r=t),t=t.sibling;r===null?e.tail=null:r.sibling=null;break;case"collapsed":r=e.tail;for(var o=null;r!==null;)r.alternate!==null&&(o=r),r=r.sibling;o===null?t||e.tail===null?e.tail=null:e.tail.sibling=null:o.sibling=null}}function $e(e){var t=e.alternate!==null&&e.alternate.child===e.child,r=0,o=0;if(t)for(var d=e.child;d!==null;)r|=d.lanes|d.childLanes,o|=d.subtreeFlags&65011712,o|=d.flags&65011712,d.return=e,d=d.sibling;else for(d=e.child;d!==null;)r|=d.lanes|d.childLanes,o|=d.subtreeFlags,o|=d.flags,d.return=e,d=d.sibling;return e.subtreeFlags|=o,e.childLanes=r,t}function ey(e,t,r){var o=t.pendingProps;switch(Go(t),t.tag){case 31:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return $e(t),null;case 1:return $e(t),null;case 3:return r=t.stateNode,o=null,e!==null&&(o=e.memoizedState.cache),t.memoizedState.cache!==o&&(t.flags|=2048),fs(Fe),As(),r.pendingContext&&(r.context=r.pendingContext,r.pendingContext=null),(e===null||e.child===null)&&(rn(t)?ps(t):e===null||e.memoizedState.isDehydrated&&(t.flags&256)===0||(t.flags|=1024,$h())),$e(t),null;case 26:return r=t.memoizedState,e===null?(ps(t),r!==null?($e(t),cm(t,r)):($e(t),t.flags&=-16777217)):r?r!==e.memoizedState?(ps(t),$e(t),cm(t,r)):($e(t),t.flags&=-16777217):(e.memoizedProps!==o&&ps(t),$e(t),t.flags&=-16777217),null;case 27:ul(t),r=fe.current;var d=t.type;if(e!==null&&t.stateNode!=null)e.memoizedProps!==o&&ps(t);else{if(!o){if(t.stateNode===null)throw Error(i(166));return $e(t),null}e=ie.current,rn(t)?qh(t):(e=c0(d,o,r),t.stateNode=e,ps(t))}return $e(t),null;case 5:if(ul(t),r=t.type,e!==null&&t.stateNode!=null)e.memoizedProps!==o&&ps(t);else{if(!o){if(t.stateNode===null)throw Error(i(166));return $e(t),null}if(e=ie.current,rn(t))qh(t);else{switch(d=hi(fe.current),e){case 1:e=d.createElementNS("http://www.w3.org/2000/svg",r);break;case 2:e=d.createElementNS("http://www.w3.org/1998/Math/MathML",r);break;default:switch(r){case"svg":e=d.createElementNS("http://www.w3.org/2000/svg",r);break;case"math":e=d.createElementNS("http://www.w3.org/1998/Math/MathML",r);break;case"script":e=d.createElement("div"),e.innerHTML="<script><\/script>",e=e.removeChild(e.firstChild);break;case"select":e=typeof o.is=="string"?d.createElement("select",{is:o.is}):d.createElement("select"),o.multiple?e.multiple=!0:o.size&&(e.size=o.size);break;default:e=typeof o.is=="string"?d.createElement(r,{is:o.is}):d.createElement(r)}}e[lt]=t,e[ht]=o;e:for(d=t.child;d!==null;){if(d.tag===5||d.tag===6)e.appendChild(d.stateNode);else if(d.tag!==4&&d.tag!==27&&d.child!==null){d.child.return=d,d=d.child;continue}if(d===t)break e;for(;d.sibling===null;){if(d.return===null||d.return===t)break e;d=d.return}d.sibling.return=d.return,d=d.sibling}t.stateNode=e;e:switch(nt(e,r,o),r){case"button":case"input":case"select":case"textarea":e=!!o.autoFocus;break e;case"img":e=!0;break e;default:e=!1}e&&ps(t)}}return $e(t),t.flags&=-16777217,null;case 6:if(e&&t.stateNode!=null)e.memoizedProps!==o&&ps(t);else{if(typeof o!="string"&&t.stateNode===null)throw Error(i(166));if(e=fe.current,rn(t)){if(e=t.stateNode,r=t.memoizedProps,o=null,d=ct,d!==null)switch(d.tag){case 27:case 5:o=d.memoizedProps}e[lt]=t,e=!!(e.nodeValue===r||o!==null&&o.suppressHydrationWarning===!0||s0(e.nodeValue,r)),e||pa(t)}else e=hi(e).createTextNode(o),e[lt]=t,t.stateNode=e}return $e(t),null;case 13:if(o=t.memoizedState,e===null||e.memoizedState!==null&&e.memoizedState.dehydrated!==null){if(d=rn(t),o!==null&&o.dehydrated!==null){if(e===null){if(!d)throw Error(i(318));if(d=t.memoizedState,d=d!==null?d.dehydrated:null,!d)throw Error(i(317));d[lt]=t}else nn(),(t.flags&128)===0&&(t.memoizedState=null),t.flags|=4;$e(t),d=!1}else d=$h(),e!==null&&e.memoizedState!==null&&(e.memoizedState.hydrationErrors=d),d=!0;if(!d)return t.flags&256?(gs(t),t):(gs(t),null)}if(gs(t),(t.flags&128)!==0)return t.lanes=r,t;if(r=o!==null,e=e!==null&&e.memoizedState!==null,r){o=t.child,d=null,o.alternate!==null&&o.alternate.memoizedState!==null&&o.alternate.memoizedState.cachePool!==null&&(d=o.alternate.memoizedState.cachePool.pool);var f=null;o.memoizedState!==null&&o.memoizedState.cachePool!==null&&(f=o.memoizedState.cachePool.pool),f!==d&&(o.flags|=2048)}return r!==e&&r&&(t.child.flags|=8192),Wl(t,t.updateQueue),$e(t),null;case 4:return As(),e===null&&tu(t.stateNode.containerInfo),$e(t),null;case 10:return fs(t.type),$e(t),null;case 19:if(F(Ie),d=t.memoizedState,d===null)return $e(t),null;if(o=(t.flags&128)!==0,f=d.rendering,f===null)if(o)wn(d,!1);else{if(He!==0||e!==null&&(e.flags&128)!==0)for(e=t.child;e!==null;){if(f=Il(e),f!==null){for(t.flags|=128,wn(d,!1),e=f.updateQueue,t.updateQueue=e,Wl(t,e),t.subtreeFlags=0,e=r,r=t.child;r!==null;)Ph(r,e),r=r.sibling;return Z(Ie,Ie.current&1|2),t.child}e=e.sibling}d.tail!==null&&Kt()>si&&(t.flags|=128,o=!0,wn(d,!1),t.lanes=4194304)}else{if(!o)if(e=Il(f),e!==null){if(t.flags|=128,o=!0,e=e.updateQueue,t.updateQueue=e,Wl(t,e),wn(d,!0),d.tail===null&&d.tailMode==="hidden"&&!f.alternate&&!Ce)return $e(t),null}else 2*Kt()-d.renderingStartTime>si&&r!==536870912&&(t.flags|=128,o=!0,wn(d,!1),t.lanes=4194304);d.isBackwards?(f.sibling=t.child,t.child=f):(e=d.last,e!==null?e.sibling=f:t.child=f,d.last=f)}return d.tail!==null?(t=d.tail,d.rendering=t,d.tail=t.sibling,d.renderingStartTime=Kt(),t.sibling=null,e=Ie.current,Z(Ie,o?e&1|2:e&1),t):($e(t),null);case 22:case 23:return gs(t),ac(),o=t.memoizedState!==null,e!==null?e.memoizedState!==null!==o&&(t.flags|=8192):o&&(t.flags|=8192),o?(r&536870912)!==0&&(t.flags&128)===0&&($e(t),t.subtreeFlags&6&&(t.flags|=8192)):$e(t),r=t.updateQueue,r!==null&&Wl(t,r.retryQueue),r=null,e!==null&&e.memoizedState!==null&&e.memoizedState.cachePool!==null&&(r=e.memoizedState.cachePool.pool),o=null,t.memoizedState!==null&&t.memoizedState.cachePool!==null&&(o=t.memoizedState.cachePool.pool),o!==r&&(t.flags|=2048),e!==null&&F(ba),null;case 24:return r=null,e!==null&&(r=e.memoizedState.cache),t.memoizedState.cache!==r&&(t.flags|=2048),fs(Fe),$e(t),null;case 25:return null;case 30:return null}throw Error(i(156,t.tag))}function ty(e,t){switch(Go(t),t.tag){case 1:return e=t.flags,e&65536?(t.flags=e&-65537|128,t):null;case 3:return fs(Fe),As(),e=t.flags,(e&65536)!==0&&(e&128)===0?(t.flags=e&-65537|128,t):null;case 26:case 27:case 5:return ul(t),null;case 13:if(gs(t),e=t.memoizedState,e!==null&&e.dehydrated!==null){if(t.alternate===null)throw Error(i(340));nn()}return e=t.flags,e&65536?(t.flags=e&-65537|128,t):null;case 19:return F(Ie),null;case 4:return As(),null;case 10:return fs(t.type),null;case 22:case 23:return gs(t),ac(),e!==null&&F(ba),e=t.flags,e&65536?(t.flags=e&-65537|128,t):null;case 24:return fs(Fe),null;case 25:return null;default:return null}}function um(e,t){switch(Go(t),t.tag){case 3:fs(Fe),As();break;case 26:case 27:case 5:ul(t);break;case 4:As();break;case 13:gs(t);break;case 19:F(Ie);break;case 10:fs(t.type);break;case 22:case 23:gs(t),ac(),e!==null&&F(ba);break;case 24:fs(Fe)}}function _n(e,t){try{var r=t.updateQueue,o=r!==null?r.lastEffect:null;if(o!==null){var d=o.next;r=d;do{if((r.tag&e)===e){o=void 0;var f=r.create,y=r.inst;o=f(),y.destroy=o}r=r.next}while(r!==d)}}catch(b){De(t,t.return,b)}}function $s(e,t,r){try{var o=t.updateQueue,d=o!==null?o.lastEffect:null;if(d!==null){var f=d.next;o=f;do{if((o.tag&e)===e){var y=o.inst,b=y.destroy;if(b!==void 0){y.destroy=void 0,d=t;var k=r,M=b;try{M()}catch($){De(d,k,$)}}}o=o.next}while(o!==f)}}catch($){De(t,t.return,$)}}function dm(e){var t=e.updateQueue;if(t!==null){var r=e.stateNode;try{Zh(t,r)}catch(o){De(e,e.return,o)}}}function hm(e,t,r){r.props=wa(e.type,e.memoizedProps),r.state=e.memoizedState;try{r.componentWillUnmount()}catch(o){De(e,t,o)}}function Nn(e,t){try{var r=e.ref;if(r!==null){switch(e.tag){case 26:case 27:case 5:var o=e.stateNode;break;case 30:o=e.stateNode;break;default:o=e.stateNode}typeof r=="function"?e.refCleanup=r(o):r.current=o}}catch(d){De(e,t,d)}}function Jt(e,t){var r=e.ref,o=e.refCleanup;if(r!==null)if(typeof o=="function")try{o()}catch(d){De(e,t,d)}finally{e.refCleanup=null,e=e.alternate,e!=null&&(e.refCleanup=null)}else if(typeof r=="function")try{r(null)}catch(d){De(e,t,d)}else r.current=null}function fm(e){var t=e.type,r=e.memoizedProps,o=e.stateNode;try{e:switch(t){case"button":case"input":case"select":case"textarea":r.autoFocus&&o.focus();break e;case"img":r.src?o.src=r.src:r.srcSet&&(o.srcset=r.srcSet)}}catch(d){De(e,e.return,d)}}function Rc(e,t,r){try{var o=e.stateNode;wy(o,e.type,r,t),o[ht]=t}catch(d){De(e,e.return,d)}}function mm(e){return e.tag===5||e.tag===3||e.tag===26||e.tag===27&&Is(e.type)||e.tag===4}function Oc(e){e:for(;;){for(;e.sibling===null;){if(e.return===null||mm(e.return))return null;e=e.return}for(e.sibling.return=e.return,e=e.sibling;e.tag!==5&&e.tag!==6&&e.tag!==18;){if(e.tag===27&&Is(e.type)||e.flags&2||e.child===null||e.tag===4)continue e;e.child.return=e,e=e.child}if(!(e.flags&2))return e.stateNode}}function Dc(e,t,r){var o=e.tag;if(o===5||o===6)e=e.stateNode,t?(r.nodeType===9?r.body:r.nodeName==="HTML"?r.ownerDocument.body:r).insertBefore(e,t):(t=r.nodeType===9?r.body:r.nodeName==="HTML"?r.ownerDocument.body:r,t.appendChild(e),r=r._reactRootContainer,r!=null||t.onclick!==null||(t.onclick=di));else if(o!==4&&(o===27&&Is(e.type)&&(r=e.stateNode,t=null),e=e.child,e!==null))for(Dc(e,t,r),e=e.sibling;e!==null;)Dc(e,t,r),e=e.sibling}function ei(e,t,r){var o=e.tag;if(o===5||o===6)e=e.stateNode,t?r.insertBefore(e,t):r.appendChild(e);else if(o!==4&&(o===27&&Is(e.type)&&(r=e.stateNode),e=e.child,e!==null))for(ei(e,t,r),e=e.sibling;e!==null;)ei(e,t,r),e=e.sibling}function gm(e){var t=e.stateNode,r=e.memoizedProps;try{for(var o=e.type,d=t.attributes;d.length;)t.removeAttributeNode(d[0]);nt(t,o,r),t[lt]=e,t[ht]=r}catch(f){De(e,e.return,f)}}var ys=!1,Ve=!1,Mc=!1,xm=typeof WeakSet=="function"?WeakSet:Set,We=null;function sy(e,t){if(e=e.containerInfo,ru=yi,e=kh(e),Oo(e)){if("selectionStart"in e)var r={start:e.selectionStart,end:e.selectionEnd};else e:{r=(r=e.ownerDocument)&&r.defaultView||window;var o=r.getSelection&&r.getSelection();if(o&&o.rangeCount!==0){r=o.anchorNode;var d=o.anchorOffset,f=o.focusNode;o=o.focusOffset;try{r.nodeType,f.nodeType}catch{r=null;break e}var y=0,b=-1,k=-1,M=0,$=0,V=e,U=null;t:for(;;){for(var P;V!==r||d!==0&&V.nodeType!==3||(b=y+d),V!==f||o!==0&&V.nodeType!==3||(k=y+o),V.nodeType===3&&(y+=V.nodeValue.length),(P=V.firstChild)!==null;)U=V,V=P;for(;;){if(V===e)break t;if(U===r&&++M===d&&(b=y),U===f&&++$===o&&(k=y),(P=V.nextSibling)!==null)break;V=U,U=V.parentNode}V=P}r=b===-1||k===-1?null:{start:b,end:k}}else r=null}r=r||{start:0,end:0}}else r=null;for(nu={focusedElem:e,selectionRange:r},yi=!1,We=t;We!==null;)if(t=We,e=t.child,(t.subtreeFlags&1024)!==0&&e!==null)e.return=t,We=e;else for(;We!==null;){switch(t=We,f=t.alternate,e=t.flags,t.tag){case 0:break;case 11:case 15:break;case 1:if((e&1024)!==0&&f!==null){e=void 0,r=t,d=f.memoizedProps,f=f.memoizedState,o=r.stateNode;try{var de=wa(r.type,d,r.elementType===r.type);e=o.getSnapshotBeforeUpdate(de,f),o.__reactInternalSnapshotBeforeUpdate=e}catch(ce){De(r,r.return,ce)}}break;case 3:if((e&1024)!==0){if(e=t.stateNode.containerInfo,r=e.nodeType,r===9)ou(e);else if(r===1)switch(e.nodeName){case"HEAD":case"HTML":case"BODY":ou(e);break;default:e.textContent=""}}break;case 5:case 26:case 27:case 6:case 4:case 17:break;default:if((e&1024)!==0)throw Error(i(163))}if(e=t.sibling,e!==null){e.return=t.return,We=e;break}We=t.return}}function pm(e,t,r){var o=r.flags;switch(r.tag){case 0:case 11:case 15:Bs(e,r),o&4&&_n(5,r);break;case 1:if(Bs(e,r),o&4)if(e=r.stateNode,t===null)try{e.componentDidMount()}catch(y){De(r,r.return,y)}else{var d=wa(r.type,t.memoizedProps);t=t.memoizedState;try{e.componentDidUpdate(d,t,e.__reactInternalSnapshotBeforeUpdate)}catch(y){De(r,r.return,y)}}o&64&&dm(r),o&512&&Nn(r,r.return);break;case 3:if(Bs(e,r),o&64&&(e=r.updateQueue,e!==null)){if(t=null,r.child!==null)switch(r.child.tag){case 27:case 5:t=r.child.stateNode;break;case 1:t=r.child.stateNode}try{Zh(e,t)}catch(y){De(r,r.return,y)}}break;case 27:t===null&&o&4&&gm(r);case 26:case 5:Bs(e,r),t===null&&o&4&&fm(r),o&512&&Nn(r,r.return);break;case 12:Bs(e,r);break;case 13:Bs(e,r),o&4&&bm(e,r),o&64&&(e=r.memoizedState,e!==null&&(e=e.dehydrated,e!==null&&(r=dy.bind(null,r),Ay(e,r))));break;case 22:if(o=r.memoizedState!==null||ys,!o){t=t!==null&&t.memoizedState!==null||Ve,d=ys;var f=Ve;ys=o,(Ve=t)&&!f?Hs(e,r,(r.subtreeFlags&8772)!==0):Bs(e,r),ys=d,Ve=f}break;case 30:break;default:Bs(e,r)}}function ym(e){var t=e.alternate;t!==null&&(e.alternate=null,ym(t)),e.child=null,e.deletions=null,e.sibling=null,e.tag===5&&(t=e.stateNode,t!==null&&fo(t)),e.stateNode=null,e.return=null,e.dependencies=null,e.memoizedProps=null,e.memoizedState=null,e.pendingProps=null,e.stateNode=null,e.updateQueue=null}var qe=null,gt=!1;function vs(e,t,r){for(r=r.child;r!==null;)vm(e,t,r),r=r.sibling}function vm(e,t,r){if(bt&&typeof bt.onCommitFiberUnmount=="function")try{bt.onCommitFiberUnmount(Vr,r)}catch{}switch(r.tag){case 26:Ve||Jt(r,t),vs(e,t,r),r.memoizedState?r.memoizedState.count--:r.stateNode&&(r=r.stateNode,r.parentNode.removeChild(r));break;case 27:Ve||Jt(r,t);var o=qe,d=gt;Is(r.type)&&(qe=r.stateNode,gt=!1),vs(e,t,r),Dn(r.stateNode),qe=o,gt=d;break;case 5:Ve||Jt(r,t);case 6:if(o=qe,d=gt,qe=null,vs(e,t,r),qe=o,gt=d,qe!==null)if(gt)try{(qe.nodeType===9?qe.body:qe.nodeName==="HTML"?qe.ownerDocument.body:qe).removeChild(r.stateNode)}catch(f){De(r,t,f)}else try{qe.removeChild(r.stateNode)}catch(f){De(r,t,f)}break;case 18:qe!==null&&(gt?(e=qe,i0(e.nodeType===9?e.body:e.nodeName==="HTML"?e.ownerDocument.body:e,r.stateNode),Bn(e)):i0(qe,r.stateNode));break;case 4:o=qe,d=gt,qe=r.stateNode.containerInfo,gt=!0,vs(e,t,r),qe=o,gt=d;break;case 0:case 11:case 14:case 15:Ve||$s(2,r,t),Ve||$s(4,r,t),vs(e,t,r);break;case 1:Ve||(Jt(r,t),o=r.stateNode,typeof o.componentWillUnmount=="function"&&hm(r,t,o)),vs(e,t,r);break;case 21:vs(e,t,r);break;case 22:Ve=(o=Ve)||r.memoizedState!==null,vs(e,t,r),Ve=o;break;default:vs(e,t,r)}}function bm(e,t){if(t.memoizedState===null&&(e=t.alternate,e!==null&&(e=e.memoizedState,e!==null&&(e=e.dehydrated,e!==null))))try{Bn(e)}catch(r){De(t,t.return,r)}}function ay(e){switch(e.tag){case 13:case 19:var t=e.stateNode;return t===null&&(t=e.stateNode=new xm),t;case 22:return e=e.stateNode,t=e._retryCache,t===null&&(t=e._retryCache=new xm),t;default:throw Error(i(435,e.tag))}}function Uc(e,t){var r=ay(e);t.forEach(function(o){var d=hy.bind(null,e,o);r.has(o)||(r.add(o),o.then(d,d))})}function Nt(e,t){var r=t.deletions;if(r!==null)for(var o=0;o<r.length;o++){var d=r[o],f=e,y=t,b=y;e:for(;b!==null;){switch(b.tag){case 27:if(Is(b.type)){qe=b.stateNode,gt=!1;break e}break;case 5:qe=b.stateNode,gt=!1;break e;case 3:case 4:qe=b.stateNode.containerInfo,gt=!0;break e}b=b.return}if(qe===null)throw Error(i(160));vm(f,y,d),qe=null,gt=!1,f=d.alternate,f!==null&&(f.return=null),d.return=null}if(t.subtreeFlags&13878)for(t=t.child;t!==null;)jm(t,e),t=t.sibling}var zt=null;function jm(e,t){var r=e.alternate,o=e.flags;switch(e.tag){case 0:case 11:case 14:case 15:Nt(t,e),St(e),o&4&&($s(3,e,e.return),_n(3,e),$s(5,e,e.return));break;case 1:Nt(t,e),St(e),o&512&&(Ve||r===null||Jt(r,r.return)),o&64&&ys&&(e=e.updateQueue,e!==null&&(o=e.callbacks,o!==null&&(r=e.shared.hiddenCallbacks,e.shared.hiddenCallbacks=r===null?o:r.concat(o))));break;case 26:var d=zt;if(Nt(t,e),St(e),o&512&&(Ve||r===null||Jt(r,r.return)),o&4){var f=r!==null?r.memoizedState:null;if(o=e.memoizedState,r===null)if(o===null)if(e.stateNode===null){e:{o=e.type,r=e.memoizedProps,d=d.ownerDocument||d;t:switch(o){case"title":f=d.getElementsByTagName("title")[0],(!f||f[Fr]||f[lt]||f.namespaceURI==="http://www.w3.org/2000/svg"||f.hasAttribute("itemprop"))&&(f=d.createElement(o),d.head.insertBefore(f,d.querySelector("head > title"))),nt(f,o,r),f[lt]=e,Ze(f),o=f;break e;case"link":var y=g0("link","href",d).get(o+(r.href||""));if(y){for(var b=0;b<y.length;b++)if(f=y[b],f.getAttribute("href")===(r.href==null||r.href===""?null:r.href)&&f.getAttribute("rel")===(r.rel==null?null:r.rel)&&f.getAttribute("title")===(r.title==null?null:r.title)&&f.getAttribute("crossorigin")===(r.crossOrigin==null?null:r.crossOrigin)){y.splice(b,1);break t}}f=d.createElement(o),nt(f,o,r),d.head.appendChild(f);break;case"meta":if(y=g0("meta","content",d).get(o+(r.content||""))){for(b=0;b<y.length;b++)if(f=y[b],f.getAttribute("content")===(r.content==null?null:""+r.content)&&f.getAttribute("name")===(r.name==null?null:r.name)&&f.getAttribute("property")===(r.property==null?null:r.property)&&f.getAttribute("http-equiv")===(r.httpEquiv==null?null:r.httpEquiv)&&f.getAttribute("charset")===(r.charSet==null?null:r.charSet)){y.splice(b,1);break t}}f=d.createElement(o),nt(f,o,r),d.head.appendChild(f);break;default:throw Error(i(468,o))}f[lt]=e,Ze(f),o=f}e.stateNode=o}else x0(d,e.type,e.stateNode);else e.stateNode=m0(d,o,e.memoizedProps);else f!==o?(f===null?r.stateNode!==null&&(r=r.stateNode,r.parentNode.removeChild(r)):f.count--,o===null?x0(d,e.type,e.stateNode):m0(d,o,e.memoizedProps)):o===null&&e.stateNode!==null&&Rc(e,e.memoizedProps,r.memoizedProps)}break;case 27:Nt(t,e),St(e),o&512&&(Ve||r===null||Jt(r,r.return)),r!==null&&o&4&&Rc(e,e.memoizedProps,r.memoizedProps);break;case 5:if(Nt(t,e),St(e),o&512&&(Ve||r===null||Jt(r,r.return)),e.flags&32){d=e.stateNode;try{Ga(d,"")}catch(P){De(e,e.return,P)}}o&4&&e.stateNode!=null&&(d=e.memoizedProps,Rc(e,d,r!==null?r.memoizedProps:d)),o&1024&&(Mc=!0);break;case 6:if(Nt(t,e),St(e),o&4){if(e.stateNode===null)throw Error(i(162));o=e.memoizedProps,r=e.stateNode;try{r.nodeValue=o}catch(P){De(e,e.return,P)}}break;case 3:if(gi=null,d=zt,zt=fi(t.containerInfo),Nt(t,e),zt=d,St(e),o&4&&r!==null&&r.memoizedState.isDehydrated)try{Bn(t.containerInfo)}catch(P){De(e,e.return,P)}Mc&&(Mc=!1,wm(e));break;case 4:o=zt,zt=fi(e.stateNode.containerInfo),Nt(t,e),St(e),zt=o;break;case 12:Nt(t,e),St(e);break;case 13:Nt(t,e),St(e),e.child.flags&8192&&e.memoizedState!==null!=(r!==null&&r.memoizedState!==null)&&(Bc=Kt()),o&4&&(o=e.updateQueue,o!==null&&(e.updateQueue=null,Uc(e,o)));break;case 22:d=e.memoizedState!==null;var k=r!==null&&r.memoizedState!==null,M=ys,$=Ve;if(ys=M||d,Ve=$||k,Nt(t,e),Ve=$,ys=M,St(e),o&8192)e:for(t=e.stateNode,t._visibility=d?t._visibility&-2:t._visibility|1,d&&(r===null||k||ys||Ve||_a(e)),r=null,t=e;;){if(t.tag===5||t.tag===26){if(r===null){k=r=t;try{if(f=k.stateNode,d)y=f.style,typeof y.setProperty=="function"?y.setProperty("display","none","important"):y.display="none";else{b=k.stateNode;var V=k.memoizedProps.style,U=V!=null&&V.hasOwnProperty("display")?V.display:null;b.style.display=U==null||typeof U=="boolean"?"":(""+U).trim()}}catch(P){De(k,k.return,P)}}}else if(t.tag===6){if(r===null){k=t;try{k.stateNode.nodeValue=d?"":k.memoizedProps}catch(P){De(k,k.return,P)}}}else if((t.tag!==22&&t.tag!==23||t.memoizedState===null||t===e)&&t.child!==null){t.child.return=t,t=t.child;continue}if(t===e)break e;for(;t.sibling===null;){if(t.return===null||t.return===e)break e;r===t&&(r=null),t=t.return}r===t&&(r=null),t.sibling.return=t.return,t=t.sibling}o&4&&(o=e.updateQueue,o!==null&&(r=o.retryQueue,r!==null&&(o.retryQueue=null,Uc(e,r))));break;case 19:Nt(t,e),St(e),o&4&&(o=e.updateQueue,o!==null&&(e.updateQueue=null,Uc(e,o)));break;case 30:break;case 21:break;default:Nt(t,e),St(e)}}function St(e){var t=e.flags;if(t&2){try{for(var r,o=e.return;o!==null;){if(mm(o)){r=o;break}o=o.return}if(r==null)throw Error(i(160));switch(r.tag){case 27:var d=r.stateNode,f=Oc(e);ei(e,f,d);break;case 5:var y=r.stateNode;r.flags&32&&(Ga(y,""),r.flags&=-33);var b=Oc(e);ei(e,b,y);break;case 3:case 4:var k=r.stateNode.containerInfo,M=Oc(e);Dc(e,M,k);break;default:throw Error(i(161))}}catch($){De(e,e.return,$)}e.flags&=-3}t&4096&&(e.flags&=-4097)}function wm(e){if(e.subtreeFlags&1024)for(e=e.child;e!==null;){var t=e;wm(t),t.tag===5&&t.flags&1024&&t.stateNode.reset(),e=e.sibling}}function Bs(e,t){if(t.subtreeFlags&8772)for(t=t.child;t!==null;)pm(e,t.alternate,t),t=t.sibling}function _a(e){for(e=e.child;e!==null;){var t=e;switch(t.tag){case 0:case 11:case 14:case 15:$s(4,t,t.return),_a(t);break;case 1:Jt(t,t.return);var r=t.stateNode;typeof r.componentWillUnmount=="function"&&hm(t,t.return,r),_a(t);break;case 27:Dn(t.stateNode);case 26:case 5:Jt(t,t.return),_a(t);break;case 22:t.memoizedState===null&&_a(t);break;case 30:_a(t);break;default:_a(t)}e=e.sibling}}function Hs(e,t,r){for(r=r&&(t.subtreeFlags&8772)!==0,t=t.child;t!==null;){var o=t.alternate,d=e,f=t,y=f.flags;switch(f.tag){case 0:case 11:case 15:Hs(d,f,r),_n(4,f);break;case 1:if(Hs(d,f,r),o=f,d=o.stateNode,typeof d.componentDidMount=="function")try{d.componentDidMount()}catch(M){De(o,o.return,M)}if(o=f,d=o.updateQueue,d!==null){var b=o.stateNode;try{var k=d.shared.hiddenCallbacks;if(k!==null)for(d.shared.hiddenCallbacks=null,d=0;d<k.length;d++)Xh(k[d],b)}catch(M){De(o,o.return,M)}}r&&y&64&&dm(f),Nn(f,f.return);break;case 27:gm(f);case 26:case 5:Hs(d,f,r),r&&o===null&&y&4&&fm(f),Nn(f,f.return);break;case 12:Hs(d,f,r);break;case 13:Hs(d,f,r),r&&y&4&&bm(d,f);break;case 22:f.memoizedState===null&&Hs(d,f,r),Nn(f,f.return);break;case 30:break;default:Hs(d,f,r)}t=t.sibling}}function Pc(e,t){var r=null;e!==null&&e.memoizedState!==null&&e.memoizedState.cachePool!==null&&(r=e.memoizedState.cachePool.pool),e=null,t.memoizedState!==null&&t.memoizedState.cachePool!==null&&(e=t.memoizedState.cachePool.pool),e!==r&&(e!=null&&e.refCount++,r!=null&&cn(r))}function Lc(e,t){e=null,t.alternate!==null&&(e=t.alternate.memoizedState.cache),t=t.memoizedState.cache,t!==e&&(t.refCount++,e!=null&&cn(e))}function Wt(e,t,r,o){if(t.subtreeFlags&10256)for(t=t.child;t!==null;)_m(e,t,r,o),t=t.sibling}function _m(e,t,r,o){var d=t.flags;switch(t.tag){case 0:case 11:case 15:Wt(e,t,r,o),d&2048&&_n(9,t);break;case 1:Wt(e,t,r,o);break;case 3:Wt(e,t,r,o),d&2048&&(e=null,t.alternate!==null&&(e=t.alternate.memoizedState.cache),t=t.memoizedState.cache,t!==e&&(t.refCount++,e!=null&&cn(e)));break;case 12:if(d&2048){Wt(e,t,r,o),e=t.stateNode;try{var f=t.memoizedProps,y=f.id,b=f.onPostCommit;typeof b=="function"&&b(y,t.alternate===null?"mount":"update",e.passiveEffectDuration,-0)}catch(k){De(t,t.return,k)}}else Wt(e,t,r,o);break;case 13:Wt(e,t,r,o);break;case 23:break;case 22:f=t.stateNode,y=t.alternate,t.memoizedState!==null?f._visibility&2?Wt(e,t,r,o):Sn(e,t):f._visibility&2?Wt(e,t,r,o):(f._visibility|=2,or(e,t,r,o,(t.subtreeFlags&10256)!==0)),d&2048&&Pc(y,t);break;case 24:Wt(e,t,r,o),d&2048&&Lc(t.alternate,t);break;default:Wt(e,t,r,o)}}function or(e,t,r,o,d){for(d=d&&(t.subtreeFlags&10256)!==0,t=t.child;t!==null;){var f=e,y=t,b=r,k=o,M=y.flags;switch(y.tag){case 0:case 11:case 15:or(f,y,b,k,d),_n(8,y);break;case 23:break;case 22:var $=y.stateNode;y.memoizedState!==null?$._visibility&2?or(f,y,b,k,d):Sn(f,y):($._visibility|=2,or(f,y,b,k,d)),d&&M&2048&&Pc(y.alternate,y);break;case 24:or(f,y,b,k,d),d&&M&2048&&Lc(y.alternate,y);break;default:or(f,y,b,k,d)}t=t.sibling}}function Sn(e,t){if(t.subtreeFlags&10256)for(t=t.child;t!==null;){var r=e,o=t,d=o.flags;switch(o.tag){case 22:Sn(r,o),d&2048&&Pc(o.alternate,o);break;case 24:Sn(r,o),d&2048&&Lc(o.alternate,o);break;default:Sn(r,o)}t=t.sibling}}var kn=8192;function cr(e){if(e.subtreeFlags&kn)for(e=e.child;e!==null;)Nm(e),e=e.sibling}function Nm(e){switch(e.tag){case 26:cr(e),e.flags&kn&&e.memoizedState!==null&&Hy(zt,e.memoizedState,e.memoizedProps);break;case 5:cr(e);break;case 3:case 4:var t=zt;zt=fi(e.stateNode.containerInfo),cr(e),zt=t;break;case 22:e.memoizedState===null&&(t=e.alternate,t!==null&&t.memoizedState!==null?(t=kn,kn=16777216,cr(e),kn=t):cr(e));break;default:cr(e)}}function Sm(e){var t=e.alternate;if(t!==null&&(e=t.child,e!==null)){t.child=null;do t=e.sibling,e.sibling=null,e=t;while(e!==null)}}function Cn(e){var t=e.deletions;if((e.flags&16)!==0){if(t!==null)for(var r=0;r<t.length;r++){var o=t[r];We=o,Cm(o,e)}Sm(e)}if(e.subtreeFlags&10256)for(e=e.child;e!==null;)km(e),e=e.sibling}function km(e){switch(e.tag){case 0:case 11:case 15:Cn(e),e.flags&2048&&$s(9,e,e.return);break;case 3:Cn(e);break;case 12:Cn(e);break;case 22:var t=e.stateNode;e.memoizedState!==null&&t._visibility&2&&(e.return===null||e.return.tag!==13)?(t._visibility&=-3,ti(e)):Cn(e);break;default:Cn(e)}}function ti(e){var t=e.deletions;if((e.flags&16)!==0){if(t!==null)for(var r=0;r<t.length;r++){var o=t[r];We=o,Cm(o,e)}Sm(e)}for(e=e.child;e!==null;){switch(t=e,t.tag){case 0:case 11:case 15:$s(8,t,t.return),ti(t);break;case 22:r=t.stateNode,r._visibility&2&&(r._visibility&=-3,ti(t));break;default:ti(t)}e=e.sibling}}function Cm(e,t){for(;We!==null;){var r=We;switch(r.tag){case 0:case 11:case 15:$s(8,r,t);break;case 23:case 22:if(r.memoizedState!==null&&r.memoizedState.cachePool!==null){var o=r.memoizedState.cachePool.pool;o!=null&&o.refCount++}break;case 24:cn(r.memoizedState.cache)}if(o=r.child,o!==null)o.return=r,We=o;else e:for(r=e;We!==null;){o=We;var d=o.sibling,f=o.return;if(ym(o),o===r){We=null;break e}if(d!==null){d.return=f,We=d;break e}We=f}}}var ry={getCacheForType:function(e){var t=it(Fe),r=t.data.get(e);return r===void 0&&(r=e(),t.data.set(e,r)),r}},ny=typeof WeakMap=="function"?WeakMap:Map,Ee=0,Ue=null,je=null,Ne=0,Ae=0,kt=null,Gs=!1,ur=!1,qc=!1,bs=0,He=0,Vs=0,Na=0,zc=0,Pt=0,dr=0,En=null,xt=null,$c=!1,Bc=0,si=1/0,ai=null,Qs=null,rt=0,Ys=null,hr=null,fr=0,Hc=0,Gc=null,Em=null,An=0,Vc=null;function Ct(){if((Ee&2)!==0&&Ne!==0)return Ne&-Ne;if(R.T!==null){var e=er;return e!==0?e:Zc()}return Gd()}function Am(){Pt===0&&(Pt=(Ne&536870912)===0||Ce?zd():536870912);var e=Ut.current;return e!==null&&(e.flags|=32),Pt}function Et(e,t,r){(e===Ue&&(Ae===2||Ae===9)||e.cancelPendingCommit!==null)&&(mr(e,0),Fs(e,Ne,Pt,!1)),Yr(e,r),((Ee&2)===0||e!==Ue)&&(e===Ue&&((Ee&2)===0&&(Na|=r),He===4&&Fs(e,Ne,Pt,!1)),es(e))}function Tm(e,t,r){if((Ee&6)!==0)throw Error(i(327));var o=!r&&(t&124)===0&&(t&e.expiredLanes)===0||Qr(e,t),d=o?oy(e,t):Fc(e,t,!0),f=o;do{if(d===0){ur&&!o&&Fs(e,t,0,!1);break}else{if(r=e.current.alternate,f&&!ly(r)){d=Fc(e,t,!1),f=!1;continue}if(d===2){if(f=t,e.errorRecoveryDisabledLanes&f)var y=0;else y=e.pendingLanes&-536870913,y=y!==0?y:y&536870912?536870912:0;if(y!==0){t=y;e:{var b=e;d=En;var k=b.current.memoizedState.isDehydrated;if(k&&(mr(b,y).flags|=256),y=Fc(b,y,!1),y!==2){if(qc&&!k){b.errorRecoveryDisabledLanes|=f,Na|=f,d=4;break e}f=xt,xt=d,f!==null&&(xt===null?xt=f:xt.push.apply(xt,f))}d=y}if(f=!1,d!==2)continue}}if(d===1){mr(e,0),Fs(e,t,0,!0);break}e:{switch(o=e,f=d,f){case 0:case 1:throw Error(i(345));case 4:if((t&4194048)!==t)break;case 6:Fs(o,t,Pt,!Gs);break e;case 2:xt=null;break;case 3:case 5:break;default:throw Error(i(329))}if((t&62914560)===t&&(d=Bc+300-Kt(),10<d)){if(Fs(o,t,Pt,!Gs),ml(o,0,!0)!==0)break e;o.timeoutHandle=n0(Rm.bind(null,o,r,xt,ai,$c,t,Pt,Na,dr,Gs,f,2,-0,0),d);break e}Rm(o,r,xt,ai,$c,t,Pt,Na,dr,Gs,f,0,-0,0)}}break}while(!0);es(e)}function Rm(e,t,r,o,d,f,y,b,k,M,$,V,U,P){if(e.timeoutHandle=-1,V=t.subtreeFlags,(V&8192||(V&16785408)===16785408)&&(Pn={stylesheets:null,count:0,unsuspend:By},Nm(t),V=Gy(),V!==null)){e.cancelPendingCommit=V(qm.bind(null,e,t,f,r,o,d,y,b,k,$,1,U,P)),Fs(e,f,y,!M);return}qm(e,t,f,r,o,d,y,b,k)}function ly(e){for(var t=e;;){var r=t.tag;if((r===0||r===11||r===15)&&t.flags&16384&&(r=t.updateQueue,r!==null&&(r=r.stores,r!==null)))for(var o=0;o<r.length;o++){var d=r[o],f=d.getSnapshot;d=d.value;try{if(!wt(f(),d))return!1}catch{return!1}}if(r=t.child,t.subtreeFlags&16384&&r!==null)r.return=t,t=r;else{if(t===e)break;for(;t.sibling===null;){if(t.return===null||t.return===e)return!0;t=t.return}t.sibling.return=t.return,t=t.sibling}}return!0}function Fs(e,t,r,o){t&=~zc,t&=~Na,e.suspendedLanes|=t,e.pingedLanes&=~t,o&&(e.warmLanes|=t),o=e.expirationTimes;for(var d=t;0<d;){var f=31-jt(d),y=1<<f;o[f]=-1,d&=~y}r!==0&&Bd(e,r,t)}function ri(){return(Ee&6)===0?(Tn(0),!1):!0}function Qc(){if(je!==null){if(Ae===0)var e=je.return;else e=je,hs=ya=null,oc(e),lr=null,bn=0,e=je;for(;e!==null;)um(e.alternate,e),e=e.return;je=null}}function mr(e,t){var r=e.timeoutHandle;r!==-1&&(e.timeoutHandle=-1,Ny(r)),r=e.cancelPendingCommit,r!==null&&(e.cancelPendingCommit=null,r()),Qc(),Ue=e,je=r=cs(e.current,null),Ne=t,Ae=0,kt=null,Gs=!1,ur=Qr(e,t),qc=!1,dr=Pt=zc=Na=Vs=He=0,xt=En=null,$c=!1,(t&8)!==0&&(t|=t&32);var o=e.entangledLanes;if(o!==0)for(e=e.entanglements,o&=t;0<o;){var d=31-jt(o),f=1<<d;t|=e[d],o&=~f}return bs=t,kl(),r}function Om(e,t){ve=null,R.H=Ql,t===dn||t===Ul?(t=Ih(),Ae=3):t===Qh?(t=Ih(),Ae=4):Ae=t===Xf?8:t!==null&&typeof t=="object"&&typeof t.then=="function"?6:1,kt=t,je===null&&(He=1,Xl(e,Rt(t,e.current)))}function Dm(){var e=R.H;return R.H=Ql,e===null?Ql:e}function Mm(){var e=R.A;return R.A=ry,e}function Yc(){He=4,Gs||(Ne&4194048)!==Ne&&Ut.current!==null||(ur=!0),(Vs&134217727)===0&&(Na&134217727)===0||Ue===null||Fs(Ue,Ne,Pt,!1)}function Fc(e,t,r){var o=Ee;Ee|=2;var d=Dm(),f=Mm();(Ue!==e||Ne!==t)&&(ai=null,mr(e,t)),t=!1;var y=He;e:do try{if(Ae!==0&&je!==null){var b=je,k=kt;switch(Ae){case 8:Qc(),y=6;break e;case 3:case 2:case 9:case 6:Ut.current===null&&(t=!0);var M=Ae;if(Ae=0,kt=null,gr(e,b,k,M),r&&ur){y=0;break e}break;default:M=Ae,Ae=0,kt=null,gr(e,b,k,M)}}iy(),y=He;break}catch($){Om(e,$)}while(!0);return t&&e.shellSuspendCounter++,hs=ya=null,Ee=o,R.H=d,R.A=f,je===null&&(Ue=null,Ne=0,kl()),y}function iy(){for(;je!==null;)Um(je)}function oy(e,t){var r=Ee;Ee|=2;var o=Dm(),d=Mm();Ue!==e||Ne!==t?(ai=null,si=Kt()+500,mr(e,t)):ur=Qr(e,t);e:do try{if(Ae!==0&&je!==null){t=je;var f=kt;t:switch(Ae){case 1:Ae=0,kt=null,gr(e,t,f,1);break;case 2:case 9:if(Yh(f)){Ae=0,kt=null,Pm(t);break}t=function(){Ae!==2&&Ae!==9||Ue!==e||(Ae=7),es(e)},f.then(t,t);break e;case 3:Ae=7;break e;case 4:Ae=5;break e;case 7:Yh(f)?(Ae=0,kt=null,Pm(t)):(Ae=0,kt=null,gr(e,t,f,7));break;case 5:var y=null;switch(je.tag){case 26:y=je.memoizedState;case 5:case 27:var b=je;if(!y||p0(y)){Ae=0,kt=null;var k=b.sibling;if(k!==null)je=k;else{var M=b.return;M!==null?(je=M,ni(M)):je=null}break t}}Ae=0,kt=null,gr(e,t,f,5);break;case 6:Ae=0,kt=null,gr(e,t,f,6);break;case 8:Qc(),He=6;break e;default:throw Error(i(462))}}cy();break}catch($){Om(e,$)}while(!0);return hs=ya=null,R.H=o,R.A=d,Ee=r,je!==null?0:(Ue=null,Ne=0,kl(),He)}function cy(){for(;je!==null&&!Rx();)Um(je)}function Um(e){var t=om(e.alternate,e,bs);e.memoizedProps=e.pendingProps,t===null?ni(e):je=t}function Pm(e){var t=e,r=t.alternate;switch(t.tag){case 15:case 0:t=sm(r,t,t.pendingProps,t.type,void 0,Ne);break;case 11:t=sm(r,t,t.pendingProps,t.type.render,t.ref,Ne);break;case 5:oc(t);default:um(r,t),t=je=Ph(t,bs),t=om(r,t,bs)}e.memoizedProps=e.pendingProps,t===null?ni(e):je=t}function gr(e,t,r,o){hs=ya=null,oc(t),lr=null,bn=0;var d=t.return;try{if(Jp(e,d,t,r,Ne)){He=1,Xl(e,Rt(r,e.current)),je=null;return}}catch(f){if(d!==null)throw je=d,f;He=1,Xl(e,Rt(r,e.current)),je=null;return}t.flags&32768?(Ce||o===1?e=!0:ur||(Ne&536870912)!==0?e=!1:(Gs=e=!0,(o===2||o===9||o===3||o===6)&&(o=Ut.current,o!==null&&o.tag===13&&(o.flags|=16384))),Lm(t,e)):ni(t)}function ni(e){var t=e;do{if((t.flags&32768)!==0){Lm(t,Gs);return}e=t.return;var r=ey(t.alternate,t,bs);if(r!==null){je=r;return}if(t=t.sibling,t!==null){je=t;return}je=t=e}while(t!==null);He===0&&(He=5)}function Lm(e,t){do{var r=ty(e.alternate,e);if(r!==null){r.flags&=32767,je=r;return}if(r=e.return,r!==null&&(r.flags|=32768,r.subtreeFlags=0,r.deletions=null),!t&&(e=e.sibling,e!==null)){je=e;return}je=e=r}while(e!==null);He=6,je=null}function qm(e,t,r,o,d,f,y,b,k){e.cancelPendingCommit=null;do li();while(rt!==0);if((Ee&6)!==0)throw Error(i(327));if(t!==null){if(t===e.current)throw Error(i(177));if(f=t.lanes|t.childLanes,f|=Lo,Bx(e,r,f,y,b,k),e===Ue&&(je=Ue=null,Ne=0),hr=t,Ys=e,fr=r,Hc=f,Gc=d,Em=o,(t.subtreeFlags&10256)!==0||(t.flags&10256)!==0?(e.callbackNode=null,e.callbackPriority=0,fy(dl,function(){return Gm(),null})):(e.callbackNode=null,e.callbackPriority=0),o=(t.flags&13878)!==0,(t.subtreeFlags&13878)!==0||o){o=R.T,R.T=null,d=W.p,W.p=2,y=Ee,Ee|=4;try{sy(e,t,r)}finally{Ee=y,W.p=d,R.T=o}}rt=1,zm(),$m(),Bm()}}function zm(){if(rt===1){rt=0;var e=Ys,t=hr,r=(t.flags&13878)!==0;if((t.subtreeFlags&13878)!==0||r){r=R.T,R.T=null;var o=W.p;W.p=2;var d=Ee;Ee|=4;try{jm(t,e);var f=nu,y=kh(e.containerInfo),b=f.focusedElem,k=f.selectionRange;if(y!==b&&b&&b.ownerDocument&&Sh(b.ownerDocument.documentElement,b)){if(k!==null&&Oo(b)){var M=k.start,$=k.end;if($===void 0&&($=M),"selectionStart"in b)b.selectionStart=M,b.selectionEnd=Math.min($,b.value.length);else{var V=b.ownerDocument||document,U=V&&V.defaultView||window;if(U.getSelection){var P=U.getSelection(),de=b.textContent.length,ce=Math.min(k.start,de),Oe=k.end===void 0?ce:Math.min(k.end,de);!P.extend&&ce>Oe&&(y=Oe,Oe=ce,ce=y);var T=Nh(b,ce),A=Nh(b,Oe);if(T&&A&&(P.rangeCount!==1||P.anchorNode!==T.node||P.anchorOffset!==T.offset||P.focusNode!==A.node||P.focusOffset!==A.offset)){var D=V.createRange();D.setStart(T.node,T.offset),P.removeAllRanges(),ce>Oe?(P.addRange(D),P.extend(A.node,A.offset)):(D.setEnd(A.node,A.offset),P.addRange(D))}}}}for(V=[],P=b;P=P.parentNode;)P.nodeType===1&&V.push({element:P,left:P.scrollLeft,top:P.scrollTop});for(typeof b.focus=="function"&&b.focus(),b=0;b<V.length;b++){var B=V[b];B.element.scrollLeft=B.left,B.element.scrollTop=B.top}}yi=!!ru,nu=ru=null}finally{Ee=d,W.p=o,R.T=r}}e.current=t,rt=2}}function $m(){if(rt===2){rt=0;var e=Ys,t=hr,r=(t.flags&8772)!==0;if((t.subtreeFlags&8772)!==0||r){r=R.T,R.T=null;var o=W.p;W.p=2;var d=Ee;Ee|=4;try{pm(e,t.alternate,t)}finally{Ee=d,W.p=o,R.T=r}}rt=3}}function Bm(){if(rt===4||rt===3){rt=0,Ox();var e=Ys,t=hr,r=fr,o=Em;(t.subtreeFlags&10256)!==0||(t.flags&10256)!==0?rt=5:(rt=0,hr=Ys=null,Hm(e,e.pendingLanes));var d=e.pendingLanes;if(d===0&&(Qs=null),uo(r),t=t.stateNode,bt&&typeof bt.onCommitFiberRoot=="function")try{bt.onCommitFiberRoot(Vr,t,void 0,(t.current.flags&128)===128)}catch{}if(o!==null){t=R.T,d=W.p,W.p=2,R.T=null;try{for(var f=e.onRecoverableError,y=0;y<o.length;y++){var b=o[y];f(b.value,{componentStack:b.stack})}}finally{R.T=t,W.p=d}}(fr&3)!==0&&li(),es(e),d=e.pendingLanes,(r&4194090)!==0&&(d&42)!==0?e===Vc?An++:(An=0,Vc=e):An=0,Tn(0)}}function Hm(e,t){(e.pooledCacheLanes&=t)===0&&(t=e.pooledCache,t!=null&&(e.pooledCache=null,cn(t)))}function li(e){return zm(),$m(),Bm(),Gm()}function Gm(){if(rt!==5)return!1;var e=Ys,t=Hc;Hc=0;var r=uo(fr),o=R.T,d=W.p;try{W.p=32>r?32:r,R.T=null,r=Gc,Gc=null;var f=Ys,y=fr;if(rt=0,hr=Ys=null,fr=0,(Ee&6)!==0)throw Error(i(331));var b=Ee;if(Ee|=4,km(f.current),_m(f,f.current,y,r),Ee=b,Tn(0,!1),bt&&typeof bt.onPostCommitFiberRoot=="function")try{bt.onPostCommitFiberRoot(Vr,f)}catch{}return!0}finally{W.p=d,R.T=o,Hm(e,t)}}function Vm(e,t,r){t=Rt(r,t),t=wc(e.stateNode,t,2),e=Ps(e,t,2),e!==null&&(Yr(e,2),es(e))}function De(e,t,r){if(e.tag===3)Vm(e,e,r);else for(;t!==null;){if(t.tag===3){Vm(t,e,r);break}else if(t.tag===1){var o=t.stateNode;if(typeof t.type.getDerivedStateFromError=="function"||typeof o.componentDidCatch=="function"&&(Qs===null||!Qs.has(o))){e=Rt(r,e),r=If(2),o=Ps(t,r,2),o!==null&&(Kf(r,o,t,e),Yr(o,2),es(o));break}}t=t.return}}function Ic(e,t,r){var o=e.pingCache;if(o===null){o=e.pingCache=new ny;var d=new Set;o.set(t,d)}else d=o.get(t),d===void 0&&(d=new Set,o.set(t,d));d.has(r)||(qc=!0,d.add(r),e=uy.bind(null,e,t,r),t.then(e,e))}function uy(e,t,r){var o=e.pingCache;o!==null&&o.delete(t),e.pingedLanes|=e.suspendedLanes&r,e.warmLanes&=~r,Ue===e&&(Ne&r)===r&&(He===4||He===3&&(Ne&62914560)===Ne&&300>Kt()-Bc?(Ee&2)===0&&mr(e,0):zc|=r,dr===Ne&&(dr=0)),es(e)}function Qm(e,t){t===0&&(t=$d()),e=Xa(e,t),e!==null&&(Yr(e,t),es(e))}function dy(e){var t=e.memoizedState,r=0;t!==null&&(r=t.retryLane),Qm(e,r)}function hy(e,t){var r=0;switch(e.tag){case 13:var o=e.stateNode,d=e.memoizedState;d!==null&&(r=d.retryLane);break;case 19:o=e.stateNode;break;case 22:o=e.stateNode._retryCache;break;default:throw Error(i(314))}o!==null&&o.delete(t),Qm(e,r)}function fy(e,t){return lo(e,t)}var ii=null,xr=null,Kc=!1,oi=!1,Xc=!1,Sa=0;function es(e){e!==xr&&e.next===null&&(xr===null?ii=xr=e:xr=xr.next=e),oi=!0,Kc||(Kc=!0,gy())}function Tn(e,t){if(!Xc&&oi){Xc=!0;do for(var r=!1,o=ii;o!==null;){if(e!==0){var d=o.pendingLanes;if(d===0)var f=0;else{var y=o.suspendedLanes,b=o.pingedLanes;f=(1<<31-jt(42|e)+1)-1,f&=d&~(y&~b),f=f&201326741?f&201326741|1:f?f|2:0}f!==0&&(r=!0,Km(o,f))}else f=Ne,f=ml(o,o===Ue?f:0,o.cancelPendingCommit!==null||o.timeoutHandle!==-1),(f&3)===0||Qr(o,f)||(r=!0,Km(o,f));o=o.next}while(r);Xc=!1}}function my(){Ym()}function Ym(){oi=Kc=!1;var e=0;Sa!==0&&(_y()&&(e=Sa),Sa=0);for(var t=Kt(),r=null,o=ii;o!==null;){var d=o.next,f=Fm(o,t);f===0?(o.next=null,r===null?ii=d:r.next=d,d===null&&(xr=r)):(r=o,(e!==0||(f&3)!==0)&&(oi=!0)),o=d}Tn(e)}function Fm(e,t){for(var r=e.suspendedLanes,o=e.pingedLanes,d=e.expirationTimes,f=e.pendingLanes&-62914561;0<f;){var y=31-jt(f),b=1<<y,k=d[y];k===-1?((b&r)===0||(b&o)!==0)&&(d[y]=$x(b,t)):k<=t&&(e.expiredLanes|=b),f&=~b}if(t=Ue,r=Ne,r=ml(e,e===t?r:0,e.cancelPendingCommit!==null||e.timeoutHandle!==-1),o=e.callbackNode,r===0||e===t&&(Ae===2||Ae===9)||e.cancelPendingCommit!==null)return o!==null&&o!==null&&io(o),e.callbackNode=null,e.callbackPriority=0;if((r&3)===0||Qr(e,r)){if(t=r&-r,t===e.callbackPriority)return t;switch(o!==null&&io(o),uo(r)){case 2:case 8:r=Ld;break;case 32:r=dl;break;case 268435456:r=qd;break;default:r=dl}return o=Im.bind(null,e),r=lo(r,o),e.callbackPriority=t,e.callbackNode=r,t}return o!==null&&o!==null&&io(o),e.callbackPriority=2,e.callbackNode=null,2}function Im(e,t){if(rt!==0&&rt!==5)return e.callbackNode=null,e.callbackPriority=0,null;var r=e.callbackNode;if(li()&&e.callbackNode!==r)return null;var o=Ne;return o=ml(e,e===Ue?o:0,e.cancelPendingCommit!==null||e.timeoutHandle!==-1),o===0?null:(Tm(e,o,t),Fm(e,Kt()),e.callbackNode!=null&&e.callbackNode===r?Im.bind(null,e):null)}function Km(e,t){if(li())return null;Tm(e,t,!0)}function gy(){Sy(function(){(Ee&6)!==0?lo(Pd,my):Ym()})}function Zc(){return Sa===0&&(Sa=zd()),Sa}function Xm(e){return e==null||typeof e=="symbol"||typeof e=="boolean"?null:typeof e=="function"?e:vl(""+e)}function Zm(e,t){var r=t.ownerDocument.createElement("input");return r.name=t.name,r.value=t.value,e.id&&r.setAttribute("form",e.id),t.parentNode.insertBefore(r,t),e=new FormData(e),r.parentNode.removeChild(r),e}function xy(e,t,r,o,d){if(t==="submit"&&r&&r.stateNode===d){var f=Xm((d[ht]||null).action),y=o.submitter;y&&(t=(t=y[ht]||null)?Xm(t.formAction):y.getAttribute("formAction"),t!==null&&(f=t,y=null));var b=new _l("action","action",null,o,d);e.push({event:b,listeners:[{instance:null,listener:function(){if(o.defaultPrevented){if(Sa!==0){var k=y?Zm(d,y):new FormData(d);pc(r,{pending:!0,data:k,method:d.method,action:f},null,k)}}else typeof f=="function"&&(b.preventDefault(),k=y?Zm(d,y):new FormData(d),pc(r,{pending:!0,data:k,method:d.method,action:f},f,k))},currentTarget:d}]})}}for(var Jc=0;Jc<Po.length;Jc++){var Wc=Po[Jc],py=Wc.toLowerCase(),yy=Wc[0].toUpperCase()+Wc.slice(1);qt(py,"on"+yy)}qt(Ah,"onAnimationEnd"),qt(Th,"onAnimationIteration"),qt(Rh,"onAnimationStart"),qt("dblclick","onDoubleClick"),qt("focusin","onFocus"),qt("focusout","onBlur"),qt(Up,"onTransitionRun"),qt(Pp,"onTransitionStart"),qt(Lp,"onTransitionCancel"),qt(Oh,"onTransitionEnd"),$a("onMouseEnter",["mouseout","mouseover"]),$a("onMouseLeave",["mouseout","mouseover"]),$a("onPointerEnter",["pointerout","pointerover"]),$a("onPointerLeave",["pointerout","pointerover"]),ca("onChange","change click focusin focusout input keydown keyup selectionchange".split(" ")),ca("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" ")),ca("onBeforeInput",["compositionend","keypress","textInput","paste"]),ca("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" ")),ca("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" ")),ca("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var Rn="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),vy=new Set("beforetoggle cancel close invalid load scroll scrollend toggle".split(" ").concat(Rn));function Jm(e,t){t=(t&4)!==0;for(var r=0;r<e.length;r++){var o=e[r],d=o.event;o=o.listeners;e:{var f=void 0;if(t)for(var y=o.length-1;0<=y;y--){var b=o[y],k=b.instance,M=b.currentTarget;if(b=b.listener,k!==f&&d.isPropagationStopped())break e;f=b,d.currentTarget=M;try{f(d)}catch($){Kl($)}d.currentTarget=null,f=k}else for(y=0;y<o.length;y++){if(b=o[y],k=b.instance,M=b.currentTarget,b=b.listener,k!==f&&d.isPropagationStopped())break e;f=b,d.currentTarget=M;try{f(d)}catch($){Kl($)}d.currentTarget=null,f=k}}}}function we(e,t){var r=t[ho];r===void 0&&(r=t[ho]=new Set);var o=e+"__bubble";r.has(o)||(Wm(t,e,2,!1),r.add(o))}function eu(e,t,r){var o=0;t&&(o|=4),Wm(r,e,o,t)}var ci="_reactListening"+Math.random().toString(36).slice(2);function tu(e){if(!e[ci]){e[ci]=!0,Qd.forEach(function(r){r!=="selectionchange"&&(vy.has(r)||eu(r,!1,e),eu(r,!0,e))});var t=e.nodeType===9?e:e.ownerDocument;t===null||t[ci]||(t[ci]=!0,eu("selectionchange",!1,t))}}function Wm(e,t,r,o){switch(_0(t)){case 2:var d=Yy;break;case 8:d=Fy;break;default:d=gu}r=d.bind(null,t,r,e),d=void 0,!_o||t!=="touchstart"&&t!=="touchmove"&&t!=="wheel"||(d=!0),o?d!==void 0?e.addEventListener(t,r,{capture:!0,passive:d}):e.addEventListener(t,r,!0):d!==void 0?e.addEventListener(t,r,{passive:d}):e.addEventListener(t,r,!1)}function su(e,t,r,o,d){var f=o;if((t&1)===0&&(t&2)===0&&o!==null)e:for(;;){if(o===null)return;var y=o.tag;if(y===3||y===4){var b=o.stateNode.containerInfo;if(b===d)break;if(y===4)for(y=o.return;y!==null;){var k=y.tag;if((k===3||k===4)&&y.stateNode.containerInfo===d)return;y=y.return}for(;b!==null;){if(y=La(b),y===null)return;if(k=y.tag,k===5||k===6||k===26||k===27){o=f=y;continue e}b=b.parentNode}}o=o.return}nh(function(){var M=f,$=jo(r),V=[];e:{var U=Dh.get(e);if(U!==void 0){var P=_l,de=e;switch(e){case"keypress":if(jl(r)===0)break e;case"keydown":case"keyup":P=fp;break;case"focusin":de="focus",P=Co;break;case"focusout":de="blur",P=Co;break;case"beforeblur":case"afterblur":P=Co;break;case"click":if(r.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":P=oh;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":P=tp;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":P=xp;break;case Ah:case Th:case Rh:P=rp;break;case Oh:P=yp;break;case"scroll":case"scrollend":P=Wx;break;case"wheel":P=bp;break;case"copy":case"cut":case"paste":P=lp;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":P=uh;break;case"toggle":case"beforetoggle":P=wp}var ce=(t&4)!==0,Oe=!ce&&(e==="scroll"||e==="scrollend"),T=ce?U!==null?U+"Capture":null:U;ce=[];for(var A=M,D;A!==null;){var B=A;if(D=B.stateNode,B=B.tag,B!==5&&B!==26&&B!==27||D===null||T===null||(B=Kr(A,T),B!=null&&ce.push(On(A,B,D))),Oe)break;A=A.return}0<ce.length&&(U=new P(U,de,null,r,$),V.push({event:U,listeners:ce}))}}if((t&7)===0){e:{if(U=e==="mouseover"||e==="pointerover",P=e==="mouseout"||e==="pointerout",U&&r!==bo&&(de=r.relatedTarget||r.fromElement)&&(La(de)||de[Pa]))break e;if((P||U)&&(U=$.window===$?$:(U=$.ownerDocument)?U.defaultView||U.parentWindow:window,P?(de=r.relatedTarget||r.toElement,P=M,de=de?La(de):null,de!==null&&(Oe=u(de),ce=de.tag,de!==Oe||ce!==5&&ce!==27&&ce!==6)&&(de=null)):(P=null,de=M),P!==de)){if(ce=oh,B="onMouseLeave",T="onMouseEnter",A="mouse",(e==="pointerout"||e==="pointerover")&&(ce=uh,B="onPointerLeave",T="onPointerEnter",A="pointer"),Oe=P==null?U:Ir(P),D=de==null?U:Ir(de),U=new ce(B,A+"leave",P,r,$),U.target=Oe,U.relatedTarget=D,B=null,La($)===M&&(ce=new ce(T,A+"enter",de,r,$),ce.target=D,ce.relatedTarget=Oe,B=ce),Oe=B,P&&de)t:{for(ce=P,T=de,A=0,D=ce;D;D=pr(D))A++;for(D=0,B=T;B;B=pr(B))D++;for(;0<A-D;)ce=pr(ce),A--;for(;0<D-A;)T=pr(T),D--;for(;A--;){if(ce===T||T!==null&&ce===T.alternate)break t;ce=pr(ce),T=pr(T)}ce=null}else ce=null;P!==null&&e0(V,U,P,ce,!1),de!==null&&Oe!==null&&e0(V,Oe,de,ce,!0)}}e:{if(U=M?Ir(M):window,P=U.nodeName&&U.nodeName.toLowerCase(),P==="select"||P==="input"&&U.type==="file")var ae=yh;else if(xh(U))if(vh)ae=Op;else{ae=Tp;var be=Ap}else P=U.nodeName,!P||P.toLowerCase()!=="input"||U.type!=="checkbox"&&U.type!=="radio"?M&&vo(M.elementType)&&(ae=yh):ae=Rp;if(ae&&(ae=ae(e,M))){ph(V,ae,r,$);break e}be&&be(e,U,M),e==="focusout"&&M&&U.type==="number"&&M.memoizedProps.value!=null&&yo(U,"number",U.value)}switch(be=M?Ir(M):window,e){case"focusin":(xh(be)||be.contentEditable==="true")&&(Fa=be,Do=M,an=null);break;case"focusout":an=Do=Fa=null;break;case"mousedown":Mo=!0;break;case"contextmenu":case"mouseup":case"dragend":Mo=!1,Ch(V,r,$);break;case"selectionchange":if(Mp)break;case"keydown":case"keyup":Ch(V,r,$)}var le;if(Ao)e:{switch(e){case"compositionstart":var ue="onCompositionStart";break e;case"compositionend":ue="onCompositionEnd";break e;case"compositionupdate":ue="onCompositionUpdate";break e}ue=void 0}else Ya?mh(e,r)&&(ue="onCompositionEnd"):e==="keydown"&&r.keyCode===229&&(ue="onCompositionStart");ue&&(dh&&r.locale!=="ko"&&(Ya||ue!=="onCompositionStart"?ue==="onCompositionEnd"&&Ya&&(le=lh()):(Os=$,No="value"in Os?Os.value:Os.textContent,Ya=!0)),be=ui(M,ue),0<be.length&&(ue=new ch(ue,e,null,r,$),V.push({event:ue,listeners:be}),le?ue.data=le:(le=gh(r),le!==null&&(ue.data=le)))),(le=Np?Sp(e,r):kp(e,r))&&(ue=ui(M,"onBeforeInput"),0<ue.length&&(be=new ch("onBeforeInput","beforeinput",null,r,$),V.push({event:be,listeners:ue}),be.data=le)),xy(V,e,M,r,$)}Jm(V,t)})}function On(e,t,r){return{instance:e,listener:t,currentTarget:r}}function ui(e,t){for(var r=t+"Capture",o=[];e!==null;){var d=e,f=d.stateNode;if(d=d.tag,d!==5&&d!==26&&d!==27||f===null||(d=Kr(e,r),d!=null&&o.unshift(On(e,d,f)),d=Kr(e,t),d!=null&&o.push(On(e,d,f))),e.tag===3)return o;e=e.return}return[]}function pr(e){if(e===null)return null;do e=e.return;while(e&&e.tag!==5&&e.tag!==27);return e||null}function e0(e,t,r,o,d){for(var f=t._reactName,y=[];r!==null&&r!==o;){var b=r,k=b.alternate,M=b.stateNode;if(b=b.tag,k!==null&&k===o)break;b!==5&&b!==26&&b!==27||M===null||(k=M,d?(M=Kr(r,f),M!=null&&y.unshift(On(r,M,k))):d||(M=Kr(r,f),M!=null&&y.push(On(r,M,k)))),r=r.return}y.length!==0&&e.push({event:t,listeners:y})}var by=/\r\n?/g,jy=/\u0000|\uFFFD/g;function t0(e){return(typeof e=="string"?e:""+e).replace(by,`
`).replace(jy,"")}function s0(e,t){return t=t0(t),t0(e)===t}function di(){}function Re(e,t,r,o,d,f){switch(r){case"children":typeof o=="string"?t==="body"||t==="textarea"&&o===""||Ga(e,o):(typeof o=="number"||typeof o=="bigint")&&t!=="body"&&Ga(e,""+o);break;case"className":xl(e,"class",o);break;case"tabIndex":xl(e,"tabindex",o);break;case"dir":case"role":case"viewBox":case"width":case"height":xl(e,r,o);break;case"style":ah(e,o,f);break;case"data":if(t!=="object"){xl(e,"data",o);break}case"src":case"href":if(o===""&&(t!=="a"||r!=="href")){e.removeAttribute(r);break}if(o==null||typeof o=="function"||typeof o=="symbol"||typeof o=="boolean"){e.removeAttribute(r);break}o=vl(""+o),e.setAttribute(r,o);break;case"action":case"formAction":if(typeof o=="function"){e.setAttribute(r,"javascript:throw new Error('A React form was unexpectedly submitted. If you called form.submit() manually, consider using form.requestSubmit() instead. If you\\'re trying to use event.stopPropagation() in a submit event handler, consider also calling event.preventDefault().')");break}else typeof f=="function"&&(r==="formAction"?(t!=="input"&&Re(e,t,"name",d.name,d,null),Re(e,t,"formEncType",d.formEncType,d,null),Re(e,t,"formMethod",d.formMethod,d,null),Re(e,t,"formTarget",d.formTarget,d,null)):(Re(e,t,"encType",d.encType,d,null),Re(e,t,"method",d.method,d,null),Re(e,t,"target",d.target,d,null)));if(o==null||typeof o=="symbol"||typeof o=="boolean"){e.removeAttribute(r);break}o=vl(""+o),e.setAttribute(r,o);break;case"onClick":o!=null&&(e.onclick=di);break;case"onScroll":o!=null&&we("scroll",e);break;case"onScrollEnd":o!=null&&we("scrollend",e);break;case"dangerouslySetInnerHTML":if(o!=null){if(typeof o!="object"||!("__html"in o))throw Error(i(61));if(r=o.__html,r!=null){if(d.children!=null)throw Error(i(60));e.innerHTML=r}}break;case"multiple":e.multiple=o&&typeof o!="function"&&typeof o!="symbol";break;case"muted":e.muted=o&&typeof o!="function"&&typeof o!="symbol";break;case"suppressContentEditableWarning":case"suppressHydrationWarning":case"defaultValue":case"defaultChecked":case"innerHTML":case"ref":break;case"autoFocus":break;case"xlinkHref":if(o==null||typeof o=="function"||typeof o=="boolean"||typeof o=="symbol"){e.removeAttribute("xlink:href");break}r=vl(""+o),e.setAttributeNS("http://www.w3.org/1999/xlink","xlink:href",r);break;case"contentEditable":case"spellCheck":case"draggable":case"value":case"autoReverse":case"externalResourcesRequired":case"focusable":case"preserveAlpha":o!=null&&typeof o!="function"&&typeof o!="symbol"?e.setAttribute(r,""+o):e.removeAttribute(r);break;case"inert":case"allowFullScreen":case"async":case"autoPlay":case"controls":case"default":case"defer":case"disabled":case"disablePictureInPicture":case"disableRemotePlayback":case"formNoValidate":case"hidden":case"loop":case"noModule":case"noValidate":case"open":case"playsInline":case"readOnly":case"required":case"reversed":case"scoped":case"seamless":case"itemScope":o&&typeof o!="function"&&typeof o!="symbol"?e.setAttribute(r,""):e.removeAttribute(r);break;case"capture":case"download":o===!0?e.setAttribute(r,""):o!==!1&&o!=null&&typeof o!="function"&&typeof o!="symbol"?e.setAttribute(r,o):e.removeAttribute(r);break;case"cols":case"rows":case"size":case"span":o!=null&&typeof o!="function"&&typeof o!="symbol"&&!isNaN(o)&&1<=o?e.setAttribute(r,o):e.removeAttribute(r);break;case"rowSpan":case"start":o==null||typeof o=="function"||typeof o=="symbol"||isNaN(o)?e.removeAttribute(r):e.setAttribute(r,o);break;case"popover":we("beforetoggle",e),we("toggle",e),gl(e,"popover",o);break;case"xlinkActuate":is(e,"http://www.w3.org/1999/xlink","xlink:actuate",o);break;case"xlinkArcrole":is(e,"http://www.w3.org/1999/xlink","xlink:arcrole",o);break;case"xlinkRole":is(e,"http://www.w3.org/1999/xlink","xlink:role",o);break;case"xlinkShow":is(e,"http://www.w3.org/1999/xlink","xlink:show",o);break;case"xlinkTitle":is(e,"http://www.w3.org/1999/xlink","xlink:title",o);break;case"xlinkType":is(e,"http://www.w3.org/1999/xlink","xlink:type",o);break;case"xmlBase":is(e,"http://www.w3.org/XML/1998/namespace","xml:base",o);break;case"xmlLang":is(e,"http://www.w3.org/XML/1998/namespace","xml:lang",o);break;case"xmlSpace":is(e,"http://www.w3.org/XML/1998/namespace","xml:space",o);break;case"is":gl(e,"is",o);break;case"innerText":case"textContent":break;default:(!(2<r.length)||r[0]!=="o"&&r[0]!=="O"||r[1]!=="n"&&r[1]!=="N")&&(r=Zx.get(r)||r,gl(e,r,o))}}function au(e,t,r,o,d,f){switch(r){case"style":ah(e,o,f);break;case"dangerouslySetInnerHTML":if(o!=null){if(typeof o!="object"||!("__html"in o))throw Error(i(61));if(r=o.__html,r!=null){if(d.children!=null)throw Error(i(60));e.innerHTML=r}}break;case"children":typeof o=="string"?Ga(e,o):(typeof o=="number"||typeof o=="bigint")&&Ga(e,""+o);break;case"onScroll":o!=null&&we("scroll",e);break;case"onScrollEnd":o!=null&&we("scrollend",e);break;case"onClick":o!=null&&(e.onclick=di);break;case"suppressContentEditableWarning":case"suppressHydrationWarning":case"innerHTML":case"ref":break;case"innerText":case"textContent":break;default:if(!Yd.hasOwnProperty(r))e:{if(r[0]==="o"&&r[1]==="n"&&(d=r.endsWith("Capture"),t=r.slice(2,d?r.length-7:void 0),f=e[ht]||null,f=f!=null?f[r]:null,typeof f=="function"&&e.removeEventListener(t,f,d),typeof o=="function")){typeof f!="function"&&f!==null&&(r in e?e[r]=null:e.hasAttribute(r)&&e.removeAttribute(r)),e.addEventListener(t,o,d);break e}r in e?e[r]=o:o===!0?e.setAttribute(r,""):gl(e,r,o)}}}function nt(e,t,r){switch(t){case"div":case"span":case"svg":case"path":case"a":case"g":case"p":case"li":break;case"img":we("error",e),we("load",e);var o=!1,d=!1,f;for(f in r)if(r.hasOwnProperty(f)){var y=r[f];if(y!=null)switch(f){case"src":o=!0;break;case"srcSet":d=!0;break;case"children":case"dangerouslySetInnerHTML":throw Error(i(137,t));default:Re(e,t,f,y,r,null)}}d&&Re(e,t,"srcSet",r.srcSet,r,null),o&&Re(e,t,"src",r.src,r,null);return;case"input":we("invalid",e);var b=f=y=d=null,k=null,M=null;for(o in r)if(r.hasOwnProperty(o)){var $=r[o];if($!=null)switch(o){case"name":d=$;break;case"type":y=$;break;case"checked":k=$;break;case"defaultChecked":M=$;break;case"value":f=$;break;case"defaultValue":b=$;break;case"children":case"dangerouslySetInnerHTML":if($!=null)throw Error(i(137,t));break;default:Re(e,t,o,$,r,null)}}Wd(e,f,b,k,M,y,d,!1),pl(e);return;case"select":we("invalid",e),o=y=f=null;for(d in r)if(r.hasOwnProperty(d)&&(b=r[d],b!=null))switch(d){case"value":f=b;break;case"defaultValue":y=b;break;case"multiple":o=b;default:Re(e,t,d,b,r,null)}t=f,r=y,e.multiple=!!o,t!=null?Ha(e,!!o,t,!1):r!=null&&Ha(e,!!o,r,!0);return;case"textarea":we("invalid",e),f=d=o=null;for(y in r)if(r.hasOwnProperty(y)&&(b=r[y],b!=null))switch(y){case"value":o=b;break;case"defaultValue":d=b;break;case"children":f=b;break;case"dangerouslySetInnerHTML":if(b!=null)throw Error(i(91));break;default:Re(e,t,y,b,r,null)}th(e,o,d,f),pl(e);return;case"option":for(k in r)if(r.hasOwnProperty(k)&&(o=r[k],o!=null))switch(k){case"selected":e.selected=o&&typeof o!="function"&&typeof o!="symbol";break;default:Re(e,t,k,o,r,null)}return;case"dialog":we("beforetoggle",e),we("toggle",e),we("cancel",e),we("close",e);break;case"iframe":case"object":we("load",e);break;case"video":case"audio":for(o=0;o<Rn.length;o++)we(Rn[o],e);break;case"image":we("error",e),we("load",e);break;case"details":we("toggle",e);break;case"embed":case"source":case"link":we("error",e),we("load",e);case"area":case"base":case"br":case"col":case"hr":case"keygen":case"meta":case"param":case"track":case"wbr":case"menuitem":for(M in r)if(r.hasOwnProperty(M)&&(o=r[M],o!=null))switch(M){case"children":case"dangerouslySetInnerHTML":throw Error(i(137,t));default:Re(e,t,M,o,r,null)}return;default:if(vo(t)){for($ in r)r.hasOwnProperty($)&&(o=r[$],o!==void 0&&au(e,t,$,o,r,void 0));return}}for(b in r)r.hasOwnProperty(b)&&(o=r[b],o!=null&&Re(e,t,b,o,r,null))}function wy(e,t,r,o){switch(t){case"div":case"span":case"svg":case"path":case"a":case"g":case"p":case"li":break;case"input":var d=null,f=null,y=null,b=null,k=null,M=null,$=null;for(P in r){var V=r[P];if(r.hasOwnProperty(P)&&V!=null)switch(P){case"checked":break;case"value":break;case"defaultValue":k=V;default:o.hasOwnProperty(P)||Re(e,t,P,null,o,V)}}for(var U in o){var P=o[U];if(V=r[U],o.hasOwnProperty(U)&&(P!=null||V!=null))switch(U){case"type":f=P;break;case"name":d=P;break;case"checked":M=P;break;case"defaultChecked":$=P;break;case"value":y=P;break;case"defaultValue":b=P;break;case"children":case"dangerouslySetInnerHTML":if(P!=null)throw Error(i(137,t));break;default:P!==V&&Re(e,t,U,P,o,V)}}po(e,y,b,k,M,$,f,d);return;case"select":P=y=b=U=null;for(f in r)if(k=r[f],r.hasOwnProperty(f)&&k!=null)switch(f){case"value":break;case"multiple":P=k;default:o.hasOwnProperty(f)||Re(e,t,f,null,o,k)}for(d in o)if(f=o[d],k=r[d],o.hasOwnProperty(d)&&(f!=null||k!=null))switch(d){case"value":U=f;break;case"defaultValue":b=f;break;case"multiple":y=f;default:f!==k&&Re(e,t,d,f,o,k)}t=b,r=y,o=P,U!=null?Ha(e,!!r,U,!1):!!o!=!!r&&(t!=null?Ha(e,!!r,t,!0):Ha(e,!!r,r?[]:"",!1));return;case"textarea":P=U=null;for(b in r)if(d=r[b],r.hasOwnProperty(b)&&d!=null&&!o.hasOwnProperty(b))switch(b){case"value":break;case"children":break;default:Re(e,t,b,null,o,d)}for(y in o)if(d=o[y],f=r[y],o.hasOwnProperty(y)&&(d!=null||f!=null))switch(y){case"value":U=d;break;case"defaultValue":P=d;break;case"children":break;case"dangerouslySetInnerHTML":if(d!=null)throw Error(i(91));break;default:d!==f&&Re(e,t,y,d,o,f)}eh(e,U,P);return;case"option":for(var de in r)if(U=r[de],r.hasOwnProperty(de)&&U!=null&&!o.hasOwnProperty(de))switch(de){case"selected":e.selected=!1;break;default:Re(e,t,de,null,o,U)}for(k in o)if(U=o[k],P=r[k],o.hasOwnProperty(k)&&U!==P&&(U!=null||P!=null))switch(k){case"selected":e.selected=U&&typeof U!="function"&&typeof U!="symbol";break;default:Re(e,t,k,U,o,P)}return;case"img":case"link":case"area":case"base":case"br":case"col":case"embed":case"hr":case"keygen":case"meta":case"param":case"source":case"track":case"wbr":case"menuitem":for(var ce in r)U=r[ce],r.hasOwnProperty(ce)&&U!=null&&!o.hasOwnProperty(ce)&&Re(e,t,ce,null,o,U);for(M in o)if(U=o[M],P=r[M],o.hasOwnProperty(M)&&U!==P&&(U!=null||P!=null))switch(M){case"children":case"dangerouslySetInnerHTML":if(U!=null)throw Error(i(137,t));break;default:Re(e,t,M,U,o,P)}return;default:if(vo(t)){for(var Oe in r)U=r[Oe],r.hasOwnProperty(Oe)&&U!==void 0&&!o.hasOwnProperty(Oe)&&au(e,t,Oe,void 0,o,U);for($ in o)U=o[$],P=r[$],!o.hasOwnProperty($)||U===P||U===void 0&&P===void 0||au(e,t,$,U,o,P);return}}for(var T in r)U=r[T],r.hasOwnProperty(T)&&U!=null&&!o.hasOwnProperty(T)&&Re(e,t,T,null,o,U);for(V in o)U=o[V],P=r[V],!o.hasOwnProperty(V)||U===P||U==null&&P==null||Re(e,t,V,U,o,P)}var ru=null,nu=null;function hi(e){return e.nodeType===9?e:e.ownerDocument}function a0(e){switch(e){case"http://www.w3.org/2000/svg":return 1;case"http://www.w3.org/1998/Math/MathML":return 2;default:return 0}}function r0(e,t){if(e===0)switch(t){case"svg":return 1;case"math":return 2;default:return 0}return e===1&&t==="foreignObject"?0:e}function lu(e,t){return e==="textarea"||e==="noscript"||typeof t.children=="string"||typeof t.children=="number"||typeof t.children=="bigint"||typeof t.dangerouslySetInnerHTML=="object"&&t.dangerouslySetInnerHTML!==null&&t.dangerouslySetInnerHTML.__html!=null}var iu=null;function _y(){var e=window.event;return e&&e.type==="popstate"?e===iu?!1:(iu=e,!0):(iu=null,!1)}var n0=typeof setTimeout=="function"?setTimeout:void 0,Ny=typeof clearTimeout=="function"?clearTimeout:void 0,l0=typeof Promise=="function"?Promise:void 0,Sy=typeof queueMicrotask=="function"?queueMicrotask:typeof l0<"u"?function(e){return l0.resolve(null).then(e).catch(ky)}:n0;function ky(e){setTimeout(function(){throw e})}function Is(e){return e==="head"}function i0(e,t){var r=t,o=0,d=0;do{var f=r.nextSibling;if(e.removeChild(r),f&&f.nodeType===8)if(r=f.data,r==="/$"){if(0<o&&8>o){r=o;var y=e.ownerDocument;if(r&1&&Dn(y.documentElement),r&2&&Dn(y.body),r&4)for(r=y.head,Dn(r),y=r.firstChild;y;){var b=y.nextSibling,k=y.nodeName;y[Fr]||k==="SCRIPT"||k==="STYLE"||k==="LINK"&&y.rel.toLowerCase()==="stylesheet"||r.removeChild(y),y=b}}if(d===0){e.removeChild(f),Bn(t);return}d--}else r==="$"||r==="$?"||r==="$!"?d++:o=r.charCodeAt(0)-48;else o=0;r=f}while(r);Bn(t)}function ou(e){var t=e.firstChild;for(t&&t.nodeType===10&&(t=t.nextSibling);t;){var r=t;switch(t=t.nextSibling,r.nodeName){case"HTML":case"HEAD":case"BODY":ou(r),fo(r);continue;case"SCRIPT":case"STYLE":continue;case"LINK":if(r.rel.toLowerCase()==="stylesheet")continue}e.removeChild(r)}}function Cy(e,t,r,o){for(;e.nodeType===1;){var d=r;if(e.nodeName.toLowerCase()!==t.toLowerCase()){if(!o&&(e.nodeName!=="INPUT"||e.type!=="hidden"))break}else if(o){if(!e[Fr])switch(t){case"meta":if(!e.hasAttribute("itemprop"))break;return e;case"link":if(f=e.getAttribute("rel"),f==="stylesheet"&&e.hasAttribute("data-precedence"))break;if(f!==d.rel||e.getAttribute("href")!==(d.href==null||d.href===""?null:d.href)||e.getAttribute("crossorigin")!==(d.crossOrigin==null?null:d.crossOrigin)||e.getAttribute("title")!==(d.title==null?null:d.title))break;return e;case"style":if(e.hasAttribute("data-precedence"))break;return e;case"script":if(f=e.getAttribute("src"),(f!==(d.src==null?null:d.src)||e.getAttribute("type")!==(d.type==null?null:d.type)||e.getAttribute("crossorigin")!==(d.crossOrigin==null?null:d.crossOrigin))&&f&&e.hasAttribute("async")&&!e.hasAttribute("itemprop"))break;return e;default:return e}}else if(t==="input"&&e.type==="hidden"){var f=d.name==null?null:""+d.name;if(d.type==="hidden"&&e.getAttribute("name")===f)return e}else return e;if(e=$t(e.nextSibling),e===null)break}return null}function Ey(e,t,r){if(t==="")return null;for(;e.nodeType!==3;)if((e.nodeType!==1||e.nodeName!=="INPUT"||e.type!=="hidden")&&!r||(e=$t(e.nextSibling),e===null))return null;return e}function cu(e){return e.data==="$!"||e.data==="$?"&&e.ownerDocument.readyState==="complete"}function Ay(e,t){var r=e.ownerDocument;if(e.data!=="$?"||r.readyState==="complete")t();else{var o=function(){t(),r.removeEventListener("DOMContentLoaded",o)};r.addEventListener("DOMContentLoaded",o),e._reactRetry=o}}function $t(e){for(;e!=null;e=e.nextSibling){var t=e.nodeType;if(t===1||t===3)break;if(t===8){if(t=e.data,t==="$"||t==="$!"||t==="$?"||t==="F!"||t==="F")break;if(t==="/$")return null}}return e}var uu=null;function o0(e){e=e.previousSibling;for(var t=0;e;){if(e.nodeType===8){var r=e.data;if(r==="$"||r==="$!"||r==="$?"){if(t===0)return e;t--}else r==="/$"&&t++}e=e.previousSibling}return null}function c0(e,t,r){switch(t=hi(r),e){case"html":if(e=t.documentElement,!e)throw Error(i(452));return e;case"head":if(e=t.head,!e)throw Error(i(453));return e;case"body":if(e=t.body,!e)throw Error(i(454));return e;default:throw Error(i(451))}}function Dn(e){for(var t=e.attributes;t.length;)e.removeAttributeNode(t[0]);fo(e)}var Lt=new Map,u0=new Set;function fi(e){return typeof e.getRootNode=="function"?e.getRootNode():e.nodeType===9?e:e.ownerDocument}var js=W.d;W.d={f:Ty,r:Ry,D:Oy,C:Dy,L:My,m:Uy,X:Ly,S:Py,M:qy};function Ty(){var e=js.f(),t=ri();return e||t}function Ry(e){var t=qa(e);t!==null&&t.tag===5&&t.type==="form"?Tf(t):js.r(e)}var yr=typeof document>"u"?null:document;function d0(e,t,r){var o=yr;if(o&&typeof t=="string"&&t){var d=Tt(t);d='link[rel="'+e+'"][href="'+d+'"]',typeof r=="string"&&(d+='[crossorigin="'+r+'"]'),u0.has(d)||(u0.add(d),e={rel:e,crossOrigin:r,href:t},o.querySelector(d)===null&&(t=o.createElement("link"),nt(t,"link",e),Ze(t),o.head.appendChild(t)))}}function Oy(e){js.D(e),d0("dns-prefetch",e,null)}function Dy(e,t){js.C(e,t),d0("preconnect",e,t)}function My(e,t,r){js.L(e,t,r);var o=yr;if(o&&e&&t){var d='link[rel="preload"][as="'+Tt(t)+'"]';t==="image"&&r&&r.imageSrcSet?(d+='[imagesrcset="'+Tt(r.imageSrcSet)+'"]',typeof r.imageSizes=="string"&&(d+='[imagesizes="'+Tt(r.imageSizes)+'"]')):d+='[href="'+Tt(e)+'"]';var f=d;switch(t){case"style":f=vr(e);break;case"script":f=br(e)}Lt.has(f)||(e=p({rel:"preload",href:t==="image"&&r&&r.imageSrcSet?void 0:e,as:t},r),Lt.set(f,e),o.querySelector(d)!==null||t==="style"&&o.querySelector(Mn(f))||t==="script"&&o.querySelector(Un(f))||(t=o.createElement("link"),nt(t,"link",e),Ze(t),o.head.appendChild(t)))}}function Uy(e,t){js.m(e,t);var r=yr;if(r&&e){var o=t&&typeof t.as=="string"?t.as:"script",d='link[rel="modulepreload"][as="'+Tt(o)+'"][href="'+Tt(e)+'"]',f=d;switch(o){case"audioworklet":case"paintworklet":case"serviceworker":case"sharedworker":case"worker":case"script":f=br(e)}if(!Lt.has(f)&&(e=p({rel:"modulepreload",href:e},t),Lt.set(f,e),r.querySelector(d)===null)){switch(o){case"audioworklet":case"paintworklet":case"serviceworker":case"sharedworker":case"worker":case"script":if(r.querySelector(Un(f)))return}o=r.createElement("link"),nt(o,"link",e),Ze(o),r.head.appendChild(o)}}}function Py(e,t,r){js.S(e,t,r);var o=yr;if(o&&e){var d=za(o).hoistableStyles,f=vr(e);t=t||"default";var y=d.get(f);if(!y){var b={loading:0,preload:null};if(y=o.querySelector(Mn(f)))b.loading=5;else{e=p({rel:"stylesheet",href:e,"data-precedence":t},r),(r=Lt.get(f))&&du(e,r);var k=y=o.createElement("link");Ze(k),nt(k,"link",e),k._p=new Promise(function(M,$){k.onload=M,k.onerror=$}),k.addEventListener("load",function(){b.loading|=1}),k.addEventListener("error",function(){b.loading|=2}),b.loading|=4,mi(y,t,o)}y={type:"stylesheet",instance:y,count:1,state:b},d.set(f,y)}}}function Ly(e,t){js.X(e,t);var r=yr;if(r&&e){var o=za(r).hoistableScripts,d=br(e),f=o.get(d);f||(f=r.querySelector(Un(d)),f||(e=p({src:e,async:!0},t),(t=Lt.get(d))&&hu(e,t),f=r.createElement("script"),Ze(f),nt(f,"link",e),r.head.appendChild(f)),f={type:"script",instance:f,count:1,state:null},o.set(d,f))}}function qy(e,t){js.M(e,t);var r=yr;if(r&&e){var o=za(r).hoistableScripts,d=br(e),f=o.get(d);f||(f=r.querySelector(Un(d)),f||(e=p({src:e,async:!0,type:"module"},t),(t=Lt.get(d))&&hu(e,t),f=r.createElement("script"),Ze(f),nt(f,"link",e),r.head.appendChild(f)),f={type:"script",instance:f,count:1,state:null},o.set(d,f))}}function h0(e,t,r,o){var d=(d=fe.current)?fi(d):null;if(!d)throw Error(i(446));switch(e){case"meta":case"title":return null;case"style":return typeof r.precedence=="string"&&typeof r.href=="string"?(t=vr(r.href),r=za(d).hoistableStyles,o=r.get(t),o||(o={type:"style",instance:null,count:0,state:null},r.set(t,o)),o):{type:"void",instance:null,count:0,state:null};case"link":if(r.rel==="stylesheet"&&typeof r.href=="string"&&typeof r.precedence=="string"){e=vr(r.href);var f=za(d).hoistableStyles,y=f.get(e);if(y||(d=d.ownerDocument||d,y={type:"stylesheet",instance:null,count:0,state:{loading:0,preload:null}},f.set(e,y),(f=d.querySelector(Mn(e)))&&!f._p&&(y.instance=f,y.state.loading=5),Lt.has(e)||(r={rel:"preload",as:"style",href:r.href,crossOrigin:r.crossOrigin,integrity:r.integrity,media:r.media,hrefLang:r.hrefLang,referrerPolicy:r.referrerPolicy},Lt.set(e,r),f||zy(d,e,r,y.state))),t&&o===null)throw Error(i(528,""));return y}if(t&&o!==null)throw Error(i(529,""));return null;case"script":return t=r.async,r=r.src,typeof r=="string"&&t&&typeof t!="function"&&typeof t!="symbol"?(t=br(r),r=za(d).hoistableScripts,o=r.get(t),o||(o={type:"script",instance:null,count:0,state:null},r.set(t,o)),o):{type:"void",instance:null,count:0,state:null};default:throw Error(i(444,e))}}function vr(e){return'href="'+Tt(e)+'"'}function Mn(e){return'link[rel="stylesheet"]['+e+"]"}function f0(e){return p({},e,{"data-precedence":e.precedence,precedence:null})}function zy(e,t,r,o){e.querySelector('link[rel="preload"][as="style"]['+t+"]")?o.loading=1:(t=e.createElement("link"),o.preload=t,t.addEventListener("load",function(){return o.loading|=1}),t.addEventListener("error",function(){return o.loading|=2}),nt(t,"link",r),Ze(t),e.head.appendChild(t))}function br(e){return'[src="'+Tt(e)+'"]'}function Un(e){return"script[async]"+e}function m0(e,t,r){if(t.count++,t.instance===null)switch(t.type){case"style":var o=e.querySelector('style[data-href~="'+Tt(r.href)+'"]');if(o)return t.instance=o,Ze(o),o;var d=p({},r,{"data-href":r.href,"data-precedence":r.precedence,href:null,precedence:null});return o=(e.ownerDocument||e).createElement("style"),Ze(o),nt(o,"style",d),mi(o,r.precedence,e),t.instance=o;case"stylesheet":d=vr(r.href);var f=e.querySelector(Mn(d));if(f)return t.state.loading|=4,t.instance=f,Ze(f),f;o=f0(r),(d=Lt.get(d))&&du(o,d),f=(e.ownerDocument||e).createElement("link"),Ze(f);var y=f;return y._p=new Promise(function(b,k){y.onload=b,y.onerror=k}),nt(f,"link",o),t.state.loading|=4,mi(f,r.precedence,e),t.instance=f;case"script":return f=br(r.src),(d=e.querySelector(Un(f)))?(t.instance=d,Ze(d),d):(o=r,(d=Lt.get(f))&&(o=p({},r),hu(o,d)),e=e.ownerDocument||e,d=e.createElement("script"),Ze(d),nt(d,"link",o),e.head.appendChild(d),t.instance=d);case"void":return null;default:throw Error(i(443,t.type))}else t.type==="stylesheet"&&(t.state.loading&4)===0&&(o=t.instance,t.state.loading|=4,mi(o,r.precedence,e));return t.instance}function mi(e,t,r){for(var o=r.querySelectorAll('link[rel="stylesheet"][data-precedence],style[data-precedence]'),d=o.length?o[o.length-1]:null,f=d,y=0;y<o.length;y++){var b=o[y];if(b.dataset.precedence===t)f=b;else if(f!==d)break}f?f.parentNode.insertBefore(e,f.nextSibling):(t=r.nodeType===9?r.head:r,t.insertBefore(e,t.firstChild))}function du(e,t){e.crossOrigin==null&&(e.crossOrigin=t.crossOrigin),e.referrerPolicy==null&&(e.referrerPolicy=t.referrerPolicy),e.title==null&&(e.title=t.title)}function hu(e,t){e.crossOrigin==null&&(e.crossOrigin=t.crossOrigin),e.referrerPolicy==null&&(e.referrerPolicy=t.referrerPolicy),e.integrity==null&&(e.integrity=t.integrity)}var gi=null;function g0(e,t,r){if(gi===null){var o=new Map,d=gi=new Map;d.set(r,o)}else d=gi,o=d.get(r),o||(o=new Map,d.set(r,o));if(o.has(e))return o;for(o.set(e,null),r=r.getElementsByTagName(e),d=0;d<r.length;d++){var f=r[d];if(!(f[Fr]||f[lt]||e==="link"&&f.getAttribute("rel")==="stylesheet")&&f.namespaceURI!=="http://www.w3.org/2000/svg"){var y=f.getAttribute(t)||"";y=e+y;var b=o.get(y);b?b.push(f):o.set(y,[f])}}return o}function x0(e,t,r){e=e.ownerDocument||e,e.head.insertBefore(r,t==="title"?e.querySelector("head > title"):null)}function $y(e,t,r){if(r===1||t.itemProp!=null)return!1;switch(e){case"meta":case"title":return!0;case"style":if(typeof t.precedence!="string"||typeof t.href!="string"||t.href==="")break;return!0;case"link":if(typeof t.rel!="string"||typeof t.href!="string"||t.href===""||t.onLoad||t.onError)break;switch(t.rel){case"stylesheet":return e=t.disabled,typeof t.precedence=="string"&&e==null;default:return!0}case"script":if(t.async&&typeof t.async!="function"&&typeof t.async!="symbol"&&!t.onLoad&&!t.onError&&t.src&&typeof t.src=="string")return!0}return!1}function p0(e){return!(e.type==="stylesheet"&&(e.state.loading&3)===0)}var Pn=null;function By(){}function Hy(e,t,r){if(Pn===null)throw Error(i(475));var o=Pn;if(t.type==="stylesheet"&&(typeof r.media!="string"||matchMedia(r.media).matches!==!1)&&(t.state.loading&4)===0){if(t.instance===null){var d=vr(r.href),f=e.querySelector(Mn(d));if(f){e=f._p,e!==null&&typeof e=="object"&&typeof e.then=="function"&&(o.count++,o=xi.bind(o),e.then(o,o)),t.state.loading|=4,t.instance=f,Ze(f);return}f=e.ownerDocument||e,r=f0(r),(d=Lt.get(d))&&du(r,d),f=f.createElement("link"),Ze(f);var y=f;y._p=new Promise(function(b,k){y.onload=b,y.onerror=k}),nt(f,"link",r),t.instance=f}o.stylesheets===null&&(o.stylesheets=new Map),o.stylesheets.set(t,e),(e=t.state.preload)&&(t.state.loading&3)===0&&(o.count++,t=xi.bind(o),e.addEventListener("load",t),e.addEventListener("error",t))}}function Gy(){if(Pn===null)throw Error(i(475));var e=Pn;return e.stylesheets&&e.count===0&&fu(e,e.stylesheets),0<e.count?function(t){var r=setTimeout(function(){if(e.stylesheets&&fu(e,e.stylesheets),e.unsuspend){var o=e.unsuspend;e.unsuspend=null,o()}},6e4);return e.unsuspend=t,function(){e.unsuspend=null,clearTimeout(r)}}:null}function xi(){if(this.count--,this.count===0){if(this.stylesheets)fu(this,this.stylesheets);else if(this.unsuspend){var e=this.unsuspend;this.unsuspend=null,e()}}}var pi=null;function fu(e,t){e.stylesheets=null,e.unsuspend!==null&&(e.count++,pi=new Map,t.forEach(Vy,e),pi=null,xi.call(e))}function Vy(e,t){if(!(t.state.loading&4)){var r=pi.get(e);if(r)var o=r.get(null);else{r=new Map,pi.set(e,r);for(var d=e.querySelectorAll("link[data-precedence],style[data-precedence]"),f=0;f<d.length;f++){var y=d[f];(y.nodeName==="LINK"||y.getAttribute("media")!=="not all")&&(r.set(y.dataset.precedence,y),o=y)}o&&r.set(null,o)}d=t.instance,y=d.getAttribute("data-precedence"),f=r.get(y)||o,f===o&&r.set(null,d),r.set(y,d),this.count++,o=xi.bind(this),d.addEventListener("load",o),d.addEventListener("error",o),f?f.parentNode.insertBefore(d,f.nextSibling):(e=e.nodeType===9?e.head:e,e.insertBefore(d,e.firstChild)),t.state.loading|=4}}var Ln={$$typeof:L,Provider:null,Consumer:null,_currentValue:J,_currentValue2:J,_threadCount:0};function Qy(e,t,r,o,d,f,y,b){this.tag=1,this.containerInfo=e,this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.next=this.pendingContext=this.context=this.cancelPendingCommit=null,this.callbackPriority=0,this.expirationTimes=oo(-1),this.entangledLanes=this.shellSuspendCounter=this.errorRecoveryDisabledLanes=this.expiredLanes=this.warmLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=oo(0),this.hiddenUpdates=oo(null),this.identifierPrefix=o,this.onUncaughtError=d,this.onCaughtError=f,this.onRecoverableError=y,this.pooledCache=null,this.pooledCacheLanes=0,this.formState=b,this.incompleteTransitions=new Map}function y0(e,t,r,o,d,f,y,b,k,M,$,V){return e=new Qy(e,t,r,y,b,k,M,V),t=1,f===!0&&(t|=24),f=_t(3,null,null,t),e.current=f,f.stateNode=e,t=Io(),t.refCount++,e.pooledCache=t,t.refCount++,f.memoizedState={element:o,isDehydrated:r,cache:t},Jo(f),e}function v0(e){return e?(e=Za,e):Za}function b0(e,t,r,o,d,f){d=v0(d),o.context===null?o.context=d:o.pendingContext=d,o=Us(t),o.payload={element:r},f=f===void 0?null:f,f!==null&&(o.callback=f),r=Ps(e,o,t),r!==null&&(Et(r,e,t),fn(r,e,t))}function j0(e,t){if(e=e.memoizedState,e!==null&&e.dehydrated!==null){var r=e.retryLane;e.retryLane=r!==0&&r<t?r:t}}function mu(e,t){j0(e,t),(e=e.alternate)&&j0(e,t)}function w0(e){if(e.tag===13){var t=Xa(e,67108864);t!==null&&Et(t,e,67108864),mu(e,67108864)}}var yi=!0;function Yy(e,t,r,o){var d=R.T;R.T=null;var f=W.p;try{W.p=2,gu(e,t,r,o)}finally{W.p=f,R.T=d}}function Fy(e,t,r,o){var d=R.T;R.T=null;var f=W.p;try{W.p=8,gu(e,t,r,o)}finally{W.p=f,R.T=d}}function gu(e,t,r,o){if(yi){var d=xu(o);if(d===null)su(e,t,o,vi,r),N0(e,o);else if(Ky(d,e,t,r,o))o.stopPropagation();else if(N0(e,o),t&4&&-1<Iy.indexOf(e)){for(;d!==null;){var f=qa(d);if(f!==null)switch(f.tag){case 3:if(f=f.stateNode,f.current.memoizedState.isDehydrated){var y=oa(f.pendingLanes);if(y!==0){var b=f;for(b.pendingLanes|=2,b.entangledLanes|=2;y;){var k=1<<31-jt(y);b.entanglements[1]|=k,y&=~k}es(f),(Ee&6)===0&&(si=Kt()+500,Tn(0))}}break;case 13:b=Xa(f,2),b!==null&&Et(b,f,2),ri(),mu(f,2)}if(f=xu(o),f===null&&su(e,t,o,vi,r),f===d)break;d=f}d!==null&&o.stopPropagation()}else su(e,t,o,null,r)}}function xu(e){return e=jo(e),pu(e)}var vi=null;function pu(e){if(vi=null,e=La(e),e!==null){var t=u(e);if(t===null)e=null;else{var r=t.tag;if(r===13){if(e=h(t),e!==null)return e;e=null}else if(r===3){if(t.stateNode.current.memoizedState.isDehydrated)return t.tag===3?t.stateNode.containerInfo:null;e=null}else t!==e&&(e=null)}}return vi=e,null}function _0(e){switch(e){case"beforetoggle":case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"toggle":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 2;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 8;case"message":switch(Dx()){case Pd:return 2;case Ld:return 8;case dl:case Mx:return 32;case qd:return 268435456;default:return 32}default:return 32}}var yu=!1,Ks=null,Xs=null,Zs=null,qn=new Map,zn=new Map,Js=[],Iy="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset".split(" ");function N0(e,t){switch(e){case"focusin":case"focusout":Ks=null;break;case"dragenter":case"dragleave":Xs=null;break;case"mouseover":case"mouseout":Zs=null;break;case"pointerover":case"pointerout":qn.delete(t.pointerId);break;case"gotpointercapture":case"lostpointercapture":zn.delete(t.pointerId)}}function $n(e,t,r,o,d,f){return e===null||e.nativeEvent!==f?(e={blockedOn:t,domEventName:r,eventSystemFlags:o,nativeEvent:f,targetContainers:[d]},t!==null&&(t=qa(t),t!==null&&w0(t)),e):(e.eventSystemFlags|=o,t=e.targetContainers,d!==null&&t.indexOf(d)===-1&&t.push(d),e)}function Ky(e,t,r,o,d){switch(t){case"focusin":return Ks=$n(Ks,e,t,r,o,d),!0;case"dragenter":return Xs=$n(Xs,e,t,r,o,d),!0;case"mouseover":return Zs=$n(Zs,e,t,r,o,d),!0;case"pointerover":var f=d.pointerId;return qn.set(f,$n(qn.get(f)||null,e,t,r,o,d)),!0;case"gotpointercapture":return f=d.pointerId,zn.set(f,$n(zn.get(f)||null,e,t,r,o,d)),!0}return!1}function S0(e){var t=La(e.target);if(t!==null){var r=u(t);if(r!==null){if(t=r.tag,t===13){if(t=h(r),t!==null){e.blockedOn=t,Hx(e.priority,function(){if(r.tag===13){var o=Ct();o=co(o);var d=Xa(r,o);d!==null&&Et(d,r,o),mu(r,o)}});return}}else if(t===3&&r.stateNode.current.memoizedState.isDehydrated){e.blockedOn=r.tag===3?r.stateNode.containerInfo:null;return}}}e.blockedOn=null}function bi(e){if(e.blockedOn!==null)return!1;for(var t=e.targetContainers;0<t.length;){var r=xu(e.nativeEvent);if(r===null){r=e.nativeEvent;var o=new r.constructor(r.type,r);bo=o,r.target.dispatchEvent(o),bo=null}else return t=qa(r),t!==null&&w0(t),e.blockedOn=r,!1;t.shift()}return!0}function k0(e,t,r){bi(e)&&r.delete(t)}function Xy(){yu=!1,Ks!==null&&bi(Ks)&&(Ks=null),Xs!==null&&bi(Xs)&&(Xs=null),Zs!==null&&bi(Zs)&&(Zs=null),qn.forEach(k0),zn.forEach(k0)}function ji(e,t){e.blockedOn===t&&(e.blockedOn=null,yu||(yu=!0,n.unstable_scheduleCallback(n.unstable_NormalPriority,Xy)))}var wi=null;function C0(e){wi!==e&&(wi=e,n.unstable_scheduleCallback(n.unstable_NormalPriority,function(){wi===e&&(wi=null);for(var t=0;t<e.length;t+=3){var r=e[t],o=e[t+1],d=e[t+2];if(typeof o!="function"){if(pu(o||r)===null)continue;break}var f=qa(r);f!==null&&(e.splice(t,3),t-=3,pc(f,{pending:!0,data:d,method:r.method,action:o},o,d))}}))}function Bn(e){function t(k){return ji(k,e)}Ks!==null&&ji(Ks,e),Xs!==null&&ji(Xs,e),Zs!==null&&ji(Zs,e),qn.forEach(t),zn.forEach(t);for(var r=0;r<Js.length;r++){var o=Js[r];o.blockedOn===e&&(o.blockedOn=null)}for(;0<Js.length&&(r=Js[0],r.blockedOn===null);)S0(r),r.blockedOn===null&&Js.shift();if(r=(e.ownerDocument||e).$$reactFormReplay,r!=null)for(o=0;o<r.length;o+=3){var d=r[o],f=r[o+1],y=d[ht]||null;if(typeof f=="function")y||C0(r);else if(y){var b=null;if(f&&f.hasAttribute("formAction")){if(d=f,y=f[ht]||null)b=y.formAction;else if(pu(d)!==null)continue}else b=y.action;typeof b=="function"?r[o+1]=b:(r.splice(o,3),o-=3),C0(r)}}}function vu(e){this._internalRoot=e}_i.prototype.render=vu.prototype.render=function(e){var t=this._internalRoot;if(t===null)throw Error(i(409));var r=t.current,o=Ct();b0(r,o,e,t,null,null)},_i.prototype.unmount=vu.prototype.unmount=function(){var e=this._internalRoot;if(e!==null){this._internalRoot=null;var t=e.containerInfo;b0(e.current,2,null,e,null,null),ri(),t[Pa]=null}};function _i(e){this._internalRoot=e}_i.prototype.unstable_scheduleHydration=function(e){if(e){var t=Gd();e={blockedOn:null,target:e,priority:t};for(var r=0;r<Js.length&&t!==0&&t<Js[r].priority;r++);Js.splice(r,0,e),r===0&&S0(e)}};var E0=a.version;if(E0!=="19.1.1")throw Error(i(527,E0,"19.1.1"));W.findDOMNode=function(e){var t=e._reactInternals;if(t===void 0)throw typeof e.render=="function"?Error(i(188)):(e=Object.keys(e).join(","),Error(i(268,e)));return e=x(t),e=e!==null?g(e):null,e=e===null?null:e.stateNode,e};var Zy={bundleType:0,version:"19.1.1",rendererPackageName:"react-dom",currentDispatcherRef:R,reconcilerVersion:"19.1.1"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var Ni=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!Ni.isDisabled&&Ni.supportsFiber)try{Vr=Ni.inject(Zy),bt=Ni}catch{}}return Gn.createRoot=function(e,t){if(!c(e))throw Error(i(299));var r=!1,o="",d=Vf,f=Qf,y=Yf,b=null;return t!=null&&(t.unstable_strictMode===!0&&(r=!0),t.identifierPrefix!==void 0&&(o=t.identifierPrefix),t.onUncaughtError!==void 0&&(d=t.onUncaughtError),t.onCaughtError!==void 0&&(f=t.onCaughtError),t.onRecoverableError!==void 0&&(y=t.onRecoverableError),t.unstable_transitionCallbacks!==void 0&&(b=t.unstable_transitionCallbacks)),t=y0(e,1,!1,null,null,r,o,d,f,y,b,null),e[Pa]=t.current,tu(e),new vu(t)},Gn.hydrateRoot=function(e,t,r){if(!c(e))throw Error(i(299));var o=!1,d="",f=Vf,y=Qf,b=Yf,k=null,M=null;return r!=null&&(r.unstable_strictMode===!0&&(o=!0),r.identifierPrefix!==void 0&&(d=r.identifierPrefix),r.onUncaughtError!==void 0&&(f=r.onUncaughtError),r.onCaughtError!==void 0&&(y=r.onCaughtError),r.onRecoverableError!==void 0&&(b=r.onRecoverableError),r.unstable_transitionCallbacks!==void 0&&(k=r.unstable_transitionCallbacks),r.formState!==void 0&&(M=r.formState)),t=y0(e,1,!0,t,r??null,o,d,f,y,b,k,M),t.context=v0(null),r=t.current,o=Ct(),o=co(o),d=Us(o),d.callback=null,Ps(r,d,o),r=o,t.current.lanes=r,Yr(t,r),es(t),e[Pa]=t.current,tu(e),new _i(t)},Gn.version="19.1.1",Gn}var q0;function ov(){if(q0)return wu.exports;q0=1;function n(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(n)}catch(a){console.error(a)}}return n(),wu.exports=iv(),wu.exports}var cv=ov();/**
 * react-router v7.8.2
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */var z0="popstate";function uv(n={}){function a(i,c){let{pathname:u,search:h,hash:m}=i.location;return Vu("",{pathname:u,search:h,hash:m},c.state&&c.state.usr||null,c.state&&c.state.key||"default")}function l(i,c){return typeof c=="string"?c:Xn(c)}return hv(a,l,null,n)}function ze(n,a){if(n===!1||n===null||typeof n>"u")throw new Error(a)}function Qt(n,a){if(!n){typeof console<"u"&&console.warn(a);try{throw new Error(a)}catch{}}}function dv(){return Math.random().toString(36).substring(2,10)}function $0(n,a){return{usr:n.state,key:n.key,idx:a}}function Vu(n,a,l=null,i){return{pathname:typeof n=="string"?n:n.pathname,search:"",hash:"",...typeof a=="string"?zr(a):a,state:l,key:a&&a.key||i||dv()}}function Xn({pathname:n="/",search:a="",hash:l=""}){return a&&a!=="?"&&(n+=a.charAt(0)==="?"?a:"?"+a),l&&l!=="#"&&(n+=l.charAt(0)==="#"?l:"#"+l),n}function zr(n){let a={};if(n){let l=n.indexOf("#");l>=0&&(a.hash=n.substring(l),n=n.substring(0,l));let i=n.indexOf("?");i>=0&&(a.search=n.substring(i),n=n.substring(0,i)),n&&(a.pathname=n)}return a}function hv(n,a,l,i={}){let{window:c=document.defaultView,v5Compat:u=!1}=i,h=c.history,m="POP",x=null,g=p();g==null&&(g=0,h.replaceState({...h.state,idx:g},""));function p(){return(h.state||{idx:null}).idx}function v(){m="POP";let C=p(),O=C==null?null:C-g;g=C,x&&x({action:m,location:_.location,delta:O})}function j(C,O){m="PUSH";let q=Vu(_.location,C,O);g=p()+1;let L=$0(q,g),z=_.createHref(q);try{h.pushState(L,"",z)}catch(Q){if(Q instanceof DOMException&&Q.name==="DataCloneError")throw Q;c.location.assign(z)}u&&x&&x({action:m,location:_.location,delta:1})}function w(C,O){m="REPLACE";let q=Vu(_.location,C,O);g=p();let L=$0(q,g),z=_.createHref(q);h.replaceState(L,"",z),u&&x&&x({action:m,location:_.location,delta:0})}function N(C){return fv(C)}let _={get action(){return m},get location(){return n(c,h)},listen(C){if(x)throw new Error("A history only accepts one active listener");return c.addEventListener(z0,v),x=C,()=>{c.removeEventListener(z0,v),x=null}},createHref(C){return a(c,C)},createURL:N,encodeLocation(C){let O=N(C);return{pathname:O.pathname,search:O.search,hash:O.hash}},push:j,replace:w,go(C){return h.go(C)}};return _}function fv(n,a=!1){let l="http://localhost";typeof window<"u"&&(l=window.location.origin!=="null"?window.location.origin:window.location.href),ze(l,"No window.location.(origin|href) available to create URL");let i=typeof n=="string"?n:Xn(n);return i=i.replace(/ $/,"%20"),!a&&i.startsWith("//")&&(i=l+i),new URL(i,l)}function Mg(n,a,l="/"){return mv(n,a,l,!1)}function mv(n,a,l,i){let c=typeof a=="string"?zr(a):a,u=Cs(c.pathname||"/",l);if(u==null)return null;let h=Ug(n);gv(h);let m=null;for(let x=0;m==null&&x<h.length;++x){let g=kv(u);m=Nv(h[x],g,i)}return m}function Ug(n,a=[],l=[],i="",c=!1){let u=(h,m,x=c,g)=>{let p={relativePath:g===void 0?h.path||"":g,caseSensitive:h.caseSensitive===!0,childrenIndex:m,route:h};if(p.relativePath.startsWith("/")){if(!p.relativePath.startsWith(i)&&x)return;ze(p.relativePath.startsWith(i),`Absolute route path "${p.relativePath}" nested under path "${i}" is not valid. An absolute child route path must start with the combined path of all its parent routes.`),p.relativePath=p.relativePath.slice(i.length)}let v=Ns([i,p.relativePath]),j=l.concat(p);h.children&&h.children.length>0&&(ze(h.index!==!0,`Index routes must not have child routes. Please remove all child routes from route path "${v}".`),Ug(h.children,a,j,v,x)),!(h.path==null&&!h.index)&&a.push({path:v,score:wv(v,h.index),routesMeta:j})};return n.forEach((h,m)=>{if(h.path===""||!h.path?.includes("?"))u(h,m);else for(let x of Pg(h.path))u(h,m,!0,x)}),a}function Pg(n){let a=n.split("/");if(a.length===0)return[];let[l,...i]=a,c=l.endsWith("?"),u=l.replace(/\?$/,"");if(i.length===0)return c?[u,""]:[u];let h=Pg(i.join("/")),m=[];return m.push(...h.map(x=>x===""?u:[u,x].join("/"))),c&&m.push(...h),m.map(x=>n.startsWith("/")&&x===""?"/":x)}function gv(n){n.sort((a,l)=>a.score!==l.score?l.score-a.score:_v(a.routesMeta.map(i=>i.childrenIndex),l.routesMeta.map(i=>i.childrenIndex)))}var xv=/^:[\w-]+$/,pv=3,yv=2,vv=1,bv=10,jv=-2,B0=n=>n==="*";function wv(n,a){let l=n.split("/"),i=l.length;return l.some(B0)&&(i+=jv),a&&(i+=yv),l.filter(c=>!B0(c)).reduce((c,u)=>c+(xv.test(u)?pv:u===""?vv:bv),i)}function _v(n,a){return n.length===a.length&&n.slice(0,-1).every((i,c)=>i===a[c])?n[n.length-1]-a[a.length-1]:0}function Nv(n,a,l=!1){let{routesMeta:i}=n,c={},u="/",h=[];for(let m=0;m<i.length;++m){let x=i[m],g=m===i.length-1,p=u==="/"?a:a.slice(u.length)||"/",v=Gi({path:x.relativePath,caseSensitive:x.caseSensitive,end:g},p),j=x.route;if(!v&&g&&l&&!i[i.length-1].route.index&&(v=Gi({path:x.relativePath,caseSensitive:x.caseSensitive,end:!1},p)),!v)return null;Object.assign(c,v.params),h.push({params:c,pathname:Ns([u,v.pathname]),pathnameBase:Tv(Ns([u,v.pathnameBase])),route:j}),v.pathnameBase!=="/"&&(u=Ns([u,v.pathnameBase]))}return h}function Gi(n,a){typeof n=="string"&&(n={path:n,caseSensitive:!1,end:!0});let[l,i]=Sv(n.path,n.caseSensitive,n.end),c=a.match(l);if(!c)return null;let u=c[0],h=u.replace(/(.)\/+$/,"$1"),m=c.slice(1);return{params:i.reduce((g,{paramName:p,isOptional:v},j)=>{if(p==="*"){let N=m[j]||"";h=u.slice(0,u.length-N.length).replace(/(.)\/+$/,"$1")}const w=m[j];return v&&!w?g[p]=void 0:g[p]=(w||"").replace(/%2F/g,"/"),g},{}),pathname:u,pathnameBase:h,pattern:n}}function Sv(n,a=!1,l=!0){Qt(n==="*"||!n.endsWith("*")||n.endsWith("/*"),`Route path "${n}" will be treated as if it were "${n.replace(/\*$/,"/*")}" because the \`*\` character must always follow a \`/\` in the pattern. To get rid of this warning, please change the route path to "${n.replace(/\*$/,"/*")}".`);let i=[],c="^"+n.replace(/\/*\*?$/,"").replace(/^\/*/,"/").replace(/[\\.*+^${}|()[\]]/g,"\\$&").replace(/\/:([\w-]+)(\?)?/g,(h,m,x)=>(i.push({paramName:m,isOptional:x!=null}),x?"/?([^\\/]+)?":"/([^\\/]+)")).replace(/\/([\w-]+)\?(\/|$)/g,"(/$1)?$2");return n.endsWith("*")?(i.push({paramName:"*"}),c+=n==="*"||n==="/*"?"(.*)$":"(?:\\/(.+)|\\/*)$"):l?c+="\\/*$":n!==""&&n!=="/"&&(c+="(?:(?=\\/|$))"),[new RegExp(c,a?void 0:"i"),i]}function kv(n){try{return n.split("/").map(a=>decodeURIComponent(a).replace(/\//g,"%2F")).join("/")}catch(a){return Qt(!1,`The URL path "${n}" could not be decoded because it is a malformed URL segment. This is probably due to a bad percent encoding (${a}).`),n}}function Cs(n,a){if(a==="/")return n;if(!n.toLowerCase().startsWith(a.toLowerCase()))return null;let l=a.endsWith("/")?a.length-1:a.length,i=n.charAt(l);return i&&i!=="/"?null:n.slice(l)||"/"}function Cv(n,a="/"){let{pathname:l,search:i="",hash:c=""}=typeof n=="string"?zr(n):n;return{pathname:l?l.startsWith("/")?l:Ev(l,a):a,search:Rv(i),hash:Ov(c)}}function Ev(n,a){let l=a.replace(/\/+$/,"").split("/");return n.split("/").forEach(c=>{c===".."?l.length>1&&l.pop():c!=="."&&l.push(c)}),l.length>1?l.join("/"):"/"}function ku(n,a,l,i){return`Cannot include a '${n}' character in a manually specified \`to.${a}\` field [${JSON.stringify(i)}].  Please separate it out to the \`to.${l}\` field. Alternatively you may provide the full path as a string in <Link to="..."> and the router will parse it for you.`}function Av(n){return n.filter((a,l)=>l===0||a.route.path&&a.route.path.length>0)}function xd(n){let a=Av(n);return a.map((l,i)=>i===a.length-1?l.pathname:l.pathnameBase)}function pd(n,a,l,i=!1){let c;typeof n=="string"?c=zr(n):(c={...n},ze(!c.pathname||!c.pathname.includes("?"),ku("?","pathname","search",c)),ze(!c.pathname||!c.pathname.includes("#"),ku("#","pathname","hash",c)),ze(!c.search||!c.search.includes("#"),ku("#","search","hash",c)));let u=n===""||c.pathname==="",h=u?"/":c.pathname,m;if(h==null)m=l;else{let v=a.length-1;if(!i&&h.startsWith("..")){let j=h.split("/");for(;j[0]==="..";)j.shift(),v-=1;c.pathname=j.join("/")}m=v>=0?a[v]:"/"}let x=Cv(c,m),g=h&&h!=="/"&&h.endsWith("/"),p=(u||h===".")&&l.endsWith("/");return!x.pathname.endsWith("/")&&(g||p)&&(x.pathname+="/"),x}var Ns=n=>n.join("/").replace(/\/\/+/g,"/"),Tv=n=>n.replace(/\/+$/,"").replace(/^\/*/,"/"),Rv=n=>!n||n==="?"?"":n.startsWith("?")?n:"?"+n,Ov=n=>!n||n==="#"?"":n.startsWith("#")?n:"#"+n;function Dv(n){return n!=null&&typeof n.status=="number"&&typeof n.statusText=="string"&&typeof n.internal=="boolean"&&"data"in n}var Lg=["POST","PUT","PATCH","DELETE"];new Set(Lg);var Mv=["GET",...Lg];new Set(Mv);var $r=S.createContext(null);$r.displayName="DataRouter";var Xi=S.createContext(null);Xi.displayName="DataRouterState";S.createContext(!1);var qg=S.createContext({isTransitioning:!1});qg.displayName="ViewTransition";var Uv=S.createContext(new Map);Uv.displayName="Fetchers";var Pv=S.createContext(null);Pv.displayName="Await";var Ft=S.createContext(null);Ft.displayName="Navigation";var al=S.createContext(null);al.displayName="Location";var ls=S.createContext({outlet:null,matches:[],isDataRoute:!1});ls.displayName="Route";var yd=S.createContext(null);yd.displayName="RouteError";function Lv(n,{relative:a}={}){ze(Br(),"useHref() may be used only in the context of a <Router> component.");let{basename:l,navigator:i}=S.useContext(Ft),{hash:c,pathname:u,search:h}=rl(n,{relative:a}),m=u;return l!=="/"&&(m=u==="/"?l:Ns([l,u])),i.createHref({pathname:m,search:h,hash:c})}function Br(){return S.useContext(al)!=null}function It(){return ze(Br(),"useLocation() may be used only in the context of a <Router> component."),S.useContext(al).location}var zg="You should call navigate() in a React.useEffect(), not when your component is first rendered.";function $g(n){S.useContext(Ft).static||S.useLayoutEffect(n)}function Bg(){let{isDataRoute:n}=S.useContext(ls);return n?Xv():qv()}function qv(){ze(Br(),"useNavigate() may be used only in the context of a <Router> component.");let n=S.useContext($r),{basename:a,navigator:l}=S.useContext(Ft),{matches:i}=S.useContext(ls),{pathname:c}=It(),u=JSON.stringify(xd(i)),h=S.useRef(!1);return $g(()=>{h.current=!0}),S.useCallback((x,g={})=>{if(Qt(h.current,zg),!h.current)return;if(typeof x=="number"){l.go(x);return}let p=pd(x,JSON.parse(u),c,g.relative==="path");n==null&&a!=="/"&&(p.pathname=p.pathname==="/"?a:Ns([a,p.pathname])),(g.replace?l.replace:l.push)(p,g.state,g)},[a,l,u,c,n])}S.createContext(null);function rl(n,{relative:a}={}){let{matches:l}=S.useContext(ls),{pathname:i}=It(),c=JSON.stringify(xd(l));return S.useMemo(()=>pd(n,JSON.parse(c),i,a==="path"),[n,c,i,a])}function zv(n,a){return Hg(n,a)}function Hg(n,a,l,i,c){ze(Br(),"useRoutes() may be used only in the context of a <Router> component.");let{navigator:u}=S.useContext(Ft),{matches:h}=S.useContext(ls),m=h[h.length-1],x=m?m.params:{},g=m?m.pathname:"/",p=m?m.pathnameBase:"/",v=m&&m.route;{let q=v&&v.path||"";Gg(g,!v||q.endsWith("*")||q.endsWith("*?"),`You rendered descendant <Routes> (or called \`useRoutes()\`) at "${g}" (under <Route path="${q}">) but the parent route path has no trailing "*". This means if you navigate deeper, the parent won't match anymore and therefore the child routes will never render.

Please change the parent <Route path="${q}"> to <Route path="${q==="/"?"*":`${q}/*`}">.`)}let j=It(),w;if(a){let q=typeof a=="string"?zr(a):a;ze(p==="/"||q.pathname?.startsWith(p),`When overriding the location using \`<Routes location>\` or \`useRoutes(routes, location)\`, the location pathname must begin with the portion of the URL pathname that was matched by all parent routes. The current pathname base is "${p}" but pathname "${q.pathname}" was given in the \`location\` prop.`),w=q}else w=j;let N=w.pathname||"/",_=N;if(p!=="/"){let q=p.replace(/^\//,"").split("/");_="/"+N.replace(/^\//,"").split("/").slice(q.length).join("/")}let C=Mg(n,{pathname:_});Qt(v||C!=null,`No routes matched location "${w.pathname}${w.search}${w.hash}" `),Qt(C==null||C[C.length-1].route.element!==void 0||C[C.length-1].route.Component!==void 0||C[C.length-1].route.lazy!==void 0,`Matched leaf route at location "${w.pathname}${w.search}${w.hash}" does not have an element or Component. This means it will render an <Outlet /> with a null value by default resulting in an "empty" page.`);let O=Vv(C&&C.map(q=>Object.assign({},q,{params:Object.assign({},x,q.params),pathname:Ns([p,u.encodeLocation?u.encodeLocation(q.pathname).pathname:q.pathname]),pathnameBase:q.pathnameBase==="/"?p:Ns([p,u.encodeLocation?u.encodeLocation(q.pathnameBase).pathname:q.pathnameBase])})),h,l,i,c);return a&&O?S.createElement(al.Provider,{value:{location:{pathname:"/",search:"",hash:"",state:null,key:"default",...w},navigationType:"POP"}},O):O}function $v(){let n=Kv(),a=Dv(n)?`${n.status} ${n.statusText}`:n instanceof Error?n.message:JSON.stringify(n),l=n instanceof Error?n.stack:null,i="rgba(200,200,200, 0.5)",c={padding:"0.5rem",backgroundColor:i},u={padding:"2px 4px",backgroundColor:i},h=null;return console.error("Error handled by React Router default ErrorBoundary:",n),h=S.createElement(S.Fragment,null,S.createElement("p",null,"💿 Hey developer 👋"),S.createElement("p",null,"You can provide a way better UX than this when your app throws errors by providing your own ",S.createElement("code",{style:u},"ErrorBoundary")," or"," ",S.createElement("code",{style:u},"errorElement")," prop on your route.")),S.createElement(S.Fragment,null,S.createElement("h2",null,"Unexpected Application Error!"),S.createElement("h3",{style:{fontStyle:"italic"}},a),l?S.createElement("pre",{style:c},l):null,h)}var Bv=S.createElement($v,null),Hv=class extends S.Component{constructor(n){super(n),this.state={location:n.location,revalidation:n.revalidation,error:n.error}}static getDerivedStateFromError(n){return{error:n}}static getDerivedStateFromProps(n,a){return a.location!==n.location||a.revalidation!=="idle"&&n.revalidation==="idle"?{error:n.error,location:n.location,revalidation:n.revalidation}:{error:n.error!==void 0?n.error:a.error,location:a.location,revalidation:n.revalidation||a.revalidation}}componentDidCatch(n,a){this.props.unstable_onError?this.props.unstable_onError(n,a):console.error("React Router caught the following error during render",n)}render(){return this.state.error!==void 0?S.createElement(ls.Provider,{value:this.props.routeContext},S.createElement(yd.Provider,{value:this.state.error,children:this.props.component})):this.props.children}};function Gv({routeContext:n,match:a,children:l}){let i=S.useContext($r);return i&&i.static&&i.staticContext&&(a.route.errorElement||a.route.ErrorBoundary)&&(i.staticContext._deepestRenderedBoundaryId=a.route.id),S.createElement(ls.Provider,{value:n},l)}function Vv(n,a=[],l=null,i=null,c=null){if(n==null){if(!l)return null;if(l.errors)n=l.matches;else if(a.length===0&&!l.initialized&&l.matches.length>0)n=l.matches;else return null}let u=n,h=l?.errors;if(h!=null){let g=u.findIndex(p=>p.route.id&&h?.[p.route.id]!==void 0);ze(g>=0,`Could not find a matching route for errors on route IDs: ${Object.keys(h).join(",")}`),u=u.slice(0,Math.min(u.length,g+1))}let m=!1,x=-1;if(l)for(let g=0;g<u.length;g++){let p=u[g];if((p.route.HydrateFallback||p.route.hydrateFallbackElement)&&(x=g),p.route.id){let{loaderData:v,errors:j}=l,w=p.route.loader&&!v.hasOwnProperty(p.route.id)&&(!j||j[p.route.id]===void 0);if(p.route.lazy||w){m=!0,x>=0?u=u.slice(0,x+1):u=[u[0]];break}}}return u.reduceRight((g,p,v)=>{let j,w=!1,N=null,_=null;l&&(j=h&&p.route.id?h[p.route.id]:void 0,N=p.route.errorElement||Bv,m&&(x<0&&v===0?(Gg("route-fallback",!1,"No `HydrateFallback` element provided to render during initial hydration"),w=!0,_=null):x===v&&(w=!0,_=p.route.hydrateFallbackElement||null)));let C=a.concat(u.slice(0,v+1)),O=()=>{let q;return j?q=N:w?q=_:p.route.Component?q=S.createElement(p.route.Component,null):p.route.element?q=p.route.element:q=g,S.createElement(Gv,{match:p,routeContext:{outlet:g,matches:C,isDataRoute:l!=null},children:q})};return l&&(p.route.ErrorBoundary||p.route.errorElement||v===0)?S.createElement(Hv,{location:l.location,revalidation:l.revalidation,component:N,error:j,children:O(),routeContext:{outlet:null,matches:C,isDataRoute:!0},unstable_onError:i}):O()},null)}function vd(n){return`${n} must be used within a data router.  See https://reactrouter.com/en/main/routers/picking-a-router.`}function Qv(n){let a=S.useContext($r);return ze(a,vd(n)),a}function Yv(n){let a=S.useContext(Xi);return ze(a,vd(n)),a}function Fv(n){let a=S.useContext(ls);return ze(a,vd(n)),a}function bd(n){let a=Fv(n),l=a.matches[a.matches.length-1];return ze(l.route.id,`${n} can only be used on routes that contain a unique "id"`),l.route.id}function Iv(){return bd("useRouteId")}function Kv(){let n=S.useContext(yd),a=Yv("useRouteError"),l=bd("useRouteError");return n!==void 0?n:a.errors?.[l]}function Xv(){let{router:n}=Qv("useNavigate"),a=bd("useNavigate"),l=S.useRef(!1);return $g(()=>{l.current=!0}),S.useCallback(async(c,u={})=>{Qt(l.current,zg),l.current&&(typeof c=="number"?n.navigate(c):await n.navigate(c,{fromRouteId:a,...u}))},[n,a])}var H0={};function Gg(n,a,l){!a&&!H0[n]&&(H0[n]=!0,Qt(!1,l))}S.memo(Zv);function Zv({routes:n,future:a,state:l,unstable_onError:i}){return Hg(n,void 0,l,i,a)}function Zn({to:n,replace:a,state:l,relative:i}){ze(Br(),"<Navigate> may be used only in the context of a <Router> component.");let{static:c}=S.useContext(Ft);Qt(!c,"<Navigate> must not be used on the initial render in a <StaticRouter>. This is a no-op, but you should modify your code so the <Navigate> is only ever rendered in response to some user interaction or state change.");let{matches:u}=S.useContext(ls),{pathname:h}=It(),m=Bg(),x=pd(n,xd(u),h,i==="path"),g=JSON.stringify(x);return S.useEffect(()=>{m(JSON.parse(g),{replace:a,state:l,relative:i})},[m,g,i,a,l]),null}function ts(n){ze(!1,"A <Route> is only ever to be used as the child of <Routes> element, never rendered directly. Please wrap your <Route> in a <Routes>.")}function Jv({basename:n="/",children:a=null,location:l,navigationType:i="POP",navigator:c,static:u=!1}){ze(!Br(),"You cannot render a <Router> inside another <Router>. You should never have more than one in your app.");let h=n.replace(/^\/*/,"/"),m=S.useMemo(()=>({basename:h,navigator:c,static:u,future:{}}),[h,c,u]);typeof l=="string"&&(l=zr(l));let{pathname:x="/",search:g="",hash:p="",state:v=null,key:j="default"}=l,w=S.useMemo(()=>{let N=Cs(x,h);return N==null?null:{location:{pathname:N,search:g,hash:p,state:v,key:j},navigationType:i}},[h,x,g,p,v,j,i]);return Qt(w!=null,`<Router basename="${h}"> is not able to match the URL "${x}${g}${p}" because it does not start with the basename, so the <Router> won't render anything.`),w==null?null:S.createElement(Ft.Provider,{value:m},S.createElement(al.Provider,{children:a,value:w}))}function Wv({children:n,location:a}){return zv(Qu(n),a)}function Qu(n,a=[]){let l=[];return S.Children.forEach(n,(i,c)=>{if(!S.isValidElement(i))return;let u=[...a,c];if(i.type===S.Fragment){l.push.apply(l,Qu(i.props.children,u));return}ze(i.type===ts,`[${typeof i.type=="string"?i.type:i.type.name}] is not a <Route> component. All component children of <Routes> must be a <Route> or <React.Fragment>`),ze(!i.props.index||!i.props.children,"An index route cannot have child routes.");let h={id:i.props.id||u.join("-"),caseSensitive:i.props.caseSensitive,element:i.props.element,Component:i.props.Component,index:i.props.index,path:i.props.path,loader:i.props.loader,action:i.props.action,hydrateFallbackElement:i.props.hydrateFallbackElement,HydrateFallback:i.props.HydrateFallback,errorElement:i.props.errorElement,ErrorBoundary:i.props.ErrorBoundary,hasErrorBoundary:i.props.hasErrorBoundary===!0||i.props.ErrorBoundary!=null||i.props.errorElement!=null,shouldRevalidate:i.props.shouldRevalidate,handle:i.props.handle,lazy:i.props.lazy};i.props.children&&(h.children=Qu(i.props.children,u)),l.push(h)}),l}var $i="get",Bi="application/x-www-form-urlencoded";function Zi(n){return n!=null&&typeof n.tagName=="string"}function eb(n){return Zi(n)&&n.tagName.toLowerCase()==="button"}function tb(n){return Zi(n)&&n.tagName.toLowerCase()==="form"}function sb(n){return Zi(n)&&n.tagName.toLowerCase()==="input"}function ab(n){return!!(n.metaKey||n.altKey||n.ctrlKey||n.shiftKey)}function rb(n,a){return n.button===0&&(!a||a==="_self")&&!ab(n)}var Si=null;function nb(){if(Si===null)try{new FormData(document.createElement("form"),0),Si=!1}catch{Si=!0}return Si}var lb=new Set(["application/x-www-form-urlencoded","multipart/form-data","text/plain"]);function Cu(n){return n!=null&&!lb.has(n)?(Qt(!1,`"${n}" is not a valid \`encType\` for \`<Form>\`/\`<fetcher.Form>\` and will default to "${Bi}"`),null):n}function ib(n,a){let l,i,c,u,h;if(tb(n)){let m=n.getAttribute("action");i=m?Cs(m,a):null,l=n.getAttribute("method")||$i,c=Cu(n.getAttribute("enctype"))||Bi,u=new FormData(n)}else if(eb(n)||sb(n)&&(n.type==="submit"||n.type==="image")){let m=n.form;if(m==null)throw new Error('Cannot submit a <button> or <input type="submit"> without a <form>');let x=n.getAttribute("formaction")||m.getAttribute("action");if(i=x?Cs(x,a):null,l=n.getAttribute("formmethod")||m.getAttribute("method")||$i,c=Cu(n.getAttribute("formenctype"))||Cu(m.getAttribute("enctype"))||Bi,u=new FormData(m,n),!nb()){let{name:g,type:p,value:v}=n;if(p==="image"){let j=g?`${g}.`:"";u.append(`${j}x`,"0"),u.append(`${j}y`,"0")}else g&&u.append(g,v)}}else{if(Zi(n))throw new Error('Cannot submit element that is not <form>, <button>, or <input type="submit|image">');l=$i,i=null,c=Bi,h=n}return u&&c==="text/plain"&&(h=u,u=void 0),{action:i,method:l.toLowerCase(),encType:c,formData:u,body:h}}Object.getOwnPropertyNames(Object.prototype).sort().join("\0");function jd(n,a){if(n===!1||n===null||typeof n>"u")throw new Error(a)}function ob(n,a,l){let i=typeof n=="string"?new URL(n,typeof window>"u"?"server://singlefetch/":window.location.origin):n;return i.pathname==="/"?i.pathname=`_root.${l}`:a&&Cs(i.pathname,a)==="/"?i.pathname=`${a.replace(/\/$/,"")}/_root.${l}`:i.pathname=`${i.pathname.replace(/\/$/,"")}.${l}`,i}async function cb(n,a){if(n.id in a)return a[n.id];try{let l=await import(n.module);return a[n.id]=l,l}catch(l){return console.error(`Error loading route module \`${n.module}\`, reloading page...`),console.error(l),window.__reactRouterContext&&window.__reactRouterContext.isSpaMode,window.location.reload(),new Promise(()=>{})}}function ub(n){return n==null?!1:n.href==null?n.rel==="preload"&&typeof n.imageSrcSet=="string"&&typeof n.imageSizes=="string":typeof n.rel=="string"&&typeof n.href=="string"}async function db(n,a,l){let i=await Promise.all(n.map(async c=>{let u=a.routes[c.route.id];if(u){let h=await cb(u,l);return h.links?h.links():[]}return[]}));return gb(i.flat(1).filter(ub).filter(c=>c.rel==="stylesheet"||c.rel==="preload").map(c=>c.rel==="stylesheet"?{...c,rel:"prefetch",as:"style"}:{...c,rel:"prefetch"}))}function G0(n,a,l,i,c,u){let h=(x,g)=>l[g]?x.route.id!==l[g].route.id:!0,m=(x,g)=>l[g].pathname!==x.pathname||l[g].route.path?.endsWith("*")&&l[g].params["*"]!==x.params["*"];return u==="assets"?a.filter((x,g)=>h(x,g)||m(x,g)):u==="data"?a.filter((x,g)=>{let p=i.routes[x.route.id];if(!p||!p.hasLoader)return!1;if(h(x,g)||m(x,g))return!0;if(x.route.shouldRevalidate){let v=x.route.shouldRevalidate({currentUrl:new URL(c.pathname+c.search+c.hash,window.origin),currentParams:l[0]?.params||{},nextUrl:new URL(n,window.origin),nextParams:x.params,defaultShouldRevalidate:!0});if(typeof v=="boolean")return v}return!0}):[]}function hb(n,a,{includeHydrateFallback:l}={}){return fb(n.map(i=>{let c=a.routes[i.route.id];if(!c)return[];let u=[c.module];return c.clientActionModule&&(u=u.concat(c.clientActionModule)),c.clientLoaderModule&&(u=u.concat(c.clientLoaderModule)),l&&c.hydrateFallbackModule&&(u=u.concat(c.hydrateFallbackModule)),c.imports&&(u=u.concat(c.imports)),u}).flat(1))}function fb(n){return[...new Set(n)]}function mb(n){let a={},l=Object.keys(n).sort();for(let i of l)a[i]=n[i];return a}function gb(n,a){let l=new Set;return new Set(a),n.reduce((i,c)=>{let u=JSON.stringify(mb(c));return l.has(u)||(l.add(u),i.push({key:u,link:c})),i},[])}function Vg(){let n=S.useContext($r);return jd(n,"You must render this element inside a <DataRouterContext.Provider> element"),n}function xb(){let n=S.useContext(Xi);return jd(n,"You must render this element inside a <DataRouterStateContext.Provider> element"),n}var wd=S.createContext(void 0);wd.displayName="FrameworkContext";function Qg(){let n=S.useContext(wd);return jd(n,"You must render this element inside a <HydratedRouter> element"),n}function pb(n,a){let l=S.useContext(wd),[i,c]=S.useState(!1),[u,h]=S.useState(!1),{onFocus:m,onBlur:x,onMouseEnter:g,onMouseLeave:p,onTouchStart:v}=a,j=S.useRef(null);S.useEffect(()=>{if(n==="render"&&h(!0),n==="viewport"){let _=O=>{O.forEach(q=>{h(q.isIntersecting)})},C=new IntersectionObserver(_,{threshold:.5});return j.current&&C.observe(j.current),()=>{C.disconnect()}}},[n]),S.useEffect(()=>{if(i){let _=setTimeout(()=>{h(!0)},100);return()=>{clearTimeout(_)}}},[i]);let w=()=>{c(!0)},N=()=>{c(!1),h(!1)};return l?n!=="intent"?[u,j,{}]:[u,j,{onFocus:Vn(m,w),onBlur:Vn(x,N),onMouseEnter:Vn(g,w),onMouseLeave:Vn(p,N),onTouchStart:Vn(v,w)}]:[!1,j,{}]}function Vn(n,a){return l=>{n&&n(l),l.defaultPrevented||a(l)}}function yb({page:n,...a}){let{router:l}=Vg(),i=S.useMemo(()=>Mg(l.routes,n,l.basename),[l.routes,n,l.basename]);return i?S.createElement(bb,{page:n,matches:i,...a}):null}function vb(n){let{manifest:a,routeModules:l}=Qg(),[i,c]=S.useState([]);return S.useEffect(()=>{let u=!1;return db(n,a,l).then(h=>{u||c(h)}),()=>{u=!0}},[n,a,l]),i}function bb({page:n,matches:a,...l}){let i=It(),{manifest:c,routeModules:u}=Qg(),{basename:h}=Vg(),{loaderData:m,matches:x}=xb(),g=S.useMemo(()=>G0(n,a,x,c,i,"data"),[n,a,x,c,i]),p=S.useMemo(()=>G0(n,a,x,c,i,"assets"),[n,a,x,c,i]),v=S.useMemo(()=>{if(n===i.pathname+i.search+i.hash)return[];let N=new Set,_=!1;if(a.forEach(O=>{let q=c.routes[O.route.id];!q||!q.hasLoader||(!g.some(L=>L.route.id===O.route.id)&&O.route.id in m&&u[O.route.id]?.shouldRevalidate||q.hasClientLoader?_=!0:N.add(O.route.id))}),N.size===0)return[];let C=ob(n,h,"data");return _&&N.size>0&&C.searchParams.set("_routes",a.filter(O=>N.has(O.route.id)).map(O=>O.route.id).join(",")),[C.pathname+C.search]},[h,m,i,c,g,a,n,u]),j=S.useMemo(()=>hb(p,c),[p,c]),w=vb(p);return S.createElement(S.Fragment,null,v.map(N=>S.createElement("link",{key:N,rel:"prefetch",as:"fetch",href:N,...l})),j.map(N=>S.createElement("link",{key:N,rel:"modulepreload",href:N,...l})),w.map(({key:N,link:_})=>S.createElement("link",{key:N,nonce:l.nonce,..._})))}function jb(...n){return a=>{n.forEach(l=>{typeof l=="function"?l(a):l!=null&&(l.current=a)})}}var Yg=typeof window<"u"&&typeof window.document<"u"&&typeof window.document.createElement<"u";try{Yg&&(window.__reactRouterVersion="7.8.2")}catch{}function wb({basename:n,children:a,window:l}){let i=S.useRef();i.current==null&&(i.current=uv({window:l,v5Compat:!0}));let c=i.current,[u,h]=S.useState({action:c.action,location:c.location}),m=S.useCallback(x=>{S.startTransition(()=>h(x))},[h]);return S.useLayoutEffect(()=>c.listen(m),[c,m]),S.createElement(Jv,{basename:n,children:a,location:u.location,navigationType:u.action,navigator:c})}var Fg=/^(?:[a-z][a-z0-9+.-]*:|\/\/)/i,Jn=S.forwardRef(function({onClick:a,discover:l="render",prefetch:i="none",relative:c,reloadDocument:u,replace:h,state:m,target:x,to:g,preventScrollReset:p,viewTransition:v,...j},w){let{basename:N}=S.useContext(Ft),_=typeof g=="string"&&Fg.test(g),C,O=!1;if(typeof g=="string"&&_&&(C=g,Yg))try{let K=new URL(window.location.href),ee=g.startsWith("//")?new URL(K.protocol+g):new URL(g),he=Cs(ee.pathname,N);ee.origin===K.origin&&he!=null?g=he+ee.search+ee.hash:O=!0}catch{Qt(!1,`<Link to="${g}"> contains an invalid URL which will probably break when clicked - please update to a valid URL path.`)}let q=Lv(g,{relative:c}),[L,z,Q]=pb(i,j),H=kb(g,{replace:h,state:m,target:x,preventScrollReset:p,relative:c,viewTransition:v});function Y(K){a&&a(K),K.defaultPrevented||H(K)}let se=S.createElement("a",{...j,...Q,href:C||q,onClick:O||u?a:Y,ref:jb(w,z),target:x,"data-discover":!_&&l==="render"?"true":void 0});return L&&!_?S.createElement(S.Fragment,null,se,S.createElement(yb,{page:q})):se});Jn.displayName="Link";var _b=S.forwardRef(function({"aria-current":a="page",caseSensitive:l=!1,className:i="",end:c=!1,style:u,to:h,viewTransition:m,children:x,...g},p){let v=rl(h,{relative:g.relative}),j=It(),w=S.useContext(Xi),{navigator:N,basename:_}=S.useContext(Ft),C=w!=null&&Rb(v)&&m===!0,O=N.encodeLocation?N.encodeLocation(v).pathname:v.pathname,q=j.pathname,L=w&&w.navigation&&w.navigation.location?w.navigation.location.pathname:null;l||(q=q.toLowerCase(),L=L?L.toLowerCase():null,O=O.toLowerCase()),L&&_&&(L=Cs(L,_)||L);const z=O!=="/"&&O.endsWith("/")?O.length-1:O.length;let Q=q===O||!c&&q.startsWith(O)&&q.charAt(z)==="/",H=L!=null&&(L===O||!c&&L.startsWith(O)&&L.charAt(O.length)==="/"),Y={isActive:Q,isPending:H,isTransitioning:C},se=Q?a:void 0,K;typeof i=="function"?K=i(Y):K=[i,Q?"active":null,H?"pending":null,C?"transitioning":null].filter(Boolean).join(" ");let ee=typeof u=="function"?u(Y):u;return S.createElement(Jn,{...g,"aria-current":se,className:K,ref:p,style:ee,to:h,viewTransition:m},typeof x=="function"?x(Y):x)});_b.displayName="NavLink";var Nb=S.forwardRef(({discover:n="render",fetcherKey:a,navigate:l,reloadDocument:i,replace:c,state:u,method:h=$i,action:m,onSubmit:x,relative:g,preventScrollReset:p,viewTransition:v,...j},w)=>{let N=Ab(),_=Tb(m,{relative:g}),C=h.toLowerCase()==="get"?"get":"post",O=typeof m=="string"&&Fg.test(m),q=L=>{if(x&&x(L),L.defaultPrevented)return;L.preventDefault();let z=L.nativeEvent.submitter,Q=z?.getAttribute("formmethod")||h;N(z||L.currentTarget,{fetcherKey:a,method:Q,navigate:l,replace:c,state:u,relative:g,preventScrollReset:p,viewTransition:v})};return S.createElement("form",{ref:w,method:C,action:_,onSubmit:i?x:q,...j,"data-discover":!O&&n==="render"?"true":void 0})});Nb.displayName="Form";function Sb(n){return`${n} must be used within a data router.  See https://reactrouter.com/en/main/routers/picking-a-router.`}function Ig(n){let a=S.useContext($r);return ze(a,Sb(n)),a}function kb(n,{target:a,replace:l,state:i,preventScrollReset:c,relative:u,viewTransition:h}={}){let m=Bg(),x=It(),g=rl(n,{relative:u});return S.useCallback(p=>{if(rb(p,a)){p.preventDefault();let v=l!==void 0?l:Xn(x)===Xn(g);m(n,{replace:v,state:i,preventScrollReset:c,relative:u,viewTransition:h})}},[x,m,g,l,i,a,n,c,u,h])}var Cb=0,Eb=()=>`__${String(++Cb)}__`;function Ab(){let{router:n}=Ig("useSubmit"),{basename:a}=S.useContext(Ft),l=Iv();return S.useCallback(async(i,c={})=>{let{action:u,method:h,encType:m,formData:x,body:g}=ib(i,a);if(c.navigate===!1){let p=c.fetcherKey||Eb();await n.fetch(p,l,c.action||u,{preventScrollReset:c.preventScrollReset,formData:x,body:g,formMethod:c.method||h,formEncType:c.encType||m,flushSync:c.flushSync})}else await n.navigate(c.action||u,{preventScrollReset:c.preventScrollReset,formData:x,body:g,formMethod:c.method||h,formEncType:c.encType||m,replace:c.replace,state:c.state,fromRouteId:l,flushSync:c.flushSync,viewTransition:c.viewTransition})},[n,a,l])}function Tb(n,{relative:a}={}){let{basename:l}=S.useContext(Ft),i=S.useContext(ls);ze(i,"useFormAction must be used inside a RouteContext");let[c]=i.matches.slice(-1),u={...rl(n||".",{relative:a})},h=It();if(n==null){u.search=h.search;let m=new URLSearchParams(u.search),x=m.getAll("index");if(x.some(p=>p==="")){m.delete("index"),x.filter(v=>v).forEach(v=>m.append("index",v));let p=m.toString();u.search=p?`?${p}`:""}}return(!n||n===".")&&c.route.index&&(u.search=u.search?u.search.replace(/^\?/,"?index&"):"?index"),l!=="/"&&(u.pathname=u.pathname==="/"?l:Ns([l,u.pathname])),Xn(u)}function Rb(n,{relative:a}={}){let l=S.useContext(qg);ze(l!=null,"`useViewTransitionState` must be used within `react-router-dom`'s `RouterProvider`.  Did you accidentally import `RouterProvider` from `react-router`?");let{basename:i}=Ig("useViewTransitionState"),c=rl(n,{relative:a});if(!l.isTransitioning)return!1;let u=Cs(l.currentLocation.pathname,i)||l.currentLocation.pathname,h=Cs(l.nextLocation.pathname,i)||l.nextLocation.pathname;return Gi(c.pathname,h)!=null||Gi(c.pathname,u)!=null}var Ji=class{constructor(){this.listeners=new Set,this.subscribe=this.subscribe.bind(this)}subscribe(n){return this.listeners.add(n),this.onSubscribe(),()=>{this.listeners.delete(n),this.onUnsubscribe()}}hasListeners(){return this.listeners.size>0}onSubscribe(){}onUnsubscribe(){}},Ob={setTimeout:(n,a)=>setTimeout(n,a),clearTimeout:n=>clearTimeout(n),setInterval:(n,a)=>setInterval(n,a),clearInterval:n=>clearInterval(n)},Db=class{#e=Ob;#t=!1;setTimeoutProvider(n){this.#e=n}setTimeout(n,a){return this.#e.setTimeout(n,a)}clearTimeout(n){this.#e.clearTimeout(n)}setInterval(n,a){return this.#e.setInterval(n,a)}clearInterval(n){this.#e.clearInterval(n)}},Yu=new Db;function Mb(n){setTimeout(n,0)}var Wi=typeof window>"u"||"Deno"in globalThis;function Ht(){}function Ub(n,a){return typeof n=="function"?n(a):n}function Pb(n){return typeof n=="number"&&n>=0&&n!==1/0}function Lb(n,a){return Math.max(n+(a||0)-Date.now(),0)}function Fu(n,a){return typeof n=="function"?n(a):n}function qb(n,a){return typeof n=="function"?n(a):n}function V0(n,a){const{type:l="all",exact:i,fetchStatus:c,predicate:u,queryKey:h,stale:m}=n;if(h){if(i){if(a.queryHash!==_d(h,a.options))return!1}else if(!el(a.queryKey,h))return!1}if(l!=="all"){const x=a.isActive();if(l==="active"&&!x||l==="inactive"&&x)return!1}return!(typeof m=="boolean"&&a.isStale()!==m||c&&c!==a.state.fetchStatus||u&&!u(a))}function Q0(n,a){const{exact:l,status:i,predicate:c,mutationKey:u}=n;if(u){if(!a.options.mutationKey)return!1;if(l){if(Wn(a.options.mutationKey)!==Wn(u))return!1}else if(!el(a.options.mutationKey,u))return!1}return!(i&&a.state.status!==i||c&&!c(a))}function _d(n,a){return(a?.queryKeyHashFn||Wn)(n)}function Wn(n){return JSON.stringify(n,(a,l)=>Iu(l)?Object.keys(l).sort().reduce((i,c)=>(i[c]=l[c],i),{}):l)}function el(n,a){return n===a?!0:typeof n!=typeof a?!1:n&&a&&typeof n=="object"&&typeof a=="object"?Object.keys(a).every(l=>el(n[l],a[l])):!1}var zb=Object.prototype.hasOwnProperty;function Kg(n,a){if(n===a)return n;const l=Y0(n)&&Y0(a);if(!l&&!(Iu(n)&&Iu(a)))return a;const c=(l?n:Object.keys(n)).length,u=l?a:Object.keys(a),h=u.length,m=l?new Array(h):{};let x=0;for(let g=0;g<h;g++){const p=l?g:u[g],v=n[p],j=a[p];if(v===j){m[p]=v,(l?g<c:zb.call(n,p))&&x++;continue}if(v===null||j===null||typeof v!="object"||typeof j!="object"){m[p]=j;continue}const w=Kg(v,j);m[p]=w,w===v&&x++}return c===h&&x===c?n:m}function Y0(n){return Array.isArray(n)&&n.length===Object.keys(n).length}function Iu(n){if(!F0(n))return!1;const a=n.constructor;if(a===void 0)return!0;const l=a.prototype;return!(!F0(l)||!l.hasOwnProperty("isPrototypeOf")||Object.getPrototypeOf(n)!==Object.prototype)}function F0(n){return Object.prototype.toString.call(n)==="[object Object]"}function $b(n){return new Promise(a=>{Yu.setTimeout(a,n)})}function Bb(n,a,l){return typeof l.structuralSharing=="function"?l.structuralSharing(n,a):l.structuralSharing!==!1?Kg(n,a):a}function Hb(n,a,l=0){const i=[...n,a];return l&&i.length>l?i.slice(1):i}function Gb(n,a,l=0){const i=[a,...n];return l&&i.length>l?i.slice(0,-1):i}var Nd=Symbol();function Xg(n,a){return!n.queryFn&&a?.initialPromise?()=>a.initialPromise:!n.queryFn||n.queryFn===Nd?()=>Promise.reject(new Error(`Missing queryFn: '${n.queryHash}'`)):n.queryFn}var Vb=class extends Ji{#e;#t;#s;constructor(){super(),this.#s=n=>{if(!Wi&&window.addEventListener){const a=()=>n();return window.addEventListener("visibilitychange",a,!1),()=>{window.removeEventListener("visibilitychange",a)}}}}onSubscribe(){this.#t||this.setEventListener(this.#s)}onUnsubscribe(){this.hasListeners()||(this.#t?.(),this.#t=void 0)}setEventListener(n){this.#s=n,this.#t?.(),this.#t=n(a=>{typeof a=="boolean"?this.setFocused(a):this.onFocus()})}setFocused(n){this.#e!==n&&(this.#e=n,this.onFocus())}onFocus(){const n=this.isFocused();this.listeners.forEach(a=>{a(n)})}isFocused(){return typeof this.#e=="boolean"?this.#e:globalThis.document?.visibilityState!=="hidden"}},Zg=new Vb;function Qb(){let n,a;const l=new Promise((c,u)=>{n=c,a=u});l.status="pending",l.catch(()=>{});function i(c){Object.assign(l,c),delete l.resolve,delete l.reject}return l.resolve=c=>{i({status:"fulfilled",value:c}),n(c)},l.reject=c=>{i({status:"rejected",reason:c}),a(c)},l}var Yb=Mb;function Fb(){let n=[],a=0,l=m=>{m()},i=m=>{m()},c=Yb;const u=m=>{a?n.push(m):c(()=>{l(m)})},h=()=>{const m=n;n=[],m.length&&c(()=>{i(()=>{m.forEach(x=>{l(x)})})})};return{batch:m=>{let x;a++;try{x=m()}finally{a--,a||h()}return x},batchCalls:m=>(...x)=>{u(()=>{m(...x)})},schedule:u,setNotifyFunction:m=>{l=m},setBatchNotifyFunction:m=>{i=m},setScheduler:m=>{c=m}}}var dt=Fb(),Ib=class extends Ji{#e=!0;#t;#s;constructor(){super(),this.#s=n=>{if(!Wi&&window.addEventListener){const a=()=>n(!0),l=()=>n(!1);return window.addEventListener("online",a,!1),window.addEventListener("offline",l,!1),()=>{window.removeEventListener("online",a),window.removeEventListener("offline",l)}}}}onSubscribe(){this.#t||this.setEventListener(this.#s)}onUnsubscribe(){this.hasListeners()||(this.#t?.(),this.#t=void 0)}setEventListener(n){this.#s=n,this.#t?.(),this.#t=n(this.setOnline.bind(this))}setOnline(n){this.#e!==n&&(this.#e=n,this.listeners.forEach(l=>{l(n)}))}isOnline(){return this.#e}},Vi=new Ib;function Kb(n){return Math.min(1e3*2**n,3e4)}function Jg(n){return(n??"online")==="online"?Vi.isOnline():!0}var Ku=class extends Error{constructor(n){super("CancelledError"),this.revert=n?.revert,this.silent=n?.silent}};function Wg(n){let a=!1,l=0,i;const c=Qb(),u=()=>c.status!=="pending",h=_=>{if(!u()){const C=new Ku(_);j(C),n.onCancel?.(C)}},m=()=>{a=!0},x=()=>{a=!1},g=()=>Zg.isFocused()&&(n.networkMode==="always"||Vi.isOnline())&&n.canRun(),p=()=>Jg(n.networkMode)&&n.canRun(),v=_=>{u()||(i?.(),c.resolve(_))},j=_=>{u()||(i?.(),c.reject(_))},w=()=>new Promise(_=>{i=C=>{(u()||g())&&_(C)},n.onPause?.()}).then(()=>{i=void 0,u()||n.onContinue?.()}),N=()=>{if(u())return;let _;const C=l===0?n.initialPromise:void 0;try{_=C??n.fn()}catch(O){_=Promise.reject(O)}Promise.resolve(_).then(v).catch(O=>{if(u())return;const q=n.retry??(Wi?0:3),L=n.retryDelay??Kb,z=typeof L=="function"?L(l,O):L,Q=q===!0||typeof q=="number"&&l<q||typeof q=="function"&&q(l,O);if(a||!Q){j(O);return}l++,n.onFail?.(l,O),$b(z).then(()=>g()?void 0:w()).then(()=>{a?j(O):N()})})};return{promise:c,status:()=>c.status,cancel:h,continue:()=>(i?.(),c),cancelRetry:m,continueRetry:x,canStart:p,start:()=>(p()?N():w().then(N),c)}}var ex=class{#e;destroy(){this.clearGcTimeout()}scheduleGc(){this.clearGcTimeout(),Pb(this.gcTime)&&(this.#e=Yu.setTimeout(()=>{this.optionalRemove()},this.gcTime))}updateGcTime(n){this.gcTime=Math.max(this.gcTime||0,n??(Wi?1/0:300*1e3))}clearGcTimeout(){this.#e&&(Yu.clearTimeout(this.#e),this.#e=void 0)}},Xb=class extends ex{#e;#t;#s;#r;#a;#l;#i;constructor(n){super(),this.#i=!1,this.#l=n.defaultOptions,this.setOptions(n.options),this.observers=[],this.#r=n.client,this.#s=this.#r.getQueryCache(),this.queryKey=n.queryKey,this.queryHash=n.queryHash,this.#e=I0(this.options),this.state=n.state??this.#e,this.scheduleGc()}get meta(){return this.options.meta}get promise(){return this.#a?.promise}setOptions(n){if(this.options={...this.#l,...n},this.updateGcTime(this.options.gcTime),this.state&&this.state.data===void 0){const a=I0(this.options);a.data!==void 0&&(this.setData(a.data,{updatedAt:a.dataUpdatedAt,manual:!0}),this.#e=a)}}optionalRemove(){!this.observers.length&&this.state.fetchStatus==="idle"&&this.#s.remove(this)}setData(n,a){const l=Bb(this.state.data,n,this.options);return this.#n({data:l,type:"success",dataUpdatedAt:a?.updatedAt,manual:a?.manual}),l}setState(n,a){this.#n({type:"setState",state:n,setStateOptions:a})}cancel(n){const a=this.#a?.promise;return this.#a?.cancel(n),a?a.then(Ht).catch(Ht):Promise.resolve()}destroy(){super.destroy(),this.cancel({silent:!0})}reset(){this.destroy(),this.setState(this.#e)}isActive(){return this.observers.some(n=>qb(n.options.enabled,this)!==!1)}isDisabled(){return this.getObserversCount()>0?!this.isActive():this.options.queryFn===Nd||this.state.dataUpdateCount+this.state.errorUpdateCount===0}isStatic(){return this.getObserversCount()>0?this.observers.some(n=>Fu(n.options.staleTime,this)==="static"):!1}isStale(){return this.getObserversCount()>0?this.observers.some(n=>n.getCurrentResult().isStale):this.state.data===void 0||this.state.isInvalidated}isStaleByTime(n=0){return this.state.data===void 0?!0:n==="static"?!1:this.state.isInvalidated?!0:!Lb(this.state.dataUpdatedAt,n)}onFocus(){this.observers.find(a=>a.shouldFetchOnWindowFocus())?.refetch({cancelRefetch:!1}),this.#a?.continue()}onOnline(){this.observers.find(a=>a.shouldFetchOnReconnect())?.refetch({cancelRefetch:!1}),this.#a?.continue()}addObserver(n){this.observers.includes(n)||(this.observers.push(n),this.clearGcTimeout(),this.#s.notify({type:"observerAdded",query:this,observer:n}))}removeObserver(n){this.observers.includes(n)&&(this.observers=this.observers.filter(a=>a!==n),this.observers.length||(this.#a&&(this.#i?this.#a.cancel({revert:!0}):this.#a.cancelRetry()),this.scheduleGc()),this.#s.notify({type:"observerRemoved",query:this,observer:n}))}getObserversCount(){return this.observers.length}invalidate(){this.state.isInvalidated||this.#n({type:"invalidate"})}async fetch(n,a){if(this.state.fetchStatus!=="idle"&&this.#a?.status()!=="rejected"){if(this.state.data!==void 0&&a?.cancelRefetch)this.cancel({silent:!0});else if(this.#a)return this.#a.continueRetry(),this.#a.promise}if(n&&this.setOptions(n),!this.options.queryFn){const m=this.observers.find(x=>x.options.queryFn);m&&this.setOptions(m.options)}const l=new AbortController,i=m=>{Object.defineProperty(m,"signal",{enumerable:!0,get:()=>(this.#i=!0,l.signal)})},c=()=>{const m=Xg(this.options,a),g=(()=>{const p={client:this.#r,queryKey:this.queryKey,meta:this.meta};return i(p),p})();return this.#i=!1,this.options.persister?this.options.persister(m,g,this):m(g)},h=(()=>{const m={fetchOptions:a,options:this.options,queryKey:this.queryKey,client:this.#r,state:this.state,fetchFn:c};return i(m),m})();this.options.behavior?.onFetch(h,this),this.#t=this.state,(this.state.fetchStatus==="idle"||this.state.fetchMeta!==h.fetchOptions?.meta)&&this.#n({type:"fetch",meta:h.fetchOptions?.meta}),this.#a=Wg({initialPromise:a?.initialPromise,fn:h.fetchFn,onCancel:m=>{m instanceof Ku&&m.revert&&this.setState({...this.#t,fetchStatus:"idle"}),l.abort()},onFail:(m,x)=>{this.#n({type:"failed",failureCount:m,error:x})},onPause:()=>{this.#n({type:"pause"})},onContinue:()=>{this.#n({type:"continue"})},retry:h.options.retry,retryDelay:h.options.retryDelay,networkMode:h.options.networkMode,canRun:()=>!0});try{const m=await this.#a.start();if(m===void 0)throw new Error(`${this.queryHash} data is undefined`);return this.setData(m),this.#s.config.onSuccess?.(m,this),this.#s.config.onSettled?.(m,this.state.error,this),m}catch(m){if(m instanceof Ku){if(m.silent)return this.#a.promise;if(m.revert){if(this.state.data===void 0)throw m;return this.state.data}}throw this.#n({type:"error",error:m}),this.#s.config.onError?.(m,this),this.#s.config.onSettled?.(this.state.data,m,this),m}finally{this.scheduleGc()}}#n(n){const a=l=>{switch(n.type){case"failed":return{...l,fetchFailureCount:n.failureCount,fetchFailureReason:n.error};case"pause":return{...l,fetchStatus:"paused"};case"continue":return{...l,fetchStatus:"fetching"};case"fetch":return{...l,...Zb(l.data,this.options),fetchMeta:n.meta??null};case"success":const i={...l,data:n.data,dataUpdateCount:l.dataUpdateCount+1,dataUpdatedAt:n.dataUpdatedAt??Date.now(),error:null,isInvalidated:!1,status:"success",...!n.manual&&{fetchStatus:"idle",fetchFailureCount:0,fetchFailureReason:null}};return this.#t=n.manual?i:void 0,i;case"error":const c=n.error;return{...l,error:c,errorUpdateCount:l.errorUpdateCount+1,errorUpdatedAt:Date.now(),fetchFailureCount:l.fetchFailureCount+1,fetchFailureReason:c,fetchStatus:"idle",status:"error"};case"invalidate":return{...l,isInvalidated:!0};case"setState":return{...l,...n.state}}};this.state=a(this.state),dt.batch(()=>{this.observers.forEach(l=>{l.onQueryUpdate()}),this.#s.notify({query:this,type:"updated",action:n})})}};function Zb(n,a){return{fetchFailureCount:0,fetchFailureReason:null,fetchStatus:Jg(a.networkMode)?"fetching":"paused",...n===void 0&&{error:null,status:"pending"}}}function I0(n){const a=typeof n.initialData=="function"?n.initialData():n.initialData,l=a!==void 0,i=l?typeof n.initialDataUpdatedAt=="function"?n.initialDataUpdatedAt():n.initialDataUpdatedAt:0;return{data:a,dataUpdateCount:0,dataUpdatedAt:l?i??Date.now():0,error:null,errorUpdateCount:0,errorUpdatedAt:0,fetchFailureCount:0,fetchFailureReason:null,fetchMeta:null,isInvalidated:!1,status:l?"success":"pending",fetchStatus:"idle"}}function K0(n){return{onFetch:(a,l)=>{const i=a.options,c=a.fetchOptions?.meta?.fetchMore?.direction,u=a.state.data?.pages||[],h=a.state.data?.pageParams||[];let m={pages:[],pageParams:[]},x=0;const g=async()=>{let p=!1;const v=N=>{Object.defineProperty(N,"signal",{enumerable:!0,get:()=>(a.signal.aborted?p=!0:a.signal.addEventListener("abort",()=>{p=!0}),a.signal)})},j=Xg(a.options,a.fetchOptions),w=async(N,_,C)=>{if(p)return Promise.reject();if(_==null&&N.pages.length)return Promise.resolve(N);const q=(()=>{const H={client:a.client,queryKey:a.queryKey,pageParam:_,direction:C?"backward":"forward",meta:a.options.meta};return v(H),H})(),L=await j(q),{maxPages:z}=a.options,Q=C?Gb:Hb;return{pages:Q(N.pages,L,z),pageParams:Q(N.pageParams,_,z)}};if(c&&u.length){const N=c==="backward",_=N?Jb:X0,C={pages:u,pageParams:h},O=_(i,C);m=await w(C,O,N)}else{const N=n??u.length;do{const _=x===0?h[0]??i.initialPageParam:X0(i,m);if(x>0&&_==null)break;m=await w(m,_),x++}while(x<N)}return m};a.options.persister?a.fetchFn=()=>a.options.persister?.(g,{client:a.client,queryKey:a.queryKey,meta:a.options.meta,signal:a.signal},l):a.fetchFn=g}}}function X0(n,{pages:a,pageParams:l}){const i=a.length-1;return a.length>0?n.getNextPageParam(a[i],a,l[i],l):void 0}function Jb(n,{pages:a,pageParams:l}){return a.length>0?n.getPreviousPageParam?.(a[0],a,l[0],l):void 0}var Wb=class extends ex{#e;#t;#s;constructor(n){super(),this.mutationId=n.mutationId,this.#t=n.mutationCache,this.#e=[],this.state=n.state||ej(),this.setOptions(n.options),this.scheduleGc()}setOptions(n){this.options=n,this.updateGcTime(this.options.gcTime)}get meta(){return this.options.meta}addObserver(n){this.#e.includes(n)||(this.#e.push(n),this.clearGcTimeout(),this.#t.notify({type:"observerAdded",mutation:this,observer:n}))}removeObserver(n){this.#e=this.#e.filter(a=>a!==n),this.scheduleGc(),this.#t.notify({type:"observerRemoved",mutation:this,observer:n})}optionalRemove(){this.#e.length||(this.state.status==="pending"?this.scheduleGc():this.#t.remove(this))}continue(){return this.#s?.continue()??this.execute(this.state.variables)}async execute(n){const a=()=>{this.#r({type:"continue"})};this.#s=Wg({fn:()=>this.options.mutationFn?this.options.mutationFn(n):Promise.reject(new Error("No mutationFn found")),onFail:(c,u)=>{this.#r({type:"failed",failureCount:c,error:u})},onPause:()=>{this.#r({type:"pause"})},onContinue:a,retry:this.options.retry??0,retryDelay:this.options.retryDelay,networkMode:this.options.networkMode,canRun:()=>this.#t.canRun(this)});const l=this.state.status==="pending",i=!this.#s.canStart();try{if(l)a();else{this.#r({type:"pending",variables:n,isPaused:i}),await this.#t.config.onMutate?.(n,this);const u=await this.options.onMutate?.(n);u!==this.state.context&&this.#r({type:"pending",context:u,variables:n,isPaused:i})}const c=await this.#s.start();return await this.#t.config.onSuccess?.(c,n,this.state.context,this),await this.options.onSuccess?.(c,n,this.state.context),await this.#t.config.onSettled?.(c,null,this.state.variables,this.state.context,this),await this.options.onSettled?.(c,null,n,this.state.context),this.#r({type:"success",data:c}),c}catch(c){try{throw await this.#t.config.onError?.(c,n,this.state.context,this),await this.options.onError?.(c,n,this.state.context),await this.#t.config.onSettled?.(void 0,c,this.state.variables,this.state.context,this),await this.options.onSettled?.(void 0,c,n,this.state.context),c}finally{this.#r({type:"error",error:c})}}finally{this.#t.runNext(this)}}#r(n){const a=l=>{switch(n.type){case"failed":return{...l,failureCount:n.failureCount,failureReason:n.error};case"pause":return{...l,isPaused:!0};case"continue":return{...l,isPaused:!1};case"pending":return{...l,context:n.context,data:void 0,failureCount:0,failureReason:null,error:null,isPaused:n.isPaused,status:"pending",variables:n.variables,submittedAt:Date.now()};case"success":return{...l,data:n.data,failureCount:0,failureReason:null,error:null,status:"success",isPaused:!1};case"error":return{...l,data:void 0,error:n.error,failureCount:l.failureCount+1,failureReason:n.error,isPaused:!1,status:"error"}}};this.state=a(this.state),dt.batch(()=>{this.#e.forEach(l=>{l.onMutationUpdate(n)}),this.#t.notify({mutation:this,type:"updated",action:n})})}};function ej(){return{context:void 0,data:void 0,error:null,failureCount:0,failureReason:null,isPaused:!1,status:"idle",variables:void 0,submittedAt:0}}var tj=class extends Ji{constructor(n={}){super(),this.config=n,this.#e=new Set,this.#t=new Map,this.#s=0}#e;#t;#s;build(n,a,l){const i=new Wb({mutationCache:this,mutationId:++this.#s,options:n.defaultMutationOptions(a),state:l});return this.add(i),i}add(n){this.#e.add(n);const a=ki(n);if(typeof a=="string"){const l=this.#t.get(a);l?l.push(n):this.#t.set(a,[n])}this.notify({type:"added",mutation:n})}remove(n){if(this.#e.delete(n)){const a=ki(n);if(typeof a=="string"){const l=this.#t.get(a);if(l)if(l.length>1){const i=l.indexOf(n);i!==-1&&l.splice(i,1)}else l[0]===n&&this.#t.delete(a)}}this.notify({type:"removed",mutation:n})}canRun(n){const a=ki(n);if(typeof a=="string"){const i=this.#t.get(a)?.find(c=>c.state.status==="pending");return!i||i===n}else return!0}runNext(n){const a=ki(n);return typeof a=="string"?this.#t.get(a)?.find(i=>i!==n&&i.state.isPaused)?.continue()??Promise.resolve():Promise.resolve()}clear(){dt.batch(()=>{this.#e.forEach(n=>{this.notify({type:"removed",mutation:n})}),this.#e.clear(),this.#t.clear()})}getAll(){return Array.from(this.#e)}find(n){const a={exact:!0,...n};return this.getAll().find(l=>Q0(a,l))}findAll(n={}){return this.getAll().filter(a=>Q0(n,a))}notify(n){dt.batch(()=>{this.listeners.forEach(a=>{a(n)})})}resumePausedMutations(){const n=this.getAll().filter(a=>a.state.isPaused);return dt.batch(()=>Promise.all(n.map(a=>a.continue().catch(Ht))))}};function ki(n){return n.options.scope?.id}var sj=class extends Ji{constructor(n={}){super(),this.config=n,this.#e=new Map}#e;build(n,a,l){const i=a.queryKey,c=a.queryHash??_d(i,a);let u=this.get(c);return u||(u=new Xb({client:n,queryKey:i,queryHash:c,options:n.defaultQueryOptions(a),state:l,defaultOptions:n.getQueryDefaults(i)}),this.add(u)),u}add(n){this.#e.has(n.queryHash)||(this.#e.set(n.queryHash,n),this.notify({type:"added",query:n}))}remove(n){const a=this.#e.get(n.queryHash);a&&(n.destroy(),a===n&&this.#e.delete(n.queryHash),this.notify({type:"removed",query:n}))}clear(){dt.batch(()=>{this.getAll().forEach(n=>{this.remove(n)})})}get(n){return this.#e.get(n)}getAll(){return[...this.#e.values()]}find(n){const a={exact:!0,...n};return this.getAll().find(l=>V0(a,l))}findAll(n={}){const a=this.getAll();return Object.keys(n).length>0?a.filter(l=>V0(n,l)):a}notify(n){dt.batch(()=>{this.listeners.forEach(a=>{a(n)})})}onFocus(){dt.batch(()=>{this.getAll().forEach(n=>{n.onFocus()})})}onOnline(){dt.batch(()=>{this.getAll().forEach(n=>{n.onOnline()})})}},aj=class{#e;#t;#s;#r;#a;#l;#i;#n;constructor(n={}){this.#e=n.queryCache||new sj,this.#t=n.mutationCache||new tj,this.#s=n.defaultOptions||{},this.#r=new Map,this.#a=new Map,this.#l=0}mount(){this.#l++,this.#l===1&&(this.#i=Zg.subscribe(async n=>{n&&(await this.resumePausedMutations(),this.#e.onFocus())}),this.#n=Vi.subscribe(async n=>{n&&(await this.resumePausedMutations(),this.#e.onOnline())}))}unmount(){this.#l--,this.#l===0&&(this.#i?.(),this.#i=void 0,this.#n?.(),this.#n=void 0)}isFetching(n){return this.#e.findAll({...n,fetchStatus:"fetching"}).length}isMutating(n){return this.#t.findAll({...n,status:"pending"}).length}getQueryData(n){const a=this.defaultQueryOptions({queryKey:n});return this.#e.get(a.queryHash)?.state.data}ensureQueryData(n){const a=this.defaultQueryOptions(n),l=this.#e.build(this,a),i=l.state.data;return i===void 0?this.fetchQuery(n):(n.revalidateIfStale&&l.isStaleByTime(Fu(a.staleTime,l))&&this.prefetchQuery(a),Promise.resolve(i))}getQueriesData(n){return this.#e.findAll(n).map(({queryKey:a,state:l})=>{const i=l.data;return[a,i]})}setQueryData(n,a,l){const i=this.defaultQueryOptions({queryKey:n}),u=this.#e.get(i.queryHash)?.state.data,h=Ub(a,u);if(h!==void 0)return this.#e.build(this,i).setData(h,{...l,manual:!0})}setQueriesData(n,a,l){return dt.batch(()=>this.#e.findAll(n).map(({queryKey:i})=>[i,this.setQueryData(i,a,l)]))}getQueryState(n){const a=this.defaultQueryOptions({queryKey:n});return this.#e.get(a.queryHash)?.state}removeQueries(n){const a=this.#e;dt.batch(()=>{a.findAll(n).forEach(l=>{a.remove(l)})})}resetQueries(n,a){const l=this.#e;return dt.batch(()=>(l.findAll(n).forEach(i=>{i.reset()}),this.refetchQueries({type:"active",...n},a)))}cancelQueries(n,a={}){const l={revert:!0,...a},i=dt.batch(()=>this.#e.findAll(n).map(c=>c.cancel(l)));return Promise.all(i).then(Ht).catch(Ht)}invalidateQueries(n,a={}){return dt.batch(()=>(this.#e.findAll(n).forEach(l=>{l.invalidate()}),n?.refetchType==="none"?Promise.resolve():this.refetchQueries({...n,type:n?.refetchType??n?.type??"active"},a)))}refetchQueries(n,a={}){const l={...a,cancelRefetch:a.cancelRefetch??!0},i=dt.batch(()=>this.#e.findAll(n).filter(c=>!c.isDisabled()&&!c.isStatic()).map(c=>{let u=c.fetch(void 0,l);return l.throwOnError||(u=u.catch(Ht)),c.state.fetchStatus==="paused"?Promise.resolve():u}));return Promise.all(i).then(Ht)}fetchQuery(n){const a=this.defaultQueryOptions(n);a.retry===void 0&&(a.retry=!1);const l=this.#e.build(this,a);return l.isStaleByTime(Fu(a.staleTime,l))?l.fetch(a):Promise.resolve(l.state.data)}prefetchQuery(n){return this.fetchQuery(n).then(Ht).catch(Ht)}fetchInfiniteQuery(n){return n.behavior=K0(n.pages),this.fetchQuery(n)}prefetchInfiniteQuery(n){return this.fetchInfiniteQuery(n).then(Ht).catch(Ht)}ensureInfiniteQueryData(n){return n.behavior=K0(n.pages),this.ensureQueryData(n)}resumePausedMutations(){return Vi.isOnline()?this.#t.resumePausedMutations():Promise.resolve()}getQueryCache(){return this.#e}getMutationCache(){return this.#t}getDefaultOptions(){return this.#s}setDefaultOptions(n){this.#s=n}setQueryDefaults(n,a){this.#r.set(Wn(n),{queryKey:n,defaultOptions:a})}getQueryDefaults(n){const a=[...this.#r.values()],l={};return a.forEach(i=>{el(n,i.queryKey)&&Object.assign(l,i.defaultOptions)}),l}setMutationDefaults(n,a){this.#a.set(Wn(n),{mutationKey:n,defaultOptions:a})}getMutationDefaults(n){const a=[...this.#a.values()],l={};return a.forEach(i=>{el(n,i.mutationKey)&&Object.assign(l,i.defaultOptions)}),l}defaultQueryOptions(n){if(n._defaulted)return n;const a={...this.#s.queries,...this.getQueryDefaults(n.queryKey),...n,_defaulted:!0};return a.queryHash||(a.queryHash=_d(a.queryKey,a)),a.refetchOnReconnect===void 0&&(a.refetchOnReconnect=a.networkMode!=="always"),a.throwOnError===void 0&&(a.throwOnError=!!a.suspense),!a.networkMode&&a.persister&&(a.networkMode="offlineFirst"),a.queryFn===Nd&&(a.enabled=!1),a}defaultMutationOptions(n){return n?._defaulted?n:{...this.#s.mutations,...n?.mutationKey&&this.getMutationDefaults(n.mutationKey),...n,_defaulted:!0}}clear(){this.#e.clear(),this.#t.clear()}},rj=S.createContext(void 0),nj=({client:n,children:a})=>(S.useEffect(()=>(n.mount(),()=>{n.unmount()}),[n]),s.jsx(rj.Provider,{value:n,children:a}));const lj="modulepreload",ij=function(n){return"/"+n},Z0={},nl=function(a,l,i){let c=Promise.resolve();if(l&&l.length>0){let g=function(p){return Promise.all(p.map(v=>Promise.resolve(v).then(j=>({status:"fulfilled",value:j}),j=>({status:"rejected",reason:j}))))};var h=g;document.getElementsByTagName("link");const m=document.querySelector("meta[property=csp-nonce]"),x=m?.nonce||m?.getAttribute("nonce");c=g(l.map(p=>{if(p=ij(p),p in Z0)return;Z0[p]=!0;const v=p.endsWith(".css"),j=v?'[rel="stylesheet"]':"";if(document.querySelector(`link[href="${p}"]${j}`))return;const w=document.createElement("link");if(w.rel=v?"stylesheet":lj,v||(w.as="script"),w.crossOrigin="",w.href=p,x&&w.setAttribute("nonce",x),document.head.appendChild(w),v)return new Promise((N,_)=>{w.addEventListener("load",N),w.addEventListener("error",()=>_(new Error(`Unable to preload CSS for ${p}`)))})}))}function u(m){const x=new Event("vite:preloadError",{cancelable:!0});if(x.payload=m,window.dispatchEvent(x),!x.defaultPrevented)throw m}return c.then(m=>{for(const x of m||[])x.status==="rejected"&&u(x.reason);return a().catch(u)})};var oj=function(){return null},Eu={exports:{}},Au,J0;function cj(){if(J0)return Au;J0=1;var n="SECRET_DO_NOT_PASS_THIS_OR_YOU_WILL_BE_FIRED";return Au=n,Au}var Tu,W0;function uj(){if(W0)return Tu;W0=1;var n=cj();function a(){}function l(){}return l.resetWarningCache=a,Tu=function(){function i(h,m,x,g,p,v){if(v!==n){var j=new Error("Calling PropTypes validators directly is not supported by the `prop-types` package. Use PropTypes.checkPropTypes() to call them. Read more at http://fb.me/use-check-prop-types");throw j.name="Invariant Violation",j}}i.isRequired=i;function c(){return i}var u={array:i,bigint:i,bool:i,func:i,number:i,object:i,string:i,symbol:i,any:i,arrayOf:c,element:i,elementType:i,instanceOf:c,node:i,objectOf:c,oneOf:c,oneOfType:c,shape:c,exact:c,checkPropTypes:l,resetWarningCache:a};return u.PropTypes=u,u},Tu}var eg;function dj(){return eg||(eg=1,Eu.exports=uj()()),Eu.exports}var hj=dj();const Xu=md(hj),tx=S.createContext({}),fj=n=>{let a;return n?a=n:typeof fetch>"u"?a=(...l)=>nl(async()=>{const{default:i}=await Promise.resolve().then(()=>Hr);return{default:i}},[]).then(({default:i})=>i(...l)):a=fetch,(...l)=>a(...l)};class Sd extends Error{constructor(a,l="FunctionsError",i){super(a),this.name=l,this.context=i}}class mj extends Sd{constructor(a){super("Failed to send a request to the Edge Function","FunctionsFetchError",a)}}class tg extends Sd{constructor(a){super("Relay Error invoking the Edge Function","FunctionsRelayError",a)}}class sg extends Sd{constructor(a){super("Edge Function returned a non-2xx status code","FunctionsHttpError",a)}}var Zu;(function(n){n.Any="any",n.ApNortheast1="ap-northeast-1",n.ApNortheast2="ap-northeast-2",n.ApSouth1="ap-south-1",n.ApSoutheast1="ap-southeast-1",n.ApSoutheast2="ap-southeast-2",n.CaCentral1="ca-central-1",n.EuCentral1="eu-central-1",n.EuWest1="eu-west-1",n.EuWest2="eu-west-2",n.EuWest3="eu-west-3",n.SaEast1="sa-east-1",n.UsEast1="us-east-1",n.UsWest1="us-west-1",n.UsWest2="us-west-2"})(Zu||(Zu={}));var gj=function(n,a,l,i){function c(u){return u instanceof l?u:new l(function(h){h(u)})}return new(l||(l=Promise))(function(u,h){function m(p){try{g(i.next(p))}catch(v){h(v)}}function x(p){try{g(i.throw(p))}catch(v){h(v)}}function g(p){p.done?u(p.value):c(p.value).then(m,x)}g((i=i.apply(n,a||[])).next())})};class xj{constructor(a,{headers:l={},customFetch:i,region:c=Zu.Any}={}){this.url=a,this.headers=l,this.region=c,this.fetch=fj(i)}setAuth(a){this.headers.Authorization=`Bearer ${a}`}invoke(a,l={}){var i;return gj(this,void 0,void 0,function*(){try{const{headers:c,method:u,body:h}=l;let m={},{region:x}=l;x||(x=this.region);const g=new URL(`${this.url}/${a}`);x&&x!=="any"&&(m["x-region"]=x,g.searchParams.set("forceFunctionRegion",x));let p;h&&(c&&!Object.prototype.hasOwnProperty.call(c,"Content-Type")||!c)&&(typeof Blob<"u"&&h instanceof Blob||h instanceof ArrayBuffer?(m["Content-Type"]="application/octet-stream",p=h):typeof h=="string"?(m["Content-Type"]="text/plain",p=h):typeof FormData<"u"&&h instanceof FormData?p=h:(m["Content-Type"]="application/json",p=JSON.stringify(h)));const v=yield this.fetch(g.toString(),{method:u||"POST",headers:Object.assign(Object.assign(Object.assign({},m),this.headers),c),body:p}).catch(_=>{throw new mj(_)}),j=v.headers.get("x-relay-error");if(j&&j==="true")throw new tg(v);if(!v.ok)throw new sg(v);let w=((i=v.headers.get("Content-Type"))!==null&&i!==void 0?i:"text/plain").split(";")[0].trim(),N;return w==="application/json"?N=yield v.json():w==="application/octet-stream"?N=yield v.blob():w==="text/event-stream"?N=v:w==="multipart/form-data"?N=yield v.formData():N=yield v.text(),{data:N,error:null,response:v}}catch(c){return{data:null,error:c,response:c instanceof sg||c instanceof tg?c.context:void 0}}})}}var tt={},jr={},wr={},_r={},Nr={},Sr={},pj=function(){if(typeof self<"u")return self;if(typeof window<"u")return window;if(typeof global<"u")return global;throw new Error("unable to locate global object")},Pr=pj();const yj=Pr.fetch,sx=Pr.fetch.bind(Pr),ax=Pr.Headers,vj=Pr.Request,bj=Pr.Response,Hr=Object.freeze(Object.defineProperty({__proto__:null,Headers:ax,Request:vj,Response:bj,default:sx,fetch:yj},Symbol.toStringTag,{value:"Module"})),jj=Wy(Hr);var Ci={},ag;function rx(){if(ag)return Ci;ag=1,Object.defineProperty(Ci,"__esModule",{value:!0});class n extends Error{constructor(l){super(l.message),this.name="PostgrestError",this.details=l.details,this.hint=l.hint,this.code=l.code}}return Ci.default=n,Ci}var rg;function nx(){if(rg)return Sr;rg=1;var n=Sr&&Sr.__importDefault||function(c){return c&&c.__esModule?c:{default:c}};Object.defineProperty(Sr,"__esModule",{value:!0});const a=n(jj),l=n(rx());class i{constructor(u){var h,m;this.shouldThrowOnError=!1,this.method=u.method,this.url=u.url,this.headers=new Headers(u.headers),this.schema=u.schema,this.body=u.body,this.shouldThrowOnError=(h=u.shouldThrowOnError)!==null&&h!==void 0?h:!1,this.signal=u.signal,this.isMaybeSingle=(m=u.isMaybeSingle)!==null&&m!==void 0?m:!1,u.fetch?this.fetch=u.fetch:typeof fetch>"u"?this.fetch=a.default:this.fetch=fetch}throwOnError(){return this.shouldThrowOnError=!0,this}setHeader(u,h){return this.headers=new Headers(this.headers),this.headers.set(u,h),this}then(u,h){this.schema===void 0||(["GET","HEAD"].includes(this.method)?this.headers.set("Accept-Profile",this.schema):this.headers.set("Content-Profile",this.schema)),this.method!=="GET"&&this.method!=="HEAD"&&this.headers.set("Content-Type","application/json");const m=this.fetch;let x=m(this.url.toString(),{method:this.method,headers:this.headers,body:JSON.stringify(this.body),signal:this.signal}).then(async g=>{var p,v,j,w;let N=null,_=null,C=null,O=g.status,q=g.statusText;if(g.ok){if(this.method!=="HEAD"){const H=await g.text();H===""||(this.headers.get("Accept")==="text/csv"||this.headers.get("Accept")&&(!((p=this.headers.get("Accept"))===null||p===void 0)&&p.includes("application/vnd.pgrst.plan+text"))?_=H:_=JSON.parse(H))}const z=(v=this.headers.get("Prefer"))===null||v===void 0?void 0:v.match(/count=(exact|planned|estimated)/),Q=(j=g.headers.get("content-range"))===null||j===void 0?void 0:j.split("/");z&&Q&&Q.length>1&&(C=parseInt(Q[1])),this.isMaybeSingle&&this.method==="GET"&&Array.isArray(_)&&(_.length>1?(N={code:"PGRST116",details:`Results contain ${_.length} rows, application/vnd.pgrst.object+json requires 1 row`,hint:null,message:"JSON object requested, multiple (or no) rows returned"},_=null,C=null,O=406,q="Not Acceptable"):_.length===1?_=_[0]:_=null)}else{const z=await g.text();try{N=JSON.parse(z),Array.isArray(N)&&g.status===404&&(_=[],N=null,O=200,q="OK")}catch{g.status===404&&z===""?(O=204,q="No Content"):N={message:z}}if(N&&this.isMaybeSingle&&(!((w=N?.details)===null||w===void 0)&&w.includes("0 rows"))&&(N=null,O=200,q="OK"),N&&this.shouldThrowOnError)throw new l.default(N)}return{error:N,data:_,count:C,status:O,statusText:q}});return this.shouldThrowOnError||(x=x.catch(g=>{var p,v,j;return{error:{message:`${(p=g?.name)!==null&&p!==void 0?p:"FetchError"}: ${g?.message}`,details:`${(v=g?.stack)!==null&&v!==void 0?v:""}`,hint:"",code:`${(j=g?.code)!==null&&j!==void 0?j:""}`},data:null,count:null,status:0,statusText:""}})),x.then(u,h)}returns(){return this}overrideTypes(){return this}}return Sr.default=i,Sr}var ng;function lx(){if(ng)return Nr;ng=1;var n=Nr&&Nr.__importDefault||function(i){return i&&i.__esModule?i:{default:i}};Object.defineProperty(Nr,"__esModule",{value:!0});const a=n(nx());class l extends a.default{select(c){let u=!1;const h=(c??"*").split("").map(m=>/\s/.test(m)&&!u?"":(m==='"'&&(u=!u),m)).join("");return this.url.searchParams.set("select",h),this.headers.append("Prefer","return=representation"),this}order(c,{ascending:u=!0,nullsFirst:h,foreignTable:m,referencedTable:x=m}={}){const g=x?`${x}.order`:"order",p=this.url.searchParams.get(g);return this.url.searchParams.set(g,`${p?`${p},`:""}${c}.${u?"asc":"desc"}${h===void 0?"":h?".nullsfirst":".nullslast"}`),this}limit(c,{foreignTable:u,referencedTable:h=u}={}){const m=typeof h>"u"?"limit":`${h}.limit`;return this.url.searchParams.set(m,`${c}`),this}range(c,u,{foreignTable:h,referencedTable:m=h}={}){const x=typeof m>"u"?"offset":`${m}.offset`,g=typeof m>"u"?"limit":`${m}.limit`;return this.url.searchParams.set(x,`${c}`),this.url.searchParams.set(g,`${u-c+1}`),this}abortSignal(c){return this.signal=c,this}single(){return this.headers.set("Accept","application/vnd.pgrst.object+json"),this}maybeSingle(){return this.method==="GET"?this.headers.set("Accept","application/json"):this.headers.set("Accept","application/vnd.pgrst.object+json"),this.isMaybeSingle=!0,this}csv(){return this.headers.set("Accept","text/csv"),this}geojson(){return this.headers.set("Accept","application/geo+json"),this}explain({analyze:c=!1,verbose:u=!1,settings:h=!1,buffers:m=!1,wal:x=!1,format:g="text"}={}){var p;const v=[c?"analyze":null,u?"verbose":null,h?"settings":null,m?"buffers":null,x?"wal":null].filter(Boolean).join("|"),j=(p=this.headers.get("Accept"))!==null&&p!==void 0?p:"application/json";return this.headers.set("Accept",`application/vnd.pgrst.plan+${g}; for="${j}"; options=${v};`),g==="json"?this:this}rollback(){return this.headers.append("Prefer","tx=rollback"),this}returns(){return this}maxAffected(c){return this.headers.append("Prefer","handling=strict"),this.headers.append("Prefer",`max-affected=${c}`),this}}return Nr.default=l,Nr}var lg;function kd(){if(lg)return _r;lg=1;var n=_r&&_r.__importDefault||function(i){return i&&i.__esModule?i:{default:i}};Object.defineProperty(_r,"__esModule",{value:!0});const a=n(lx());class l extends a.default{eq(c,u){return this.url.searchParams.append(c,`eq.${u}`),this}neq(c,u){return this.url.searchParams.append(c,`neq.${u}`),this}gt(c,u){return this.url.searchParams.append(c,`gt.${u}`),this}gte(c,u){return this.url.searchParams.append(c,`gte.${u}`),this}lt(c,u){return this.url.searchParams.append(c,`lt.${u}`),this}lte(c,u){return this.url.searchParams.append(c,`lte.${u}`),this}like(c,u){return this.url.searchParams.append(c,`like.${u}`),this}likeAllOf(c,u){return this.url.searchParams.append(c,`like(all).{${u.join(",")}}`),this}likeAnyOf(c,u){return this.url.searchParams.append(c,`like(any).{${u.join(",")}}`),this}ilike(c,u){return this.url.searchParams.append(c,`ilike.${u}`),this}ilikeAllOf(c,u){return this.url.searchParams.append(c,`ilike(all).{${u.join(",")}}`),this}ilikeAnyOf(c,u){return this.url.searchParams.append(c,`ilike(any).{${u.join(",")}}`),this}is(c,u){return this.url.searchParams.append(c,`is.${u}`),this}in(c,u){const h=Array.from(new Set(u)).map(m=>typeof m=="string"&&new RegExp("[,()]").test(m)?`"${m}"`:`${m}`).join(",");return this.url.searchParams.append(c,`in.(${h})`),this}contains(c,u){return typeof u=="string"?this.url.searchParams.append(c,`cs.${u}`):Array.isArray(u)?this.url.searchParams.append(c,`cs.{${u.join(",")}}`):this.url.searchParams.append(c,`cs.${JSON.stringify(u)}`),this}containedBy(c,u){return typeof u=="string"?this.url.searchParams.append(c,`cd.${u}`):Array.isArray(u)?this.url.searchParams.append(c,`cd.{${u.join(",")}}`):this.url.searchParams.append(c,`cd.${JSON.stringify(u)}`),this}rangeGt(c,u){return this.url.searchParams.append(c,`sr.${u}`),this}rangeGte(c,u){return this.url.searchParams.append(c,`nxl.${u}`),this}rangeLt(c,u){return this.url.searchParams.append(c,`sl.${u}`),this}rangeLte(c,u){return this.url.searchParams.append(c,`nxr.${u}`),this}rangeAdjacent(c,u){return this.url.searchParams.append(c,`adj.${u}`),this}overlaps(c,u){return typeof u=="string"?this.url.searchParams.append(c,`ov.${u}`):this.url.searchParams.append(c,`ov.{${u.join(",")}}`),this}textSearch(c,u,{config:h,type:m}={}){let x="";m==="plain"?x="pl":m==="phrase"?x="ph":m==="websearch"&&(x="w");const g=h===void 0?"":`(${h})`;return this.url.searchParams.append(c,`${x}fts${g}.${u}`),this}match(c){return Object.entries(c).forEach(([u,h])=>{this.url.searchParams.append(u,`eq.${h}`)}),this}not(c,u,h){return this.url.searchParams.append(c,`not.${u}.${h}`),this}or(c,{foreignTable:u,referencedTable:h=u}={}){const m=h?`${h}.or`:"or";return this.url.searchParams.append(m,`(${c})`),this}filter(c,u,h){return this.url.searchParams.append(c,`${u}.${h}`),this}}return _r.default=l,_r}var ig;function ix(){if(ig)return wr;ig=1;var n=wr&&wr.__importDefault||function(i){return i&&i.__esModule?i:{default:i}};Object.defineProperty(wr,"__esModule",{value:!0});const a=n(kd());class l{constructor(c,{headers:u={},schema:h,fetch:m}){this.url=c,this.headers=new Headers(u),this.schema=h,this.fetch=m}select(c,{head:u=!1,count:h}={}){const m=u?"HEAD":"GET";let x=!1;const g=(c??"*").split("").map(p=>/\s/.test(p)&&!x?"":(p==='"'&&(x=!x),p)).join("");return this.url.searchParams.set("select",g),h&&this.headers.append("Prefer",`count=${h}`),new a.default({method:m,url:this.url,headers:this.headers,schema:this.schema,fetch:this.fetch})}insert(c,{count:u,defaultToNull:h=!0}={}){var m;const x="POST";if(u&&this.headers.append("Prefer",`count=${u}`),h||this.headers.append("Prefer","missing=default"),Array.isArray(c)){const g=c.reduce((p,v)=>p.concat(Object.keys(v)),[]);if(g.length>0){const p=[...new Set(g)].map(v=>`"${v}"`);this.url.searchParams.set("columns",p.join(","))}}return new a.default({method:x,url:this.url,headers:this.headers,schema:this.schema,body:c,fetch:(m=this.fetch)!==null&&m!==void 0?m:fetch})}upsert(c,{onConflict:u,ignoreDuplicates:h=!1,count:m,defaultToNull:x=!0}={}){var g;const p="POST";if(this.headers.append("Prefer",`resolution=${h?"ignore":"merge"}-duplicates`),u!==void 0&&this.url.searchParams.set("on_conflict",u),m&&this.headers.append("Prefer",`count=${m}`),x||this.headers.append("Prefer","missing=default"),Array.isArray(c)){const v=c.reduce((j,w)=>j.concat(Object.keys(w)),[]);if(v.length>0){const j=[...new Set(v)].map(w=>`"${w}"`);this.url.searchParams.set("columns",j.join(","))}}return new a.default({method:p,url:this.url,headers:this.headers,schema:this.schema,body:c,fetch:(g=this.fetch)!==null&&g!==void 0?g:fetch})}update(c,{count:u}={}){var h;const m="PATCH";return u&&this.headers.append("Prefer",`count=${u}`),new a.default({method:m,url:this.url,headers:this.headers,schema:this.schema,body:c,fetch:(h=this.fetch)!==null&&h!==void 0?h:fetch})}delete({count:c}={}){var u;const h="DELETE";return c&&this.headers.append("Prefer",`count=${c}`),new a.default({method:h,url:this.url,headers:this.headers,schema:this.schema,fetch:(u=this.fetch)!==null&&u!==void 0?u:fetch})}}return wr.default=l,wr}var og;function wj(){if(og)return jr;og=1;var n=jr&&jr.__importDefault||function(c){return c&&c.__esModule?c:{default:c}};Object.defineProperty(jr,"__esModule",{value:!0});const a=n(ix()),l=n(kd());class i{constructor(u,{headers:h={},schema:m,fetch:x}={}){this.url=u,this.headers=new Headers(h),this.schemaName=m,this.fetch=x}from(u){const h=new URL(`${this.url}/${u}`);return new a.default(h,{headers:new Headers(this.headers),schema:this.schemaName,fetch:this.fetch})}schema(u){return new i(this.url,{headers:this.headers,schema:u,fetch:this.fetch})}rpc(u,h={},{head:m=!1,get:x=!1,count:g}={}){var p;let v;const j=new URL(`${this.url}/rpc/${u}`);let w;m||x?(v=m?"HEAD":"GET",Object.entries(h).filter(([_,C])=>C!==void 0).map(([_,C])=>[_,Array.isArray(C)?`{${C.join(",")}}`:`${C}`]).forEach(([_,C])=>{j.searchParams.append(_,C)})):(v="POST",w=h);const N=new Headers(this.headers);return g&&N.set("Prefer",`count=${g}`),new l.default({method:v,url:j,headers:N,schema:this.schemaName,body:w,fetch:(p=this.fetch)!==null&&p!==void 0?p:fetch})}}return jr.default=i,jr}var cg;function _j(){if(cg)return tt;cg=1;var n=tt&&tt.__importDefault||function(m){return m&&m.__esModule?m:{default:m}};Object.defineProperty(tt,"__esModule",{value:!0}),tt.PostgrestError=tt.PostgrestBuilder=tt.PostgrestTransformBuilder=tt.PostgrestFilterBuilder=tt.PostgrestQueryBuilder=tt.PostgrestClient=void 0;const a=n(wj());tt.PostgrestClient=a.default;const l=n(ix());tt.PostgrestQueryBuilder=l.default;const i=n(kd());tt.PostgrestFilterBuilder=i.default;const c=n(lx());tt.PostgrestTransformBuilder=c.default;const u=n(nx());tt.PostgrestBuilder=u.default;const h=n(rx());return tt.PostgrestError=h.default,tt.default={PostgrestClient:a.default,PostgrestQueryBuilder:l.default,PostgrestFilterBuilder:i.default,PostgrestTransformBuilder:c.default,PostgrestBuilder:u.default,PostgrestError:h.default},tt}var Nj=_j();const Sj=md(Nj),{PostgrestClient:kj,PostgrestQueryBuilder:TN,PostgrestFilterBuilder:RN,PostgrestTransformBuilder:ON,PostgrestBuilder:DN,PostgrestError:MN}=Sj;class Cj{static detectEnvironment(){var a;if(typeof WebSocket<"u")return{type:"native",constructor:WebSocket};if(typeof globalThis<"u"&&typeof globalThis.WebSocket<"u")return{type:"native",constructor:globalThis.WebSocket};if(typeof global<"u"&&typeof global.WebSocket<"u")return{type:"native",constructor:global.WebSocket};if(typeof globalThis<"u"&&typeof globalThis.WebSocketPair<"u"&&typeof globalThis.WebSocket>"u")return{type:"cloudflare",error:"Cloudflare Workers detected. WebSocket clients are not supported in Cloudflare Workers.",workaround:"Use Cloudflare Workers WebSocket API for server-side WebSocket handling, or deploy to a different runtime."};if(typeof globalThis<"u"&&globalThis.EdgeRuntime||typeof navigator<"u"&&(!((a=navigator.userAgent)===null||a===void 0)&&a.includes("Vercel-Edge")))return{type:"unsupported",error:"Edge runtime detected (Vercel Edge/Netlify Edge). WebSockets are not supported in edge functions.",workaround:"Use serverless functions or a different deployment target for WebSocket functionality."};if(typeof process<"u"){const l=process.versions;if(l&&l.node){const i=l.node,c=parseInt(i.replace(/^v/,"").split(".")[0]);return c>=22?typeof globalThis.WebSocket<"u"?{type:"native",constructor:globalThis.WebSocket}:{type:"unsupported",error:`Node.js ${c} detected but native WebSocket not found.`,workaround:"Provide a WebSocket implementation via the transport option."}:{type:"unsupported",error:`Node.js ${c} detected without native WebSocket support.`,workaround:`For Node.js < 22, install "ws" package and provide it via the transport option:
import ws from "ws"
new RealtimeClient(url, { transport: ws })`}}}return{type:"unsupported",error:"Unknown JavaScript runtime without WebSocket support.",workaround:"Ensure you're running in a supported environment (browser, Node.js, Deno) or provide a custom WebSocket implementation."}}static getWebSocketConstructor(){const a=this.detectEnvironment();if(a.constructor)return a.constructor;let l=a.error||"WebSocket not supported in this environment.";throw a.workaround&&(l+=`

Suggested solution: ${a.workaround}`),new Error(l)}static createWebSocket(a,l){const i=this.getWebSocketConstructor();return new i(a,l)}static isWebSocketSupported(){try{const a=this.detectEnvironment();return a.type==="native"||a.type==="ws"}catch{return!1}}}const Ej="2.15.5",Aj=`realtime-js/${Ej}`,Tj="1.0.0",Ju=1e4,Rj=1e3,Oj=100;var Yn;(function(n){n[n.connecting=0]="connecting",n[n.open=1]="open",n[n.closing=2]="closing",n[n.closed=3]="closed"})(Yn||(Yn={}));var Ke;(function(n){n.closed="closed",n.errored="errored",n.joined="joined",n.joining="joining",n.leaving="leaving"})(Ke||(Ke={}));var Gt;(function(n){n.close="phx_close",n.error="phx_error",n.join="phx_join",n.reply="phx_reply",n.leave="phx_leave",n.access_token="access_token"})(Gt||(Gt={}));var Wu;(function(n){n.websocket="websocket"})(Wu||(Wu={}));var Ra;(function(n){n.Connecting="connecting",n.Open="open",n.Closing="closing",n.Closed="closed"})(Ra||(Ra={}));class Dj{constructor(){this.HEADER_LENGTH=1}decode(a,l){return a.constructor===ArrayBuffer?l(this._binaryDecode(a)):l(typeof a=="string"?JSON.parse(a):{})}_binaryDecode(a){const l=new DataView(a),i=new TextDecoder;return this._decodeBroadcast(a,l,i)}_decodeBroadcast(a,l,i){const c=l.getUint8(1),u=l.getUint8(2);let h=this.HEADER_LENGTH+2;const m=i.decode(a.slice(h,h+c));h=h+c;const x=i.decode(a.slice(h,h+u));h=h+u;const g=JSON.parse(i.decode(a.slice(h,a.byteLength)));return{ref:null,topic:m,event:x,payload:g}}}class ox{constructor(a,l){this.callback=a,this.timerCalc=l,this.timer=void 0,this.tries=0,this.callback=a,this.timerCalc=l}reset(){this.tries=0,clearTimeout(this.timer),this.timer=void 0}scheduleTimeout(){clearTimeout(this.timer),this.timer=setTimeout(()=>{this.tries=this.tries+1,this.callback()},this.timerCalc(this.tries+1))}}var Pe;(function(n){n.abstime="abstime",n.bool="bool",n.date="date",n.daterange="daterange",n.float4="float4",n.float8="float8",n.int2="int2",n.int4="int4",n.int4range="int4range",n.int8="int8",n.int8range="int8range",n.json="json",n.jsonb="jsonb",n.money="money",n.numeric="numeric",n.oid="oid",n.reltime="reltime",n.text="text",n.time="time",n.timestamp="timestamp",n.timestamptz="timestamptz",n.timetz="timetz",n.tsrange="tsrange",n.tstzrange="tstzrange"})(Pe||(Pe={}));const ug=(n,a,l={})=>{var i;const c=(i=l.skipTypes)!==null&&i!==void 0?i:[];return Object.keys(a).reduce((u,h)=>(u[h]=Mj(h,n,a,c),u),{})},Mj=(n,a,l,i)=>{const c=a.find(m=>m.name===n),u=c?.type,h=l[n];return u&&!i.includes(u)?cx(u,h):ed(h)},cx=(n,a)=>{if(n.charAt(0)==="_"){const l=n.slice(1,n.length);return qj(a,l)}switch(n){case Pe.bool:return Uj(a);case Pe.float4:case Pe.float8:case Pe.int2:case Pe.int4:case Pe.int8:case Pe.numeric:case Pe.oid:return Pj(a);case Pe.json:case Pe.jsonb:return Lj(a);case Pe.timestamp:return zj(a);case Pe.abstime:case Pe.date:case Pe.daterange:case Pe.int4range:case Pe.int8range:case Pe.money:case Pe.reltime:case Pe.text:case Pe.time:case Pe.timestamptz:case Pe.timetz:case Pe.tsrange:case Pe.tstzrange:return ed(a);default:return ed(a)}},ed=n=>n,Uj=n=>{switch(n){case"t":return!0;case"f":return!1;default:return n}},Pj=n=>{if(typeof n=="string"){const a=parseFloat(n);if(!Number.isNaN(a))return a}return n},Lj=n=>{if(typeof n=="string")try{return JSON.parse(n)}catch(a){return console.log(`JSON parse error: ${a}`),n}return n},qj=(n,a)=>{if(typeof n!="string")return n;const l=n.length-1,i=n[l];if(n[0]==="{"&&i==="}"){let u;const h=n.slice(1,l);try{u=JSON.parse("["+h+"]")}catch{u=h?h.split(","):[]}return u.map(m=>cx(a,m))}return n},zj=n=>typeof n=="string"?n.replace(" ","T"):n,ux=n=>{let a=n;return a=a.replace(/^ws/i,"http"),a=a.replace(/(\/socket\/websocket|\/socket|\/websocket)\/?$/i,""),a.replace(/\/+$/,"")+"/api/broadcast"};class Ru{constructor(a,l,i={},c=Ju){this.channel=a,this.event=l,this.payload=i,this.timeout=c,this.sent=!1,this.timeoutTimer=void 0,this.ref="",this.receivedResp=null,this.recHooks=[],this.refEvent=null}resend(a){this.timeout=a,this._cancelRefEvent(),this.ref="",this.refEvent=null,this.receivedResp=null,this.sent=!1,this.send()}send(){this._hasReceived("timeout")||(this.startTimeout(),this.sent=!0,this.channel.socket.push({topic:this.channel.topic,event:this.event,payload:this.payload,ref:this.ref,join_ref:this.channel._joinRef()}))}updatePayload(a){this.payload=Object.assign(Object.assign({},this.payload),a)}receive(a,l){var i;return this._hasReceived(a)&&l((i=this.receivedResp)===null||i===void 0?void 0:i.response),this.recHooks.push({status:a,callback:l}),this}startTimeout(){if(this.timeoutTimer)return;this.ref=this.channel.socket._makeRef(),this.refEvent=this.channel._replyEventName(this.ref);const a=l=>{this._cancelRefEvent(),this._cancelTimeout(),this.receivedResp=l,this._matchReceive(l)};this.channel._on(this.refEvent,{},a),this.timeoutTimer=setTimeout(()=>{this.trigger("timeout",{})},this.timeout)}trigger(a,l){this.refEvent&&this.channel._trigger(this.refEvent,{status:a,response:l})}destroy(){this._cancelRefEvent(),this._cancelTimeout()}_cancelRefEvent(){this.refEvent&&this.channel._off(this.refEvent,{})}_cancelTimeout(){clearTimeout(this.timeoutTimer),this.timeoutTimer=void 0}_matchReceive({status:a,response:l}){this.recHooks.filter(i=>i.status===a).forEach(i=>i.callback(l))}_hasReceived(a){return this.receivedResp&&this.receivedResp.status===a}}var dg;(function(n){n.SYNC="sync",n.JOIN="join",n.LEAVE="leave"})(dg||(dg={}));class Fn{constructor(a,l){this.channel=a,this.state={},this.pendingDiffs=[],this.joinRef=null,this.enabled=!1,this.caller={onJoin:()=>{},onLeave:()=>{},onSync:()=>{}};const i=l?.events||{state:"presence_state",diff:"presence_diff"};this.channel._on(i.state,{},c=>{const{onJoin:u,onLeave:h,onSync:m}=this.caller;this.joinRef=this.channel._joinRef(),this.state=Fn.syncState(this.state,c,u,h),this.pendingDiffs.forEach(x=>{this.state=Fn.syncDiff(this.state,x,u,h)}),this.pendingDiffs=[],m()}),this.channel._on(i.diff,{},c=>{const{onJoin:u,onLeave:h,onSync:m}=this.caller;this.inPendingSyncState()?this.pendingDiffs.push(c):(this.state=Fn.syncDiff(this.state,c,u,h),m())}),this.onJoin((c,u,h)=>{this.channel._trigger("presence",{event:"join",key:c,currentPresences:u,newPresences:h})}),this.onLeave((c,u,h)=>{this.channel._trigger("presence",{event:"leave",key:c,currentPresences:u,leftPresences:h})}),this.onSync(()=>{this.channel._trigger("presence",{event:"sync"})})}static syncState(a,l,i,c){const u=this.cloneDeep(a),h=this.transformState(l),m={},x={};return this.map(u,(g,p)=>{h[g]||(x[g]=p)}),this.map(h,(g,p)=>{const v=u[g];if(v){const j=p.map(C=>C.presence_ref),w=v.map(C=>C.presence_ref),N=p.filter(C=>w.indexOf(C.presence_ref)<0),_=v.filter(C=>j.indexOf(C.presence_ref)<0);N.length>0&&(m[g]=N),_.length>0&&(x[g]=_)}else m[g]=p}),this.syncDiff(u,{joins:m,leaves:x},i,c)}static syncDiff(a,l,i,c){const{joins:u,leaves:h}={joins:this.transformState(l.joins),leaves:this.transformState(l.leaves)};return i||(i=()=>{}),c||(c=()=>{}),this.map(u,(m,x)=>{var g;const p=(g=a[m])!==null&&g!==void 0?g:[];if(a[m]=this.cloneDeep(x),p.length>0){const v=a[m].map(w=>w.presence_ref),j=p.filter(w=>v.indexOf(w.presence_ref)<0);a[m].unshift(...j)}i(m,p,x)}),this.map(h,(m,x)=>{let g=a[m];if(!g)return;const p=x.map(v=>v.presence_ref);g=g.filter(v=>p.indexOf(v.presence_ref)<0),a[m]=g,c(m,g,x),g.length===0&&delete a[m]}),a}static map(a,l){return Object.getOwnPropertyNames(a).map(i=>l(i,a[i]))}static transformState(a){return a=this.cloneDeep(a),Object.getOwnPropertyNames(a).reduce((l,i)=>{const c=a[i];return"metas"in c?l[i]=c.metas.map(u=>(u.presence_ref=u.phx_ref,delete u.phx_ref,delete u.phx_ref_prev,u)):l[i]=c,l},{})}static cloneDeep(a){return JSON.parse(JSON.stringify(a))}onJoin(a){this.caller.onJoin=a}onLeave(a){this.caller.onLeave=a}onSync(a){this.caller.onSync=a}inPendingSyncState(){return!this.joinRef||this.joinRef!==this.channel._joinRef()}}var hg;(function(n){n.ALL="*",n.INSERT="INSERT",n.UPDATE="UPDATE",n.DELETE="DELETE"})(hg||(hg={}));var In;(function(n){n.BROADCAST="broadcast",n.PRESENCE="presence",n.POSTGRES_CHANGES="postgres_changes",n.SYSTEM="system"})(In||(In={}));var _s;(function(n){n.SUBSCRIBED="SUBSCRIBED",n.TIMED_OUT="TIMED_OUT",n.CLOSED="CLOSED",n.CHANNEL_ERROR="CHANNEL_ERROR"})(_s||(_s={}));class Cd{constructor(a,l={config:{}},i){this.topic=a,this.params=l,this.socket=i,this.bindings={},this.state=Ke.closed,this.joinedOnce=!1,this.pushBuffer=[],this.subTopic=a.replace(/^realtime:/i,""),this.params.config=Object.assign({broadcast:{ack:!1,self:!1},presence:{key:"",enabled:!1},private:!1},l.config),this.timeout=this.socket.timeout,this.joinPush=new Ru(this,Gt.join,this.params,this.timeout),this.rejoinTimer=new ox(()=>this._rejoinUntilConnected(),this.socket.reconnectAfterMs),this.joinPush.receive("ok",()=>{this.state=Ke.joined,this.rejoinTimer.reset(),this.pushBuffer.forEach(c=>c.send()),this.pushBuffer=[]}),this._onClose(()=>{this.rejoinTimer.reset(),this.socket.log("channel",`close ${this.topic} ${this._joinRef()}`),this.state=Ke.closed,this.socket._remove(this)}),this._onError(c=>{this._isLeaving()||this._isClosed()||(this.socket.log("channel",`error ${this.topic}`,c),this.state=Ke.errored,this.rejoinTimer.scheduleTimeout())}),this.joinPush.receive("timeout",()=>{this._isJoining()&&(this.socket.log("channel",`timeout ${this.topic}`,this.joinPush.timeout),this.state=Ke.errored,this.rejoinTimer.scheduleTimeout())}),this.joinPush.receive("error",c=>{this._isLeaving()||this._isClosed()||(this.socket.log("channel",`error ${this.topic}`,c),this.state=Ke.errored,this.rejoinTimer.scheduleTimeout())}),this._on(Gt.reply,{},(c,u)=>{this._trigger(this._replyEventName(u),c)}),this.presence=new Fn(this),this.broadcastEndpointURL=ux(this.socket.endPoint),this.private=this.params.config.private||!1}subscribe(a,l=this.timeout){var i,c,u;if(this.socket.isConnected()||this.socket.connect(),this.state==Ke.closed){const{config:{broadcast:h,presence:m,private:x}}=this.params,g=(c=(i=this.bindings.postgres_changes)===null||i===void 0?void 0:i.map(w=>w.filter))!==null&&c!==void 0?c:[],p=!!this.bindings[In.PRESENCE]&&this.bindings[In.PRESENCE].length>0||((u=this.params.config.presence)===null||u===void 0?void 0:u.enabled)===!0,v={},j={broadcast:h,presence:Object.assign(Object.assign({},m),{enabled:p}),postgres_changes:g,private:x};this.socket.accessTokenValue&&(v.access_token=this.socket.accessTokenValue),this._onError(w=>a?.(_s.CHANNEL_ERROR,w)),this._onClose(()=>a?.(_s.CLOSED)),this.updateJoinPayload(Object.assign({config:j},v)),this.joinedOnce=!0,this._rejoin(l),this.joinPush.receive("ok",async({postgres_changes:w})=>{var N;if(this.socket.setAuth(),w===void 0){a?.(_s.SUBSCRIBED);return}else{const _=this.bindings.postgres_changes,C=(N=_?.length)!==null&&N!==void 0?N:0,O=[];for(let q=0;q<C;q++){const L=_[q],{filter:{event:z,schema:Q,table:H,filter:Y}}=L,se=w&&w[q];if(se&&se.event===z&&se.schema===Q&&se.table===H&&se.filter===Y)O.push(Object.assign(Object.assign({},L),{id:se.id}));else{this.unsubscribe(),this.state=Ke.errored,a?.(_s.CHANNEL_ERROR,new Error("mismatch between server and client bindings for postgres changes"));return}}this.bindings.postgres_changes=O,a&&a(_s.SUBSCRIBED);return}}).receive("error",w=>{this.state=Ke.errored,a?.(_s.CHANNEL_ERROR,new Error(JSON.stringify(Object.values(w).join(", ")||"error")))}).receive("timeout",()=>{a?.(_s.TIMED_OUT)})}return this}presenceState(){return this.presence.state}async track(a,l={}){return await this.send({type:"presence",event:"track",payload:a},l.timeout||this.timeout)}async untrack(a={}){return await this.send({type:"presence",event:"untrack"},a)}on(a,l,i){return this.state===Ke.joined&&a===In.PRESENCE&&(this.socket.log("channel",`resubscribe to ${this.topic} due to change in presence callbacks on joined channel`),this.unsubscribe().then(()=>this.subscribe())),this._on(a,l,i)}async send(a,l={}){var i,c;if(!this._canPush()&&a.type==="broadcast"){const{event:u,payload:h}=a,x={method:"POST",headers:{Authorization:this.socket.accessTokenValue?`Bearer ${this.socket.accessTokenValue}`:"",apikey:this.socket.apiKey?this.socket.apiKey:"","Content-Type":"application/json"},body:JSON.stringify({messages:[{topic:this.subTopic,event:u,payload:h,private:this.private}]})};try{const g=await this._fetchWithTimeout(this.broadcastEndpointURL,x,(i=l.timeout)!==null&&i!==void 0?i:this.timeout);return await((c=g.body)===null||c===void 0?void 0:c.cancel()),g.ok?"ok":"error"}catch(g){return g.name==="AbortError"?"timed out":"error"}}else return new Promise(u=>{var h,m,x;const g=this._push(a.type,a,l.timeout||this.timeout);a.type==="broadcast"&&!(!((x=(m=(h=this.params)===null||h===void 0?void 0:h.config)===null||m===void 0?void 0:m.broadcast)===null||x===void 0)&&x.ack)&&u("ok"),g.receive("ok",()=>u("ok")),g.receive("error",()=>u("error")),g.receive("timeout",()=>u("timed out"))})}updateJoinPayload(a){this.joinPush.updatePayload(a)}unsubscribe(a=this.timeout){this.state=Ke.leaving;const l=()=>{this.socket.log("channel",`leave ${this.topic}`),this._trigger(Gt.close,"leave",this._joinRef())};this.joinPush.destroy();let i=null;return new Promise(c=>{i=new Ru(this,Gt.leave,{},a),i.receive("ok",()=>{l(),c("ok")}).receive("timeout",()=>{l(),c("timed out")}).receive("error",()=>{c("error")}),i.send(),this._canPush()||i.trigger("ok",{})}).finally(()=>{i?.destroy()})}teardown(){this.pushBuffer.forEach(a=>a.destroy()),this.pushBuffer=[],this.rejoinTimer.reset(),this.joinPush.destroy(),this.state=Ke.closed,this.bindings={}}async _fetchWithTimeout(a,l,i){const c=new AbortController,u=setTimeout(()=>c.abort(),i),h=await this.socket.fetch(a,Object.assign(Object.assign({},l),{signal:c.signal}));return clearTimeout(u),h}_push(a,l,i=this.timeout){if(!this.joinedOnce)throw`tried to push '${a}' to '${this.topic}' before joining. Use channel.subscribe() before pushing events`;let c=new Ru(this,a,l,i);return this._canPush()?c.send():this._addToPushBuffer(c),c}_addToPushBuffer(a){if(a.startTimeout(),this.pushBuffer.push(a),this.pushBuffer.length>Oj){const l=this.pushBuffer.shift();l&&(l.destroy(),this.socket.log("channel",`discarded push due to buffer overflow: ${l.event}`,l.payload))}}_onMessage(a,l,i){return l}_isMember(a){return this.topic===a}_joinRef(){return this.joinPush.ref}_trigger(a,l,i){var c,u;const h=a.toLocaleLowerCase(),{close:m,error:x,leave:g,join:p}=Gt;if(i&&[m,x,g,p].indexOf(h)>=0&&i!==this._joinRef())return;let j=this._onMessage(h,l,i);if(l&&!j)throw"channel onMessage callbacks must return the payload, modified or unmodified";["insert","update","delete"].includes(h)?(c=this.bindings.postgres_changes)===null||c===void 0||c.filter(w=>{var N,_,C;return((N=w.filter)===null||N===void 0?void 0:N.event)==="*"||((C=(_=w.filter)===null||_===void 0?void 0:_.event)===null||C===void 0?void 0:C.toLocaleLowerCase())===h}).map(w=>w.callback(j,i)):(u=this.bindings[h])===null||u===void 0||u.filter(w=>{var N,_,C,O,q,L;if(["broadcast","presence","postgres_changes"].includes(h))if("id"in w){const z=w.id,Q=(N=w.filter)===null||N===void 0?void 0:N.event;return z&&((_=l.ids)===null||_===void 0?void 0:_.includes(z))&&(Q==="*"||Q?.toLocaleLowerCase()===((C=l.data)===null||C===void 0?void 0:C.type.toLocaleLowerCase()))}else{const z=(q=(O=w?.filter)===null||O===void 0?void 0:O.event)===null||q===void 0?void 0:q.toLocaleLowerCase();return z==="*"||z===((L=l?.event)===null||L===void 0?void 0:L.toLocaleLowerCase())}else return w.type.toLocaleLowerCase()===h}).map(w=>{if(typeof j=="object"&&"ids"in j){const N=j.data,{schema:_,table:C,commit_timestamp:O,type:q,errors:L}=N;j=Object.assign(Object.assign({},{schema:_,table:C,commit_timestamp:O,eventType:q,new:{},old:{},errors:L}),this._getPayloadRecords(N))}w.callback(j,i)})}_isClosed(){return this.state===Ke.closed}_isJoined(){return this.state===Ke.joined}_isJoining(){return this.state===Ke.joining}_isLeaving(){return this.state===Ke.leaving}_replyEventName(a){return`chan_reply_${a}`}_on(a,l,i){const c=a.toLocaleLowerCase(),u={type:c,filter:l,callback:i};return this.bindings[c]?this.bindings[c].push(u):this.bindings[c]=[u],this}_off(a,l){const i=a.toLocaleLowerCase();return this.bindings[i]&&(this.bindings[i]=this.bindings[i].filter(c=>{var u;return!(((u=c.type)===null||u===void 0?void 0:u.toLocaleLowerCase())===i&&Cd.isEqual(c.filter,l))})),this}static isEqual(a,l){if(Object.keys(a).length!==Object.keys(l).length)return!1;for(const i in a)if(a[i]!==l[i])return!1;return!0}_rejoinUntilConnected(){this.rejoinTimer.scheduleTimeout(),this.socket.isConnected()&&this._rejoin()}_onClose(a){this._on(Gt.close,{},a)}_onError(a){this._on(Gt.error,{},l=>a(l))}_canPush(){return this.socket.isConnected()&&this._isJoined()}_rejoin(a=this.timeout){this._isLeaving()||(this.socket._leaveOpenTopic(this.topic),this.state=Ke.joining,this.joinPush.resend(a))}_getPayloadRecords(a){const l={new:{},old:{}};return(a.type==="INSERT"||a.type==="UPDATE")&&(l.new=ug(a.columns,a.record)),(a.type==="UPDATE"||a.type==="DELETE")&&(l.old=ug(a.columns,a.old_record)),l}}const Ou=()=>{},Ei={HEARTBEAT_INTERVAL:25e3,RECONNECT_DELAY:10,HEARTBEAT_TIMEOUT_FALLBACK:100},$j=[1e3,2e3,5e3,1e4],Bj=1e4,Hj=`
  addEventListener("message", (e) => {
    if (e.data.event === "start") {
      setInterval(() => postMessage({ event: "keepAlive" }), e.data.interval);
    }
  });`;class Gj{constructor(a,l){var i;if(this.accessTokenValue=null,this.apiKey=null,this.channels=new Array,this.endPoint="",this.httpEndpoint="",this.headers={},this.params={},this.timeout=Ju,this.transport=null,this.heartbeatIntervalMs=Ei.HEARTBEAT_INTERVAL,this.heartbeatTimer=void 0,this.pendingHeartbeatRef=null,this.heartbeatCallback=Ou,this.ref=0,this.reconnectTimer=null,this.logger=Ou,this.conn=null,this.sendBuffer=[],this.serializer=new Dj,this.stateChangeCallbacks={open:[],close:[],error:[],message:[]},this.accessToken=null,this._connectionState="disconnected",this._wasManualDisconnect=!1,this._authPromise=null,this._resolveFetch=c=>{let u;return c?u=c:typeof fetch>"u"?u=(...h)=>nl(async()=>{const{default:m}=await Promise.resolve().then(()=>Hr);return{default:m}},void 0).then(({default:m})=>m(...h)).catch(m=>{throw new Error(`Failed to load @supabase/node-fetch: ${m.message}. This is required for HTTP requests in Node.js environments without native fetch.`)}):u=fetch,(...h)=>u(...h)},!(!((i=l?.params)===null||i===void 0)&&i.apikey))throw new Error("API key is required to connect to Realtime");this.apiKey=l.params.apikey,this.endPoint=`${a}/${Wu.websocket}`,this.httpEndpoint=ux(a),this._initializeOptions(l),this._setupReconnectionTimer(),this.fetch=this._resolveFetch(l?.fetch)}connect(){if(!(this.isConnecting()||this.isDisconnecting()||this.conn!==null&&this.isConnected())){if(this._setConnectionState("connecting"),this._setAuthSafely("connect"),this.transport)this.conn=new this.transport(this.endpointURL());else try{this.conn=Cj.createWebSocket(this.endpointURL())}catch(a){this._setConnectionState("disconnected");const l=a.message;throw l.includes("Node.js")?new Error(`${l}

To use Realtime in Node.js, you need to provide a WebSocket implementation:

Option 1: Use Node.js 22+ which has native WebSocket support
Option 2: Install and provide the "ws" package:

  npm install ws

  import ws from "ws"
  const client = new RealtimeClient(url, {
    ...options,
    transport: ws
  })`):new Error(`WebSocket not available: ${l}`)}this._setupConnectionHandlers()}}endpointURL(){return this._appendParams(this.endPoint,Object.assign({},this.params,{vsn:Tj}))}disconnect(a,l){if(!this.isDisconnecting())if(this._setConnectionState("disconnecting",!0),this.conn){const i=setTimeout(()=>{this._setConnectionState("disconnected")},100);this.conn.onclose=()=>{clearTimeout(i),this._setConnectionState("disconnected")},a?this.conn.close(a,l??""):this.conn.close(),this._teardownConnection()}else this._setConnectionState("disconnected")}getChannels(){return this.channels}async removeChannel(a){const l=await a.unsubscribe();return this.channels.length===0&&this.disconnect(),l}async removeAllChannels(){const a=await Promise.all(this.channels.map(l=>l.unsubscribe()));return this.channels=[],this.disconnect(),a}log(a,l,i){this.logger(a,l,i)}connectionState(){switch(this.conn&&this.conn.readyState){case Yn.connecting:return Ra.Connecting;case Yn.open:return Ra.Open;case Yn.closing:return Ra.Closing;default:return Ra.Closed}}isConnected(){return this.connectionState()===Ra.Open}isConnecting(){return this._connectionState==="connecting"}isDisconnecting(){return this._connectionState==="disconnecting"}channel(a,l={config:{}}){const i=`realtime:${a}`,c=this.getChannels().find(u=>u.topic===i);if(c)return c;{const u=new Cd(`realtime:${a}`,l,this);return this.channels.push(u),u}}push(a){const{topic:l,event:i,payload:c,ref:u}=a,h=()=>{this.encode(a,m=>{var x;(x=this.conn)===null||x===void 0||x.send(m)})};this.log("push",`${l} ${i} (${u})`,c),this.isConnected()?h():this.sendBuffer.push(h)}async setAuth(a=null){this._authPromise=this._performAuth(a);try{await this._authPromise}finally{this._authPromise=null}}async sendHeartbeat(){var a;if(!this.isConnected()){try{this.heartbeatCallback("disconnected")}catch(l){this.log("error","error in heartbeat callback",l)}return}if(this.pendingHeartbeatRef){this.pendingHeartbeatRef=null,this.log("transport","heartbeat timeout. Attempting to re-establish connection");try{this.heartbeatCallback("timeout")}catch(l){this.log("error","error in heartbeat callback",l)}this._wasManualDisconnect=!1,(a=this.conn)===null||a===void 0||a.close(Rj,"heartbeat timeout"),setTimeout(()=>{var l;this.isConnected()||(l=this.reconnectTimer)===null||l===void 0||l.scheduleTimeout()},Ei.HEARTBEAT_TIMEOUT_FALLBACK);return}this.pendingHeartbeatRef=this._makeRef(),this.push({topic:"phoenix",event:"heartbeat",payload:{},ref:this.pendingHeartbeatRef});try{this.heartbeatCallback("sent")}catch(l){this.log("error","error in heartbeat callback",l)}this._setAuthSafely("heartbeat")}onHeartbeat(a){this.heartbeatCallback=a}flushSendBuffer(){this.isConnected()&&this.sendBuffer.length>0&&(this.sendBuffer.forEach(a=>a()),this.sendBuffer=[])}_makeRef(){let a=this.ref+1;return a===this.ref?this.ref=0:this.ref=a,this.ref.toString()}_leaveOpenTopic(a){let l=this.channels.find(i=>i.topic===a&&(i._isJoined()||i._isJoining()));l&&(this.log("transport",`leaving duplicate topic "${a}"`),l.unsubscribe())}_remove(a){this.channels=this.channels.filter(l=>l.topic!==a.topic)}_onConnMessage(a){this.decode(a.data,l=>{if(l.topic==="phoenix"&&l.event==="phx_reply")try{this.heartbeatCallback(l.payload.status==="ok"?"ok":"error")}catch(g){this.log("error","error in heartbeat callback",g)}l.ref&&l.ref===this.pendingHeartbeatRef&&(this.pendingHeartbeatRef=null);const{topic:i,event:c,payload:u,ref:h}=l,m=h?`(${h})`:"",x=u.status||"";this.log("receive",`${x} ${i} ${c} ${m}`.trim(),u),this.channels.filter(g=>g._isMember(i)).forEach(g=>g._trigger(c,u,h)),this._triggerStateCallbacks("message",l)})}_clearTimer(a){var l;a==="heartbeat"&&this.heartbeatTimer?(clearInterval(this.heartbeatTimer),this.heartbeatTimer=void 0):a==="reconnect"&&((l=this.reconnectTimer)===null||l===void 0||l.reset())}_clearAllTimers(){this._clearTimer("heartbeat"),this._clearTimer("reconnect")}_setupConnectionHandlers(){this.conn&&("binaryType"in this.conn&&(this.conn.binaryType="arraybuffer"),this.conn.onopen=()=>this._onConnOpen(),this.conn.onerror=a=>this._onConnError(a),this.conn.onmessage=a=>this._onConnMessage(a),this.conn.onclose=a=>this._onConnClose(a))}_teardownConnection(){this.conn&&(this.conn.onopen=null,this.conn.onerror=null,this.conn.onmessage=null,this.conn.onclose=null,this.conn=null),this._clearAllTimers(),this.channels.forEach(a=>a.teardown())}_onConnOpen(){this._setConnectionState("connected"),this.log("transport",`connected to ${this.endpointURL()}`),this.flushSendBuffer(),this._clearTimer("reconnect"),this.worker?this.workerRef||this._startWorkerHeartbeat():this._startHeartbeat(),this._triggerStateCallbacks("open")}_startHeartbeat(){this.heartbeatTimer&&clearInterval(this.heartbeatTimer),this.heartbeatTimer=setInterval(()=>this.sendHeartbeat(),this.heartbeatIntervalMs)}_startWorkerHeartbeat(){this.workerUrl?this.log("worker",`starting worker for from ${this.workerUrl}`):this.log("worker","starting default worker");const a=this._workerObjectUrl(this.workerUrl);this.workerRef=new Worker(a),this.workerRef.onerror=l=>{this.log("worker","worker error",l.message),this.workerRef.terminate()},this.workerRef.onmessage=l=>{l.data.event==="keepAlive"&&this.sendHeartbeat()},this.workerRef.postMessage({event:"start",interval:this.heartbeatIntervalMs})}_onConnClose(a){var l;this._setConnectionState("disconnected"),this.log("transport","close",a),this._triggerChanError(),this._clearTimer("heartbeat"),this._wasManualDisconnect||(l=this.reconnectTimer)===null||l===void 0||l.scheduleTimeout(),this._triggerStateCallbacks("close",a)}_onConnError(a){this._setConnectionState("disconnected"),this.log("transport",`${a}`),this._triggerChanError(),this._triggerStateCallbacks("error",a)}_triggerChanError(){this.channels.forEach(a=>a._trigger(Gt.error))}_appendParams(a,l){if(Object.keys(l).length===0)return a;const i=a.match(/\?/)?"&":"?",c=new URLSearchParams(l);return`${a}${i}${c}`}_workerObjectUrl(a){let l;if(a)l=a;else{const i=new Blob([Hj],{type:"application/javascript"});l=URL.createObjectURL(i)}return l}_setConnectionState(a,l=!1){this._connectionState=a,a==="connecting"?this._wasManualDisconnect=!1:a==="disconnecting"&&(this._wasManualDisconnect=l)}async _performAuth(a=null){let l;a?l=a:this.accessToken?l=await this.accessToken():l=this.accessTokenValue,this.accessTokenValue!=l&&(this.accessTokenValue=l,this.channels.forEach(i=>{const c={access_token:l,version:Aj};l&&i.updateJoinPayload(c),i.joinedOnce&&i._isJoined()&&i._push(Gt.access_token,{access_token:l})}))}async _waitForAuthIfNeeded(){this._authPromise&&await this._authPromise}_setAuthSafely(a="general"){this.setAuth().catch(l=>{this.log("error",`error setting auth in ${a}`,l)})}_triggerStateCallbacks(a,l){try{this.stateChangeCallbacks[a].forEach(i=>{try{i(l)}catch(c){this.log("error",`error in ${a} callback`,c)}})}catch(i){this.log("error",`error triggering ${a} callbacks`,i)}}_setupReconnectionTimer(){this.reconnectTimer=new ox(async()=>{setTimeout(async()=>{await this._waitForAuthIfNeeded(),this.isConnected()||this.connect()},Ei.RECONNECT_DELAY)},this.reconnectAfterMs)}_initializeOptions(a){var l,i,c,u,h,m,x,g,p;if(this.transport=(l=a?.transport)!==null&&l!==void 0?l:null,this.timeout=(i=a?.timeout)!==null&&i!==void 0?i:Ju,this.heartbeatIntervalMs=(c=a?.heartbeatIntervalMs)!==null&&c!==void 0?c:Ei.HEARTBEAT_INTERVAL,this.worker=(u=a?.worker)!==null&&u!==void 0?u:!1,this.accessToken=(h=a?.accessToken)!==null&&h!==void 0?h:null,this.heartbeatCallback=(m=a?.heartbeatCallback)!==null&&m!==void 0?m:Ou,a?.params&&(this.params=a.params),a?.logger&&(this.logger=a.logger),(a?.logLevel||a?.log_level)&&(this.logLevel=a.logLevel||a.log_level,this.params=Object.assign(Object.assign({},this.params),{log_level:this.logLevel})),this.reconnectAfterMs=(x=a?.reconnectAfterMs)!==null&&x!==void 0?x:(v=>$j[v-1]||Bj),this.encode=(g=a?.encode)!==null&&g!==void 0?g:((v,j)=>j(JSON.stringify(v))),this.decode=(p=a?.decode)!==null&&p!==void 0?p:this.serializer.decode.bind(this.serializer),this.worker){if(typeof window<"u"&&!window.Worker)throw new Error("Web Worker is not supported");this.workerUrl=a?.workerUrl}}}class Ed extends Error{constructor(a){super(a),this.__isStorageError=!0,this.name="StorageError"}}function Xe(n){return typeof n=="object"&&n!==null&&"__isStorageError"in n}class Vj extends Ed{constructor(a,l,i){super(a),this.name="StorageApiError",this.status=l,this.statusCode=i}toJSON(){return{name:this.name,message:this.message,status:this.status,statusCode:this.statusCode}}}class td extends Ed{constructor(a,l){super(a),this.name="StorageUnknownError",this.originalError=l}}var Qj=function(n,a,l,i){function c(u){return u instanceof l?u:new l(function(h){h(u)})}return new(l||(l=Promise))(function(u,h){function m(p){try{g(i.next(p))}catch(v){h(v)}}function x(p){try{g(i.throw(p))}catch(v){h(v)}}function g(p){p.done?u(p.value):c(p.value).then(m,x)}g((i=i.apply(n,a||[])).next())})};const dx=n=>{let a;return n?a=n:typeof fetch>"u"?a=(...l)=>nl(async()=>{const{default:i}=await Promise.resolve().then(()=>Hr);return{default:i}},void 0).then(({default:i})=>i(...l)):a=fetch,(...l)=>a(...l)},Yj=()=>Qj(void 0,void 0,void 0,function*(){return typeof Response>"u"?(yield nl(()=>Promise.resolve().then(()=>Hr),void 0)).Response:Response}),sd=n=>{if(Array.isArray(n))return n.map(l=>sd(l));if(typeof n=="function"||n!==Object(n))return n;const a={};return Object.entries(n).forEach(([l,i])=>{const c=l.replace(/([-_][a-z])/gi,u=>u.toUpperCase().replace(/[-_]/g,""));a[c]=sd(i)}),a},Fj=n=>{if(typeof n!="object"||n===null)return!1;const a=Object.getPrototypeOf(n);return(a===null||a===Object.prototype||Object.getPrototypeOf(a)===null)&&!(Symbol.toStringTag in n)&&!(Symbol.iterator in n)};var Ma=function(n,a,l,i){function c(u){return u instanceof l?u:new l(function(h){h(u)})}return new(l||(l=Promise))(function(u,h){function m(p){try{g(i.next(p))}catch(v){h(v)}}function x(p){try{g(i.throw(p))}catch(v){h(v)}}function g(p){p.done?u(p.value):c(p.value).then(m,x)}g((i=i.apply(n,a||[])).next())})};const Du=n=>n.msg||n.message||n.error_description||n.error||JSON.stringify(n),Ij=(n,a,l)=>Ma(void 0,void 0,void 0,function*(){const i=yield Yj();n instanceof i&&!l?.noResolveJson?n.json().then(c=>{const u=n.status||500,h=c?.statusCode||u+"";a(new Vj(Du(c),u,h))}).catch(c=>{a(new td(Du(c),c))}):a(new td(Du(n),n))}),Kj=(n,a,l,i)=>{const c={method:n,headers:a?.headers||{}};return n==="GET"||!i?c:(Fj(i)?(c.headers=Object.assign({"Content-Type":"application/json"},a?.headers),c.body=JSON.stringify(i)):c.body=i,a?.duplex&&(c.duplex=a.duplex),Object.assign(Object.assign({},c),l))};function ll(n,a,l,i,c,u){return Ma(this,void 0,void 0,function*(){return new Promise((h,m)=>{n(l,Kj(a,i,c,u)).then(x=>{if(!x.ok)throw x;return i?.noResolveJson?x:x.json()}).then(x=>h(x)).catch(x=>Ij(x,m,i))})})}function Qi(n,a,l,i){return Ma(this,void 0,void 0,function*(){return ll(n,"GET",a,l,i)})}function ss(n,a,l,i,c){return Ma(this,void 0,void 0,function*(){return ll(n,"POST",a,i,c,l)})}function ad(n,a,l,i,c){return Ma(this,void 0,void 0,function*(){return ll(n,"PUT",a,i,c,l)})}function Xj(n,a,l,i){return Ma(this,void 0,void 0,function*(){return ll(n,"HEAD",a,Object.assign(Object.assign({},l),{noResolveJson:!0}),i)})}function hx(n,a,l,i,c){return Ma(this,void 0,void 0,function*(){return ll(n,"DELETE",a,i,c,l)})}var ut=function(n,a,l,i){function c(u){return u instanceof l?u:new l(function(h){h(u)})}return new(l||(l=Promise))(function(u,h){function m(p){try{g(i.next(p))}catch(v){h(v)}}function x(p){try{g(i.throw(p))}catch(v){h(v)}}function g(p){p.done?u(p.value):c(p.value).then(m,x)}g((i=i.apply(n,a||[])).next())})};const Zj={limit:100,offset:0,sortBy:{column:"name",order:"asc"}},fg={cacheControl:"3600",contentType:"text/plain;charset=UTF-8",upsert:!1};class Jj{constructor(a,l={},i,c){this.url=a,this.headers=l,this.bucketId=i,this.fetch=dx(c)}uploadOrUpdate(a,l,i,c){return ut(this,void 0,void 0,function*(){try{let u;const h=Object.assign(Object.assign({},fg),c);let m=Object.assign(Object.assign({},this.headers),a==="POST"&&{"x-upsert":String(h.upsert)});const x=h.metadata;typeof Blob<"u"&&i instanceof Blob?(u=new FormData,u.append("cacheControl",h.cacheControl),x&&u.append("metadata",this.encodeMetadata(x)),u.append("",i)):typeof FormData<"u"&&i instanceof FormData?(u=i,u.append("cacheControl",h.cacheControl),x&&u.append("metadata",this.encodeMetadata(x))):(u=i,m["cache-control"]=`max-age=${h.cacheControl}`,m["content-type"]=h.contentType,x&&(m["x-metadata"]=this.toBase64(this.encodeMetadata(x)))),c?.headers&&(m=Object.assign(Object.assign({},m),c.headers));const g=this._removeEmptyFolders(l),p=this._getFinalPath(g),v=yield(a=="PUT"?ad:ss)(this.fetch,`${this.url}/object/${p}`,u,Object.assign({headers:m},h?.duplex?{duplex:h.duplex}:{}));return{data:{path:g,id:v.Id,fullPath:v.Key},error:null}}catch(u){if(Xe(u))return{data:null,error:u};throw u}})}upload(a,l,i){return ut(this,void 0,void 0,function*(){return this.uploadOrUpdate("POST",a,l,i)})}uploadToSignedUrl(a,l,i,c){return ut(this,void 0,void 0,function*(){const u=this._removeEmptyFolders(a),h=this._getFinalPath(u),m=new URL(this.url+`/object/upload/sign/${h}`);m.searchParams.set("token",l);try{let x;const g=Object.assign({upsert:fg.upsert},c),p=Object.assign(Object.assign({},this.headers),{"x-upsert":String(g.upsert)});typeof Blob<"u"&&i instanceof Blob?(x=new FormData,x.append("cacheControl",g.cacheControl),x.append("",i)):typeof FormData<"u"&&i instanceof FormData?(x=i,x.append("cacheControl",g.cacheControl)):(x=i,p["cache-control"]=`max-age=${g.cacheControl}`,p["content-type"]=g.contentType);const v=yield ad(this.fetch,m.toString(),x,{headers:p});return{data:{path:u,fullPath:v.Key},error:null}}catch(x){if(Xe(x))return{data:null,error:x};throw x}})}createSignedUploadUrl(a,l){return ut(this,void 0,void 0,function*(){try{let i=this._getFinalPath(a);const c=Object.assign({},this.headers);l?.upsert&&(c["x-upsert"]="true");const u=yield ss(this.fetch,`${this.url}/object/upload/sign/${i}`,{},{headers:c}),h=new URL(this.url+u.url),m=h.searchParams.get("token");if(!m)throw new Ed("No token returned by API");return{data:{signedUrl:h.toString(),path:a,token:m},error:null}}catch(i){if(Xe(i))return{data:null,error:i};throw i}})}update(a,l,i){return ut(this,void 0,void 0,function*(){return this.uploadOrUpdate("PUT",a,l,i)})}move(a,l,i){return ut(this,void 0,void 0,function*(){try{return{data:yield ss(this.fetch,`${this.url}/object/move`,{bucketId:this.bucketId,sourceKey:a,destinationKey:l,destinationBucket:i?.destinationBucket},{headers:this.headers}),error:null}}catch(c){if(Xe(c))return{data:null,error:c};throw c}})}copy(a,l,i){return ut(this,void 0,void 0,function*(){try{return{data:{path:(yield ss(this.fetch,`${this.url}/object/copy`,{bucketId:this.bucketId,sourceKey:a,destinationKey:l,destinationBucket:i?.destinationBucket},{headers:this.headers})).Key},error:null}}catch(c){if(Xe(c))return{data:null,error:c};throw c}})}createSignedUrl(a,l,i){return ut(this,void 0,void 0,function*(){try{let c=this._getFinalPath(a),u=yield ss(this.fetch,`${this.url}/object/sign/${c}`,Object.assign({expiresIn:l},i?.transform?{transform:i.transform}:{}),{headers:this.headers});const h=i?.download?`&download=${i.download===!0?"":i.download}`:"";return u={signedUrl:encodeURI(`${this.url}${u.signedURL}${h}`)},{data:u,error:null}}catch(c){if(Xe(c))return{data:null,error:c};throw c}})}createSignedUrls(a,l,i){return ut(this,void 0,void 0,function*(){try{const c=yield ss(this.fetch,`${this.url}/object/sign/${this.bucketId}`,{expiresIn:l,paths:a},{headers:this.headers}),u=i?.download?`&download=${i.download===!0?"":i.download}`:"";return{data:c.map(h=>Object.assign(Object.assign({},h),{signedUrl:h.signedURL?encodeURI(`${this.url}${h.signedURL}${u}`):null})),error:null}}catch(c){if(Xe(c))return{data:null,error:c};throw c}})}download(a,l){return ut(this,void 0,void 0,function*(){const c=typeof l?.transform<"u"?"render/image/authenticated":"object",u=this.transformOptsToQueryString(l?.transform||{}),h=u?`?${u}`:"";try{const m=this._getFinalPath(a);return{data:yield(yield Qi(this.fetch,`${this.url}/${c}/${m}${h}`,{headers:this.headers,noResolveJson:!0})).blob(),error:null}}catch(m){if(Xe(m))return{data:null,error:m};throw m}})}info(a){return ut(this,void 0,void 0,function*(){const l=this._getFinalPath(a);try{const i=yield Qi(this.fetch,`${this.url}/object/info/${l}`,{headers:this.headers});return{data:sd(i),error:null}}catch(i){if(Xe(i))return{data:null,error:i};throw i}})}exists(a){return ut(this,void 0,void 0,function*(){const l=this._getFinalPath(a);try{return yield Xj(this.fetch,`${this.url}/object/${l}`,{headers:this.headers}),{data:!0,error:null}}catch(i){if(Xe(i)&&i instanceof td){const c=i.originalError;if([400,404].includes(c?.status))return{data:!1,error:i}}throw i}})}getPublicUrl(a,l){const i=this._getFinalPath(a),c=[],u=l?.download?`download=${l.download===!0?"":l.download}`:"";u!==""&&c.push(u);const m=typeof l?.transform<"u"?"render/image":"object",x=this.transformOptsToQueryString(l?.transform||{});x!==""&&c.push(x);let g=c.join("&");return g!==""&&(g=`?${g}`),{data:{publicUrl:encodeURI(`${this.url}/${m}/public/${i}${g}`)}}}remove(a){return ut(this,void 0,void 0,function*(){try{return{data:yield hx(this.fetch,`${this.url}/object/${this.bucketId}`,{prefixes:a},{headers:this.headers}),error:null}}catch(l){if(Xe(l))return{data:null,error:l};throw l}})}list(a,l,i){return ut(this,void 0,void 0,function*(){try{const c=Object.assign(Object.assign(Object.assign({},Zj),l),{prefix:a||""});return{data:yield ss(this.fetch,`${this.url}/object/list/${this.bucketId}`,c,{headers:this.headers},i),error:null}}catch(c){if(Xe(c))return{data:null,error:c};throw c}})}listV2(a,l){return ut(this,void 0,void 0,function*(){try{const i=Object.assign({},a);return{data:yield ss(this.fetch,`${this.url}/object/list-v2/${this.bucketId}`,i,{headers:this.headers},l),error:null}}catch(i){if(Xe(i))return{data:null,error:i};throw i}})}encodeMetadata(a){return JSON.stringify(a)}toBase64(a){return typeof Buffer<"u"?Buffer.from(a).toString("base64"):btoa(a)}_getFinalPath(a){return`${this.bucketId}/${a.replace(/^\/+/,"")}`}_removeEmptyFolders(a){return a.replace(/^\/|\/$/g,"").replace(/\/+/g,"/")}transformOptsToQueryString(a){const l=[];return a.width&&l.push(`width=${a.width}`),a.height&&l.push(`height=${a.height}`),a.resize&&l.push(`resize=${a.resize}`),a.format&&l.push(`format=${a.format}`),a.quality&&l.push(`quality=${a.quality}`),l.join("&")}}const Wj="2.11.1",ew={"X-Client-Info":`storage-js/${Wj}`};var kr=function(n,a,l,i){function c(u){return u instanceof l?u:new l(function(h){h(u)})}return new(l||(l=Promise))(function(u,h){function m(p){try{g(i.next(p))}catch(v){h(v)}}function x(p){try{g(i.throw(p))}catch(v){h(v)}}function g(p){p.done?u(p.value):c(p.value).then(m,x)}g((i=i.apply(n,a||[])).next())})};class tw{constructor(a,l={},i,c){const u=new URL(a);c?.useNewHostname&&/supabase\.(co|in|red)$/.test(u.hostname)&&!u.hostname.includes("storage.supabase.")&&(u.hostname=u.hostname.replace("supabase.","storage.supabase.")),this.url=u.href,this.headers=Object.assign(Object.assign({},ew),l),this.fetch=dx(i)}listBuckets(){return kr(this,void 0,void 0,function*(){try{return{data:yield Qi(this.fetch,`${this.url}/bucket`,{headers:this.headers}),error:null}}catch(a){if(Xe(a))return{data:null,error:a};throw a}})}getBucket(a){return kr(this,void 0,void 0,function*(){try{return{data:yield Qi(this.fetch,`${this.url}/bucket/${a}`,{headers:this.headers}),error:null}}catch(l){if(Xe(l))return{data:null,error:l};throw l}})}createBucket(a,l={public:!1}){return kr(this,void 0,void 0,function*(){try{return{data:yield ss(this.fetch,`${this.url}/bucket`,{id:a,name:a,type:l.type,public:l.public,file_size_limit:l.fileSizeLimit,allowed_mime_types:l.allowedMimeTypes},{headers:this.headers}),error:null}}catch(i){if(Xe(i))return{data:null,error:i};throw i}})}updateBucket(a,l){return kr(this,void 0,void 0,function*(){try{return{data:yield ad(this.fetch,`${this.url}/bucket/${a}`,{id:a,name:a,public:l.public,file_size_limit:l.fileSizeLimit,allowed_mime_types:l.allowedMimeTypes},{headers:this.headers}),error:null}}catch(i){if(Xe(i))return{data:null,error:i};throw i}})}emptyBucket(a){return kr(this,void 0,void 0,function*(){try{return{data:yield ss(this.fetch,`${this.url}/bucket/${a}/empty`,{},{headers:this.headers}),error:null}}catch(l){if(Xe(l))return{data:null,error:l};throw l}})}deleteBucket(a){return kr(this,void 0,void 0,function*(){try{return{data:yield hx(this.fetch,`${this.url}/bucket/${a}`,{},{headers:this.headers}),error:null}}catch(l){if(Xe(l))return{data:null,error:l};throw l}})}}class sw extends tw{constructor(a,l={},i,c){super(a,l,i,c)}from(a){return new Jj(this.url,this.headers,a,this.fetch)}}const aw="2.57.2";let Qn="";typeof Deno<"u"?Qn="deno":typeof document<"u"?Qn="web":typeof navigator<"u"&&navigator.product==="ReactNative"?Qn="react-native":Qn="node";const rw={"X-Client-Info":`supabase-js-${Qn}/${aw}`},nw={headers:rw},lw={schema:"public"},iw={autoRefreshToken:!0,persistSession:!0,detectSessionInUrl:!0,flowType:"implicit"},ow={};var cw=function(n,a,l,i){function c(u){return u instanceof l?u:new l(function(h){h(u)})}return new(l||(l=Promise))(function(u,h){function m(p){try{g(i.next(p))}catch(v){h(v)}}function x(p){try{g(i.throw(p))}catch(v){h(v)}}function g(p){p.done?u(p.value):c(p.value).then(m,x)}g((i=i.apply(n,a||[])).next())})};const uw=n=>{let a;return n?a=n:typeof fetch>"u"?a=sx:a=fetch,(...l)=>a(...l)},dw=()=>typeof Headers>"u"?ax:Headers,hw=(n,a,l)=>{const i=uw(l),c=dw();return(u,h)=>cw(void 0,void 0,void 0,function*(){var m;const x=(m=yield a())!==null&&m!==void 0?m:n;let g=new c(h?.headers);return g.has("apikey")||g.set("apikey",n),g.has("Authorization")||g.set("Authorization",`Bearer ${x}`),i(u,Object.assign(Object.assign({},h),{headers:g}))})};var fw=function(n,a,l,i){function c(u){return u instanceof l?u:new l(function(h){h(u)})}return new(l||(l=Promise))(function(u,h){function m(p){try{g(i.next(p))}catch(v){h(v)}}function x(p){try{g(i.throw(p))}catch(v){h(v)}}function g(p){p.done?u(p.value):c(p.value).then(m,x)}g((i=i.apply(n,a||[])).next())})};function mw(n){return n.endsWith("/")?n:n+"/"}function gw(n,a){var l,i;const{db:c,auth:u,realtime:h,global:m}=n,{db:x,auth:g,realtime:p,global:v}=a,j={db:Object.assign(Object.assign({},x),c),auth:Object.assign(Object.assign({},g),u),realtime:Object.assign(Object.assign({},p),h),storage:{},global:Object.assign(Object.assign(Object.assign({},v),m),{headers:Object.assign(Object.assign({},(l=v?.headers)!==null&&l!==void 0?l:{}),(i=m?.headers)!==null&&i!==void 0?i:{})}),accessToken:()=>fw(this,void 0,void 0,function*(){return""})};return n.accessToken?j.accessToken=n.accessToken:delete j.accessToken,j}const fx="2.71.1",Or=30*1e3,rd=3,Mu=rd*Or,xw="http://localhost:9999",pw="supabase.auth.token",yw={"X-Client-Info":`gotrue-js/${fx}`},nd="X-Supabase-Api-Version",mx={"2024-01-01":{timestamp:Date.parse("2024-01-01T00:00:00.0Z"),name:"2024-01-01"}},vw=/^([a-z0-9_-]{4})*($|[a-z0-9_-]{3}$|[a-z0-9_-]{2}$)$/i,bw=600*1e3;class Ad extends Error{constructor(a,l,i){super(a),this.__isAuthError=!0,this.name="AuthError",this.status=l,this.code=i}}function me(n){return typeof n=="object"&&n!==null&&"__isAuthError"in n}class jw extends Ad{constructor(a,l,i){super(a,l,i),this.name="AuthApiError",this.status=l,this.code=i}}function ww(n){return me(n)&&n.name==="AuthApiError"}class gx extends Ad{constructor(a,l){super(a),this.name="AuthUnknownError",this.originalError=l}}class ia extends Ad{constructor(a,l,i,c){super(a,i,c),this.name=l,this.status=i}}class ta extends ia{constructor(){super("Auth session missing!","AuthSessionMissingError",400,void 0)}}function _w(n){return me(n)&&n.name==="AuthSessionMissingError"}class Ai extends ia{constructor(){super("Auth session or user missing","AuthInvalidTokenResponseError",500,void 0)}}class Ti extends ia{constructor(a){super(a,"AuthInvalidCredentialsError",400,void 0)}}class Ri extends ia{constructor(a,l=null){super(a,"AuthImplicitGrantRedirectError",500,void 0),this.details=null,this.details=l}toJSON(){return{name:this.name,message:this.message,status:this.status,details:this.details}}}function Nw(n){return me(n)&&n.name==="AuthImplicitGrantRedirectError"}class mg extends ia{constructor(a,l=null){super(a,"AuthPKCEGrantCodeExchangeError",500,void 0),this.details=null,this.details=l}toJSON(){return{name:this.name,message:this.message,status:this.status,details:this.details}}}class ld extends ia{constructor(a,l){super(a,"AuthRetryableFetchError",l,void 0)}}function Uu(n){return me(n)&&n.name==="AuthRetryableFetchError"}class gg extends ia{constructor(a,l,i){super(a,"AuthWeakPasswordError",l,"weak_password"),this.reasons=i}}class id extends ia{constructor(a){super(a,"AuthInvalidJwtError",400,"invalid_jwt")}}const Yi="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-_".split(""),xg=` 	
\r=`.split(""),Sw=(()=>{const n=new Array(128);for(let a=0;a<n.length;a+=1)n[a]=-1;for(let a=0;a<xg.length;a+=1)n[xg[a].charCodeAt(0)]=-2;for(let a=0;a<Yi.length;a+=1)n[Yi[a].charCodeAt(0)]=a;return n})();function pg(n,a,l){if(n!==null)for(a.queue=a.queue<<8|n,a.queuedBits+=8;a.queuedBits>=6;){const i=a.queue>>a.queuedBits-6&63;l(Yi[i]),a.queuedBits-=6}else if(a.queuedBits>0)for(a.queue=a.queue<<6-a.queuedBits,a.queuedBits=6;a.queuedBits>=6;){const i=a.queue>>a.queuedBits-6&63;l(Yi[i]),a.queuedBits-=6}}function xx(n,a,l){const i=Sw[n];if(i>-1)for(a.queue=a.queue<<6|i,a.queuedBits+=6;a.queuedBits>=8;)l(a.queue>>a.queuedBits-8&255),a.queuedBits-=8;else{if(i===-2)return;throw new Error(`Invalid Base64-URL character "${String.fromCharCode(n)}"`)}}function yg(n){const a=[],l=h=>{a.push(String.fromCodePoint(h))},i={utf8seq:0,codepoint:0},c={queue:0,queuedBits:0},u=h=>{Ew(h,i,l)};for(let h=0;h<n.length;h+=1)xx(n.charCodeAt(h),c,u);return a.join("")}function kw(n,a){if(n<=127){a(n);return}else if(n<=2047){a(192|n>>6),a(128|n&63);return}else if(n<=65535){a(224|n>>12),a(128|n>>6&63),a(128|n&63);return}else if(n<=1114111){a(240|n>>18),a(128|n>>12&63),a(128|n>>6&63),a(128|n&63);return}throw new Error(`Unrecognized Unicode codepoint: ${n.toString(16)}`)}function Cw(n,a){for(let l=0;l<n.length;l+=1){let i=n.charCodeAt(l);if(i>55295&&i<=56319){const c=(i-55296)*1024&65535;i=(n.charCodeAt(l+1)-56320&65535|c)+65536,l+=1}kw(i,a)}}function Ew(n,a,l){if(a.utf8seq===0){if(n<=127){l(n);return}for(let i=1;i<6;i+=1)if((n>>7-i&1)===0){a.utf8seq=i;break}if(a.utf8seq===2)a.codepoint=n&31;else if(a.utf8seq===3)a.codepoint=n&15;else if(a.utf8seq===4)a.codepoint=n&7;else throw new Error("Invalid UTF-8 sequence");a.utf8seq-=1}else if(a.utf8seq>0){if(n<=127)throw new Error("Invalid UTF-8 sequence");a.codepoint=a.codepoint<<6|n&63,a.utf8seq-=1,a.utf8seq===0&&l(a.codepoint)}}function Aw(n){const a=[],l={queue:0,queuedBits:0},i=c=>{a.push(c)};for(let c=0;c<n.length;c+=1)xx(n.charCodeAt(c),l,i);return new Uint8Array(a)}function Tw(n){const a=[];return Cw(n,l=>a.push(l)),new Uint8Array(a)}function Rw(n){const a=[],l={queue:0,queuedBits:0},i=c=>{a.push(c)};return n.forEach(c=>pg(c,l,i)),pg(null,l,i),a.join("")}function Ow(n){return Math.round(Date.now()/1e3)+n}function Dw(){return"xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,function(n){const a=Math.random()*16|0;return(n=="x"?a:a&3|8).toString(16)})}const Bt=()=>typeof window<"u"&&typeof document<"u",ka={tested:!1,writable:!1},px=()=>{if(!Bt())return!1;try{if(typeof globalThis.localStorage!="object")return!1}catch{return!1}if(ka.tested)return ka.writable;const n=`lswt-${Math.random()}${Math.random()}`;try{globalThis.localStorage.setItem(n,n),globalThis.localStorage.removeItem(n),ka.tested=!0,ka.writable=!0}catch{ka.tested=!0,ka.writable=!1}return ka.writable};function Mw(n){const a={},l=new URL(n);if(l.hash&&l.hash[0]==="#")try{new URLSearchParams(l.hash.substring(1)).forEach((c,u)=>{a[u]=c})}catch{}return l.searchParams.forEach((i,c)=>{a[c]=i}),a}const yx=n=>{let a;return n?a=n:typeof fetch>"u"?a=(...l)=>nl(async()=>{const{default:i}=await Promise.resolve().then(()=>Hr);return{default:i}},void 0).then(({default:i})=>i(...l)):a=fetch,(...l)=>a(...l)},Uw=n=>typeof n=="object"&&n!==null&&"status"in n&&"ok"in n&&"json"in n&&typeof n.json=="function",Dr=async(n,a,l)=>{await n.setItem(a,JSON.stringify(l))},Ca=async(n,a)=>{const l=await n.getItem(a);if(!l)return null;try{return JSON.parse(l)}catch{return l}},ea=async(n,a)=>{await n.removeItem(a)};class eo{constructor(){this.promise=new eo.promiseConstructor((a,l)=>{this.resolve=a,this.reject=l})}}eo.promiseConstructor=Promise;function Pu(n){const a=n.split(".");if(a.length!==3)throw new id("Invalid JWT structure");for(let i=0;i<a.length;i++)if(!vw.test(a[i]))throw new id("JWT not in base64url format");return{header:JSON.parse(yg(a[0])),payload:JSON.parse(yg(a[1])),signature:Aw(a[2]),raw:{header:a[0],payload:a[1]}}}async function Pw(n){return await new Promise(a=>{setTimeout(()=>a(null),n)})}function Lw(n,a){return new Promise((i,c)=>{(async()=>{for(let u=0;u<1/0;u++)try{const h=await n(u);if(!a(u,null,h)){i(h);return}}catch(h){if(!a(u,h)){c(h);return}}})()})}function qw(n){return("0"+n.toString(16)).substr(-2)}function zw(){const a=new Uint32Array(56);if(typeof crypto>"u"){const l="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-._~",i=l.length;let c="";for(let u=0;u<56;u++)c+=l.charAt(Math.floor(Math.random()*i));return c}return crypto.getRandomValues(a),Array.from(a,qw).join("")}async function $w(n){const l=new TextEncoder().encode(n),i=await crypto.subtle.digest("SHA-256",l),c=new Uint8Array(i);return Array.from(c).map(u=>String.fromCharCode(u)).join("")}async function Bw(n){if(!(typeof crypto<"u"&&typeof crypto.subtle<"u"&&typeof TextEncoder<"u"))return console.warn("WebCrypto API is not supported. Code challenge method will default to use plain instead of sha256."),n;const l=await $w(n);return btoa(l).replace(/\+/g,"-").replace(/\//g,"_").replace(/=+$/,"")}async function Cr(n,a,l=!1){const i=zw();let c=i;l&&(c+="/PASSWORD_RECOVERY"),await Dr(n,`${a}-code-verifier`,c);const u=await Bw(i);return[u,i===u?"plain":"s256"]}const Hw=/^2[0-9]{3}-(0[1-9]|1[0-2])-(0[1-9]|1[0-9]|2[0-9]|3[0-1])$/i;function Gw(n){const a=n.headers.get(nd);if(!a||!a.match(Hw))return null;try{return new Date(`${a}T00:00:00.0Z`)}catch{return null}}function Vw(n){if(!n)throw new Error("Missing exp claim");const a=Math.floor(Date.now()/1e3);if(n<=a)throw new Error("JWT has expired")}function Qw(n){switch(n){case"RS256":return{name:"RSASSA-PKCS1-v1_5",hash:{name:"SHA-256"}};case"ES256":return{name:"ECDSA",namedCurve:"P-256",hash:{name:"SHA-256"}};default:throw new Error("Invalid alg claim")}}const Yw=/^[0-9a-f]{8}-[0-9a-f]{4}-[0-9a-f]{4}-[0-9a-f]{4}-[0-9a-f]{12}$/;function Er(n){if(!Yw.test(n))throw new Error("@supabase/auth-js: Expected parameter to be UUID but is not")}function Lu(){const n={};return new Proxy(n,{get:(a,l)=>{if(l==="__isUserNotAvailableProxy")return!0;if(typeof l=="symbol"){const i=l.toString();if(i==="Symbol(Symbol.toPrimitive)"||i==="Symbol(Symbol.toStringTag)"||i==="Symbol(util.inspect.custom)")return}throw new Error(`@supabase/auth-js: client was created with userStorage option and there was no user stored in the user storage. Accessing the "${l}" property of the session object is not supported. Please use getUser() instead.`)},set:(a,l)=>{throw new Error(`@supabase/auth-js: client was created with userStorage option and there was no user stored in the user storage. Setting the "${l}" property of the session object is not supported. Please use getUser() to fetch a user object you can manipulate.`)},deleteProperty:(a,l)=>{throw new Error(`@supabase/auth-js: client was created with userStorage option and there was no user stored in the user storage. Deleting the "${l}" property of the session object is not supported. Please use getUser() to fetch a user object you can manipulate.`)}})}function vg(n){return JSON.parse(JSON.stringify(n))}var Fw=function(n,a){var l={};for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&a.indexOf(i)<0&&(l[i]=n[i]);if(n!=null&&typeof Object.getOwnPropertySymbols=="function")for(var c=0,i=Object.getOwnPropertySymbols(n);c<i.length;c++)a.indexOf(i[c])<0&&Object.prototype.propertyIsEnumerable.call(n,i[c])&&(l[i[c]]=n[i[c]]);return l};const Aa=n=>n.msg||n.message||n.error_description||n.error||JSON.stringify(n),Iw=[502,503,504];async function bg(n){var a;if(!Uw(n))throw new ld(Aa(n),0);if(Iw.includes(n.status))throw new ld(Aa(n),n.status);let l;try{l=await n.json()}catch(u){throw new gx(Aa(u),u)}let i;const c=Gw(n);if(c&&c.getTime()>=mx["2024-01-01"].timestamp&&typeof l=="object"&&l&&typeof l.code=="string"?i=l.code:typeof l=="object"&&l&&typeof l.error_code=="string"&&(i=l.error_code),i){if(i==="weak_password")throw new gg(Aa(l),n.status,((a=l.weak_password)===null||a===void 0?void 0:a.reasons)||[]);if(i==="session_not_found")throw new ta}else if(typeof l=="object"&&l&&typeof l.weak_password=="object"&&l.weak_password&&Array.isArray(l.weak_password.reasons)&&l.weak_password.reasons.length&&l.weak_password.reasons.reduce((u,h)=>u&&typeof h=="string",!0))throw new gg(Aa(l),n.status,l.weak_password.reasons);throw new jw(Aa(l),n.status||500,i)}const Kw=(n,a,l,i)=>{const c={method:n,headers:a?.headers||{}};return n==="GET"?c:(c.headers=Object.assign({"Content-Type":"application/json;charset=UTF-8"},a?.headers),c.body=JSON.stringify(i),Object.assign(Object.assign({},c),l))};async function _e(n,a,l,i){var c;const u=Object.assign({},i?.headers);u[nd]||(u[nd]=mx["2024-01-01"].name),i?.jwt&&(u.Authorization=`Bearer ${i.jwt}`);const h=(c=i?.query)!==null&&c!==void 0?c:{};i?.redirectTo&&(h.redirect_to=i.redirectTo);const m=Object.keys(h).length?"?"+new URLSearchParams(h).toString():"",x=await Xw(n,a,l+m,{headers:u,noResolveJson:i?.noResolveJson},{},i?.body);return i?.xform?i?.xform(x):{data:Object.assign({},x),error:null}}async function Xw(n,a,l,i,c,u){const h=Kw(a,i,c,u);let m;try{m=await n(l,Object.assign({},h))}catch(x){throw console.error(x),new ld(Aa(x),0)}if(m.ok||await bg(m),i?.noResolveJson)return m;try{return await m.json()}catch(x){await bg(x)}}function ws(n){var a;let l=null;e_(n)&&(l=Object.assign({},n),n.expires_at||(l.expires_at=Ow(n.expires_in)));const i=(a=n.user)!==null&&a!==void 0?a:n;return{data:{session:l,user:i},error:null}}function jg(n){const a=ws(n);return!a.error&&n.weak_password&&typeof n.weak_password=="object"&&Array.isArray(n.weak_password.reasons)&&n.weak_password.reasons.length&&n.weak_password.message&&typeof n.weak_password.message=="string"&&n.weak_password.reasons.reduce((l,i)=>l&&typeof i=="string",!0)&&(a.data.weak_password=n.weak_password),a}function aa(n){var a;return{data:{user:(a=n.user)!==null&&a!==void 0?a:n},error:null}}function Zw(n){return{data:n,error:null}}function Jw(n){const{action_link:a,email_otp:l,hashed_token:i,redirect_to:c,verification_type:u}=n,h=Fw(n,["action_link","email_otp","hashed_token","redirect_to","verification_type"]),m={action_link:a,email_otp:l,hashed_token:i,redirect_to:c,verification_type:u},x=Object.assign({},h);return{data:{properties:m,user:x},error:null}}function Ww(n){return n}function e_(n){return n.access_token&&n.refresh_token&&n.expires_in}const qu=["global","local","others"];var t_=function(n,a){var l={};for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&a.indexOf(i)<0&&(l[i]=n[i]);if(n!=null&&typeof Object.getOwnPropertySymbols=="function")for(var c=0,i=Object.getOwnPropertySymbols(n);c<i.length;c++)a.indexOf(i[c])<0&&Object.prototype.propertyIsEnumerable.call(n,i[c])&&(l[i[c]]=n[i[c]]);return l};class s_{constructor({url:a="",headers:l={},fetch:i}){this.url=a,this.headers=l,this.fetch=yx(i),this.mfa={listFactors:this._listFactors.bind(this),deleteFactor:this._deleteFactor.bind(this)}}async signOut(a,l=qu[0]){if(qu.indexOf(l)<0)throw new Error(`@supabase/auth-js: Parameter scope must be one of ${qu.join(", ")}`);try{return await _e(this.fetch,"POST",`${this.url}/logout?scope=${l}`,{headers:this.headers,jwt:a,noResolveJson:!0}),{data:null,error:null}}catch(i){if(me(i))return{data:null,error:i};throw i}}async inviteUserByEmail(a,l={}){try{return await _e(this.fetch,"POST",`${this.url}/invite`,{body:{email:a,data:l.data},headers:this.headers,redirectTo:l.redirectTo,xform:aa})}catch(i){if(me(i))return{data:{user:null},error:i};throw i}}async generateLink(a){try{const{options:l}=a,i=t_(a,["options"]),c=Object.assign(Object.assign({},i),l);return"newEmail"in i&&(c.new_email=i?.newEmail,delete c.newEmail),await _e(this.fetch,"POST",`${this.url}/admin/generate_link`,{body:c,headers:this.headers,xform:Jw,redirectTo:l?.redirectTo})}catch(l){if(me(l))return{data:{properties:null,user:null},error:l};throw l}}async createUser(a){try{return await _e(this.fetch,"POST",`${this.url}/admin/users`,{body:a,headers:this.headers,xform:aa})}catch(l){if(me(l))return{data:{user:null},error:l};throw l}}async listUsers(a){var l,i,c,u,h,m,x;try{const g={nextPage:null,lastPage:0,total:0},p=await _e(this.fetch,"GET",`${this.url}/admin/users`,{headers:this.headers,noResolveJson:!0,query:{page:(i=(l=a?.page)===null||l===void 0?void 0:l.toString())!==null&&i!==void 0?i:"",per_page:(u=(c=a?.perPage)===null||c===void 0?void 0:c.toString())!==null&&u!==void 0?u:""},xform:Ww});if(p.error)throw p.error;const v=await p.json(),j=(h=p.headers.get("x-total-count"))!==null&&h!==void 0?h:0,w=(x=(m=p.headers.get("link"))===null||m===void 0?void 0:m.split(","))!==null&&x!==void 0?x:[];return w.length>0&&(w.forEach(N=>{const _=parseInt(N.split(";")[0].split("=")[1].substring(0,1)),C=JSON.parse(N.split(";")[1].split("=")[1]);g[`${C}Page`]=_}),g.total=parseInt(j)),{data:Object.assign(Object.assign({},v),g),error:null}}catch(g){if(me(g))return{data:{users:[]},error:g};throw g}}async getUserById(a){Er(a);try{return await _e(this.fetch,"GET",`${this.url}/admin/users/${a}`,{headers:this.headers,xform:aa})}catch(l){if(me(l))return{data:{user:null},error:l};throw l}}async updateUserById(a,l){Er(a);try{return await _e(this.fetch,"PUT",`${this.url}/admin/users/${a}`,{body:l,headers:this.headers,xform:aa})}catch(i){if(me(i))return{data:{user:null},error:i};throw i}}async deleteUser(a,l=!1){Er(a);try{return await _e(this.fetch,"DELETE",`${this.url}/admin/users/${a}`,{headers:this.headers,body:{should_soft_delete:l},xform:aa})}catch(i){if(me(i))return{data:{user:null},error:i};throw i}}async _listFactors(a){Er(a.userId);try{const{data:l,error:i}=await _e(this.fetch,"GET",`${this.url}/admin/users/${a.userId}/factors`,{headers:this.headers,xform:c=>({data:{factors:c},error:null})});return{data:l,error:i}}catch(l){if(me(l))return{data:null,error:l};throw l}}async _deleteFactor(a){Er(a.userId),Er(a.id);try{return{data:await _e(this.fetch,"DELETE",`${this.url}/admin/users/${a.userId}/factors/${a.id}`,{headers:this.headers}),error:null}}catch(l){if(me(l))return{data:null,error:l};throw l}}}function wg(n={}){return{getItem:a=>n[a]||null,setItem:(a,l)=>{n[a]=l},removeItem:a=>{delete n[a]}}}function a_(){if(typeof globalThis!="object")try{Object.defineProperty(Object.prototype,"__magic__",{get:function(){return this},configurable:!0}),__magic__.globalThis=__magic__,delete Object.prototype.__magic__}catch{typeof self<"u"&&(self.globalThis=self)}}const Ar={debug:!!(globalThis&&px()&&globalThis.localStorage&&globalThis.localStorage.getItem("supabase.gotrue-js.locks.debug")==="true")};class vx extends Error{constructor(a){super(a),this.isAcquireTimeout=!0}}class r_ extends vx{}async function n_(n,a,l){Ar.debug&&console.log("@supabase/gotrue-js: navigatorLock: acquire lock",n,a);const i=new globalThis.AbortController;return a>0&&setTimeout(()=>{i.abort(),Ar.debug&&console.log("@supabase/gotrue-js: navigatorLock acquire timed out",n)},a),await Promise.resolve().then(()=>globalThis.navigator.locks.request(n,a===0?{mode:"exclusive",ifAvailable:!0}:{mode:"exclusive",signal:i.signal},async c=>{if(c){Ar.debug&&console.log("@supabase/gotrue-js: navigatorLock: acquired",n,c.name);try{return await l()}finally{Ar.debug&&console.log("@supabase/gotrue-js: navigatorLock: released",n,c.name)}}else{if(a===0)throw Ar.debug&&console.log("@supabase/gotrue-js: navigatorLock: not immediately available",n),new r_(`Acquiring an exclusive Navigator LockManager lock "${n}" immediately failed`);if(Ar.debug)try{const u=await globalThis.navigator.locks.query();console.log("@supabase/gotrue-js: Navigator LockManager state",JSON.stringify(u,null,"  "))}catch(u){console.warn("@supabase/gotrue-js: Error when querying Navigator LockManager state",u)}return console.warn("@supabase/gotrue-js: Navigator LockManager returned a null lock when using #request without ifAvailable set to true, it appears this browser is not following the LockManager spec https://developer.mozilla.org/en-US/docs/Web/API/LockManager/request"),await l()}}))}a_();const l_={url:xw,storageKey:pw,autoRefreshToken:!0,persistSession:!0,detectSessionInUrl:!0,headers:yw,flowType:"implicit",debug:!1,hasCustomAuthorizationHeader:!1};async function _g(n,a,l){return await l()}const Tr={};class tl{constructor(a){var l,i;this.userStorage=null,this.memoryStorage=null,this.stateChangeEmitters=new Map,this.autoRefreshTicker=null,this.visibilityChangedCallback=null,this.refreshingDeferred=null,this.initializePromise=null,this.detectSessionInUrl=!0,this.hasCustomAuthorizationHeader=!1,this.suppressGetSessionWarning=!1,this.lockAcquired=!1,this.pendingInLock=[],this.broadcastChannel=null,this.logger=console.log,this.instanceID=tl.nextInstanceID,tl.nextInstanceID+=1,this.instanceID>0&&Bt()&&console.warn("Multiple GoTrueClient instances detected in the same browser context. It is not an error, but this should be avoided as it may produce undefined behavior when used concurrently under the same storage key.");const c=Object.assign(Object.assign({},l_),a);if(this.logDebugMessages=!!c.debug,typeof c.debug=="function"&&(this.logger=c.debug),this.persistSession=c.persistSession,this.storageKey=c.storageKey,this.autoRefreshToken=c.autoRefreshToken,this.admin=new s_({url:c.url,headers:c.headers,fetch:c.fetch}),this.url=c.url,this.headers=c.headers,this.fetch=yx(c.fetch),this.lock=c.lock||_g,this.detectSessionInUrl=c.detectSessionInUrl,this.flowType=c.flowType,this.hasCustomAuthorizationHeader=c.hasCustomAuthorizationHeader,c.lock?this.lock=c.lock:Bt()&&(!((l=globalThis?.navigator)===null||l===void 0)&&l.locks)?this.lock=n_:this.lock=_g,this.jwks||(this.jwks={keys:[]},this.jwks_cached_at=Number.MIN_SAFE_INTEGER),this.mfa={verify:this._verify.bind(this),enroll:this._enroll.bind(this),unenroll:this._unenroll.bind(this),challenge:this._challenge.bind(this),listFactors:this._listFactors.bind(this),challengeAndVerify:this._challengeAndVerify.bind(this),getAuthenticatorAssuranceLevel:this._getAuthenticatorAssuranceLevel.bind(this)},this.persistSession?(c.storage?this.storage=c.storage:px()?this.storage=globalThis.localStorage:(this.memoryStorage={},this.storage=wg(this.memoryStorage)),c.userStorage&&(this.userStorage=c.userStorage)):(this.memoryStorage={},this.storage=wg(this.memoryStorage)),Bt()&&globalThis.BroadcastChannel&&this.persistSession&&this.storageKey){try{this.broadcastChannel=new globalThis.BroadcastChannel(this.storageKey)}catch(u){console.error("Failed to create a new BroadcastChannel, multi-tab state changes will not be available",u)}(i=this.broadcastChannel)===null||i===void 0||i.addEventListener("message",async u=>{this._debug("received broadcast notification from other tab or client",u),await this._notifyAllSubscribers(u.data.event,u.data.session,!1)})}this.initialize()}get jwks(){var a,l;return(l=(a=Tr[this.storageKey])===null||a===void 0?void 0:a.jwks)!==null&&l!==void 0?l:{keys:[]}}set jwks(a){Tr[this.storageKey]=Object.assign(Object.assign({},Tr[this.storageKey]),{jwks:a})}get jwks_cached_at(){var a,l;return(l=(a=Tr[this.storageKey])===null||a===void 0?void 0:a.cachedAt)!==null&&l!==void 0?l:Number.MIN_SAFE_INTEGER}set jwks_cached_at(a){Tr[this.storageKey]=Object.assign(Object.assign({},Tr[this.storageKey]),{cachedAt:a})}_debug(...a){return this.logDebugMessages&&this.logger(`GoTrueClient@${this.instanceID} (${fx}) ${new Date().toISOString()}`,...a),this}async initialize(){return this.initializePromise?await this.initializePromise:(this.initializePromise=(async()=>await this._acquireLock(-1,async()=>await this._initialize()))(),await this.initializePromise)}async _initialize(){var a;try{const l=Mw(window.location.href);let i="none";if(this._isImplicitGrantCallback(l)?i="implicit":await this._isPKCECallback(l)&&(i="pkce"),Bt()&&this.detectSessionInUrl&&i!=="none"){const{data:c,error:u}=await this._getSessionFromURL(l,i);if(u){if(this._debug("#_initialize()","error detecting session from URL",u),Nw(u)){const x=(a=u.details)===null||a===void 0?void 0:a.code;if(x==="identity_already_exists"||x==="identity_not_found"||x==="single_identity_not_deletable")return{error:u}}return await this._removeSession(),{error:u}}const{session:h,redirectType:m}=c;return this._debug("#_initialize()","detected session in URL",h,"redirect type",m),await this._saveSession(h),setTimeout(async()=>{m==="recovery"?await this._notifyAllSubscribers("PASSWORD_RECOVERY",h):await this._notifyAllSubscribers("SIGNED_IN",h)},0),{error:null}}return await this._recoverAndRefresh(),{error:null}}catch(l){return me(l)?{error:l}:{error:new gx("Unexpected error during initialization",l)}}finally{await this._handleVisibilityChange(),this._debug("#_initialize()","end")}}async signInAnonymously(a){var l,i,c;try{const u=await _e(this.fetch,"POST",`${this.url}/signup`,{headers:this.headers,body:{data:(i=(l=a?.options)===null||l===void 0?void 0:l.data)!==null&&i!==void 0?i:{},gotrue_meta_security:{captcha_token:(c=a?.options)===null||c===void 0?void 0:c.captchaToken}},xform:ws}),{data:h,error:m}=u;if(m||!h)return{data:{user:null,session:null},error:m};const x=h.session,g=h.user;return h.session&&(await this._saveSession(h.session),await this._notifyAllSubscribers("SIGNED_IN",x)),{data:{user:g,session:x},error:null}}catch(u){if(me(u))return{data:{user:null,session:null},error:u};throw u}}async signUp(a){var l,i,c;try{let u;if("email"in a){const{email:p,password:v,options:j}=a;let w=null,N=null;this.flowType==="pkce"&&([w,N]=await Cr(this.storage,this.storageKey)),u=await _e(this.fetch,"POST",`${this.url}/signup`,{headers:this.headers,redirectTo:j?.emailRedirectTo,body:{email:p,password:v,data:(l=j?.data)!==null&&l!==void 0?l:{},gotrue_meta_security:{captcha_token:j?.captchaToken},code_challenge:w,code_challenge_method:N},xform:ws})}else if("phone"in a){const{phone:p,password:v,options:j}=a;u=await _e(this.fetch,"POST",`${this.url}/signup`,{headers:this.headers,body:{phone:p,password:v,data:(i=j?.data)!==null&&i!==void 0?i:{},channel:(c=j?.channel)!==null&&c!==void 0?c:"sms",gotrue_meta_security:{captcha_token:j?.captchaToken}},xform:ws})}else throw new Ti("You must provide either an email or phone number and a password");const{data:h,error:m}=u;if(m||!h)return{data:{user:null,session:null},error:m};const x=h.session,g=h.user;return h.session&&(await this._saveSession(h.session),await this._notifyAllSubscribers("SIGNED_IN",x)),{data:{user:g,session:x},error:null}}catch(u){if(me(u))return{data:{user:null,session:null},error:u};throw u}}async signInWithPassword(a){try{let l;if("email"in a){const{email:u,password:h,options:m}=a;l=await _e(this.fetch,"POST",`${this.url}/token?grant_type=password`,{headers:this.headers,body:{email:u,password:h,gotrue_meta_security:{captcha_token:m?.captchaToken}},xform:jg})}else if("phone"in a){const{phone:u,password:h,options:m}=a;l=await _e(this.fetch,"POST",`${this.url}/token?grant_type=password`,{headers:this.headers,body:{phone:u,password:h,gotrue_meta_security:{captcha_token:m?.captchaToken}},xform:jg})}else throw new Ti("You must provide either an email or phone number and a password");const{data:i,error:c}=l;return c?{data:{user:null,session:null},error:c}:!i||!i.session||!i.user?{data:{user:null,session:null},error:new Ai}:(i.session&&(await this._saveSession(i.session),await this._notifyAllSubscribers("SIGNED_IN",i.session)),{data:Object.assign({user:i.user,session:i.session},i.weak_password?{weakPassword:i.weak_password}:null),error:c})}catch(l){if(me(l))return{data:{user:null,session:null},error:l};throw l}}async signInWithOAuth(a){var l,i,c,u;return await this._handleProviderSignIn(a.provider,{redirectTo:(l=a.options)===null||l===void 0?void 0:l.redirectTo,scopes:(i=a.options)===null||i===void 0?void 0:i.scopes,queryParams:(c=a.options)===null||c===void 0?void 0:c.queryParams,skipBrowserRedirect:(u=a.options)===null||u===void 0?void 0:u.skipBrowserRedirect})}async exchangeCodeForSession(a){return await this.initializePromise,this._acquireLock(-1,async()=>this._exchangeCodeForSession(a))}async signInWithWeb3(a){const{chain:l}=a;if(l==="solana")return await this.signInWithSolana(a);throw new Error(`@supabase/auth-js: Unsupported chain "${l}"`)}async signInWithSolana(a){var l,i,c,u,h,m,x,g,p,v,j,w;let N,_;if("message"in a)N=a.message,_=a.signature;else{const{chain:C,wallet:O,statement:q,options:L}=a;let z;if(Bt())if(typeof O=="object")z=O;else{const H=window;if("solana"in H&&typeof H.solana=="object"&&("signIn"in H.solana&&typeof H.solana.signIn=="function"||"signMessage"in H.solana&&typeof H.solana.signMessage=="function"))z=H.solana;else throw new Error("@supabase/auth-js: No compatible Solana wallet interface on the window object (window.solana) detected. Make sure the user already has a wallet installed and connected for this app. Prefer passing the wallet interface object directly to signInWithWeb3({ chain: 'solana', wallet: resolvedUserWallet }) instead.")}else{if(typeof O!="object"||!L?.url)throw new Error("@supabase/auth-js: Both wallet and url must be specified in non-browser environments.");z=O}const Q=new URL((l=L?.url)!==null&&l!==void 0?l:window.location.href);if("signIn"in z&&z.signIn){const H=await z.signIn(Object.assign(Object.assign(Object.assign({issuedAt:new Date().toISOString()},L?.signInWithSolana),{version:"1",domain:Q.host,uri:Q.href}),q?{statement:q}:null));let Y;if(Array.isArray(H)&&H[0]&&typeof H[0]=="object")Y=H[0];else if(H&&typeof H=="object"&&"signedMessage"in H&&"signature"in H)Y=H;else throw new Error("@supabase/auth-js: Wallet method signIn() returned unrecognized value");if("signedMessage"in Y&&"signature"in Y&&(typeof Y.signedMessage=="string"||Y.signedMessage instanceof Uint8Array)&&Y.signature instanceof Uint8Array)N=typeof Y.signedMessage=="string"?Y.signedMessage:new TextDecoder().decode(Y.signedMessage),_=Y.signature;else throw new Error("@supabase/auth-js: Wallet method signIn() API returned object without signedMessage and signature fields")}else{if(!("signMessage"in z)||typeof z.signMessage!="function"||!("publicKey"in z)||typeof z!="object"||!z.publicKey||!("toBase58"in z.publicKey)||typeof z.publicKey.toBase58!="function")throw new Error("@supabase/auth-js: Wallet does not have a compatible signMessage() and publicKey.toBase58() API");N=[`${Q.host} wants you to sign in with your Solana account:`,z.publicKey.toBase58(),...q?["",q,""]:[""],"Version: 1",`URI: ${Q.href}`,`Issued At: ${(c=(i=L?.signInWithSolana)===null||i===void 0?void 0:i.issuedAt)!==null&&c!==void 0?c:new Date().toISOString()}`,...!((u=L?.signInWithSolana)===null||u===void 0)&&u.notBefore?[`Not Before: ${L.signInWithSolana.notBefore}`]:[],...!((h=L?.signInWithSolana)===null||h===void 0)&&h.expirationTime?[`Expiration Time: ${L.signInWithSolana.expirationTime}`]:[],...!((m=L?.signInWithSolana)===null||m===void 0)&&m.chainId?[`Chain ID: ${L.signInWithSolana.chainId}`]:[],...!((x=L?.signInWithSolana)===null||x===void 0)&&x.nonce?[`Nonce: ${L.signInWithSolana.nonce}`]:[],...!((g=L?.signInWithSolana)===null||g===void 0)&&g.requestId?[`Request ID: ${L.signInWithSolana.requestId}`]:[],...!((v=(p=L?.signInWithSolana)===null||p===void 0?void 0:p.resources)===null||v===void 0)&&v.length?["Resources",...L.signInWithSolana.resources.map(Y=>`- ${Y}`)]:[]].join(`
`);const H=await z.signMessage(new TextEncoder().encode(N),"utf8");if(!H||!(H instanceof Uint8Array))throw new Error("@supabase/auth-js: Wallet signMessage() API returned an recognized value");_=H}}try{const{data:C,error:O}=await _e(this.fetch,"POST",`${this.url}/token?grant_type=web3`,{headers:this.headers,body:Object.assign({chain:"solana",message:N,signature:Rw(_)},!((j=a.options)===null||j===void 0)&&j.captchaToken?{gotrue_meta_security:{captcha_token:(w=a.options)===null||w===void 0?void 0:w.captchaToken}}:null),xform:ws});if(O)throw O;return!C||!C.session||!C.user?{data:{user:null,session:null},error:new Ai}:(C.session&&(await this._saveSession(C.session),await this._notifyAllSubscribers("SIGNED_IN",C.session)),{data:Object.assign({},C),error:O})}catch(C){if(me(C))return{data:{user:null,session:null},error:C};throw C}}async _exchangeCodeForSession(a){const l=await Ca(this.storage,`${this.storageKey}-code-verifier`),[i,c]=(l??"").split("/");try{const{data:u,error:h}=await _e(this.fetch,"POST",`${this.url}/token?grant_type=pkce`,{headers:this.headers,body:{auth_code:a,code_verifier:i},xform:ws});if(await ea(this.storage,`${this.storageKey}-code-verifier`),h)throw h;return!u||!u.session||!u.user?{data:{user:null,session:null,redirectType:null},error:new Ai}:(u.session&&(await this._saveSession(u.session),await this._notifyAllSubscribers("SIGNED_IN",u.session)),{data:Object.assign(Object.assign({},u),{redirectType:c??null}),error:h})}catch(u){if(me(u))return{data:{user:null,session:null,redirectType:null},error:u};throw u}}async signInWithIdToken(a){try{const{options:l,provider:i,token:c,access_token:u,nonce:h}=a,m=await _e(this.fetch,"POST",`${this.url}/token?grant_type=id_token`,{headers:this.headers,body:{provider:i,id_token:c,access_token:u,nonce:h,gotrue_meta_security:{captcha_token:l?.captchaToken}},xform:ws}),{data:x,error:g}=m;return g?{data:{user:null,session:null},error:g}:!x||!x.session||!x.user?{data:{user:null,session:null},error:new Ai}:(x.session&&(await this._saveSession(x.session),await this._notifyAllSubscribers("SIGNED_IN",x.session)),{data:x,error:g})}catch(l){if(me(l))return{data:{user:null,session:null},error:l};throw l}}async signInWithOtp(a){var l,i,c,u,h;try{if("email"in a){const{email:m,options:x}=a;let g=null,p=null;this.flowType==="pkce"&&([g,p]=await Cr(this.storage,this.storageKey));const{error:v}=await _e(this.fetch,"POST",`${this.url}/otp`,{headers:this.headers,body:{email:m,data:(l=x?.data)!==null&&l!==void 0?l:{},create_user:(i=x?.shouldCreateUser)!==null&&i!==void 0?i:!0,gotrue_meta_security:{captcha_token:x?.captchaToken},code_challenge:g,code_challenge_method:p},redirectTo:x?.emailRedirectTo});return{data:{user:null,session:null},error:v}}if("phone"in a){const{phone:m,options:x}=a,{data:g,error:p}=await _e(this.fetch,"POST",`${this.url}/otp`,{headers:this.headers,body:{phone:m,data:(c=x?.data)!==null&&c!==void 0?c:{},create_user:(u=x?.shouldCreateUser)!==null&&u!==void 0?u:!0,gotrue_meta_security:{captcha_token:x?.captchaToken},channel:(h=x?.channel)!==null&&h!==void 0?h:"sms"}});return{data:{user:null,session:null,messageId:g?.message_id},error:p}}throw new Ti("You must provide either an email or phone number.")}catch(m){if(me(m))return{data:{user:null,session:null},error:m};throw m}}async verifyOtp(a){var l,i;try{let c,u;"options"in a&&(c=(l=a.options)===null||l===void 0?void 0:l.redirectTo,u=(i=a.options)===null||i===void 0?void 0:i.captchaToken);const{data:h,error:m}=await _e(this.fetch,"POST",`${this.url}/verify`,{headers:this.headers,body:Object.assign(Object.assign({},a),{gotrue_meta_security:{captcha_token:u}}),redirectTo:c,xform:ws});if(m)throw m;if(!h)throw new Error("An error occurred on token verification.");const x=h.session,g=h.user;return x?.access_token&&(await this._saveSession(x),await this._notifyAllSubscribers(a.type=="recovery"?"PASSWORD_RECOVERY":"SIGNED_IN",x)),{data:{user:g,session:x},error:null}}catch(c){if(me(c))return{data:{user:null,session:null},error:c};throw c}}async signInWithSSO(a){var l,i,c;try{let u=null,h=null;return this.flowType==="pkce"&&([u,h]=await Cr(this.storage,this.storageKey)),await _e(this.fetch,"POST",`${this.url}/sso`,{body:Object.assign(Object.assign(Object.assign(Object.assign(Object.assign({},"providerId"in a?{provider_id:a.providerId}:null),"domain"in a?{domain:a.domain}:null),{redirect_to:(i=(l=a.options)===null||l===void 0?void 0:l.redirectTo)!==null&&i!==void 0?i:void 0}),!((c=a?.options)===null||c===void 0)&&c.captchaToken?{gotrue_meta_security:{captcha_token:a.options.captchaToken}}:null),{skip_http_redirect:!0,code_challenge:u,code_challenge_method:h}),headers:this.headers,xform:Zw})}catch(u){if(me(u))return{data:null,error:u};throw u}}async reauthenticate(){return await this.initializePromise,await this._acquireLock(-1,async()=>await this._reauthenticate())}async _reauthenticate(){try{return await this._useSession(async a=>{const{data:{session:l},error:i}=a;if(i)throw i;if(!l)throw new ta;const{error:c}=await _e(this.fetch,"GET",`${this.url}/reauthenticate`,{headers:this.headers,jwt:l.access_token});return{data:{user:null,session:null},error:c}})}catch(a){if(me(a))return{data:{user:null,session:null},error:a};throw a}}async resend(a){try{const l=`${this.url}/resend`;if("email"in a){const{email:i,type:c,options:u}=a,{error:h}=await _e(this.fetch,"POST",l,{headers:this.headers,body:{email:i,type:c,gotrue_meta_security:{captcha_token:u?.captchaToken}},redirectTo:u?.emailRedirectTo});return{data:{user:null,session:null},error:h}}else if("phone"in a){const{phone:i,type:c,options:u}=a,{data:h,error:m}=await _e(this.fetch,"POST",l,{headers:this.headers,body:{phone:i,type:c,gotrue_meta_security:{captcha_token:u?.captchaToken}}});return{data:{user:null,session:null,messageId:h?.message_id},error:m}}throw new Ti("You must provide either an email or phone number and a type")}catch(l){if(me(l))return{data:{user:null,session:null},error:l};throw l}}async getSession(){return await this.initializePromise,await this._acquireLock(-1,async()=>this._useSession(async l=>l))}async _acquireLock(a,l){this._debug("#_acquireLock","begin",a);try{if(this.lockAcquired){const i=this.pendingInLock.length?this.pendingInLock[this.pendingInLock.length-1]:Promise.resolve(),c=(async()=>(await i,await l()))();return this.pendingInLock.push((async()=>{try{await c}catch{}})()),c}return await this.lock(`lock:${this.storageKey}`,a,async()=>{this._debug("#_acquireLock","lock acquired for storage key",this.storageKey);try{this.lockAcquired=!0;const i=l();for(this.pendingInLock.push((async()=>{try{await i}catch{}})()),await i;this.pendingInLock.length;){const c=[...this.pendingInLock];await Promise.all(c),this.pendingInLock.splice(0,c.length)}return await i}finally{this._debug("#_acquireLock","lock released for storage key",this.storageKey),this.lockAcquired=!1}})}finally{this._debug("#_acquireLock","end")}}async _useSession(a){this._debug("#_useSession","begin");try{const l=await this.__loadSession();return await a(l)}finally{this._debug("#_useSession","end")}}async __loadSession(){this._debug("#__loadSession()","begin"),this.lockAcquired||this._debug("#__loadSession()","used outside of an acquired lock!",new Error().stack);try{let a=null;const l=await Ca(this.storage,this.storageKey);if(this._debug("#getSession()","session from storage",l),l!==null&&(this._isValidSession(l)?a=l:(this._debug("#getSession()","session from storage is not valid"),await this._removeSession())),!a)return{data:{session:null},error:null};const i=a.expires_at?a.expires_at*1e3-Date.now()<Mu:!1;if(this._debug("#__loadSession()",`session has${i?"":" not"} expired`,"expires_at",a.expires_at),!i){if(this.userStorage){const h=await Ca(this.userStorage,this.storageKey+"-user");h?.user?a.user=h.user:a.user=Lu()}if(this.storage.isServer&&a.user){let h=this.suppressGetSessionWarning;a=new Proxy(a,{get:(x,g,p)=>(!h&&g==="user"&&(console.warn("Using the user object as returned from supabase.auth.getSession() or from some supabase.auth.onAuthStateChange() events could be insecure! This value comes directly from the storage medium (usually cookies on the server) and may not be authentic. Use supabase.auth.getUser() instead which authenticates the data by contacting the Supabase Auth server."),h=!0,this.suppressGetSessionWarning=!0),Reflect.get(x,g,p))})}return{data:{session:a},error:null}}const{session:c,error:u}=await this._callRefreshToken(a.refresh_token);return u?{data:{session:null},error:u}:{data:{session:c},error:null}}finally{this._debug("#__loadSession()","end")}}async getUser(a){return a?await this._getUser(a):(await this.initializePromise,await this._acquireLock(-1,async()=>await this._getUser()))}async _getUser(a){try{return a?await _e(this.fetch,"GET",`${this.url}/user`,{headers:this.headers,jwt:a,xform:aa}):await this._useSession(async l=>{var i,c,u;const{data:h,error:m}=l;if(m)throw m;return!(!((i=h.session)===null||i===void 0)&&i.access_token)&&!this.hasCustomAuthorizationHeader?{data:{user:null},error:new ta}:await _e(this.fetch,"GET",`${this.url}/user`,{headers:this.headers,jwt:(u=(c=h.session)===null||c===void 0?void 0:c.access_token)!==null&&u!==void 0?u:void 0,xform:aa})})}catch(l){if(me(l))return _w(l)&&(await this._removeSession(),await ea(this.storage,`${this.storageKey}-code-verifier`)),{data:{user:null},error:l};throw l}}async updateUser(a,l={}){return await this.initializePromise,await this._acquireLock(-1,async()=>await this._updateUser(a,l))}async _updateUser(a,l={}){try{return await this._useSession(async i=>{const{data:c,error:u}=i;if(u)throw u;if(!c.session)throw new ta;const h=c.session;let m=null,x=null;this.flowType==="pkce"&&a.email!=null&&([m,x]=await Cr(this.storage,this.storageKey));const{data:g,error:p}=await _e(this.fetch,"PUT",`${this.url}/user`,{headers:this.headers,redirectTo:l?.emailRedirectTo,body:Object.assign(Object.assign({},a),{code_challenge:m,code_challenge_method:x}),jwt:h.access_token,xform:aa});if(p)throw p;return h.user=g.user,await this._saveSession(h),await this._notifyAllSubscribers("USER_UPDATED",h),{data:{user:h.user},error:null}})}catch(i){if(me(i))return{data:{user:null},error:i};throw i}}async setSession(a){return await this.initializePromise,await this._acquireLock(-1,async()=>await this._setSession(a))}async _setSession(a){try{if(!a.access_token||!a.refresh_token)throw new ta;const l=Date.now()/1e3;let i=l,c=!0,u=null;const{payload:h}=Pu(a.access_token);if(h.exp&&(i=h.exp,c=i<=l),c){const{session:m,error:x}=await this._callRefreshToken(a.refresh_token);if(x)return{data:{user:null,session:null},error:x};if(!m)return{data:{user:null,session:null},error:null};u=m}else{const{data:m,error:x}=await this._getUser(a.access_token);if(x)throw x;u={access_token:a.access_token,refresh_token:a.refresh_token,user:m.user,token_type:"bearer",expires_in:i-l,expires_at:i},await this._saveSession(u),await this._notifyAllSubscribers("SIGNED_IN",u)}return{data:{user:u.user,session:u},error:null}}catch(l){if(me(l))return{data:{session:null,user:null},error:l};throw l}}async refreshSession(a){return await this.initializePromise,await this._acquireLock(-1,async()=>await this._refreshSession(a))}async _refreshSession(a){try{return await this._useSession(async l=>{var i;if(!a){const{data:h,error:m}=l;if(m)throw m;a=(i=h.session)!==null&&i!==void 0?i:void 0}if(!a?.refresh_token)throw new ta;const{session:c,error:u}=await this._callRefreshToken(a.refresh_token);return u?{data:{user:null,session:null},error:u}:c?{data:{user:c.user,session:c},error:null}:{data:{user:null,session:null},error:null}})}catch(l){if(me(l))return{data:{user:null,session:null},error:l};throw l}}async _getSessionFromURL(a,l){try{if(!Bt())throw new Ri("No browser detected.");if(a.error||a.error_description||a.error_code)throw new Ri(a.error_description||"Error in URL with unspecified error_description",{error:a.error||"unspecified_error",code:a.error_code||"unspecified_code"});switch(l){case"implicit":if(this.flowType==="pkce")throw new mg("Not a valid PKCE flow url.");break;case"pkce":if(this.flowType==="implicit")throw new Ri("Not a valid implicit grant flow url.");break;default:}if(l==="pkce"){if(this._debug("#_initialize()","begin","is PKCE flow",!0),!a.code)throw new mg("No code detected.");const{data:q,error:L}=await this._exchangeCodeForSession(a.code);if(L)throw L;const z=new URL(window.location.href);return z.searchParams.delete("code"),window.history.replaceState(window.history.state,"",z.toString()),{data:{session:q.session,redirectType:null},error:null}}const{provider_token:i,provider_refresh_token:c,access_token:u,refresh_token:h,expires_in:m,expires_at:x,token_type:g}=a;if(!u||!m||!h||!g)throw new Ri("No session defined in URL");const p=Math.round(Date.now()/1e3),v=parseInt(m);let j=p+v;x&&(j=parseInt(x));const w=j-p;w*1e3<=Or&&console.warn(`@supabase/gotrue-js: Session as retrieved from URL expires in ${w}s, should have been closer to ${v}s`);const N=j-v;p-N>=120?console.warn("@supabase/gotrue-js: Session as retrieved from URL was issued over 120s ago, URL could be stale",N,j,p):p-N<0&&console.warn("@supabase/gotrue-js: Session as retrieved from URL was issued in the future? Check the device clock for skew",N,j,p);const{data:_,error:C}=await this._getUser(u);if(C)throw C;const O={provider_token:i,provider_refresh_token:c,access_token:u,expires_in:v,expires_at:j,refresh_token:h,token_type:g,user:_.user};return window.location.hash="",this._debug("#_getSessionFromURL()","clearing window.location.hash"),{data:{session:O,redirectType:a.type},error:null}}catch(i){if(me(i))return{data:{session:null,redirectType:null},error:i};throw i}}_isImplicitGrantCallback(a){return!!(a.access_token||a.error_description)}async _isPKCECallback(a){const l=await Ca(this.storage,`${this.storageKey}-code-verifier`);return!!(a.code&&l)}async signOut(a={scope:"global"}){return await this.initializePromise,await this._acquireLock(-1,async()=>await this._signOut(a))}async _signOut({scope:a}={scope:"global"}){return await this._useSession(async l=>{var i;const{data:c,error:u}=l;if(u)return{error:u};const h=(i=c.session)===null||i===void 0?void 0:i.access_token;if(h){const{error:m}=await this.admin.signOut(h,a);if(m&&!(ww(m)&&(m.status===404||m.status===401||m.status===403)))return{error:m}}return a!=="others"&&(await this._removeSession(),await ea(this.storage,`${this.storageKey}-code-verifier`)),{error:null}})}onAuthStateChange(a){const l=Dw(),i={id:l,callback:a,unsubscribe:()=>{this._debug("#unsubscribe()","state change callback with id removed",l),this.stateChangeEmitters.delete(l)}};return this._debug("#onAuthStateChange()","registered callback with id",l),this.stateChangeEmitters.set(l,i),(async()=>(await this.initializePromise,await this._acquireLock(-1,async()=>{this._emitInitialSession(l)})))(),{data:{subscription:i}}}async _emitInitialSession(a){return await this._useSession(async l=>{var i,c;try{const{data:{session:u},error:h}=l;if(h)throw h;await((i=this.stateChangeEmitters.get(a))===null||i===void 0?void 0:i.callback("INITIAL_SESSION",u)),this._debug("INITIAL_SESSION","callback id",a,"session",u)}catch(u){await((c=this.stateChangeEmitters.get(a))===null||c===void 0?void 0:c.callback("INITIAL_SESSION",null)),this._debug("INITIAL_SESSION","callback id",a,"error",u),console.error(u)}})}async resetPasswordForEmail(a,l={}){let i=null,c=null;this.flowType==="pkce"&&([i,c]=await Cr(this.storage,this.storageKey,!0));try{return await _e(this.fetch,"POST",`${this.url}/recover`,{body:{email:a,code_challenge:i,code_challenge_method:c,gotrue_meta_security:{captcha_token:l.captchaToken}},headers:this.headers,redirectTo:l.redirectTo})}catch(u){if(me(u))return{data:null,error:u};throw u}}async getUserIdentities(){var a;try{const{data:l,error:i}=await this.getUser();if(i)throw i;return{data:{identities:(a=l.user.identities)!==null&&a!==void 0?a:[]},error:null}}catch(l){if(me(l))return{data:null,error:l};throw l}}async linkIdentity(a){var l;try{const{data:i,error:c}=await this._useSession(async u=>{var h,m,x,g,p;const{data:v,error:j}=u;if(j)throw j;const w=await this._getUrlForProvider(`${this.url}/user/identities/authorize`,a.provider,{redirectTo:(h=a.options)===null||h===void 0?void 0:h.redirectTo,scopes:(m=a.options)===null||m===void 0?void 0:m.scopes,queryParams:(x=a.options)===null||x===void 0?void 0:x.queryParams,skipBrowserRedirect:!0});return await _e(this.fetch,"GET",w,{headers:this.headers,jwt:(p=(g=v.session)===null||g===void 0?void 0:g.access_token)!==null&&p!==void 0?p:void 0})});if(c)throw c;return Bt()&&!(!((l=a.options)===null||l===void 0)&&l.skipBrowserRedirect)&&window.location.assign(i?.url),{data:{provider:a.provider,url:i?.url},error:null}}catch(i){if(me(i))return{data:{provider:a.provider,url:null},error:i};throw i}}async unlinkIdentity(a){try{return await this._useSession(async l=>{var i,c;const{data:u,error:h}=l;if(h)throw h;return await _e(this.fetch,"DELETE",`${this.url}/user/identities/${a.identity_id}`,{headers:this.headers,jwt:(c=(i=u.session)===null||i===void 0?void 0:i.access_token)!==null&&c!==void 0?c:void 0})})}catch(l){if(me(l))return{data:null,error:l};throw l}}async _refreshAccessToken(a){const l=`#_refreshAccessToken(${a.substring(0,5)}...)`;this._debug(l,"begin");try{const i=Date.now();return await Lw(async c=>(c>0&&await Pw(200*Math.pow(2,c-1)),this._debug(l,"refreshing attempt",c),await _e(this.fetch,"POST",`${this.url}/token?grant_type=refresh_token`,{body:{refresh_token:a},headers:this.headers,xform:ws})),(c,u)=>{const h=200*Math.pow(2,c);return u&&Uu(u)&&Date.now()+h-i<Or})}catch(i){if(this._debug(l,"error",i),me(i))return{data:{session:null,user:null},error:i};throw i}finally{this._debug(l,"end")}}_isValidSession(a){return typeof a=="object"&&a!==null&&"access_token"in a&&"refresh_token"in a&&"expires_at"in a}async _handleProviderSignIn(a,l){const i=await this._getUrlForProvider(`${this.url}/authorize`,a,{redirectTo:l.redirectTo,scopes:l.scopes,queryParams:l.queryParams});return this._debug("#_handleProviderSignIn()","provider",a,"options",l,"url",i),Bt()&&!l.skipBrowserRedirect&&window.location.assign(i),{data:{provider:a,url:i},error:null}}async _recoverAndRefresh(){var a,l;const i="#_recoverAndRefresh()";this._debug(i,"begin");try{const c=await Ca(this.storage,this.storageKey);if(c&&this.userStorage){let h=await Ca(this.userStorage,this.storageKey+"-user");!this.storage.isServer&&Object.is(this.storage,this.userStorage)&&!h&&(h={user:c.user},await Dr(this.userStorage,this.storageKey+"-user",h)),c.user=(a=h?.user)!==null&&a!==void 0?a:Lu()}else if(c&&!c.user&&!c.user){const h=await Ca(this.storage,this.storageKey+"-user");h&&h?.user?(c.user=h.user,await ea(this.storage,this.storageKey+"-user"),await Dr(this.storage,this.storageKey,c)):c.user=Lu()}if(this._debug(i,"session from storage",c),!this._isValidSession(c)){this._debug(i,"session is not valid"),c!==null&&await this._removeSession();return}const u=((l=c.expires_at)!==null&&l!==void 0?l:1/0)*1e3-Date.now()<Mu;if(this._debug(i,`session has${u?"":" not"} expired with margin of ${Mu}s`),u){if(this.autoRefreshToken&&c.refresh_token){const{error:h}=await this._callRefreshToken(c.refresh_token);h&&(console.error(h),Uu(h)||(this._debug(i,"refresh failed with a non-retryable error, removing the session",h),await this._removeSession()))}}else if(c.user&&c.user.__isUserNotAvailableProxy===!0)try{const{data:h,error:m}=await this._getUser(c.access_token);!m&&h?.user?(c.user=h.user,await this._saveSession(c),await this._notifyAllSubscribers("SIGNED_IN",c)):this._debug(i,"could not get user data, skipping SIGNED_IN notification")}catch(h){console.error("Error getting user data:",h),this._debug(i,"error getting user data, skipping SIGNED_IN notification",h)}else await this._notifyAllSubscribers("SIGNED_IN",c)}catch(c){this._debug(i,"error",c),console.error(c);return}finally{this._debug(i,"end")}}async _callRefreshToken(a){var l,i;if(!a)throw new ta;if(this.refreshingDeferred)return this.refreshingDeferred.promise;const c=`#_callRefreshToken(${a.substring(0,5)}...)`;this._debug(c,"begin");try{this.refreshingDeferred=new eo;const{data:u,error:h}=await this._refreshAccessToken(a);if(h)throw h;if(!u.session)throw new ta;await this._saveSession(u.session),await this._notifyAllSubscribers("TOKEN_REFRESHED",u.session);const m={session:u.session,error:null};return this.refreshingDeferred.resolve(m),m}catch(u){if(this._debug(c,"error",u),me(u)){const h={session:null,error:u};return Uu(u)||await this._removeSession(),(l=this.refreshingDeferred)===null||l===void 0||l.resolve(h),h}throw(i=this.refreshingDeferred)===null||i===void 0||i.reject(u),u}finally{this.refreshingDeferred=null,this._debug(c,"end")}}async _notifyAllSubscribers(a,l,i=!0){const c=`#_notifyAllSubscribers(${a})`;this._debug(c,"begin",l,`broadcast = ${i}`);try{this.broadcastChannel&&i&&this.broadcastChannel.postMessage({event:a,session:l});const u=[],h=Array.from(this.stateChangeEmitters.values()).map(async m=>{try{await m.callback(a,l)}catch(x){u.push(x)}});if(await Promise.all(h),u.length>0){for(let m=0;m<u.length;m+=1)console.error(u[m]);throw u[0]}}finally{this._debug(c,"end")}}async _saveSession(a){this._debug("#_saveSession()",a),this.suppressGetSessionWarning=!0;const l=Object.assign({},a),i=l.user&&l.user.__isUserNotAvailableProxy===!0;if(this.userStorage){!i&&l.user&&await Dr(this.userStorage,this.storageKey+"-user",{user:l.user});const c=Object.assign({},l);delete c.user;const u=vg(c);await Dr(this.storage,this.storageKey,u)}else{const c=vg(l);await Dr(this.storage,this.storageKey,c)}}async _removeSession(){this._debug("#_removeSession()"),await ea(this.storage,this.storageKey),await ea(this.storage,this.storageKey+"-code-verifier"),await ea(this.storage,this.storageKey+"-user"),this.userStorage&&await ea(this.userStorage,this.storageKey+"-user"),await this._notifyAllSubscribers("SIGNED_OUT",null)}_removeVisibilityChangedCallback(){this._debug("#_removeVisibilityChangedCallback()");const a=this.visibilityChangedCallback;this.visibilityChangedCallback=null;try{a&&Bt()&&window?.removeEventListener&&window.removeEventListener("visibilitychange",a)}catch(l){console.error("removing visibilitychange callback failed",l)}}async _startAutoRefresh(){await this._stopAutoRefresh(),this._debug("#_startAutoRefresh()");const a=setInterval(()=>this._autoRefreshTokenTick(),Or);this.autoRefreshTicker=a,a&&typeof a=="object"&&typeof a.unref=="function"?a.unref():typeof Deno<"u"&&typeof Deno.unrefTimer=="function"&&Deno.unrefTimer(a),setTimeout(async()=>{await this.initializePromise,await this._autoRefreshTokenTick()},0)}async _stopAutoRefresh(){this._debug("#_stopAutoRefresh()");const a=this.autoRefreshTicker;this.autoRefreshTicker=null,a&&clearInterval(a)}async startAutoRefresh(){this._removeVisibilityChangedCallback(),await this._startAutoRefresh()}async stopAutoRefresh(){this._removeVisibilityChangedCallback(),await this._stopAutoRefresh()}async _autoRefreshTokenTick(){this._debug("#_autoRefreshTokenTick()","begin");try{await this._acquireLock(0,async()=>{try{const a=Date.now();try{return await this._useSession(async l=>{const{data:{session:i}}=l;if(!i||!i.refresh_token||!i.expires_at){this._debug("#_autoRefreshTokenTick()","no session");return}const c=Math.floor((i.expires_at*1e3-a)/Or);this._debug("#_autoRefreshTokenTick()",`access token expires in ${c} ticks, a tick lasts ${Or}ms, refresh threshold is ${rd} ticks`),c<=rd&&await this._callRefreshToken(i.refresh_token)})}catch(l){console.error("Auto refresh tick failed with error. This is likely a transient error.",l)}}finally{this._debug("#_autoRefreshTokenTick()","end")}})}catch(a){if(a.isAcquireTimeout||a instanceof vx)this._debug("auto refresh token tick lock not available");else throw a}}async _handleVisibilityChange(){if(this._debug("#_handleVisibilityChange()"),!Bt()||!window?.addEventListener)return this.autoRefreshToken&&this.startAutoRefresh(),!1;try{this.visibilityChangedCallback=async()=>await this._onVisibilityChanged(!1),window?.addEventListener("visibilitychange",this.visibilityChangedCallback),await this._onVisibilityChanged(!0)}catch(a){console.error("_handleVisibilityChange",a)}}async _onVisibilityChanged(a){const l=`#_onVisibilityChanged(${a})`;this._debug(l,"visibilityState",document.visibilityState),document.visibilityState==="visible"?(this.autoRefreshToken&&this._startAutoRefresh(),a||(await this.initializePromise,await this._acquireLock(-1,async()=>{if(document.visibilityState!=="visible"){this._debug(l,"acquired the lock to recover the session, but the browser visibilityState is no longer visible, aborting");return}await this._recoverAndRefresh()}))):document.visibilityState==="hidden"&&this.autoRefreshToken&&this._stopAutoRefresh()}async _getUrlForProvider(a,l,i){const c=[`provider=${encodeURIComponent(l)}`];if(i?.redirectTo&&c.push(`redirect_to=${encodeURIComponent(i.redirectTo)}`),i?.scopes&&c.push(`scopes=${encodeURIComponent(i.scopes)}`),this.flowType==="pkce"){const[u,h]=await Cr(this.storage,this.storageKey),m=new URLSearchParams({code_challenge:`${encodeURIComponent(u)}`,code_challenge_method:`${encodeURIComponent(h)}`});c.push(m.toString())}if(i?.queryParams){const u=new URLSearchParams(i.queryParams);c.push(u.toString())}return i?.skipBrowserRedirect&&c.push(`skip_http_redirect=${i.skipBrowserRedirect}`),`${a}?${c.join("&")}`}async _unenroll(a){try{return await this._useSession(async l=>{var i;const{data:c,error:u}=l;return u?{data:null,error:u}:await _e(this.fetch,"DELETE",`${this.url}/factors/${a.factorId}`,{headers:this.headers,jwt:(i=c?.session)===null||i===void 0?void 0:i.access_token})})}catch(l){if(me(l))return{data:null,error:l};throw l}}async _enroll(a){try{return await this._useSession(async l=>{var i,c;const{data:u,error:h}=l;if(h)return{data:null,error:h};const m=Object.assign({friendly_name:a.friendlyName,factor_type:a.factorType},a.factorType==="phone"?{phone:a.phone}:{issuer:a.issuer}),{data:x,error:g}=await _e(this.fetch,"POST",`${this.url}/factors`,{body:m,headers:this.headers,jwt:(i=u?.session)===null||i===void 0?void 0:i.access_token});return g?{data:null,error:g}:(a.factorType==="totp"&&(!((c=x?.totp)===null||c===void 0)&&c.qr_code)&&(x.totp.qr_code=`data:image/svg+xml;utf-8,${x.totp.qr_code}`),{data:x,error:null})})}catch(l){if(me(l))return{data:null,error:l};throw l}}async _verify(a){return this._acquireLock(-1,async()=>{try{return await this._useSession(async l=>{var i;const{data:c,error:u}=l;if(u)return{data:null,error:u};const{data:h,error:m}=await _e(this.fetch,"POST",`${this.url}/factors/${a.factorId}/verify`,{body:{code:a.code,challenge_id:a.challengeId},headers:this.headers,jwt:(i=c?.session)===null||i===void 0?void 0:i.access_token});return m?{data:null,error:m}:(await this._saveSession(Object.assign({expires_at:Math.round(Date.now()/1e3)+h.expires_in},h)),await this._notifyAllSubscribers("MFA_CHALLENGE_VERIFIED",h),{data:h,error:m})})}catch(l){if(me(l))return{data:null,error:l};throw l}})}async _challenge(a){return this._acquireLock(-1,async()=>{try{return await this._useSession(async l=>{var i;const{data:c,error:u}=l;return u?{data:null,error:u}:await _e(this.fetch,"POST",`${this.url}/factors/${a.factorId}/challenge`,{body:{channel:a.channel},headers:this.headers,jwt:(i=c?.session)===null||i===void 0?void 0:i.access_token})})}catch(l){if(me(l))return{data:null,error:l};throw l}})}async _challengeAndVerify(a){const{data:l,error:i}=await this._challenge({factorId:a.factorId});return i?{data:null,error:i}:await this._verify({factorId:a.factorId,challengeId:l.id,code:a.code})}async _listFactors(){const{data:{user:a},error:l}=await this.getUser();if(l)return{data:null,error:l};const i=a?.factors||[],c=i.filter(h=>h.factor_type==="totp"&&h.status==="verified"),u=i.filter(h=>h.factor_type==="phone"&&h.status==="verified");return{data:{all:i,totp:c,phone:u},error:null}}async _getAuthenticatorAssuranceLevel(){return this._acquireLock(-1,async()=>await this._useSession(async a=>{var l,i;const{data:{session:c},error:u}=a;if(u)return{data:null,error:u};if(!c)return{data:{currentLevel:null,nextLevel:null,currentAuthenticationMethods:[]},error:null};const{payload:h}=Pu(c.access_token);let m=null;h.aal&&(m=h.aal);let x=m;((i=(l=c.user.factors)===null||l===void 0?void 0:l.filter(v=>v.status==="verified"))!==null&&i!==void 0?i:[]).length>0&&(x="aal2");const p=h.amr||[];return{data:{currentLevel:m,nextLevel:x,currentAuthenticationMethods:p},error:null}}))}async fetchJwk(a,l={keys:[]}){let i=l.keys.find(m=>m.kid===a);if(i)return i;const c=Date.now();if(i=this.jwks.keys.find(m=>m.kid===a),i&&this.jwks_cached_at+bw>c)return i;const{data:u,error:h}=await _e(this.fetch,"GET",`${this.url}/.well-known/jwks.json`,{headers:this.headers});if(h)throw h;return!u.keys||u.keys.length===0||(this.jwks=u,this.jwks_cached_at=c,i=u.keys.find(m=>m.kid===a),!i)?null:i}async getClaims(a,l={}){try{let i=a;if(!i){const{data:w,error:N}=await this.getSession();if(N||!w.session)return{data:null,error:N};i=w.session.access_token}const{header:c,payload:u,signature:h,raw:{header:m,payload:x}}=Pu(i);l?.allowExpired||Vw(u.exp);const g=!c.alg||c.alg.startsWith("HS")||!c.kid||!("crypto"in globalThis&&"subtle"in globalThis.crypto)?null:await this.fetchJwk(c.kid,l?.keys?{keys:l.keys}:l?.jwks);if(!g){const{error:w}=await this.getUser(i);if(w)throw w;return{data:{claims:u,header:c,signature:h},error:null}}const p=Qw(c.alg),v=await crypto.subtle.importKey("jwk",g,p,!0,["verify"]);if(!await crypto.subtle.verify(p,v,h,Tw(`${m}.${x}`)))throw new id("Invalid JWT signature");return{data:{claims:u,header:c,signature:h},error:null}}catch(i){if(me(i))return{data:null,error:i};throw i}}}tl.nextInstanceID=0;const i_=tl;class o_ extends i_{constructor(a){super(a)}}var c_=function(n,a,l,i){function c(u){return u instanceof l?u:new l(function(h){h(u)})}return new(l||(l=Promise))(function(u,h){function m(p){try{g(i.next(p))}catch(v){h(v)}}function x(p){try{g(i.throw(p))}catch(v){h(v)}}function g(p){p.done?u(p.value):c(p.value).then(m,x)}g((i=i.apply(n,a||[])).next())})};class u_{constructor(a,l,i){var c,u,h;if(this.supabaseUrl=a,this.supabaseKey=l,!a)throw new Error("supabaseUrl is required.");if(!l)throw new Error("supabaseKey is required.");const m=mw(a),x=new URL(m);this.realtimeUrl=new URL("realtime/v1",x),this.realtimeUrl.protocol=this.realtimeUrl.protocol.replace("http","ws"),this.authUrl=new URL("auth/v1",x),this.storageUrl=new URL("storage/v1",x),this.functionsUrl=new URL("functions/v1",x);const g=`sb-${x.hostname.split(".")[0]}-auth-token`,p={db:lw,realtime:ow,auth:Object.assign(Object.assign({},iw),{storageKey:g}),global:nw},v=gw(i??{},p);this.storageKey=(c=v.auth.storageKey)!==null&&c!==void 0?c:"",this.headers=(u=v.global.headers)!==null&&u!==void 0?u:{},v.accessToken?(this.accessToken=v.accessToken,this.auth=new Proxy({},{get:(j,w)=>{throw new Error(`@supabase/supabase-js: Supabase Client is configured with the accessToken option, accessing supabase.auth.${String(w)} is not possible`)}})):this.auth=this._initSupabaseAuthClient((h=v.auth)!==null&&h!==void 0?h:{},this.headers,v.global.fetch),this.fetch=hw(l,this._getAccessToken.bind(this),v.global.fetch),this.realtime=this._initRealtimeClient(Object.assign({headers:this.headers,accessToken:this._getAccessToken.bind(this)},v.realtime)),this.rest=new kj(new URL("rest/v1",x).href,{headers:this.headers,schema:v.db.schema,fetch:this.fetch}),this.storage=new sw(this.storageUrl.href,this.headers,this.fetch,i?.storage),v.accessToken||this._listenForAuthEvents()}get functions(){return new xj(this.functionsUrl.href,{headers:this.headers,customFetch:this.fetch})}from(a){return this.rest.from(a)}schema(a){return this.rest.schema(a)}rpc(a,l={},i={}){return this.rest.rpc(a,l,i)}channel(a,l={config:{}}){return this.realtime.channel(a,l)}getChannels(){return this.realtime.getChannels()}removeChannel(a){return this.realtime.removeChannel(a)}removeAllChannels(){return this.realtime.removeAllChannels()}_getAccessToken(){var a,l;return c_(this,void 0,void 0,function*(){if(this.accessToken)return yield this.accessToken();const{data:i}=yield this.auth.getSession();return(l=(a=i.session)===null||a===void 0?void 0:a.access_token)!==null&&l!==void 0?l:this.supabaseKey})}_initSupabaseAuthClient({autoRefreshToken:a,persistSession:l,detectSessionInUrl:i,storage:c,userStorage:u,storageKey:h,flowType:m,lock:x,debug:g},p,v){const j={Authorization:`Bearer ${this.supabaseKey}`,apikey:`${this.supabaseKey}`};return new o_({url:this.authUrl.href,headers:Object.assign(Object.assign({},j),p),storageKey:h,autoRefreshToken:a,persistSession:l,detectSessionInUrl:i,storage:c,userStorage:u,flowType:m,lock:x,debug:g,fetch:v,hasCustomAuthorizationHeader:Object.keys(this.headers).some(w=>w.toLowerCase()==="authorization")})}_initRealtimeClient(a){return new Gj(this.realtimeUrl.href,Object.assign(Object.assign({},a),{params:Object.assign({apikey:this.supabaseKey},a?.params)}))}_listenForAuthEvents(){return this.auth.onAuthStateChange((l,i)=>{this._handleTokenChanged(l,"CLIENT",i?.access_token)})}_handleTokenChanged(a,l,i){(a==="TOKEN_REFRESHED"||a==="SIGNED_IN")&&this.changedAccessToken!==i?this.changedAccessToken=i:a==="SIGNED_OUT"&&(this.realtime.setAuth(),l=="STORAGE"&&this.auth.signOut(),this.changedAccessToken=void 0)}}const d_=(n,a,l)=>new u_(n,a,l);function h_(){if(typeof window<"u"||typeof process>"u")return!1;const n=process.version;if(n==null)return!1;const a=n.match(/^v(\d+)\./);return a?parseInt(a[1],10)<=18:!1}h_()&&console.warn("⚠️  Node.js 18 and below are deprecated and will no longer be supported in future versions of @supabase/supabase-js. Please upgrade to Node.js 20 or later. For more information, visit: https://github.com/orgs/supabase/discussions/37217");const f_="https://ccffpklqscpzqculffnd.supabase.co",m_="eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZSIsInJlZiI6ImNjZmZwa2xxc2NwenFjdWxmZm5kIiwicm9sZSI6ImFub24iLCJpYXQiOjE3NTcyMTYxMjAsImV4cCI6MjA3Mjc5MjEyMH0.Ngqvdx1pR-Y8inZVgj-uHMBi3c9ZFUlsz_Fc3kDqyN4",g_=f_,x_=m_,ne=d_(g_,x_,{auth:{persistSession:!0,autoRefreshToken:!0,detectSessionInUrl:!1}}),ge=(n,a=null)=>{},st=(n,a)=>{throw console.error(`❌ [DataService] ${a} failed:`,n),new Error(`${a} failed: ${n.message}`)};class pt{static async getProducts(){try{ge("Fetching all products from database");const{data:a,error:l}=await ne.from("products").select("*").order("name");if(l)throw console.error("❌ ProductService.getProducts() error:",l),l;return ge(`Successfully fetched ${a?.length||0} products`),console.log("📦 ProductService.getProducts() result:",a?.length||0,"products"),a||[]}catch(a){console.error("❌ ProductService.getProducts() failed:",a),st(a,"Get products")}}static async getProductById(a){try{ge(`Fetching product by ID: ${a}`);const{data:l,error:i}=await ne.from("products").select("*").eq("id",a).single();if(i)throw i;return ge("Successfully fetched product",l),l}catch(l){st(l,"Get product by ID")}}static async updateProduct(a,l){try{ge(`Updating product ${a}`,l);const{data:i,error:c}=await ne.from("products").update(l).eq("id",a).select();if(c)throw c;return ge("Successfully updated product",i[0]),i[0]}catch(i){st(i,"Update product")}}static async addProduct(a){try{ge("Adding new product",a);const{data:l,error:i}=await ne.from("products").insert([a]).select();if(i)throw i;return ge("Successfully added product",l[0]),l[0]}catch(l){st(l,"Add product")}}static async deleteProduct(a){try{ge(`Safely deleting product ${a}`);const{data:l,error:i}=await ne.rpc("safe_delete_product",{product_id:a});if(i)throw i;return ge("Successfully processed product deletion",l),l}catch(l){st(l,"Delete product")}}static async getLowStockProducts(a=10){try{ge(`Fetching products with stock below ${a}`);const{data:l,error:i}=await ne.from("products").select("*").lt("stock_in_pieces",a).eq("is_active",!0).order("stock_in_pieces",{ascending:!0});if(i)throw i;return ge(`Found ${l?.length||0} low stock products`),l||[]}catch(l){st(l,"Get low stock products")}}}class Da{static async getUsers(){try{ge("Fetching all users from database");const{data:a,error:l}=await ne.from("users").select("*").order("first_name");if(l)throw l;return ge(`Successfully fetched ${a?.length||0} users`),{success:!0,data:a||[]}}catch(a){return console.error("❌ [UserService] Get users failed:",a),{success:!1,error:a.message,data:[{id:1,first_name:"John",last_name:"Admin",email:"admin@medcure.com",role:"admin",is_active:!0,last_login:"2024-01-15T10:30:00Z"},{id:2,first_name:"Sarah",last_name:"Pharmacist",email:"sarah@medcure.com",role:"manager",is_active:!0,last_login:"2024-01-15T09:15:00Z"}]}}}static async getUserByEmail(a){try{ge(`Fetching user by email: ${a}`);const{data:l,error:i}=await ne.from("users").select("*").eq("email",a).single();if(i)throw i;return ge("Successfully fetched user",l),l}catch(l){st(l,"Get user by email")}}static async updateUser(a,l){try{ge(`Updating user ${a}`,l);const{data:i,error:c}=await ne.from("users").update(l).eq("id",a).select();if(c)throw c;return ge("Successfully updated user",i[0]),i[0]}catch(i){st(i,"Update user")}}}class sa{static async processSale(a){try{ge("Processing sale transaction",a);const l=a.items.map(u=>({product_id:u.product_id,quantity:u.unit_quantity,unit_type:u.unit_type,unit_price:u.price_per_unit,total_price:u.total_price}));console.log("🔍 Sales Service - Mapped sale items:",l),console.log("🔍 Sales Service - Original items:",a.items);const{data:i,error:c}=await ne.rpc("create_sale_with_items",{sale_data:{user_id:a.cashierId,total_amount:a.total,payment_method:a.paymentMethod,customer_name:a.customer?.name||null,customer_phone:a.customer?.phone||null,notes:a.notes||null},sale_items:l});if(c)throw c;return ge("Successfully processed sale",i),i}catch(l){st(l,"Process sale")}}static async getSales(a=100){try{ge(`Fetching ${a} sales from database`);const{data:l,error:i}=await ne.from("sales").select(`
          *,
          sale_items (
            *,
            products (*)
          ),
          users (first_name, last_name)
        `).order("created_at",{ascending:!1}).limit(a);if(i)throw console.error("❌ SalesService.getSales() error:",i),i;return ge(`Successfully fetched ${l?.length||0} sales`),console.log("💰 SalesService.getSales() result:",l?.length||0,"sales"),l||[]}catch(l){console.error("❌ SalesService.getSales() failed:",l),st(l,"Get sales")}}static async createSale(a){try{ge("Creating sale",a);const{data:l,error:i}=await ne.from("sales").insert([a]).select();if(i)throw i;return ge("Successfully created sale",l[0]),l[0]}catch(l){st(l,"Create sale")}}static async getSalesByDateRange(a,l){try{ge(`Fetching sales from ${a} to ${l}`);const{data:i,error:c}=await ne.from("sales").select(`
          *,
          sale_items (
            *,
            products (
              id,
              name,
              brand,
              category
            )
          ),
          users (first_name, last_name)
        `).gte("created_at",a.toISOString()).lte("created_at",l.toISOString()).order("created_at",{ascending:!1});if(c)throw c;return ge(`Successfully fetched ${i?.length||0} sales in date range`),i||[]}catch(i){st(i,"Get sales by date range")}}static async voidSale(a,l){try{ge(`Voiding sale ${a} with reason: ${l}`);const{data:i,error:c}=await ne.rpc("void_sale_transaction",{sale_id:a,void_reason:l});if(c)throw c;return ge("Successfully voided sale",i),i}catch(i){st(i,"Void sale")}}static async getDailySalesSummary(a){try{ge(`Fetching daily sales summary for ${a}`);const{data:l,error:i}=await ne.rpc("get_daily_sales_summary",{target_date:a});if(i)throw i;return ge("Successfully fetched daily sales summary",l),l}catch(l){st(l,"Get daily sales summary")}}static async getSalesAnalytics(a,l){try{ge(`Fetching sales analytics from ${a} to ${l}`);const{data:i,error:c}=await ne.rpc("get_sales_analytics",{start_date:a,end_date:l});if(c)throw c;return ge("Successfully fetched sales analytics",i),i}catch(i){st(i,"Get sales analytics")}}}class od{static async getDashboardData(){try{ge("Fetching dashboard data");const[a,l,i]=await Promise.all([sa.getSales(30),pt.getProducts(),Da.getUsers()]),c=a||[],u=i.success?i.data:[];ge("Dashboard data fetched:",{salesCount:c.length,productsCount:l.length,usersCount:u.length});const h=c.reduce((p,v)=>p+v.total_amount,0),m=l.filter(p=>p.stock_in_pieces<=(p.reorder_level||10)),x=u.filter(p=>p.is_active!==!1),g={totalSales:h,totalProducts:l.length,lowStockCount:m.length,lowStockItems:m.length,totalUsers:u.length,activeUsers:x.length,todaySales:h,recentSales:c.slice(0,5),salesTrend:c.slice(0,7).reverse(),todayMetrics:{totalSales:h,transactions:c.length,customers:new Set(c.map(p=>p.customer_name).filter(Boolean)).size,averageOrder:c.length>0?h/c.length:0},yesterdayMetrics:{totalSales:h*.9,transactions:Math.max(0,c.length-2),customers:Math.max(0,new Set(c.map(p=>p.customer_name).filter(Boolean)).size-1),averageOrder:c.length>1?h*.9/(c.length-2):0},weeklyData:c.slice(0,7).map(p=>({day:new Date(p.created_at).toLocaleDateString("en-US",{weekday:"short"}),sales:p.total_amount,date:p.created_at})),topProducts:l.sort((p,v)=>(v.stock_in_pieces||0)-(p.stock_in_pieces||0)).slice(0,5).map(p=>({name:p.name,sales:p.stock_in_pieces||0,revenue:(p.stock_in_pieces||0)*(p.price_per_piece||0)})),recentTransactions:c.slice(0,5).map(p=>({id:p.id,amount:p.total_amount,customer:p.customer_name||"Walk-in Customer",time:p.created_at,status:p.status||"completed"})),formatGrowth:(p,v)=>{if(!v||v===0)return{percentage:0,trend:"neutral"};const j=(p-v)/v*100;return{percentage:Math.abs(j).toFixed(1),trend:j>0?"up":j<0?"down":"neutral"}},getCriticalAlerts:()=>{const p=l.filter(j=>j.expiry_date&&new Date(j.expiry_date)<new Date&&j.is_active),v=l.filter(j=>j.expiry_date&&new Date(j.expiry_date)<=new Date(Date.now()+720*60*60*1e3)&&new Date(j.expiry_date)>=new Date&&j.is_active);return{lowStock:m.map(j=>({type:"warning",message:`${j.name} is low in stock (${j.stock_in_pieces} remaining)`,product:j})),expiring:[...p.map(j=>({type:"danger",message:`${j.name} has expired`,product:j})),...v.map(j=>({type:"warning",message:`${j.name} expires on ${new Date(j.expiry_date).toLocaleDateString()}`,product:j}))],system:x.length===0?[{type:"danger",message:"No active users found",count:0}]:[]}}};return ge("Successfully compiled dashboard data",g),{success:!0,data:g}}catch(a){return console.error("❌ [DashboardService] Get dashboard data failed:",a),{success:!1,error:a.message,data:{totalSales:0,totalProducts:0,lowStockCount:0,lowStockItems:0,totalUsers:0,activeUsers:0,todaySales:0,recentSales:[],salesTrend:[],getCriticalAlerts:()=>({lowStock:[],expiring:[],system:[{type:"danger",message:"Dashboard data failed to load",count:0}]})}}}}}class Rr{static async signIn(a,l){try{ge(`Attempting sign in for email: ${a}`);const{data:i,error:c}=await ne.auth.signInWithPassword({email:a,password:l});if(c)throw c;const u=await Da.getUserByEmail(a),h={...i,user:u};return ge("Successfully signed in user",h),h}catch(i){st(i,"Sign in")}}static async signOut(){try{ge("Attempting sign out");const{error:a}=await ne.auth.signOut();if(a)throw a;return ge("Successfully signed out"),{success:!0}}catch(a){st(a,"Sign out")}}static async getCurrentUser(){try{ge("Fetching current user");const{data:{user:a}}=await ne.auth.getUser();if(a){const l=await Da.getUserByEmail(a.email);return ge("Successfully fetched current user",l),l}return ge("No current user found"),null}catch(a){st(a,"Get current user")}}}class ra{static async updateLastLogin(a){try{const l=new Date().toISOString();console.log(`🔍 [LoginTracking] Attempting to update last login for user ID: ${a}`);const{data:i,error:c}=await ne.from("users").update({last_login:l,updated_at:l}).eq("id",a).select();if(c)throw console.error("❌ [LoginTracking] Supabase error:",c),this.updateLocalStorageLastLogin(a,l),c;return console.log("✅ [LoginTracking] Successfully updated last login:",i),await this.logLoginActivity(a,"login",{timestamp:l,ip_address:await this.getClientIP(),user_agent:navigator.userAgent}),this.updateLocalStorageLastLogin(a,l),{success:!0,timestamp:l,data:i}}catch(l){console.error("❌ [LoginTracking] Failed to update last login:",l);const i=new Date().toISOString();return this.updateLocalStorageLastLogin(a,i),{success:!1,error:l.message,timestamp:i}}}static updateLocalStorageLastLogin(a,l){try{const i=localStorage.getItem("medcure-current-user");if(i){const c=JSON.parse(i);(c.id===a||c.user_id===a)&&(c.last_login=l,localStorage.setItem("medcure-current-user",JSON.stringify(c)),console.log(`✅ [LoginTracking] Updated localStorage last login for user ${a}`))}}catch(i){console.error("❌ [LoginTracking] Failed to update localStorage:",i)}}static async logLoginActivity(a,l,i={}){try{const{error:c}=await ne.from("user_activity_logs").insert({user_id:a,action_type:l,metadata:i,created_at:new Date().toISOString()});if(c)throw c;return{success:!0}}catch(c){return console.error("❌ [LoginTracking] Failed to log activity:",c),{success:!1,error:c.message}}}static async getLoginHistory(a,l=10){try{const{data:i,error:c}=await ne.from("user_activity_logs").select("*").eq("user_id",a).in("action_type",["login","logout"]).order("created_at",{ascending:!1}).limit(l);if(c)throw c;return{success:!0,data:i||[]}}catch(i){return console.error("❌ [LoginTracking] Failed to get login history:",i),{success:!1,error:i.message,data:[]}}}static async getActiveSessions(){try{const a=new Date(Date.now()-864e5).toISOString(),{data:l,error:i}=await ne.from("users").select(`
          id,
          first_name,
          last_name,
          email,
          role,
          last_login,
          is_active
        `).gte("last_login",a).eq("is_active",!0).order("last_login",{ascending:!1});if(i)throw i;return{success:!0,data:l||[]}}catch(a){return console.error("❌ [LoginTracking] Failed to get active sessions:",a),{success:!1,error:a.message,data:[]}}}static async getLoginStats(a="week"){try{let l;const i=new Date;switch(a){case"day":l=new Date(i.getTime()-1440*60*1e3);break;case"week":l=new Date(i.getTime()-10080*60*1e3);break;case"month":l=new Date(i.getTime()-720*60*60*1e3);break;default:l=new Date(i.getTime()-10080*60*1e3)}const{data:c,error:u}=await ne.from("user_activity_logs").select("user_id, created_at, metadata").eq("action_type","login").gte("created_at",l.toISOString());if(u)throw u;const h=c?.length||0,m=new Set(c?.map(g=>g.user_id)).size,x=h/Math.ceil((i-l)/(1440*60*1e3));return{success:!0,data:{totalLogins:h,uniqueUsers:m,avgLoginsPerDay:Math.round(x*100)/100,timeframe:a,startDate:l.toISOString(),endDate:i.toISOString()}}}catch(l){return console.error("❌ [LoginTracking] Failed to get login stats:",l),{success:!1,error:l.message,data:{totalLogins:0,uniqueUsers:0,avgLoginsPerDay:0,timeframe:a}}}}static async getOnlineUsers(){try{const a=new Date(Date.now()-9e5).toISOString(),{data:l,error:i}=await ne.from("users").select(`
          id,
          first_name,
          last_name,
          email,
          role,
          last_login
        `).gte("last_login",a).eq("is_active",!0).order("last_login",{ascending:!1});if(i)throw i;return{success:!0,data:l||[]}}catch(a){return console.error("❌ [LoginTracking] Failed to get online users:",a),{success:!1,error:a.message,data:[]}}}static async trackLogout(a){try{return await this.logLoginActivity(a,"logout",{timestamp:new Date().toISOString(),ip_address:await this.getClientIP(),user_agent:navigator.userAgent}),console.log(`✅ [LoginTracking] Logged logout for user ${a}`),{success:!0}}catch(l){return console.error("❌ [LoginTracking] Failed to track logout:",l),{success:!1,error:l.message}}}static async getClientIP(){try{return"client-side"}catch{return"unknown"}}static formatLastLogin(a){if(!a)return"Never";const l=new Date(a),c=Math.floor((new Date-l)/(1e3*60));if(c<1)return"Just now";if(c<60)return`${c} minutes ago`;const u=Math.floor(c/60);if(u<24)return`${u} hours ago`;const h=Math.floor(u/24);return h<7?`${h} days ago`:l.toLocaleDateString()}static isUserOnline(a){if(!a)return!1;const l=new Date(a);return(new Date-l)/(1e3*60)<=15}}const zu={signIn:async(n,a)=>{try{const l=await Rr.signIn(n,a);if(l&&l.user){console.log("🔍 [AuthService] Login successful, updating last login for user:",l.user);const i=l.user.id||l.user.user_id;if(i){const c=await ra.updateLastLogin(i);console.log("📊 [AuthService] Login tracking result:",c)}else console.warn("⚠️ [AuthService] No user ID found for login tracking")}return l}catch(l){return console.error("❌ [AuthService] Sign in failed:",l),{success:!1,error:l.message}}},signOut:async()=>{try{const n=localStorage.getItem("medcure-current-user");if(n){const a=JSON.parse(n);await ra.trackLogout(a.id)}return localStorage.removeItem("medcure-current-user"),await Rr.signOut()}catch(n){return console.error("❌ [AuthService] Sign out failed:",n),localStorage.removeItem("medcure-current-user"),{success:!1,error:n.message}}},getCurrentUser:async()=>await Rr.getCurrentUser(),getSession:async()=>await Rr.getSession(),getUserProfile:async n=>await Rr.getUserProfile(n),refreshSession:async()=>await Rr.refreshSession(),isAuthenticated:()=>!!localStorage.getItem("medcure-current-user"),getUserPermissions:n=>n?.permissions||[],hasPermission:(n,a)=>n?.permissions?.includes(a)||!1};function bx({children:n}){const[a,l]=S.useState(null),[i,c]=S.useState(null),[u,h]=S.useState(null),[m,x]=S.useState(!0);S.useEffect(()=>{g()},[]);const g=async()=>{try{const w=await zu.getCurrentUser();w&&(c(w),h(w.role),l({user:w,access_token:"mock-token"}))}catch(w){console.error("Error initializing auth:",w)}finally{x(!1)}},p=async(w,N)=>{try{const _=await zu.signIn(w,N);return _.user&&(c(_.user),h(_.user.role),l(_.session||{user:_.user,access_token:"mock-token"}),localStorage.setItem("medcure-current-user",JSON.stringify(_.user))),{data:_,error:null}}catch(_){return{data:null,error:{message:_.message}}}},v=async()=>{try{return await zu.signOut(),l(null),c(null),h(null),{error:null}}catch(w){return{error:{message:w.message}}}},j=S.useMemo(()=>({session:a,user:i,role:u,isLoadingAuth:m,signIn:p,signOut:v}),[a,i,u,m]);return s.jsx(tx.Provider,{value:j,children:n})}bx.propTypes={children:Xu.node.isRequired};function Es(){const n=S.useContext(tx);if(n===void 0)throw new Error("useAuth must be used within an AuthProvider");return n}function p_(){return s.jsx("div",{className:"min-h-screen bg-gray-50 flex flex-col justify-center",children:s.jsx("div",{className:"relative py-3 sm:max-w-xl sm:mx-auto",children:s.jsxs("div",{className:"text-center",children:[s.jsx("div",{className:"mx-auto w-16 h-16 border-4 border-blue-600 border-t-transparent rounded-full animate-spin"}),s.jsx("p",{className:"mt-4 text-gray-600 text-lg",children:"Loading Medcure..."})]})})})}/**
 * @license lucide-react v0.542.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const y_=n=>n.replace(/([a-z0-9])([A-Z])/g,"$1-$2").toLowerCase(),v_=n=>n.replace(/^([A-Z])|[\s-_]+(\w)/g,(a,l,i)=>i?i.toUpperCase():l.toLowerCase()),Ng=n=>{const a=v_(n);return a.charAt(0).toUpperCase()+a.slice(1)},jx=(...n)=>n.filter((a,l,i)=>!!a&&a.trim()!==""&&i.indexOf(a)===l).join(" ").trim(),b_=n=>{for(const a in n)if(a.startsWith("aria-")||a==="role"||a==="title")return!0};/**
 * @license lucide-react v0.542.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */var j_={xmlns:"http://www.w3.org/2000/svg",width:24,height:24,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:2,strokeLinecap:"round",strokeLinejoin:"round"};/**
 * @license lucide-react v0.542.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const w_=S.forwardRef(({color:n="currentColor",size:a=24,strokeWidth:l=2,absoluteStrokeWidth:i,className:c="",children:u,iconNode:h,...m},x)=>S.createElement("svg",{ref:x,...j_,width:a,height:a,stroke:n,strokeWidth:i?Number(l)*24/Number(a):l,className:jx("lucide",c),...!u&&!b_(m)&&{"aria-hidden":"true"},...m},[...h.map(([g,p])=>S.createElement(g,p)),...Array.isArray(u)?u:[u]]));/**
 * @license lucide-react v0.542.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const te=(n,a)=>{const l=S.forwardRef(({className:i,...c},u)=>S.createElement(w_,{ref:u,iconNode:a,className:jx(`lucide-${y_(Ng(n))}`,`lucide-${n}`,i),...c}));return l.displayName=Ng(n),l};/**
 * @license lucide-react v0.542.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const __=[["path",{d:"M22 12h-2.48a2 2 0 0 0-1.93 1.46l-2.35 8.36a.25.25 0 0 1-.48 0L9.24 2.18a.25.25 0 0 0-.48 0l-2.35 8.36A2 2 0 0 1 4.49 12H2",key:"169zse"}]],Oa=te("activity",__);/**
 * @license lucide-react v0.542.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const N_=[["rect",{width:"20",height:"5",x:"2",y:"3",rx:"1",key:"1wp1u1"}],["path",{d:"M4 8v11a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V8",key:"1s80jp"}],["path",{d:"M10 12h4",key:"a56b0p"}]],to=te("archive",N_);/**
 * @license lucide-react v0.542.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const S_=[["path",{d:"m12 19-7-7 7-7",key:"1l729n"}],["path",{d:"M19 12H5",key:"x3x0zl"}]],k_=te("arrow-left",S_);/**
 * @license lucide-react v0.542.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const C_=[["path",{d:"M7 7h10v10",key:"1tivn9"}],["path",{d:"M7 17 17 7",key:"1vkiza"}]],E_=te("arrow-up-right",C_);/**
 * @license lucide-react v0.542.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const A_=[["path",{d:"M10.268 21a2 2 0 0 0 3.464 0",key:"vwvbt9"}],["path",{d:"M3.262 15.326A1 1 0 0 0 4 17h16a1 1 0 0 0 .74-1.673C19.41 13.956 18 12.499 18 8A6 6 0 0 0 6 8c0 4.499-1.411 5.956-2.738 7.326",key:"11g9vi"}]],Td=te("bell",A_);/**
 * @license lucide-react v0.542.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const T_=[["path",{d:"M21 8a2 2 0 0 0-1-1.73l-7-4a2 2 0 0 0-2 0l-7 4A2 2 0 0 0 3 8v8a2 2 0 0 0 1 1.73l7 4a2 2 0 0 0 2 0l7-4A2 2 0 0 0 21 16Z",key:"hh9hay"}],["path",{d:"m3.3 7 8.7 5 8.7-5",key:"g66t2b"}],["path",{d:"M12 22V12",key:"d0xqtd"}]],R_=te("box",T_);/**
 * @license lucide-react v0.542.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const O_=[["path",{d:"M8 2v4",key:"1cmpym"}],["path",{d:"M16 2v4",key:"4m81vk"}],["rect",{width:"18",height:"18",x:"3",y:"4",rx:"2",key:"1hopcy"}],["path",{d:"M3 10h18",key:"8toen8"}]],so=te("calendar",O_);/**
 * @license lucide-react v0.542.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const D_=[["path",{d:"M3 3v16a2 2 0 0 0 2 2h16",key:"c24i48"}],["path",{d:"M18 17V9",key:"2bz60n"}],["path",{d:"M13 17V5",key:"1frdt8"}],["path",{d:"M8 17v-3",key:"17ska0"}]],Lr=te("chart-column",D_);/**
 * @license lucide-react v0.542.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const M_=[["path",{d:"M20 6 9 17l-5-5",key:"1gmf2c"}]],Sg=te("check",M_);/**
 * @license lucide-react v0.542.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const U_=[["path",{d:"m9 18 6-6-6-6",key:"mthhwq"}]],P_=te("chevron-right",U_);/**
 * @license lucide-react v0.542.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const L_=[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["line",{x1:"12",x2:"12",y1:"8",y2:"12",key:"1pkeuh"}],["line",{x1:"12",x2:"12.01",y1:"16",y2:"16",key:"4dfq90"}]],wx=te("circle-alert",L_);/**
 * @license lucide-react v0.542.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const q_=[["path",{d:"M21.801 10A10 10 0 1 1 17 3.335",key:"yps3ct"}],["path",{d:"m9 11 3 3L22 4",key:"1pflzl"}]],_x=te("circle-check-big",q_);/**
 * @license lucide-react v0.542.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const z_=[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"m15 9-6 6",key:"1uzhvr"}],["path",{d:"m9 9 6 6",key:"z0biqf"}]],$_=te("circle-x",z_);/**
 * @license lucide-react v0.542.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const B_=[["path",{d:"M12 6v6l4 2",key:"mmk7yg"}],["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}]],Hi=te("clock",B_);/**
 * @license lucide-react v0.542.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const H_=[["rect",{width:"20",height:"14",x:"2",y:"5",rx:"2",key:"ynyp8z"}],["line",{x1:"2",x2:"22",y1:"10",y2:"10",key:"1b3vmo"}]],$u=te("credit-card",H_);/**
 * @license lucide-react v0.542.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const G_=[["ellipse",{cx:"12",cy:"5",rx:"9",ry:"3",key:"msslwz"}],["path",{d:"M3 5V19A9 3 0 0 0 21 19V5",key:"1wlel7"}],["path",{d:"M3 12A9 3 0 0 0 21 12",key:"mv7ke4"}]],V_=te("database",G_);/**
 * @license lucide-react v0.542.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Q_=[["line",{x1:"12",x2:"12",y1:"2",y2:"22",key:"7eqyqh"}],["path",{d:"M17 5H9.5a3.5 3.5 0 0 0 0 7h5a3.5 3.5 0 0 1 0 7H6",key:"1b0p4s"}]],ns=te("dollar-sign",Q_);/**
 * @license lucide-react v0.542.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Y_=[["path",{d:"M12 15V3",key:"m9g1x1"}],["path",{d:"M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4",key:"ih7n3h"}],["path",{d:"m7 10 5 5 5-5",key:"brsn70"}]],rs=te("download",Y_);/**
 * @license lucide-react v0.542.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const F_=[["path",{d:"M10.733 5.076a10.744 10.744 0 0 1 11.205 6.575 1 1 0 0 1 0 .696 10.747 10.747 0 0 1-1.444 2.49",key:"ct8e1f"}],["path",{d:"M14.084 14.158a3 3 0 0 1-4.242-4.242",key:"151rxh"}],["path",{d:"M17.479 17.499a10.75 10.75 0 0 1-15.417-5.151 1 1 0 0 1 0-.696 10.75 10.75 0 0 1 4.446-5.143",key:"13bj9a"}],["path",{d:"m2 2 20 20",key:"1ooewy"}]],Rd=te("eye-off",F_);/**
 * @license lucide-react v0.542.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const I_=[["path",{d:"M2.062 12.348a1 1 0 0 1 0-.696 10.75 10.75 0 0 1 19.876 0 1 1 0 0 1 0 .696 10.75 10.75 0 0 1-19.876 0",key:"1nclc0"}],["circle",{cx:"12",cy:"12",r:"3",key:"1v7zrd"}]],Ua=te("eye",I_);/**
 * @license lucide-react v0.542.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const K_=[["path",{d:"M15 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V7Z",key:"1rqfz7"}],["path",{d:"M14 2v4a2 2 0 0 0 2 2h4",key:"tnqrlb"}],["path",{d:"M10 9H8",key:"b1mrlr"}],["path",{d:"M16 13H8",key:"t4e002"}],["path",{d:"M16 17H8",key:"z1uh3a"}]],cd=te("file-text",K_);/**
 * @license lucide-react v0.542.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const X_=[["path",{d:"M15 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V7Z",key:"1rqfz7"}],["path",{d:"M14 2v4a2 2 0 0 0 2 2h4",key:"tnqrlb"}]],Z_=te("file",X_);/**
 * @license lucide-react v0.542.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const J_=[["path",{d:"M12 10v6",key:"1bos4e"}],["path",{d:"M9 13h6",key:"1uhe8q"}],["path",{d:"M20 20a2 2 0 0 0 2-2V8a2 2 0 0 0-2-2h-7.9a2 2 0 0 1-1.69-.9L9.6 3.9A2 2 0 0 0 7.93 3H4a2 2 0 0 0-2 2v13a2 2 0 0 0 2 2Z",key:"1kt360"}]],W_=te("folder-plus",J_);/**
 * @license lucide-react v0.542.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const e1=[["path",{d:"M10 20a1 1 0 0 0 .553.895l2 1A1 1 0 0 0 14 21v-7a2 2 0 0 1 .517-1.341L21.74 4.67A1 1 0 0 0 21 3H3a1 1 0 0 0-.742 1.67l7.225 7.989A2 2 0 0 1 10 14z",key:"sc7q7i"}]],t1=te("funnel",e1);/**
 * @license lucide-react v0.542.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const s1=[["rect",{width:"18",height:"18",x:"3",y:"3",rx:"2",key:"afitv7"}],["path",{d:"M3 9h18",key:"1pudct"}],["path",{d:"M3 15h18",key:"5xshup"}],["path",{d:"M9 3v18",key:"fh3hqa"}],["path",{d:"M15 3v18",key:"14nvp0"}]],a1=te("grid-3x3",s1);/**
 * @license lucide-react v0.542.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const r1=[["path",{d:"M3 14h3a2 2 0 0 1 2 2v3a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-7a9 9 0 0 1 18 0v7a2 2 0 0 1-2 2h-1a2 2 0 0 1-2-2v-3a2 2 0 0 1 2-2h3",key:"1xhozi"}]],n1=te("headphones",r1);/**
 * @license lucide-react v0.542.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const l1=[["path",{d:"M2 9.5a5.5 5.5 0 0 1 9.591-3.676.56.56 0 0 0 .818 0A5.49 5.49 0 0 1 22 9.5c0 2.29-1.5 4-3 5.5l-5.492 5.313a2 2 0 0 1-3 .019L5 15c-1.5-1.5-3-3.2-3-5.5",key:"mvr1a0"}]],i1=te("heart",l1);/**
 * @license lucide-react v0.542.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const o1=[["path",{d:"M3 12a9 9 0 1 0 9-9 9.75 9.75 0 0 0-6.74 2.74L3 8",key:"1357e3"}],["path",{d:"M3 3v5h5",key:"1xhq8a"}],["path",{d:"M12 7v5l4 2",key:"1fdv2h"}]],Bu=te("history",o1);/**
 * @license lucide-react v0.542.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const c1=[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"M12 16v-4",key:"1dtifu"}],["path",{d:"M12 8h.01",key:"e9boi3"}]],Od=te("info",c1);/**
 * @license lucide-react v0.542.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const u1=[["path",{d:"M12.83 2.18a2 2 0 0 0-1.66 0L2.6 6.08a1 1 0 0 0 0 1.83l8.58 3.91a2 2 0 0 0 1.66 0l8.58-3.9a1 1 0 0 0 0-1.83z",key:"zw3jo"}],["path",{d:"M2 12a1 1 0 0 0 .58.91l8.6 3.91a2 2 0 0 0 1.65 0l8.58-3.9A1 1 0 0 0 22 12",key:"1wduqc"}],["path",{d:"M2 17a1 1 0 0 0 .58.91l8.6 3.91a2 2 0 0 0 1.65 0l8.58-3.9A1 1 0 0 0 22 17",key:"kqbvx6"}]],d1=te("layers",u1);/**
 * @license lucide-react v0.542.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const h1=[["rect",{width:"7",height:"9",x:"3",y:"3",rx:"1",key:"10lvy0"}],["rect",{width:"7",height:"5",x:"14",y:"3",rx:"1",key:"16une8"}],["rect",{width:"7",height:"9",x:"14",y:"12",rx:"1",key:"1hutg5"}],["rect",{width:"7",height:"5",x:"3",y:"16",rx:"1",key:"ldoo1y"}]],f1=te("layout-dashboard",h1);/**
 * @license lucide-react v0.542.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const m1=[["path",{d:"M3 12h.01",key:"nlz23k"}],["path",{d:"M3 18h.01",key:"1tta3j"}],["path",{d:"M3 6h.01",key:"1rqtza"}],["path",{d:"M8 12h13",key:"1za7za"}],["path",{d:"M8 18h13",key:"1lx6n3"}],["path",{d:"M8 6h13",key:"ik3vkj"}]],g1=te("list",m1);/**
 * @license lucide-react v0.542.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const x1=[["path",{d:"M21 12a9 9 0 1 1-6.219-8.56",key:"13zald"}]],Nx=te("loader-circle",x1);/**
 * @license lucide-react v0.542.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const p1=[["rect",{width:"18",height:"11",x:"3",y:"11",rx:"2",ry:"2",key:"1w4ew1"}],["path",{d:"M7 11V7a5 5 0 0 1 10 0v4",key:"fwvmzm"}]],Oi=te("lock",p1);/**
 * @license lucide-react v0.542.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const y1=[["path",{d:"m10 17 5-5-5-5",key:"1bsop3"}],["path",{d:"M15 12H3",key:"6jk70r"}],["path",{d:"M15 3h4a2 2 0 0 1 2 2v14a2 2 0 0 1-2 2h-4",key:"u53s6r"}]],v1=te("log-in",y1);/**
 * @license lucide-react v0.542.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const b1=[["path",{d:"m16 17 5-5-5-5",key:"1bji2h"}],["path",{d:"M21 12H9",key:"dn1m92"}],["path",{d:"M9 21H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h4",key:"1uf3rs"}]],j1=te("log-out",b1);/**
 * @license lucide-react v0.542.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const w1=[["path",{d:"m22 7-8.991 5.727a2 2 0 0 1-2.009 0L2 7",key:"132q7q"}],["rect",{x:"2",y:"4",width:"20",height:"16",rx:"2",key:"izxlao"}]],_1=te("mail",w1);/**
 * @license lucide-react v0.542.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const N1=[["path",{d:"M4 12h16",key:"1lakjw"}],["path",{d:"M4 18h16",key:"19g7jn"}],["path",{d:"M4 6h16",key:"1o0s65"}]],S1=te("menu",N1);/**
 * @license lucide-react v0.542.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const k1=[["path",{d:"M5 12h14",key:"1ays0h"}]],Sx=te("minus",k1);/**
 * @license lucide-react v0.542.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const C1=[["path",{d:"M11 21.73a2 2 0 0 0 2 0l7-4A2 2 0 0 0 21 16V8a2 2 0 0 0-1-1.73l-7-4a2 2 0 0 0-2 0l-7 4A2 2 0 0 0 3 8v8a2 2 0 0 0 1 1.73z",key:"1a0edw"}],["path",{d:"M12 22V12",key:"d0xqtd"}],["polyline",{points:"3.29 7 12 12 20.71 7",key:"ousv84"}],["path",{d:"m7.5 4.27 9 5.15",key:"1c824w"}]],Me=te("package",C1);/**
 * @license lucide-react v0.542.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const E1=[["path",{d:"M13.832 16.568a1 1 0 0 0 1.213-.303l.355-.465A2 2 0 0 1 17 15h3a2 2 0 0 1 2 2v3a2 2 0 0 1-2 2A18 18 0 0 1 2 4a2 2 0 0 1 2-2h3a2 2 0 0 1 2 2v3a2 2 0 0 1-.8 1.6l-.468.351a1 1 0 0 0-.292 1.233 14 14 0 0 0 6.392 6.384",key:"9njp5v"}]],A1=te("phone",E1);/**
 * @license lucide-react v0.542.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const T1=[["path",{d:"m10.5 20.5 10-10a4.95 4.95 0 1 0-7-7l-10 10a4.95 4.95 0 1 0 7 7Z",key:"wa1lgi"}],["path",{d:"m8.5 8.5 7 7",key:"rvfmvr"}]],R1=te("pill",T1);/**
 * @license lucide-react v0.542.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const O1=[["path",{d:"M5 12h14",key:"1ays0h"}],["path",{d:"M12 5v14",key:"s699le"}]],il=te("plus",O1);/**
 * @license lucide-react v0.542.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const D1=[["path",{d:"M4 2v20l2-1 2 1 2-1 2 1 2-1 2 1 2-1 2 1V2l-2 1-2-1-2 1-2-1-2 1-2-1-2 1Z",key:"q3az6g"}],["path",{d:"M16 8h-6a2 2 0 1 0 0 4h4a2 2 0 1 1 0 4H8",key:"1h4pet"}],["path",{d:"M12 17.5v-11",key:"1jc1ny"}]],Di=te("receipt",D1);/**
 * @license lucide-react v0.542.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const M1=[["path",{d:"M3 12a9 9 0 0 1 9-9 9.75 9.75 0 0 1 6.74 2.74L21 8",key:"v9h5vc"}],["path",{d:"M21 3v5h-5",key:"1q7to0"}],["path",{d:"M21 12a9 9 0 0 1-9 9 9.75 9.75 0 0 1-6.74-2.74L3 16",key:"3uifl3"}],["path",{d:"M8 16H3v5",key:"1cv678"}]],yt=te("refresh-cw",M1);/**
 * @license lucide-react v0.542.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const U1=[["path",{d:"M3 12a9 9 0 1 0 9-9 9.75 9.75 0 0 0-6.74 2.74L3 8",key:"1357e3"}],["path",{d:"M3 3v5h5",key:"1xhq8a"}]],P1=te("rotate-ccw",U1);/**
 * @license lucide-react v0.542.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const L1=[["path",{d:"M15.2 3a2 2 0 0 1 1.4.6l3.8 3.8a2 2 0 0 1 .6 1.4V19a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2z",key:"1c8476"}],["path",{d:"M17 21v-7a1 1 0 0 0-1-1H8a1 1 0 0 0-1 1v7",key:"1ydtos"}],["path",{d:"M7 3v4a1 1 0 0 0 1 1h7",key:"t51u73"}]],ud=te("save",L1);/**
 * @license lucide-react v0.542.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const q1=[["path",{d:"m21 21-4.34-4.34",key:"14j7rj"}],["circle",{cx:"11",cy:"11",r:"8",key:"4ej97u"}]],Fi=te("search",q1);/**
 * @license lucide-react v0.542.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const z1=[["path",{d:"M9.671 4.136a2.34 2.34 0 0 1 4.659 0 2.34 2.34 0 0 0 3.319 1.915 2.34 2.34 0 0 1 2.33 4.033 2.34 2.34 0 0 0 0 3.831 2.34 2.34 0 0 1-2.33 4.033 2.34 2.34 0 0 0-3.319 1.915 2.34 2.34 0 0 1-4.659 0 2.34 2.34 0 0 0-3.32-1.915 2.34 2.34 0 0 1-2.33-4.033 2.34 2.34 0 0 0 0-3.831A2.34 2.34 0 0 1 6.35 6.051a2.34 2.34 0 0 0 3.319-1.915",key:"1i5ecw"}],["circle",{cx:"12",cy:"12",r:"3",key:"1v7zrd"}]],qr=te("settings",z1);/**
 * @license lucide-react v0.542.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const $1=[["path",{d:"M20 13c0 5-3.5 7.5-7.66 8.95a1 1 0 0 1-.67-.01C7.5 20.5 4 18 4 13V6a1 1 0 0 1 1-1c2 0 4.5-1.2 6.24-2.72a1.17 1.17 0 0 1 1.52 0C14.51 3.81 17 5 19 5a1 1 0 0 1 1 1z",key:"oel41y"}]],Ii=te("shield",$1);/**
 * @license lucide-react v0.542.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const B1=[["circle",{cx:"8",cy:"21",r:"1",key:"jimo8o"}],["circle",{cx:"19",cy:"21",r:"1",key:"13723u"}],["path",{d:"M2.05 2.05h2l2.66 12.42a2 2 0 0 0 2 1.58h9.78a2 2 0 0 0 1.95-1.57l1.65-7.43H5.12",key:"9zh506"}]],Vt=te("shopping-cart",B1);/**
 * @license lucide-react v0.542.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const H1=[["line",{x1:"21",x2:"14",y1:"4",y2:"4",key:"obuewd"}],["line",{x1:"10",x2:"3",y1:"4",y2:"4",key:"1q6298"}],["line",{x1:"21",x2:"12",y1:"12",y2:"12",key:"1iu8h1"}],["line",{x1:"8",x2:"3",y1:"12",y2:"12",key:"ntss68"}],["line",{x1:"21",x2:"16",y1:"20",y2:"20",key:"14d8ph"}],["line",{x1:"12",x2:"3",y1:"20",y2:"20",key:"m0wm8r"}],["line",{x1:"14",x2:"14",y1:"2",y2:"6",key:"14e1ph"}],["line",{x1:"8",x2:"8",y1:"10",y2:"14",key:"1i6ji0"}],["line",{x1:"16",x2:"16",y1:"18",y2:"22",key:"1lctlv"}]],G1=te("sliders-horizontal",H1);/**
 * @license lucide-react v0.542.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const V1=[["rect",{width:"14",height:"20",x:"5",y:"2",rx:"2",ry:"2",key:"1yt0o3"}],["path",{d:"M12 18h.01",key:"mhygvu"}]],Q1=te("smartphone",V1);/**
 * @license lucide-react v0.542.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Y1=[["path",{d:"M12 3H5a2 2 0 0 0-2 2v14a2 2 0 0 0 2 2h14a2 2 0 0 0 2-2v-7",key:"1m0v6g"}],["path",{d:"M18.375 2.625a1 1 0 0 1 3 3l-9.013 9.014a2 2 0 0 1-.853.505l-2.873.84a.5.5 0 0 1-.62-.62l.84-2.873a2 2 0 0 1 .506-.852z",key:"ohrbg2"}]],ol=te("square-pen",Y1);/**
 * @license lucide-react v0.542.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const F1=[["path",{d:"M11 2v2",key:"1539x4"}],["path",{d:"M5 2v2",key:"1yf1q8"}],["path",{d:"M5 3H4a2 2 0 0 0-2 2v4a6 6 0 0 0 12 0V5a2 2 0 0 0-2-2h-1",key:"rb5t3r"}],["path",{d:"M8 15a6 6 0 0 0 12 0v-3",key:"x18d4x"}],["circle",{cx:"20",cy:"10",r:"2",key:"ts1r5v"}]],I1=te("stethoscope",F1);/**
 * @license lucide-react v0.542.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const K1=[["path",{d:"M12.586 2.586A2 2 0 0 0 11.172 2H4a2 2 0 0 0-2 2v7.172a2 2 0 0 0 .586 1.414l8.704 8.704a2.426 2.426 0 0 0 3.42 0l6.58-6.58a2.426 2.426 0 0 0 0-3.42z",key:"vktsd0"}],["circle",{cx:"7.5",cy:"7.5",r:".5",fill:"currentColor",key:"kqv944"}]],ao=te("tag",K1);/**
 * @license lucide-react v0.542.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const X1=[["path",{d:"M10 11v6",key:"nco0om"}],["path",{d:"M14 11v6",key:"outv1u"}],["path",{d:"M19 6v14a2 2 0 0 1-2 2H7a2 2 0 0 1-2-2V6",key:"miytrc"}],["path",{d:"M3 6h18",key:"d0wm0j"}],["path",{d:"M8 6V4a2 2 0 0 1 2-2h4a2 2 0 0 1 2 2v2",key:"e791ji"}]],cl=te("trash-2",X1);/**
 * @license lucide-react v0.542.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Z1=[["path",{d:"M16 17h6v-6",key:"t6n2it"}],["path",{d:"m22 17-8.5-8.5-5 5L2 7",key:"x473p"}]],Dd=te("trending-down",Z1);/**
 * @license lucide-react v0.542.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const J1=[["path",{d:"M16 7h6v6",key:"box55l"}],["path",{d:"m22 7-8.5 8.5-5-5L2 17",key:"1t1m79"}]],Gr=te("trending-up",J1);/**
 * @license lucide-react v0.542.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const W1=[["path",{d:"m21.73 18-8-14a2 2 0 0 0-3.48 0l-8 14A2 2 0 0 0 4 21h16a2 2 0 0 0 1.73-3",key:"wmoenq"}],["path",{d:"M12 9v4",key:"juzpu7"}],["path",{d:"M12 17h.01",key:"p32p05"}]],Ss=te("triangle-alert",W1);/**
 * @license lucide-react v0.542.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const e2=[["path",{d:"M12 3v12",key:"1x0j5s"}],["path",{d:"m17 8-5-5-5 5",key:"7q97r8"}],["path",{d:"M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4",key:"ih7n3h"}]],dd=te("upload",e2);/**
 * @license lucide-react v0.542.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const t2=[["path",{d:"m16 11 2 2 4-4",key:"9rsbq5"}],["path",{d:"M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2",key:"1yyitq"}],["circle",{cx:"9",cy:"7",r:"4",key:"nufk8"}]],s2=te("user-check",t2);/**
 * @license lucide-react v0.542.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const a2=[["path",{d:"M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2",key:"1yyitq"}],["circle",{cx:"9",cy:"7",r:"4",key:"nufk8"}],["line",{x1:"19",x2:"19",y1:"8",y2:"14",key:"1bvyxn"}],["line",{x1:"22",x2:"16",y1:"11",y2:"11",key:"1shjgl"}]],r2=te("user-plus",a2);/**
 * @license lucide-react v0.542.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const n2=[["path",{d:"M19 21v-2a4 4 0 0 0-4-4H9a4 4 0 0 0-4 4v2",key:"975kel"}],["circle",{cx:"12",cy:"7",r:"4",key:"17ys0d"}]],kx=te("user",n2);/**
 * @license lucide-react v0.542.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const l2=[["path",{d:"M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2",key:"1yyitq"}],["path",{d:"M16 3.128a4 4 0 0 1 0 7.744",key:"16gr8j"}],["path",{d:"M22 21v-2a4 4 0 0 0-3-3.87",key:"kshegd"}],["circle",{cx:"9",cy:"7",r:"4",key:"nufk8"}]],sl=te("users",l2);/**
 * @license lucide-react v0.542.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const i2=[["path",{d:"M18 6 6 18",key:"1bl5f8"}],["path",{d:"m6 6 12 12",key:"d8bk6v"}]],Yt=te("x",i2);function o2({onToggleSidebar:n}){const{user:a,signOut:l}=Es(),[i,c]=S.useState(!1),[u,h]=S.useState(!1),m=async()=>{try{await l()}catch(p){console.error("Error signing out:",p)}},x=()=>{c(!i)},g=()=>{h(!u)};return s.jsxs("header",{className:"bg-white shadow-lg border-b border-gray-200 h-16 flex items-center justify-between px-4 lg:px-6 relative",children:[s.jsx("div",{className:"absolute inset-0 bg-gradient-to-r from-white via-blue-50/30 to-white"}),s.jsxs("div",{className:"relative z-10 w-full flex items-center justify-between",children:[s.jsxs("div",{className:"flex items-center gap-4",children:[s.jsx("button",{onClick:n,className:"lg:hidden p-2 rounded-xl hover:bg-blue-50 hover:text-blue-600 transition-all duration-200 shadow-sm",children:s.jsx(S1,{className:"h-5 w-5 text-gray-600"})}),s.jsxs("div",{className:"flex items-center gap-3 lg:hidden",children:[s.jsx("div",{className:"w-9 h-9 bg-gradient-to-r from-blue-600 to-blue-700 rounded-xl flex items-center justify-center shadow-md",children:s.jsx("span",{className:"text-white font-bold text-sm",children:"M"})}),s.jsx("span",{className:"font-bold text-xl text-gray-900 hidden sm:block",children:"MedCure Pro"})]})]}),s.jsx("div",{className:"hidden md:flex flex-1 max-w-2xl mx-8",children:s.jsxs("div",{className:"relative w-full",children:[s.jsx(Fi,{className:"absolute left-4 top-1/2 transform -translate-y-1/2 h-5 w-5 text-gray-400"}),s.jsx("input",{type:"text",placeholder:"Search products, sales, or anything...",className:"w-full pl-12 pr-4 py-3 border-2 border-gray-200 rounded-xl focus:ring-2 focus:ring-blue-500 focus:border-blue-500 bg-gray-50/50 transition-all duration-200 text-sm font-medium placeholder-gray-500"})]})}),s.jsxs("div",{className:"flex items-center gap-2",children:[s.jsx("button",{onClick:g,className:"md:hidden p-2.5 rounded-xl hover:bg-blue-50 hover:text-blue-600 transition-all duration-200 shadow-sm",children:s.jsx(Fi,{className:"h-5 w-5 text-gray-600"})}),s.jsxs("button",{onClick:x,className:"relative p-2.5 rounded-xl hover:bg-blue-50 hover:text-blue-600 transition-all duration-200 shadow-sm",children:[s.jsx(Td,{className:"h-5 w-5 text-gray-600"}),s.jsx("span",{className:"absolute -top-1 -right-1 bg-gradient-to-r from-red-500 to-red-600 text-white text-xs w-5 h-5 rounded-full flex items-center justify-center font-bold shadow-md",children:"3"})]}),s.jsx("button",{className:"p-2.5 rounded-xl hover:bg-blue-50 hover:text-blue-600 transition-all duration-200 shadow-sm",children:s.jsx(qr,{className:"h-5 w-5 text-gray-600"})}),s.jsxs("div",{className:"relative group",children:[s.jsxs("button",{className:"flex items-center gap-3 p-2 pl-3 pr-4 rounded-xl hover:bg-blue-50 transition-all duration-200 shadow-sm",children:[s.jsx("div",{className:"w-8 h-8 bg-gradient-to-r from-blue-500 to-blue-600 rounded-full flex items-center justify-center shadow-md",children:s.jsx("span",{className:"text-white font-bold text-xs",children:a?.email?.[0]?.toUpperCase()||"U"})}),s.jsx("span",{className:"hidden sm:block text-sm font-semibold text-gray-700",children:a?.email?.split("@")[0]||"User"})]}),s.jsx("div",{className:"absolute right-0 top-full mt-2 w-52 bg-white rounded-xl shadow-xl border border-gray-100 opacity-0 invisible group-hover:opacity-100 group-hover:visible transition-all duration-200 z-50",children:s.jsxs("div",{className:"p-3",children:[s.jsxs("div",{className:"px-3 py-3 text-sm text-gray-500 border-b border-gray-100 bg-gray-50/50 rounded-lg mb-2",children:[s.jsx("div",{className:"text-xs text-gray-400 uppercase tracking-wide font-semibold",children:"Signed in as"}),s.jsx("div",{className:"font-semibold text-gray-900 mt-1",children:a?.email})]}),s.jsxs("button",{className:"w-full flex items-center gap-3 px-3 py-2.5 text-sm text-gray-700 hover:bg-blue-50 hover:text-blue-700 rounded-lg mt-2 transition-all duration-200",children:[s.jsx(kx,{className:"h-4 w-4"}),s.jsx("span",{className:"font-medium",children:"Profile"})]}),s.jsxs("button",{className:"w-full flex items-center gap-3 px-3 py-2.5 text-sm text-gray-700 hover:bg-blue-50 hover:text-blue-700 rounded-lg transition-all duration-200",children:[s.jsx(qr,{className:"h-4 w-4"}),s.jsx("span",{className:"font-medium",children:"Settings"})]}),s.jsxs("button",{onClick:m,className:"w-full flex items-center gap-3 px-3 py-2.5 text-sm text-red-600 hover:bg-red-50 hover:text-red-700 rounded-lg mt-2 transition-all duration-200 font-medium",children:[s.jsx(j1,{className:"h-4 w-4"}),s.jsx("span",{children:"Sign out"})]})]})})]})]})]})]})}const c2=[{name:"Dashboard",href:"/dashboard",icon:f1,roles:["admin","manager","cashier"]},{name:"Point of Sale",href:"/pos",icon:Vt,roles:["admin","manager","cashier"]},{name:"Inventory",href:"/inventory",icon:Me,roles:["admin","manager"]},{name:"Management",href:"/management",icon:sl,roles:["admin"]},{name:"Analytics",href:"/analytics",icon:Lr,roles:["admin","manager"]}];function u2({isOpen:n,onClose:a}){const l=It(),{user:i,role:c}=Es(),u=c2.filter(h=>h.roles.includes(c||"cashier"));return s.jsxs(s.Fragment,{children:[n&&s.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 z-40 lg:hidden",onClick:a}),s.jsx("div",{className:`
        fixed inset-y-0 left-0 z-50 w-64 bg-white shadow-lg transform transition-transform duration-300 ease-in-out
        lg:translate-x-0 lg:z-30
        ${n?"translate-x-0":"-translate-x-full lg:translate-x-0"}
      `,children:s.jsxs("div",{className:"flex flex-col h-full",children:[s.jsxs("div",{className:"hidden lg:flex items-center gap-3 p-6 border-b border-gray-200",children:[s.jsx("div",{className:"w-8 h-8 bg-blue-600 rounded-lg flex items-center justify-center",children:s.jsx("span",{className:"text-white font-bold text-sm",children:"M"})}),s.jsx("span",{className:"font-semibold text-xl text-gray-900",children:"MedCure Pro"})]}),s.jsxs("div",{className:"flex items-center justify-between p-4 lg:hidden",children:[s.jsxs("div",{className:"flex items-center gap-2",children:[s.jsx("div",{className:"w-8 h-8 bg-blue-600 rounded-lg flex items-center justify-center",children:s.jsx("span",{className:"text-white font-bold text-sm",children:"M"})}),s.jsx("span",{className:"font-semibold text-xl text-gray-900",children:"MedCure Pro"})]}),s.jsx("button",{onClick:a,className:"p-2 rounded-lg hover:bg-gray-100 transition-colors",children:s.jsx(Yt,{className:"h-5 w-5 text-gray-600"})})]}),s.jsxs("nav",{className:"flex-1 px-4 py-4 lg:px-6 lg:py-6",children:[s.jsx("div",{className:"space-y-2",children:u.map(h=>{const m=l.pathname===h.href,x=h.icon;return s.jsxs(Jn,{to:h.href,onClick:a,className:`
                      flex items-center gap-3 px-4 py-3 rounded-xl text-sm font-medium transition-all duration-200
                      ${m?"bg-blue-600 text-white shadow-lg transform scale-105":"text-gray-700 hover:bg-gray-100 hover:text-gray-900"}
                    `,children:[s.jsx(x,{className:`h-5 w-5 ${m?"text-white":"text-gray-500"}`}),s.jsx("span",{className:"font-medium",children:h.name})]},h.name)})}),s.jsxs("div",{className:"mt-auto pt-6",children:[s.jsx("div",{className:"border-t border-gray-200 pt-6",children:s.jsxs(Jn,{to:"/settings",className:"flex items-center gap-3 px-4 py-3 rounded-xl text-sm font-medium text-gray-700 hover:bg-gray-100 hover:text-gray-900 transition-all duration-200",children:[s.jsx(qr,{className:"h-5 w-5 text-gray-500"}),s.jsx("span",{className:"font-medium",children:"Settings"})]})}),s.jsx("div",{className:"mt-6 p-4 bg-gradient-to-r from-gray-50 to-gray-100 rounded-xl border border-gray-200",children:s.jsxs("div",{className:"flex items-center gap-3",children:[s.jsx("div",{className:"w-10 h-10 bg-gradient-to-r from-blue-500 to-blue-600 rounded-full flex items-center justify-center shadow-md",children:s.jsx("span",{className:"text-sm font-bold text-white",children:i?.email?.[0]?.toUpperCase()||"U"})}),s.jsxs("div",{className:"flex-1 min-w-0",children:[s.jsx("p",{className:"text-sm font-semibold text-gray-900 truncate",children:i?.email||"User"}),s.jsx("p",{className:"text-xs text-gray-500 capitalize font-medium",children:c||"cashier"})]})]})})]})]})]})})]})}function d2({children:n}){const[a,l]=S.useState(!1),i=()=>{l(!a)},c=()=>{l(!1)};return s.jsxs("div",{className:"min-h-screen bg-gray-50",children:[s.jsx(u2,{isOpen:a,onClose:c}),s.jsxs("div",{className:"lg:pl-64",children:[s.jsx(o2,{onToggleSidebar:i}),s.jsx("main",{className:"p-4 lg:p-6",children:s.jsx("div",{className:"max-w-7xl mx-auto",children:n})})]})]})}function Ta({children:n,requiredRole:a=null}){const{user:l,role:i,isLoadingAuth:c}=Es(),u=It();return c?null:l?a&&i!==a&&i!=="admin"?s.jsx(Zn,{to:"/unauthorized",replace:!0}):s.jsx(d2,{children:n}):s.jsx(Zn,{to:"/login",state:{from:u},replace:!0})}Ta.propTypes={children:Xu.node.isRequired,requiredRole:Xu.string};function h2({size:n="md",color:a="blue",text:l="",className:i=""}){const c={sm:"h-4 w-4",md:"h-6 w-6",lg:"h-8 w-8",xl:"h-12 w-12"},u={blue:"text-blue-600",gray:"text-gray-500",white:"text-white",green:"text-green-600",red:"text-red-600",yellow:"text-yellow-600"};return s.jsxs("div",{className:`flex flex-col items-center justify-center space-y-2 ${i}`,children:[s.jsx(Nx,{className:`animate-spin ${c[n]} ${u[a]}`}),l&&s.jsx("p",{className:`text-sm ${u[a]} font-medium`,children:l})]})}const f2=S.createContext();function m2({children:n}){const[a,l]=S.useState([]),i=S.useCallback((p,v="info",j={})=>{const w=Date.now().toString(),N={id:w,message:p,type:v,duration:j.duration||5e3,action:j.action,persistent:j.persistent||!1};return l(_=>[..._,N]),N.persistent||setTimeout(()=>{c(w)},N.duration),w},[]),c=S.useCallback(p=>{l(v=>v.filter(j=>j.id!==p))},[]),u=S.useCallback((p,v)=>i(p,"success",v),[i]),h=S.useCallback((p,v)=>i(p,"error",v),[i]),m=S.useCallback((p,v)=>i(p,"warning",v),[i]),x=S.useCallback((p,v)=>i(p,"info",v),[i]),g={toasts:a,showToast:i,removeToast:c,success:u,error:h,warning:m,info:x};return s.jsxs(f2.Provider,{value:g,children:[n,s.jsx(g2,{toasts:a,onRemove:c})]})}function g2({toasts:n,onRemove:a}){return s.jsx("div",{className:"fixed top-4 right-4 z-50 space-y-2",children:n.map(l=>s.jsx(x2,{toast:l,onRemove:a},l.id))})}function x2({toast:n,onRemove:a}){const{id:l,message:i,type:c,action:u}=n,m={success:{icon:_x,className:"bg-green-50 border-green-200 text-green-800",iconColor:"text-green-600"},error:{icon:$_,className:"bg-red-50 border-red-200 text-red-800",iconColor:"text-red-600"},warning:{icon:wx,className:"bg-yellow-50 border-yellow-200 text-yellow-800",iconColor:"text-yellow-600"},info:{icon:Od,className:"bg-blue-50 border-blue-200 text-blue-800",iconColor:"text-blue-600"}}[c],x=m.icon;return s.jsxs("div",{className:`
        flex items-start space-x-3 p-4 rounded-lg border shadow-lg
        transform transition-all duration-300 ease-in-out
        min-w-[320px] max-w-md
        ${m.className}
      `,children:[s.jsx(x,{className:`h-5 w-5 mt-0.5 flex-shrink-0 ${m.iconColor}`}),s.jsxs("div",{className:"flex-1 min-w-0",children:[s.jsx("p",{className:"text-sm font-medium",children:i}),u&&s.jsx("div",{className:"mt-2",children:s.jsx("button",{onClick:u.onClick,className:"text-xs font-medium underline hover:no-underline",children:u.label})})]}),s.jsx("button",{onClick:()=>a(l),className:"flex-shrink-0 text-gray-400 hover:text-gray-600 transition-colors",children:s.jsx(Yt,{className:"h-4 w-4"})})]})}function Ki({children:n,variant:a="primary",size:l="md",disabled:i=!1,loading:c=!1,onClick:u,type:h="button",className:m="",icon:x,iconPosition:g="left",fullWidth:p=!1,...v}){const j=`
    inline-flex items-center justify-center font-medium
    rounded-lg transition-colors focus:outline-none focus:ring-2 focus:ring-offset-2
    disabled:opacity-50 disabled:cursor-not-allowed
  `,w={primary:`
      bg-blue-600 text-white hover:bg-blue-700 
      focus:ring-blue-500 border border-transparent
    `,secondary:`
      bg-gray-600 text-white hover:bg-gray-700 
      focus:ring-gray-500 border border-transparent
    `,outline:`
      bg-transparent text-gray-700 border border-gray-300 
      hover:bg-gray-50 focus:ring-gray-500
    `,ghost:`
      bg-transparent text-gray-700 border border-transparent 
      hover:bg-gray-100 focus:ring-gray-500
    `,danger:`
      bg-red-600 text-white hover:bg-red-700 
      focus:ring-red-500 border border-transparent
    `,success:`
      bg-green-600 text-white hover:bg-green-700 
      focus:ring-green-500 border border-transparent
    `,warning:`
      bg-yellow-600 text-white hover:bg-yellow-700 
      focus:ring-yellow-500 border border-transparent
    `},N={xs:"px-2 py-1 text-xs",sm:"px-3 py-1.5 text-sm",md:"px-4 py-2 text-sm",lg:"px-6 py-3 text-base",xl:"px-8 py-4 text-lg"},_={xs:"h-3 w-3",sm:"h-4 w-4",md:"h-4 w-4",lg:"h-5 w-5",xl:"h-6 w-6"},C=`
    ${j}
    ${w[a]}
    ${N[l]}
    ${p?"w-full":""}
    ${m}
  `.trim(),O=_[l],q=x&&!c,L=c;return s.jsxs("button",{type:h,disabled:i||c,onClick:u,className:C,...v,children:[L&&s.jsxs("svg",{className:`animate-spin ${O} ${g==="left"?"mr-2":"ml-2"}`,fill:"none",viewBox:"0 0 24 24",children:[s.jsx("circle",{className:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor",strokeWidth:"4"}),s.jsx("path",{className:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"})]}),q&&g==="left"&&s.jsx(x,{className:`${O} mr-2`}),s.jsx("span",{children:n}),q&&g==="right"&&s.jsx(x,{className:`${O} ml-2`})]})}const p2=S.forwardRef(({label:n,error:a,helperText:l,type:i="text",size:c="md",fullWidth:u=!1,icon:h,iconPosition:m="left",placeholder:x,className:g="",containerClassName:p="",required:v=!1,disabled:j=!1,...w},N)=>{const[_,C]=as.useState(!1),O=i==="password",q=O&&_?"text":i,L={sm:"px-3 py-1.5 text-sm",md:"px-3 py-2 text-sm",lg:"px-4 py-3 text-base"},z={sm:"h-4 w-4",md:"h-5 w-5",lg:"h-6 w-6"},Q=`
    block border border-gray-300 rounded-lg
    focus:ring-2 focus:ring-blue-500 focus:border-transparent
    disabled:bg-gray-50 disabled:cursor-not-allowed
    transition-colors
    ${u?"w-full":""}
    ${a?"border-red-300 focus:ring-red-500":""}
    ${h&&m==="left"?"pl-10":""}
    ${h&&m==="right"?"pr-10":""}
    ${O?"pr-10":""}
    ${L[c]}
    ${g}
  `;return s.jsxs("div",{className:`${p}`,children:[n&&s.jsxs("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:[n,v&&s.jsx("span",{className:"text-red-500 ml-1",children:"*"})]}),s.jsxs("div",{className:"relative",children:[h&&m==="left"&&s.jsx("div",{className:"absolute inset-y-0 left-0 pl-3 flex items-center pointer-events-none",children:s.jsx(h,{className:`text-gray-400 ${z[c]}`})}),s.jsx("input",{ref:N,type:q,placeholder:x,disabled:j,className:Q,...w}),h&&m==="right"&&!O&&s.jsx("div",{className:"absolute inset-y-0 right-0 pr-3 flex items-center pointer-events-none",children:s.jsx(h,{className:`text-gray-400 ${z[c]}`})}),O&&s.jsx("button",{type:"button",onClick:()=>C(!_),className:"absolute inset-y-0 right-0 pr-3 flex items-center",children:_?s.jsx(Rd,{className:`text-gray-400 hover:text-gray-600 ${z[c]}`}):s.jsx(Ua,{className:`text-gray-400 hover:text-gray-600 ${z[c]}`})})]}),a&&s.jsx("p",{className:"mt-1 text-sm text-red-600",children:a}),l&&!a&&s.jsx("p",{className:"mt-1 text-sm text-gray-500",children:l})]})});p2.displayName="Input";const y2=S.forwardRef(({label:n,error:a,helperText:l,rows:i=3,fullWidth:c=!1,placeholder:u,className:h="",containerClassName:m="",required:x=!1,disabled:g=!1,...p},v)=>{const j=`
    block border border-gray-300 rounded-lg px-3 py-2 text-sm
    focus:ring-2 focus:ring-blue-500 focus:border-transparent
    disabled:bg-gray-50 disabled:cursor-not-allowed
    transition-colors resize-vertical
    ${c?"w-full":""}
    ${a?"border-red-300 focus:ring-red-500":""}
    ${h}
  `;return s.jsxs("div",{className:m,children:[n&&s.jsxs("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:[n,x&&s.jsx("span",{className:"text-red-500 ml-1",children:"*"})]}),s.jsx("textarea",{ref:v,rows:i,placeholder:u,disabled:g,className:j,...p}),a&&s.jsx("p",{className:"mt-1 text-sm text-red-600",children:a}),l&&!a&&s.jsx("p",{className:"mt-1 text-sm text-gray-500",children:l})]})});y2.displayName="Textarea";const v2=S.forwardRef(({label:n,error:a,helperText:l,options:i=[],placeholder:c="Select an option",fullWidth:u=!1,className:h="",containerClassName:m="",required:x=!1,disabled:g=!1,...p},v)=>{const j=`
    block border border-gray-300 rounded-lg px-3 py-2 text-sm
    focus:ring-2 focus:ring-blue-500 focus:border-transparent
    disabled:bg-gray-50 disabled:cursor-not-allowed
    transition-colors
    ${u?"w-full":""}
    ${a?"border-red-300 focus:ring-red-500":""}
    ${h}
  `;return s.jsxs("div",{className:m,children:[n&&s.jsxs("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:[n,x&&s.jsx("span",{className:"text-red-500 ml-1",children:"*"})]}),s.jsxs("select",{ref:v,disabled:g,className:j,...p,children:[c&&s.jsx("option",{value:"",disabled:!0,children:c}),i.map((w,N)=>s.jsx("option",{value:w.value,children:w.label},N))]}),a&&s.jsx("p",{className:"mt-1 text-sm text-red-600",children:a}),l&&!a&&s.jsx("p",{className:"mt-1 text-sm text-gray-500",children:l})]})});v2.displayName="Select";class Cx extends as.Component{constructor(a){super(a),this.state={hasError:!1,error:null,errorInfo:null}}static getDerivedStateFromError(){return{hasError:!0}}componentDidCatch(a,l){console.error("ErrorBoundary caught an error:",a,l),this.setState({error:a,errorInfo:l}),this.props.onError&&typeof this.props.onError=="function"&&this.props.onError(a,l)}handleRetry=()=>{this.setState({hasError:!1,error:null,errorInfo:null})};render(){return this.state.hasError?this.props.fallback?this.props.fallback(this.state.error,this.handleRetry):s.jsx("div",{className:"min-h-screen flex items-center justify-center bg-gray-50 px-4",children:s.jsxs("div",{className:"max-w-md w-full",children:[s.jsxs("div",{className:"text-center mb-6",children:[s.jsx(Ss,{className:"mx-auto h-12 w-12 text-red-500 mb-4"}),s.jsx("h1",{className:"text-xl font-semibold text-gray-900 mb-2",children:this.props.title||"Something went wrong"}),s.jsx("p",{className:"text-gray-600",children:this.props.message||"An unexpected error occurred. Please try again."})]}),s.jsxs("div",{className:"space-y-4",children:[s.jsx(Ki,{onClick:this.handleRetry,className:"w-full",icon:yt,children:"Try Again"}),this.props.showBackButton!==!1&&s.jsx(Ki,{variant:"outline",onClick:()=>window.history.back(),className:"w-full",icon:k_,children:"Go Back"})]}),!1]})}):this.props.children}}const Ea=({children:n,title:a,message:l})=>s.jsx(Cx,{title:a||"Page Error",message:l||"This page encountered an error. Please try refreshing or go back.",fallback:(i,c)=>s.jsx("div",{className:"min-h-[400px] flex items-center justify-center",children:s.jsxs("div",{className:"max-w-md w-full text-center",children:[s.jsx(Ss,{className:"mx-auto h-10 w-10 text-red-500 mb-4"}),s.jsx("h2",{className:"text-lg font-medium text-gray-900 mb-2",children:a||"Page Error"}),s.jsx("p",{className:"text-gray-600 mb-6",children:l||"This page encountered an error. Please try refreshing or go back."}),s.jsxs("div",{className:"space-y-3",children:[s.jsx(Ki,{onClick:c,icon:yt,children:"Retry"}),s.jsx(Ki,{variant:"outline",onClick:()=>window.location.reload(),children:"Refresh Page"})]})]})}),children:n});function b2({isOpen:n,onClose:a,products:l=[]}){const[i,c]=S.useState({format:"csv",columns:{name:!0,category:!0,brand:!0,stock:!0,price:!0,expiry:!0,supplier:!0,batchNumber:!0},filters:{category:"all",stockStatus:"all",expiryStatus:"all"}}),[u,h]=S.useState(!1),m=async()=>{h(!0);try{let v=l;i.filters.category!=="all"&&(v=v.filter(w=>w.category===i.filters.category)),i.filters.stockStatus!=="all"&&(v=v.filter(w=>{const N=w.stock_in_pieces||0,_=w.reorder_level||0;switch(i.filters.stockStatus){case"low":return N<=_&&N>0;case"out":return N===0;case"normal":return N>_;default:return!0}})),i.filters.expiryStatus!=="all"&&(v=v.filter(w=>{const N=new Date(w.expiry_date),C=Math.ceil((N-new Date)/(1e3*60*60*24));switch(i.filters.expiryStatus){case"expired":return C<0;case"expiring":return C>=0&&C<=30;case"fresh":return C>30;default:return!0}}));const j=v.map(w=>{const N={};return i.columns.name&&(N["Product Name"]=w.name),i.columns.category&&(N.Category=w.category),i.columns.brand&&(N.Brand=w.brand),i.columns.stock&&(N["Stock (Pieces)"]=w.stock_in_pieces),i.columns.price&&(N["Price per Piece"]=w.price_per_piece),i.columns.expiry&&(N["Expiry Date"]=w.expiry_date?.split("T")[0]),i.columns.supplier&&(N.Supplier=w.supplier),i.columns.batchNumber&&(N["Batch Number"]=w.batch_number),N});i.format==="csv"?x(j):g(j),setTimeout(()=>{h(!1),a()},1e3)}catch(v){console.error("Export error:",v),h(!1)}},x=v=>{if(v.length===0)return;const j=Object.keys(v[0]),w=[j.join(","),...v.map(O=>j.map(q=>`"${O[q]||""}"`).join(","))].join(`
`),N=new Blob([w],{type:"text/csv;charset=utf-8;"}),_=document.createElement("a"),C=URL.createObjectURL(N);_.setAttribute("href",C),_.setAttribute("download",`inventory_export_${new Date().toISOString().split("T")[0]}.csv`),_.style.visibility="hidden",document.body.appendChild(_),_.click(),document.body.removeChild(_)},g=v=>{const j=JSON.stringify(v,null,2),w=new Blob([j],{type:"application/json"}),N=document.createElement("a"),_=URL.createObjectURL(w);N.setAttribute("href",_),N.setAttribute("download",`inventory_export_${new Date().toISOString().split("T")[0]}.json`),N.style.visibility="hidden",document.body.appendChild(N),N.click(),document.body.removeChild(N)},p=[...new Set(l.map(v=>v.category))].filter(Boolean);return n?s.jsx("div",{className:"fixed inset-0 bg-black/60 backdrop-blur-sm flex items-center justify-center z-50 p-4",children:s.jsx("div",{className:"bg-white rounded-2xl shadow-2xl max-w-2xl w-full max-h-[95vh] overflow-hidden",children:s.jsxs("div",{className:"flex flex-col h-full",children:[s.jsxs("div",{className:"flex items-center justify-between p-6 border-b border-gray-200 bg-gradient-to-r from-blue-50 to-indigo-50",children:[s.jsxs("div",{className:"flex items-center space-x-3",children:[s.jsx("div",{className:"p-2 bg-blue-100 rounded-xl",children:s.jsx(rs,{className:"h-6 w-6 text-blue-600"})}),s.jsx("h3",{className:"text-xl font-bold text-gray-900",children:"Export Inventory"})]}),s.jsx("button",{onClick:a,className:"group p-2 text-gray-400 hover:text-gray-600 hover:bg-gray-100 rounded-xl transition-all duration-200",children:s.jsx(Yt,{className:"h-6 w-6 group-hover:scale-110 transition-transform duration-200"})})]}),s.jsx("div",{className:"flex-1 overflow-y-auto p-6",children:s.jsxs("div",{className:"space-y-6",children:[s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-3",children:"Export Format"}),s.jsxs("div",{className:"grid grid-cols-2 gap-3",children:[s.jsxs("button",{onClick:()=>c({...i,format:"csv"}),className:`p-4 border-2 rounded-lg flex items-center space-x-3 transition-colors ${i.format==="csv"?"border-blue-500 bg-blue-50 text-blue-700":"border-gray-200 hover:border-gray-300"}`,children:[s.jsx(cd,{className:"h-5 w-5"}),s.jsxs("div",{className:"text-left",children:[s.jsx("div",{className:"font-medium",children:"CSV"}),s.jsx("div",{className:"text-xs text-gray-500",children:"Comma-separated values"})]}),i.format==="csv"&&s.jsx(Sg,{className:"h-5 w-5 text-blue-600 ml-auto"})]}),s.jsxs("button",{onClick:()=>c({...i,format:"json"}),className:`p-4 border-2 rounded-lg flex items-center space-x-3 transition-colors ${i.format==="json"?"border-blue-500 bg-blue-50 text-blue-700":"border-gray-200 hover:border-gray-300"}`,children:[s.jsx(cd,{className:"h-5 w-5"}),s.jsxs("div",{className:"text-left",children:[s.jsx("div",{className:"font-medium",children:"JSON"}),s.jsx("div",{className:"text-xs text-gray-500",children:"JavaScript Object Notation"})]}),i.format==="json"&&s.jsx(Sg,{className:"h-5 w-5 text-blue-600 ml-auto"})]})]})]}),s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-3",children:"Columns to Export"}),s.jsx("div",{className:"grid grid-cols-2 gap-3",children:Object.entries({name:"Product Name",category:"Category",brand:"Brand",stock:"Stock Level",price:"Price",expiry:"Expiry Date",supplier:"Supplier",batchNumber:"Batch Number"}).map(([v,j])=>s.jsxs("label",{className:"flex items-center space-x-2 cursor-pointer",children:[s.jsx("input",{type:"checkbox",checked:i.columns[v],onChange:w=>c({...i,columns:{...i.columns,[v]:w.target.checked}}),className:"h-4 w-4 text-blue-600 focus:ring-blue-500 border-gray-300 rounded"}),s.jsx("span",{className:"text-sm text-gray-700",children:j})]},v))})]}),s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-3",children:"Filters"}),s.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:[s.jsxs("div",{children:[s.jsx("label",{className:"block text-xs font-medium text-gray-500 mb-1",children:"Category"}),s.jsxs("select",{value:i.filters.category,onChange:v=>c({...i,filters:{...i.filters,category:v.target.value}}),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent text-sm",children:[s.jsx("option",{value:"all",children:"All Categories"}),p.map(v=>s.jsx("option",{value:v,children:v},v))]})]}),s.jsxs("div",{children:[s.jsx("label",{className:"block text-xs font-medium text-gray-500 mb-1",children:"Stock Status"}),s.jsxs("select",{value:i.filters.stockStatus,onChange:v=>c({...i,filters:{...i.filters,stockStatus:v.target.value}}),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent text-sm",children:[s.jsx("option",{value:"all",children:"All Stock Levels"}),s.jsx("option",{value:"low",children:"Low Stock"}),s.jsx("option",{value:"out",children:"Out of Stock"}),s.jsx("option",{value:"normal",children:"Normal Stock"})]})]}),s.jsxs("div",{children:[s.jsx("label",{className:"block text-xs font-medium text-gray-500 mb-1",children:"Expiry Status"}),s.jsxs("select",{value:i.filters.expiryStatus,onChange:v=>c({...i,filters:{...i.filters,expiryStatus:v.target.value}}),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent text-sm",children:[s.jsx("option",{value:"all",children:"All Products"}),s.jsx("option",{value:"expired",children:"Expired"}),s.jsx("option",{value:"expiring",children:"Expiring Soon"}),s.jsx("option",{value:"fresh",children:"Fresh Products"})]})]})]})]}),s.jsx("div",{className:"bg-gray-50 rounded-lg p-4",children:s.jsxs("div",{className:"flex items-center justify-between text-sm",children:[s.jsx("span",{className:"text-gray-600",children:"Products to export:"}),s.jsxs("span",{className:"font-semibold text-gray-900",children:[l.length," products"]})]})})]})}),s.jsx("div",{className:"border-t border-gray-200 bg-gray-50 px-6 py-4",children:s.jsxs("div",{className:"flex justify-end space-x-3",children:[s.jsx("button",{type:"button",onClick:a,className:"px-6 py-2.5 border-2 border-gray-200 text-gray-700 font-medium rounded-xl hover:border-gray-300 hover:bg-gray-50 transition-all duration-200",disabled:u,children:"Cancel"}),s.jsx("button",{onClick:m,disabled:u||Object.values(i.columns).every(v=>!v),className:"group flex items-center space-x-2 px-6 py-2.5 bg-gradient-to-r from-blue-600 to-blue-700 text-white font-semibold rounded-xl hover:from-blue-700 hover:to-blue-800 shadow-lg hover:shadow-xl transition-all duration-200 hover:scale-105 active:scale-95 disabled:opacity-50 disabled:cursor-not-allowed disabled:hover:scale-100",children:u?s.jsxs(s.Fragment,{children:[s.jsx("div",{className:"animate-spin rounded-full h-4 w-4 border-b-2 border-white"}),s.jsx("span",{children:"Exporting..."})]}):s.jsxs(s.Fragment,{children:[s.jsx(rs,{className:"h-4 w-4 group-hover:scale-110 transition-transform duration-200"}),s.jsx("span",{children:"Export Data"})]})})]})})]})})}):null}class Ur{static async getAllCategories(){try{console.log("🔍 CategoryService: Fetching all categories...");const{data:a,error:l}=await ne.from("categories").select("*").order("sort_order",{ascending:!0}).order("name",{ascending:!0});if(l)throw l;const i=await Promise.all(a.map(async c=>{const u=await this.getCategoryStats(c.id);return{...c,stats:u}}));return console.log(`✅ CategoryService: Retrieved ${i.length} categories`),{success:!0,data:i}}catch(a){return console.error("❌ CategoryService: Error fetching categories:",a),{success:!1,error:a.message,data:[]}}}static async getActiveCategories(){try{console.log("🔍 CategoryService: Fetching active categories...");const{data:a,error:l}=await ne.from("categories").select("*").eq("is_active",!0).order("sort_order",{ascending:!0}).order("name",{ascending:!0});if(l)throw l;return console.log(`✅ CategoryService: Retrieved ${a.length} active categories`),{success:!0,data:a||[]}}catch(a){return console.error("❌ CategoryService: Error fetching active categories:",a),{success:!1,error:a.message,data:[]}}}static async getCategoryStats(a){try{const{data:l,error:i}=await ne.rpc("get_category_stats",{category_uuid:a});if(i)throw i;return l&&l.length>0?l[0]:{total_products:0,active_products:0,archived_products:0,total_value:0,low_stock_count:0}}catch(l){return console.error("❌ CategoryService: Error fetching category stats:",l),{total_products:0,active_products:0,archived_products:0,total_value:0,low_stock_count:0}}}static async createCategory(a){try{console.log("📝 CategoryService: Creating new category:",a.name);const{data:l,error:i}=await ne.from("categories").insert([{name:a.name,description:a.description||"",color:a.color||"#3B82F6",icon:a.icon||"Package",sort_order:a.sort_order||0}]).select().single();if(i)throw i;return console.log("✅ CategoryService: Category created successfully"),{success:!0,data:l}}catch(l){return console.error("❌ CategoryService: Error creating category:",l),{success:!1,error:l.message}}}static async updateCategory(a,l){try{console.log("📝 CategoryService: Updating category:",a);const{data:i,error:c}=await ne.from("categories").update(l).eq("id",a).select().single();if(c)throw c;return console.log("✅ CategoryService: Category updated successfully"),{success:!0,data:i}}catch(i){return console.error("❌ CategoryService: Error updating category:",i),{success:!1,error:i.message}}}static async deleteCategory(a){try{console.log("🗑️ CategoryService: Attempting to delete category:",a);const{data:l,error:i}=await ne.rpc("safe_delete_category",{category_uuid:a});if(i)throw i;return l?(console.log("✅ CategoryService: Category deleted successfully"),{success:!0,message:"Category deleted successfully"}):(console.log("⚠️ CategoryService: Cannot delete category with associated products"),{success:!1,error:"Cannot delete category that has associated products"})}catch(l){return console.error("❌ CategoryService: Error deleting category:",l),{success:!1,error:l.message}}}static async reorderCategories(a){try{console.log("🔄 CategoryService: Reordering categories...");const l=a.map(({id:i,sort_order:c})=>ne.from("categories").update({sort_order:c}).eq("id",i));return await Promise.all(l),console.log("✅ CategoryService: Categories reordered successfully"),{success:!0,message:"Categories reordered successfully"}}catch(l){return console.error("❌ CategoryService: Error reordering categories:",l),{success:!1,error:l.message}}}}class Kn{static async getArchivedProducts(){try{console.log("🔍 ArchiveService: Fetching archived products...");const{data:a,error:l}=await ne.from("archived_products").select("*").order("archived_at",{ascending:!1});if(l)throw l;return console.log(`✅ ArchiveService: Retrieved ${a.length} archived products`),{success:!0,data:a||[]}}catch(a){return console.error("❌ ArchiveService: Error fetching archived products:",a),{success:!1,error:a.message,data:[]}}}static async archiveProduct(a,l){try{console.log("📦 ArchiveService: Archiving product:",a);const{data:i,error:c}=await ne.rpc("archive_product",{product_uuid:a,user_uuid:l});if(c)throw c;return i?(console.log("✅ ArchiveService: Product archived successfully"),{success:!0,message:"Product archived successfully"}):{success:!1,error:"Product not found or already archived"}}catch(i){return console.error("❌ ArchiveService: Error archiving product:",i),{success:!1,error:i.message}}}static async restoreProduct(a){try{console.log("♻️ ArchiveService: Restoring product:",a);const{data:l,error:i}=await ne.rpc("restore_product",{product_uuid:a});if(i)throw i;return l?(console.log("✅ ArchiveService: Product restored successfully"),{success:!0,message:"Product restored successfully"}):{success:!1,error:"Product not found or not archived"}}catch(l){return console.error("❌ ArchiveService: Error restoring product:",l),{success:!1,error:l.message}}}static async permanentlyDeleteProduct(a){try{console.log("🗑️ ArchiveService: Permanently deleting product:",a);const{data:l,error:i}=await ne.from("products").select("is_archived").eq("id",a).single();if(i)throw i;if(!l.is_archived)return{success:!1,error:"Only archived products can be permanently deleted"};const{error:c}=await ne.from("products").delete().eq("id",a);if(c)throw c;return console.log("✅ ArchiveService: Product permanently deleted"),{success:!0,message:"Product permanently deleted"}}catch(l){return console.error("❌ ArchiveService: Error permanently deleting product:",l),{success:!1,error:l.message}}}}class na{static categoryMappings={"pain relief":"Pain Relief",analgesics:"Pain Relief","anti-inflammatory":"Pain Relief",painkiller:"Pain Relief",nsaid:"Pain Relief",antibiotics:"Antibiotics",antibiotic:"Antibiotics",infection:"Antibiotics",antimicrobial:"Antibiotics",cardiovascular:"Cardiovascular",heart:"Cardiovascular","blood pressure":"Cardiovascular",hypertension:"Cardiovascular",circulation:"Cardiovascular",digestive:"Digestive Health",stomach:"Digestive Health",antacid:"Digestive Health",gastro:"Digestive Health",laxative:"Digestive Health",respiratory:"Respiratory",cough:"Respiratory",cold:"Respiratory",asthma:"Respiratory",bronchial:"Respiratory",vitamins:"Vitamins & Supplements",vitamin:"Vitamins & Supplements",supplements:"Vitamins & Supplements",mineral:"Vitamins & Supplements",multivitamin:"Vitamins & Supplements",diabetes:"Diabetes Care",diabetic:"Diabetes Care",insulin:"Diabetes Care","blood sugar":"Diabetes Care",dermatology:"Dermatology",skin:"Dermatology",topical:"Dermatology",cream:"Dermatology",ointment:"Dermatology",ophthalmology:"Eye Care",eye:"Eye Care",vision:"Eye Care",drops:"Eye Care",general:"General Medicine",misc:"General Medicine",other:"General Medicine",otc:"Over-the-Counter"};static defaultColors=["#EF4444","#F59E0B","#10B981","#3B82F6","#6366F1","#8B5CF6","#EC4899","#F97316","#84CC16","#06B6D4"];static normalizeCategoryName(a){if(!a||typeof a!="string")return"General Medicine";const l=a.toLowerCase().trim();if(this.categoryMappings[l])return this.categoryMappings[l];for(const[i,c]of Object.entries(this.categoryMappings))if(l.includes(i)||i.includes(l))return c;return a.split(" ").map(i=>i.charAt(0).toUpperCase()+i.slice(1).toLowerCase()).join(" ")}static async categoryExists(a){try{const l=this.normalizeCategoryName(a),{data:i,error:c}=await ne.from("categories").select("id, name").ilike("name",l);if(c)throw c;return{exists:i&&i.length>0,category:i&&i.length>0?i[0]:null,normalizedName:l}}catch(l){return console.error("❌ Error checking category existence:",l),{exists:!1,category:null,normalizedName:a}}}static async createCategoryDuringImport(a,l={}){try{console.log(`🧠 Creating category intelligently: "${a}"`);const i=this.normalizeCategoryName(a),c=await this.categoryExists(i);if(c.exists)return console.log(`✅ Category "${i}" already exists`),{success:!0,category:c.category,action:"existing"};const{data:u}=await ne.from("categories").select("sort_order").order("sort_order",{ascending:!1}).limit(1),h=u&&u.length>0?u[0].sort_order+10:10,{data:m}=await ne.from("categories").select("color"),x=m?m.map(N=>N.color):[],g=this.defaultColors.filter(N=>!x.includes(N)),p=g.length>0?g[0]:this.defaultColors[Math.floor(Math.random()*this.defaultColors.length)],v={name:i,description:`Auto-created during import for ${i} products`,color:p,icon:this.getIconForCategory(i),sort_order:h,is_active:!0,metadata:{auto_created:!0,created_during:"import",original_name:a,...l}},{data:j,error:w}=await ne.from("categories").insert([v]).select().single();if(w)throw w;return console.log(`✅ Category "${i}" created successfully`),await this.logCategoryCreation(j,l),{success:!0,category:j,action:"created"}}catch(i){return console.error("❌ Error creating category during import:",i),{success:!1,error:i.message,action:"failed"}}}static getIconForCategory(a){const l=a.toLowerCase();return l.includes("pain")||l.includes("relief")?"Zap":l.includes("heart")||l.includes("cardio")?"Heart":l.includes("vitamin")||l.includes("supplement")?"Shield":l.includes("digestive")||l.includes("stomach")?"Stomach":l.includes("respiratory")||l.includes("cough")?"Droplets":l.includes("skin")||l.includes("dermatology")?"Sun":l.includes("eye")||l.includes("vision")?"Eye":l.includes("diabetes")||l.includes("blood")?"Activity":l.includes("antibiotic")||l.includes("infection")?"Cross":"Package"}static async logCategoryCreation(a,l){try{const i={action:"category_auto_created",category_id:a.id,category_name:a.name,metadata:{...l,auto_created:!0,timestamp:new Date().toISOString()}};await ne.from("user_activity_logs").insert([{user_id:l.user_id||null,action_type:"category_created",metadata:i}])}catch(i){console.warn("⚠️ Failed to log category creation:",i)}}static async calculateCategoryStats(a){try{console.log(`📊 Calculating stats for category: ${a}`);const{data:l,error:i}=await ne.from("products").select(`
          id,
          name,
          category,
          stock_in_pieces,
          price_per_piece,
          cost_price,
          reorder_level,
          is_active
        `).eq("category_id",a).eq("is_active",!0);if(i)throw i;if(!l||l.length===0)return{total_products:0,active_products:0,total_value:0,total_cost_value:0,total_profit_potential:0,low_stock_count:0,out_of_stock_count:0,average_price:0};const c=l.reduce((u,h)=>{const m=(h.stock_in_pieces||0)*(h.price_per_piece||0),x=(h.stock_in_pieces||0)*(h.cost_price||0),g=m-x;return u.total_products++,h.is_active&&u.active_products++,u.total_value+=m,u.total_cost_value+=x,u.total_profit_potential+=g,h.stock_in_pieces<=h.reorder_level&&u.low_stock_count++,h.stock_in_pieces===0&&u.out_of_stock_count++,u.price_sum+=h.price_per_piece||0,u},{total_products:0,active_products:0,total_value:0,total_cost_value:0,total_profit_potential:0,low_stock_count:0,out_of_stock_count:0,price_sum:0});return c.average_price=c.active_products>0?c.price_sum/c.active_products:0,delete c.price_sum,console.log("✅ Category stats calculated:",c),c}catch(l){return console.error("❌ Error calculating category stats:",l),{total_products:0,active_products:0,total_value:0,total_cost_value:0,total_profit_potential:0,low_stock_count:0,out_of_stock_count:0,average_price:0}}}static async updateCategoryStats(a){try{const l=await this.calculateCategoryStats(a),{error:i}=await ne.from("categories").update({stats:l,last_calculated:new Date().toISOString()}).eq("id",a);if(i)throw i;return console.log(`✅ Category ${a} stats updated in database`),{success:!0,stats:l}}catch(l){return console.error("❌ Error updating category stats:",l),{success:!1,error:l.message}}}static async updateAllCategoryStats(){try{console.log("🔄 Updating all category statistics...");const{data:a,error:l}=await ne.from("categories").select("id, name").eq("is_active",!0);if(l)throw l;const i=await Promise.all(a.map(h=>this.updateCategoryStats(h.id))),c=i.filter(h=>h.success).length,u=i.filter(h=>!h.success).length;return console.log(`✅ Category stats update complete: ${c} successful, ${u} failed`),{success:u===0,updated:c,failed:u,results:i}}catch(a){return console.error("❌ Error updating all category stats:",a),{success:!1,error:a.message}}}static async getCategoryInsights(){try{console.log("📈 Getting category insights...");const{data:a,error:l}=await ne.from("categories").select("*").eq("is_active",!0).order("stats->total_value",{ascending:!1});if(l)throw l;const i={total_categories:a.length,total_value:a.reduce((c,u)=>c+(u.stats?.total_value||0),0),total_products:a.reduce((c,u)=>c+(u.stats?.total_products||0),0),total_low_stock:a.reduce((c,u)=>c+(u.stats?.low_stock_count||0),0),top_value_categories:a.slice(0,5),low_performing_categories:a.filter(c=>(c.stats?.total_value||0)<1e3),auto_created_categories:a.filter(c=>c.metadata?.auto_created),categories_needing_attention:a.filter(c=>(c.stats?.low_stock_count||0)>0)};return console.log("✅ Category insights generated:",i),{success:!0,data:i}}catch(a){return console.error("❌ Error getting category insights:",a),{success:!1,error:a.message}}}static async processBulkCategoryCreation(a,l={}){try{console.log(`🔄 Processing bulk category creation for ${a.length} categories`);const i=await Promise.all(a.map(async m=>{const x=await this.createCategoryDuringImport(m,l);return{original_name:m,normalized_name:x.category?.name,action:x.action,success:x.success,category_id:x.category?.id}})),c=i.filter(m=>m.action==="created").length,u=i.filter(m=>m.action==="existing").length,h=i.filter(m=>!m.success).length;return console.log(`✅ Bulk category processing complete: ${c} created, ${u} existing, ${h} failed`),{success:h===0,summary:{created:c,existing:u,failed:h},results:i}}catch(i){return console.error("❌ Error in bulk category processing:",i),{success:!1,error:i.message}}}}function j2({isOpen:n,onClose:a,onImport:l}){const[i,c]=S.useState(null),[u,h]=S.useState(!1),[m,x]=S.useState([]),[g,p]=S.useState([]),[v,j]=S.useState("upload"),[w,N]=S.useState(null),[_,C]=S.useState([]),O=S.useRef(null),q=K=>{if(K){if(!K.name.endsWith(".csv")&&!K.name.endsWith(".json")){p(["Please select a CSV or JSON file"]);return}c(K),p([]),L(K)}},L=async K=>{h(!0);try{const ee=await K.text();let he=[];K.name.endsWith(".csv")?he=z(ee):K.name.endsWith(".json")&&(he=JSON.parse(ee));const{validData:xe,validationErrors:oe,categoriesFound:G}=await Q(he);x(xe),p(oe),C(G),j("preview")}catch(ee){p([`Error processing file: ${ee.message}`])}finally{h(!1)}},z=K=>{const ee=K.split(`
`),he=ee[0].split(",").map(xe=>xe.replace(/"/g,"").trim());return ee.slice(1).filter(xe=>xe.trim()).map(xe=>{const oe=xe.split(",").map(X=>X.replace(/"/g,"").trim()),G={};return he.forEach((X,R)=>{G[X]=oe[R]||""}),G})},Q=async K=>{const ee=[],he=[],xe=new Set,oe=[];console.log("🧠 Starting intelligent validation with category processing..."),K.forEach((G,X)=>{if(G.Category){const R=na.normalizeCategoryName(G.Category);xe.add(R)}});for(const G of xe){const X=await na.categoryExists(G);X.exists||oe.push({original:G,normalized:X.normalizedName})}return console.log(`📊 Found ${xe.size} unique categories, ${oe.length} will be auto-created`),K.forEach((G,X)=>{const R=[];if(G["Product Name"]||R.push("Product name is required"),G.Category||R.push("Category is required"),(!G["Price per Piece"]||parseFloat(G["Price per Piece"])<=0)&&R.push("Valid price per piece is required"),(!G["Stock (Pieces)"]||parseInt(G["Stock (Pieces)"])<0)&&R.push("Valid stock quantity is required"),["Cost Price","Base Price","Price per Piece","Margin Percentage","Pieces per Sheet","Sheets per Box","Stock (Pieces)","Reorder Level"].forEach(J=>{if(G[J]&&G[J]!==""){const ye=J.includes("Price")||J.includes("Margin")?parseFloat(G[J]):parseInt(G[J]);(isNaN(ye)||ye<0)&&R.push(`${J} must be a valid positive number`)}}),G["Expiry Date"]&&G["Expiry Date"]!==""){const J=new Date(G["Expiry Date"]);isNaN(J.getTime())?R.push("Invalid expiry date format (use YYYY-MM-DD)"):J<new Date&&R.push("Expiry date cannot be in the past")}if(G["Cost Price"]&&G["Price per Piece"]){const J=parseFloat(G["Cost Price"]),ye=parseFloat(G["Price per Piece"]);!isNaN(J)&&!isNaN(ye)&&(J>ye&&R.push("Cost price cannot be higher than selling price"),(ye-J)/J*100<5&&R.push("Profit margin is very low (less than 5%)"))}if(R.length>0)he.push(`Row ${X+2}: ${R.join(", ")}`);else{const J=na.normalizeCategoryName(G.Category),ye={name:G["Product Name"].trim(),description:G.Description?G.Description.trim():"",category:J,brand:G.Brand?G.Brand.trim():"",cost_price:G["Cost Price"]?parseFloat(G["Cost Price"]):null,base_price:G["Base Price"]?parseFloat(G["Base Price"]):null,price_per_piece:parseFloat(G["Price per Piece"]),margin_percentage:G["Margin Percentage"]?parseFloat(G["Margin Percentage"]):G["Cost Price"]&&G["Price per Piece"]?(parseFloat(G["Price per Piece"])-parseFloat(G["Cost Price"]))/parseFloat(G["Cost Price"])*100:0,pieces_per_sheet:G["Pieces per Sheet"]?parseInt(G["Pieces per Sheet"]):1,sheets_per_box:G["Sheets per Box"]?parseInt(G["Sheets per Box"]):1,stock_in_pieces:parseInt(G["Stock (Pieces)"]),reorder_level:G["Reorder Level"]?parseInt(G["Reorder Level"]):10,supplier:G.Supplier?G.Supplier.trim():"",expiry_date:G["Expiry Date"]||null,batch_number:G["Batch Number"]?G["Batch Number"].trim():`BATCH-${Date.now()}-${X}`,is_archived:!1,archived_at:null,archived_by:null,import_metadata:{original_category:G.Category,normalized_category:J,imported_at:new Date().toISOString(),row_number:X+2}};ee.push(ye)}}),{validData:ee,validationErrors:he,categoriesFound:Array.from(xe),newCategories:oe}},H=async()=>{j("importing"),h(!0);try{console.log("🚀 Starting intelligent import process...");const K=[...new Set(m.map(he=>he.category))];console.log(`📋 Processing ${K.length} unique categories...`);const ee=await na.processBulkCategoryCreation(K,{user_id:null,import_session:Date.now()});N(ee.summary),console.log("✅ Category processing complete:",ee.summary),await l(m),console.log("📊 Updating category statistics..."),await na.updateAllCategoryStats(),setTimeout(()=>{h(!1),a(),Y()},1e3)}catch(K){p([`Import failed: ${K.message}`]),h(!1),j("preview")}},Y=()=>{c(null),x([]),p([]),j("upload"),h(!1),N(null),C([])},se=()=>{const K=["Product Name,Description,Category,Brand,Cost Price,Base Price,Price per Piece,Margin Percentage,Pieces per Sheet,Sheets per Box,Stock (Pieces),Reorder Level,Supplier,Expiry Date,Batch Number","Paracetamol 500mg,Pain relief tablet,Pain Relief,GenericPharm,2.00,2.25,2.50,25.00,10,10,1000,100,MediSupply,2025-12-31,BATCH-2024-001","Amoxicillin 250mg,Antibiotic capsule,Antibiotics,PharmaCorp,4.60,5.18,5.75,25.00,8,12,500,50,HealthDistrib,2024-10-15,BATCH-2024-002","Vitamin C 500mg,Immune support tablet,Vitamins,VitaPlus,1.50,1.88,2.50,66.67,20,5,2000,200,NutriCorp,2025-06-30,BATCH-2024-003"].join(`
`),ee=new Blob([K],{type:"text/csv;charset=utf-8;"}),he=document.createElement("a"),xe=URL.createObjectURL(ee);he.setAttribute("href",xe),he.setAttribute("download","enhanced_inventory_import_template.csv"),he.style.visibility="hidden",document.body.appendChild(he),he.click(),document.body.removeChild(he)};return n?s.jsx("div",{className:"fixed inset-0 bg-black/60 backdrop-blur-sm flex items-center justify-center z-50 p-4",children:s.jsx("div",{className:"bg-white rounded-2xl shadow-2xl max-w-4xl w-full max-h-[95vh] overflow-hidden",children:s.jsxs("div",{className:"flex flex-col h-full",children:[s.jsxs("div",{className:"flex items-center justify-between p-6 border-b border-gray-200 bg-gradient-to-r from-green-50 to-emerald-50",children:[s.jsxs("div",{className:"flex items-center space-x-3",children:[s.jsx("div",{className:"p-2 bg-green-100 rounded-xl",children:s.jsx(dd,{className:"h-6 w-6 text-green-600"})}),s.jsx("h3",{className:"text-xl font-bold text-gray-900",children:"Import Products"})]}),s.jsx("button",{onClick:()=>{a(),Y()},className:"group p-2 text-gray-400 hover:text-gray-600 hover:bg-gray-100 rounded-xl transition-all duration-200",children:s.jsx(Yt,{className:"h-6 w-6 group-hover:scale-110 transition-transform duration-200"})})]}),s.jsxs("div",{className:"flex-1 overflow-y-auto p-6",children:[s.jsxs("div",{className:"flex items-center space-x-4 mb-6",children:[s.jsxs("div",{className:`flex items-center space-x-2 ${v==="upload"?"text-blue-600":v==="preview"||v==="importing"?"text-green-600":"text-gray-400"}`,children:[s.jsx("div",{className:`w-8 h-8 rounded-full flex items-center justify-center ${v==="upload"?"bg-blue-100":v==="preview"||v==="importing"?"bg-green-100":"bg-gray-100"}`,children:s.jsx("span",{className:"text-sm font-medium",children:"1"})}),s.jsx("span",{className:"font-medium",children:"Upload File"})]}),s.jsx("div",{className:`h-px flex-1 ${v==="preview"||v==="importing"?"bg-green-600":"bg-gray-300"}`}),s.jsxs("div",{className:`flex items-center space-x-2 ${v==="preview"?"text-blue-600":v==="importing"?"text-green-600":"text-gray-400"}`,children:[s.jsx("div",{className:`w-8 h-8 rounded-full flex items-center justify-center ${v==="preview"?"bg-blue-100":v==="importing"?"bg-green-100":"bg-gray-100"}`,children:s.jsx("span",{className:"text-sm font-medium",children:"2"})}),s.jsx("span",{className:"font-medium",children:"Preview & Validate"})]}),s.jsx("div",{className:`h-px flex-1 ${v==="importing"?"bg-green-600":"bg-gray-300"}`}),s.jsxs("div",{className:`flex items-center space-x-2 ${v==="importing"?"text-blue-600":"text-gray-400"}`,children:[s.jsx("div",{className:`w-8 h-8 rounded-full flex items-center justify-center ${v==="importing"?"bg-blue-100":"bg-gray-100"}`,children:s.jsx("span",{className:"text-sm font-medium",children:"3"})}),s.jsx("span",{className:"font-medium",children:"Import"})]})]}),v==="upload"&&s.jsxs("div",{className:"space-y-6",children:[s.jsxs("div",{className:"border-2 border-dashed border-gray-300 rounded-lg p-8 text-center hover:border-gray-400 transition-colors",children:[s.jsx("input",{ref:O,type:"file",accept:".csv,.json",onChange:K=>q(K.target.files[0]),className:"hidden"}),s.jsx(Z_,{className:"h-12 w-12 text-gray-400 mx-auto mb-4"}),s.jsx("p",{className:"text-lg font-medium text-gray-900 mb-2",children:"Choose a file to import"}),s.jsx("p",{className:"text-gray-500 mb-4",children:"Upload a CSV or JSON file with your product data"}),s.jsx("button",{onClick:()=>O.current?.click(),className:"px-4 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700",disabled:u,children:u?"Processing...":"Browse Files"})]}),s.jsx("div",{className:"bg-blue-50 rounded-lg p-4",children:s.jsxs("div",{className:"flex items-start space-x-3",children:[s.jsx("div",{className:"flex-shrink-0",children:s.jsx(rs,{className:"h-5 w-5 text-blue-600 mt-0.5"})}),s.jsxs("div",{children:[s.jsx("h4",{className:"text-sm font-medium text-blue-900 mb-1",children:"Don't have a template?"}),s.jsx("p",{className:"text-sm text-blue-700 mb-2",children:"Download our CSV template with the required columns and example data."}),s.jsx("button",{onClick:se,className:"text-sm text-blue-600 hover:text-blue-800 font-medium underline",children:"Download Template"})]})]})}),s.jsxs("div",{className:"text-sm text-gray-600",children:[s.jsx("h4",{className:"font-medium mb-2",children:"Required columns:"}),s.jsxs("ul",{className:"list-disc list-inside space-y-1",children:[s.jsxs("li",{children:[s.jsx("strong",{children:"Product Name"})," - Product identifier"]}),s.jsxs("li",{children:[s.jsx("strong",{children:"Category"})," - Must be valid category (Pain Relief, Antibiotics, etc.)"]}),s.jsxs("li",{children:[s.jsx("strong",{children:"Price per Piece"})," - Selling price (₱)"]}),s.jsxs("li",{children:[s.jsx("strong",{children:"Stock (Pieces)"})," - Current inventory count"]})]}),s.jsx("h4",{className:"font-medium mt-4 mb-2",children:"Enhanced Pricing (Optional):"}),s.jsxs("ul",{className:"list-disc list-inside space-y-1",children:[s.jsxs("li",{children:[s.jsx("strong",{children:"Cost Price"})," - Purchase cost per piece (₱)"]}),s.jsxs("li",{children:[s.jsx("strong",{children:"Base Price"})," - Base pricing before markup (₱)"]}),s.jsxs("li",{children:[s.jsx("strong",{children:"Margin Percentage"})," - Profit margin (0-1000%)"]})]}),s.jsx("h4",{className:"font-medium mt-4 mb-2",children:"Product Details (Optional):"}),s.jsxs("ul",{className:"list-disc list-inside space-y-1",children:[s.jsxs("li",{children:[s.jsx("strong",{children:"Description, Brand, Supplier"})," - Product information"]}),s.jsxs("li",{children:[s.jsx("strong",{children:"Pieces per Sheet, Sheets per Box"})," - Unit conversion"]}),s.jsxs("li",{children:[s.jsx("strong",{children:"Reorder Level"})," - Stock alert threshold"]}),s.jsxs("li",{children:[s.jsx("strong",{children:"Expiry Date"})," - Format: YYYY-MM-DD"]}),s.jsxs("li",{children:[s.jsx("strong",{children:"Batch Number"})," - Tracking identifier"]})]}),s.jsx("div",{className:"mt-4 p-3 bg-blue-50 rounded-lg",children:s.jsxs("p",{className:"text-sm text-blue-800",children:[s.jsx("strong",{children:"💡 Pro Tip:"})," If Cost Price and Selling Price are provided, margin percentage will be automatically calculated. All pricing fields support automatic markup calculations."]})})]})]}),v==="preview"&&s.jsxs("div",{className:"space-y-6",children:[g.length>0&&s.jsx("div",{className:"bg-red-50 border border-red-200 rounded-lg p-4",children:s.jsxs("div",{className:"flex items-start space-x-3",children:[s.jsx(wx,{className:"h-5 w-5 text-red-600 mt-0.5 flex-shrink-0"}),s.jsxs("div",{children:[s.jsxs("h4",{className:"text-sm font-medium text-red-900 mb-2",children:["Validation Errors (",g.length,")"]}),s.jsx("ul",{className:"text-sm text-red-700 space-y-1 max-h-32 overflow-y-auto",children:g.map((K,ee)=>s.jsx("li",{className:"list-disc list-inside",children:K},ee))})]})]})}),m.length>0&&s.jsx("div",{className:"bg-green-50 border border-green-200 rounded-lg p-4",children:s.jsxs("div",{className:"flex items-center space-x-3",children:[s.jsx(_x,{className:"h-5 w-5 text-green-600"}),s.jsxs("div",{className:"flex-1",children:[s.jsx("h4",{className:"text-sm font-medium text-green-900",children:"Ready to Import - Enhanced Data Analysis"}),s.jsxs("div",{className:"mt-2 grid grid-cols-2 md:grid-cols-4 gap-4 text-sm text-green-700",children:[s.jsxs("div",{children:[s.jsx("span",{className:"font-medium",children:m.length})," ","products total"]}),s.jsxs("div",{children:[s.jsx("span",{className:"font-medium",children:m.filter(K=>K.cost_price).length})," ","with cost data"]}),s.jsxs("div",{children:[s.jsx("span",{className:"font-medium",children:m.filter(K=>K.expiry_date).length})," ","with expiry dates"]}),s.jsxs("div",{children:[s.jsxs("span",{className:"font-medium",children:["₱",m.reduce((K,ee)=>K+(ee.cost_price||0)*ee.stock_in_pieces,0).toLocaleString()]})," ","total inventory value"]})]})]})]})}),_.length>0&&s.jsx("div",{className:"bg-blue-50 border border-blue-200 rounded-lg p-4",children:s.jsxs("div",{className:"flex items-start space-x-3",children:[s.jsx(ao,{className:"h-5 w-5 text-blue-600 mt-0.5 flex-shrink-0"}),s.jsxs("div",{className:"flex-1",children:[s.jsx("h4",{className:"text-sm font-medium text-blue-900 mb-2",children:"🧠 Intelligent Category Processing"}),s.jsxs("p",{className:"text-sm text-blue-800 mb-3",children:[s.jsx("span",{className:"font-medium",children:_.length})," new categories will be automatically created with professional settings:"]}),s.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-2 text-sm",children:[_.slice(0,6).map((K,ee)=>s.jsxs("div",{className:"flex items-center space-x-2 bg-white rounded px-2 py-1",children:[s.jsx(il,{className:"h-3 w-3 text-blue-600"}),s.jsx("span",{className:"text-gray-700",children:K.original}),K.original!==K.normalized&&s.jsxs("span",{className:"text-xs text-blue-600",children:["→ ",K.normalized]})]},ee)),_.length>6&&s.jsxs("div",{className:"text-xs text-blue-700 col-span-full",children:["+ ",_.length-6," more categories..."]})]}),s.jsxs("div",{className:"mt-3 text-xs text-blue-700 bg-blue-100 rounded px-2 py-1",children:[s.jsx(Od,{className:"h-3 w-3 inline mr-1"}),"Categories are automatically normalized and will include professional icons, colors, and settings."]})]})]})}),m.length>0&&s.jsxs("div",{children:[s.jsxs("h4",{className:"text-sm font-medium text-gray-900 mb-3",children:["Preview (",m.length," products)"]}),s.jsxs("div",{className:"border border-gray-200 rounded-lg overflow-hidden",children:[s.jsx("div",{className:"max-h-64 overflow-y-auto",children:s.jsxs("table",{className:"min-w-full divide-y divide-gray-200",children:[s.jsx("thead",{className:"bg-gray-50",children:s.jsxs("tr",{children:[s.jsx("th",{className:"px-4 py-2 text-left text-xs font-medium text-gray-500 uppercase",children:"Product Name"}),s.jsx("th",{className:"px-4 py-2 text-left text-xs font-medium text-gray-500 uppercase",children:"Category"}),s.jsx("th",{className:"px-4 py-2 text-left text-xs font-medium text-gray-500 uppercase",children:"Cost Price"}),s.jsx("th",{className:"px-4 py-2 text-left text-xs font-medium text-gray-500 uppercase",children:"Sell Price"}),s.jsx("th",{className:"px-4 py-2 text-left text-xs font-medium text-gray-500 uppercase",children:"Margin %"}),s.jsx("th",{className:"px-4 py-2 text-left text-xs font-medium text-gray-500 uppercase",children:"Stock"}),s.jsx("th",{className:"px-4 py-2 text-left text-xs font-medium text-gray-500 uppercase",children:"Expiry"})]})}),s.jsx("tbody",{className:"bg-white divide-y divide-gray-200",children:m.slice(0,10).map((K,ee)=>s.jsxs("tr",{className:"hover:bg-gray-50",children:[s.jsx("td",{className:"px-4 py-2 text-sm text-gray-900",children:K.name}),s.jsx("td",{className:"px-4 py-2 text-sm text-gray-600",children:K.category}),s.jsx("td",{className:"px-4 py-2 text-sm text-gray-600",children:K.cost_price?`₱${K.cost_price.toFixed(2)}`:"N/A"}),s.jsxs("td",{className:"px-4 py-2 text-sm text-gray-900 font-medium",children:["₱",K.price_per_piece.toFixed(2)]}),s.jsx("td",{className:"px-4 py-2 text-sm text-gray-600",children:K.margin_percentage?`${K.margin_percentage.toFixed(1)}%`:"N/A"}),s.jsx("td",{className:"px-4 py-2 text-sm text-gray-600",children:K.stock_in_pieces.toLocaleString()}),s.jsx("td",{className:"px-4 py-2 text-sm text-gray-600",children:K.expiry_date||"N/A"})]},ee))})]})}),m.length>10&&s.jsxs("div",{className:"bg-gray-50 px-4 py-2 text-sm text-gray-600",children:["... and ",m.length-10," more products"]})]})]})]}),v==="importing"&&s.jsxs("div",{className:"text-center py-8",children:[s.jsx("div",{className:"animate-spin rounded-full h-16 w-16 border-b-2 border-blue-600 mx-auto mb-4"}),s.jsx("h4",{className:"text-lg font-medium text-gray-900 mb-2",children:"Importing Enhanced Product Data..."}),s.jsxs("p",{className:"text-gray-600 mb-4",children:["Adding ",m.length," products with enhanced pricing and features."]}),s.jsx("div",{className:"bg-blue-50 rounded-lg p-4 mx-auto max-w-md",children:s.jsxs("div",{className:"text-sm text-blue-800 space-y-1",children:[s.jsxs("div",{className:"flex justify-between",children:[s.jsx("span",{children:"Products:"}),s.jsx("span",{className:"font-medium",children:m.length})]}),s.jsxs("div",{className:"flex justify-between",children:[s.jsx("span",{children:"With Pricing Data:"}),s.jsx("span",{className:"font-medium",children:m.filter(K=>K.cost_price).length})]}),s.jsxs("div",{className:"flex justify-between",children:[s.jsx("span",{children:"Categories:"}),s.jsx("span",{className:"font-medium",children:new Set(m.map(K=>K.category)).size})]})]})})]})]}),s.jsx("div",{className:"border-t border-gray-200 bg-gray-50 px-6 py-4",children:s.jsxs("div",{className:"flex justify-between",children:[s.jsx("div",{children:v==="preview"&&s.jsx("button",{onClick:()=>{j("upload"),c(null),x([]),p([])},className:"px-4 py-2 border-2 border-gray-200 text-gray-700 font-medium rounded-xl hover:border-gray-300 hover:bg-gray-50 transition-all duration-200",children:"Back"})}),s.jsxs("div",{className:"flex space-x-3",children:[s.jsx("button",{type:"button",onClick:()=>{a(),Y()},className:"px-6 py-2.5 border-2 border-gray-200 text-gray-700 font-medium rounded-xl hover:border-gray-300 hover:bg-gray-50 transition-all duration-200",disabled:v==="importing",children:"Cancel"}),v==="preview"&&s.jsxs("button",{onClick:H,disabled:m.length===0||u,className:"group flex items-center space-x-2 px-6 py-2.5 bg-gradient-to-r from-green-600 to-green-700 text-white font-semibold rounded-xl hover:from-green-700 hover:to-green-800 shadow-lg hover:shadow-xl transition-all duration-200 hover:scale-105 active:scale-95 disabled:opacity-50 disabled:cursor-not-allowed disabled:hover:scale-100",children:[s.jsx(dd,{className:"h-4 w-4 group-hover:scale-110 transition-transform duration-200"}),s.jsxs("span",{children:["Import ",m.length," Products"]})]})]})]})})]})})}):null}function w2({onSubmit:n,isLoading:a=!1,error:l=null}){const[i,c]=S.useState({email:"",password:""}),[u,h]=S.useState(!1),[m,x]=S.useState({}),g=()=>{const j={};return i.email?/^[^\s@]+@[^\s@]+\.[^\s@]+$/.test(i.email)||(j.email="Please enter a valid email address"):j.email="Email is required",i.password?i.password.length<6&&(j.password="Password must be at least 6 characters"):j.password="Password is required",x(j),Object.keys(j).length===0},p=j=>{j.preventDefault(),g()&&n(i)},v=j=>w=>{c(N=>({...N,[j]:w.target.value})),m[j]&&x(N=>({...N,[j]:""}))};return s.jsxs("form",{onSubmit:p,className:"space-y-5",children:[l&&s.jsx("div",{className:"bg-red-50 border border-red-200 text-red-700 px-4 py-3 rounded-lg text-sm",children:l}),s.jsxs("div",{children:[s.jsx("label",{htmlFor:"email",className:"block text-sm font-medium text-gray-700 mb-2",children:"Email Address"}),s.jsx("input",{id:"email",type:"email",value:i.email,onChange:v("email"),disabled:a,className:`w-full px-4 py-3 border rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500 transition-colors ${m.email?"border-red-300 focus:ring-red-500 focus:border-red-500":"border-gray-300"} ${a?"bg-gray-50 cursor-not-allowed":"bg-white"}`,placeholder:"Enter your email",autoComplete:"email"}),m.email&&s.jsx("p",{className:"mt-2 text-sm text-red-600",children:m.email})]}),s.jsxs("div",{children:[s.jsx("label",{htmlFor:"password",className:"block text-sm font-medium text-gray-700 mb-2",children:"Password"}),s.jsxs("div",{className:"relative",children:[s.jsx("input",{id:"password",type:u?"text":"password",value:i.password,onChange:v("password"),disabled:a,className:`w-full px-4 py-3 pr-12 border rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500 transition-colors ${m.password?"border-red-300 focus:ring-red-500 focus:border-red-500":"border-gray-300"} ${a?"bg-gray-50 cursor-not-allowed":"bg-white"}`,placeholder:"Enter your password",autoComplete:"current-password"}),s.jsx("button",{type:"button",onClick:()=>h(!u),disabled:a,className:"absolute right-3 top-1/2 transform -translate-y-1/2 text-gray-400 hover:text-gray-600 transition-colors disabled:cursor-not-allowed","aria-label":u?"Hide password":"Show password",children:u?s.jsx(Rd,{className:"h-5 w-5"}):s.jsx(Ua,{className:"h-5 w-5"})})]}),m.password&&s.jsx("p",{className:"mt-2 text-sm text-red-600",children:m.password})]}),s.jsx("button",{type:"submit",disabled:a,className:"w-full bg-blue-600 text-white py-3 px-4 rounded-lg font-medium hover:bg-blue-700 focus:ring-2 focus:ring-blue-500 focus:ring-offset-2 transition-colors disabled:bg-blue-400 disabled:cursor-not-allowed flex items-center justify-center",children:a?s.jsxs(s.Fragment,{children:[s.jsx(Nx,{className:"animate-spin h-5 w-5 mr-2"}),"Signing In..."]}):s.jsxs(s.Fragment,{children:[s.jsx(v1,{className:"h-5 w-5 mr-2"}),"Sign In"]})})]})}function _2(){const[n,a]=S.useState(!1),[l,i]=S.useState(null),{signIn:c,signOut:u}=Es();return{isLoading:n,error:l,handleLogin:async g=>{a(!0),i(null);try{console.log("🔐 useAuthForm: Attempting login with",g.email);const p=await c(g.email,g.password);if(p.error)throw new Error(p.error.message);console.log("✅ useAuthForm: Login successful")}catch(p){console.error("❌ useAuthForm: Login failed",p),i(p.message||"Invalid email or password")}finally{a(!1)}},handleLogout:async()=>{a(!0),i(null);try{await u()}catch(g){i(g.message||"Logout failed. Please try again.")}finally{a(!1)}},clearError:()=>{i(null)}}}function N2(){const{user:n}=Es(),a=It(),{isLoading:l,error:i,handleLogin:c}=_2(),u=a.state?.from?.pathname||"/dashboard";return n?s.jsx(Zn,{to:u,replace:!0}):s.jsx("div",{className:"min-h-screen bg-gradient-to-br from-blue-900 to-purple-900 flex items-center justify-center p-4",children:s.jsxs("div",{className:"bg-white rounded-2xl shadow-2xl w-full max-w-md p-8",children:[s.jsxs("div",{className:"text-center mb-8",children:[s.jsx("div",{className:"w-20 h-20 bg-blue-600 rounded-full flex items-center justify-center mx-auto mb-4",children:s.jsx("svg",{className:"w-10 h-10 text-white",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:s.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M19.428 15.428a2 2 0 00-1.022-.547l-2.387-.477a6 6 0 00-3.86.517l-.318.158a6 6 0 01-3.86.517L6.05 15.21a2 2 0 00-1.806.547M8 4h8l-1 1v5.172a2 2 0 00.586 1.414l5 5c1.26 1.26.367 3.414-1.415 3.414H4.828c-1.782 0-2.674-2.154-1.414-3.414l5-5A2 2 0 009 7.172V5L8 4z"})})}),s.jsx("h1",{className:"text-3xl font-bold text-gray-900 mb-2",children:"Medcure Pro"}),s.jsx("p",{className:"text-gray-600",children:"Pharmacy Management System"})]}),s.jsx(w2,{onSubmit:c,isLoading:l,error:i})]})})}function re(n){return new Intl.NumberFormat("en-PH",{style:"currency",currency:"PHP",minimumFractionDigits:2,maximumFractionDigits:2}).format(n||0)}function ks(n,a=0){return new Intl.NumberFormat("en-PH",{minimumFractionDigits:a,maximumFractionDigits:a}).format(n||0)}const Mi=as.memo(C2),Ui=as.memo(E2);function S2(){const[n,a]=S.useState(null),[l,i]=S.useState(!0),[c,u]=S.useState(null),h=S.useCallback(async()=>{try{i(!0),u(null),console.log("🔍 [Dashboard] Loading dashboard data...");const g=await od.getDashboardData();if(console.log("📊 [Dashboard] Service response:",{success:g.success,hasData:!!g.data}),g.success)a(g.data),console.log("✅ [Dashboard] Data loaded successfully.");else{const p=g.error||"Failed to load dashboard data";console.error("❌ [Dashboard] Service returned error:",p),u(p)}}catch(g){console.error("❌ [Dashboard] Error loading dashboard data:",g),u("An unexpected error occurred. Please try again.")}finally{i(!1)}},[]);if(S.useEffect(()=>{h()},[h]),l)return s.jsx("div",{className:"flex items-center justify-center h-screen",children:s.jsx(h2,{size:"lg"})});if(c)return s.jsx("div",{className:"flex items-center justify-center h-screen",children:s.jsxs("div",{className:"text-center p-8 bg-white shadow-lg rounded-xl",children:[s.jsx(Ss,{className:"h-12 w-12 text-red-500 mx-auto mb-4"}),s.jsx("h3",{className:"text-xl font-semibold text-gray-900 mb-2",children:"Dashboard Error"}),s.jsx("p",{className:"text-red-600 mb-6",children:c}),s.jsxs("button",{onClick:h,className:"inline-flex items-center px-6 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-blue-500 transition-colors",children:[s.jsx(yt,{className:"h-4 w-4 mr-2 animate-spin-slow"}),"Try Again"]})]})});if(!n)return s.jsx("div",{className:"flex items-center justify-center h-screen",children:s.jsxs("div",{className:"text-center",children:[s.jsx(Me,{className:"h-12 w-12 text-gray-400 mx-auto mb-4"}),s.jsx("p",{className:"text-gray-500",children:"No dashboard data available."})]})});const m=new Date().toLocaleTimeString("en-US",{hour:"2-digit",minute:"2-digit",hour12:!0}),x=new Date().toLocaleDateString("en-US",{weekday:"long",year:"numeric",month:"long",day:"numeric"});return s.jsx("div",{className:"min-h-screen bg-gray-50 p-6",children:s.jsxs("div",{className:"max-w-7xl mx-auto space-y-6",children:[s.jsx("header",{className:"bg-white rounded-xl shadow-sm border border-gray-200 p-8",children:s.jsxs("div",{className:"flex flex-col lg:flex-row lg:items-center lg:justify-between",children:[s.jsxs("div",{className:"flex-1",children:[s.jsxs("div",{className:"flex items-center space-x-4 mb-6",children:[s.jsxs("div",{className:"flex items-center space-x-2",children:[s.jsx("div",{className:"w-2 h-2 bg-green-500 rounded-full"}),s.jsx("span",{className:"text-sm font-medium text-green-700",children:"System Online"})]}),s.jsx("div",{className:"w-px h-4 bg-gray-200"}),s.jsxs("div",{className:"flex items-center space-x-2",children:[s.jsx(Oa,{className:"h-4 w-4 text-gray-500"}),s.jsx("span",{className:"text-sm font-medium text-gray-600",children:"Real-time Monitoring"})]})]}),s.jsx("h1",{className:"text-3xl lg:text-4xl font-bold mb-2 text-gray-900",children:"Dashboard"}),s.jsx("p",{className:"text-gray-600 text-lg mb-6",children:"Welcome back! Here's your pharmacy overview for today."}),s.jsxs("div",{className:"flex items-center space-x-6 text-sm",children:[s.jsxs("div",{className:"flex items-center space-x-2",children:[s.jsx(Hi,{className:"h-4 w-4 text-gray-400"}),s.jsx("span",{className:"text-gray-700 font-medium",children:m})]}),s.jsxs("div",{className:"flex items-center space-x-2",children:[s.jsx(so,{className:"h-4 w-4 text-gray-400"}),s.jsx("span",{className:"text-gray-600",children:x})]})]})]}),s.jsxs("div",{className:"mt-6 lg:mt-0 flex items-center space-x-3",children:[s.jsxs("button",{className:"bg-gray-100 hover:bg-gray-200 text-gray-700 px-4 py-2 rounded-lg transition-colors duration-200 flex items-center space-x-2 border border-gray-200",children:[s.jsx(Td,{className:"h-4 w-4"}),s.jsx("span",{children:"3 Alerts"})]}),s.jsxs("button",{onClick:h,disabled:l,className:"bg-gray-900 text-white hover:bg-gray-800 px-6 py-2 rounded-lg transition-colors duration-200 flex items-center space-x-2 font-medium disabled:bg-gray-400",children:[s.jsx(yt,{className:`h-4 w-4 ${l?"animate-spin":""}`}),s.jsx("span",{children:l?"Refreshing...":"Refresh"})]})]})]})}),s.jsxs("section",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-6",children:[s.jsx(Mi,{title:"Revenue Today",value:re(n.totalSales||0),icon:ns,trend:8.2,trendText:"vs yesterday",color:"green"}),s.jsx(Mi,{title:"Total Products",value:ks(n.totalProducts||0),icon:Me,trend:2.1,trendText:"this month",color:"blue"}),s.jsx(Mi,{title:"Low Stock Alert",value:ks(n.lowStockCount||0),icon:Ss,trend:-5.3,trendText:"improvement",color:"amber",isAlert:!0}),s.jsx(Mi,{title:"Active Users",value:ks(n.activeUsers||0),icon:sl,trend:12.5,trendText:"growth rate",color:"purple"})]}),s.jsxs("main",{className:"grid grid-cols-1 lg:grid-cols-12 gap-6",children:[s.jsx("aside",{className:"lg:col-span-4",children:s.jsxs("div",{className:"bg-white rounded-xl shadow-sm border border-gray-200 p-6 h-full",children:[s.jsxs("div",{className:"flex items-center justify-between mb-6",children:[s.jsxs("div",{children:[s.jsx("h3",{className:"text-lg font-semibold text-gray-900",children:"Quick Actions"}),s.jsx("p",{className:"text-gray-500 text-sm",children:"Essential tasks"})]}),s.jsx("div",{className:"p-2 bg-gray-100 rounded-lg",children:s.jsx(I1,{className:"h-5 w-5 text-gray-600"})})]}),s.jsxs("div",{className:"space-y-3",children:[s.jsx(Ui,{icon:Vt,title:"Process Sale",description:"Quick POS transaction",href:"/pos",color:"blue",badge:"Popular"}),s.jsx(Ui,{icon:R1,title:"Add Medication",description:"Add new products",href:"/inventory",color:"green"}),s.jsx(Ui,{icon:Lr,title:"View Analytics",description:"Performance insights",href:"/analytics",color:"purple"}),s.jsx(Ui,{icon:s2,title:"User Management",description:"System administration",href:"/management",color:"gray"})]})]})}),s.jsx("section",{className:"lg:col-span-8",children:s.jsxs("div",{className:"bg-white rounded-xl shadow-sm border border-gray-200 p-6 h-full",children:[s.jsxs("div",{className:"flex items-center justify-between mb-6",children:[s.jsxs("div",{children:[s.jsx("h3",{className:"text-lg font-semibold text-gray-900",children:"Today's Performance"}),s.jsx("p",{className:"text-gray-500 text-sm",children:"Real-time business metrics"})]}),s.jsxs("div",{className:"flex items-center space-x-2",children:[s.jsx("div",{className:"p-2 bg-green-50 rounded-lg border border-green-200",children:s.jsx(Gr,{className:"h-4 w-4 text-green-600"})}),s.jsx("span",{className:"text-sm font-medium text-green-700",children:"+15.3%"})]})]}),s.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4 mb-6",children:[s.jsx(Hu,{icon:Vt,value:"24",label:"Sales Today",color:"blue"}),s.jsx(Hu,{icon:i1,value:"98%",label:"Customer Satisfaction",color:"green"}),s.jsx(Hu,{icon:Oa,value:"5.2min",label:"Avg. Processing Time",color:"purple"})]}),s.jsxs("div",{children:[s.jsxs("h4",{className:"font-medium text-gray-900 mb-4 flex items-center",children:[s.jsx(Oa,{className:"h-4 w-4 mr-2 text-gray-500"}),"Recent Activity"]}),s.jsx("div",{className:"space-y-2",children:n.recentSales?.length>0?n.recentSales.slice(0,3).map((g,p)=>s.jsx(k2,{sale:g},g.id||p)):s.jsxs("div",{className:"text-center py-6",children:[s.jsx("div",{className:"w-12 h-12 bg-gray-100 rounded-lg flex items-center justify-center mx-auto mb-3",children:s.jsx(Vt,{className:"h-6 w-6 text-gray-400"})}),s.jsx("p",{className:"text-gray-600 font-medium text-sm",children:"No recent activity"}),s.jsx("p",{className:"text-gray-400 text-xs",children:"Start processing sales to see activity here"})]})})]})]})})]}),n.lowStockCount>0&&s.jsx("section",{className:"bg-gradient-to-r from-amber-50 via-orange-50 to-red-50 rounded-2xl border border-amber-200 overflow-hidden shadow-lg",children:s.jsx("div",{className:"p-6",children:s.jsxs("div",{className:"flex flex-col md:flex-row items-center justify-between gap-4",children:[s.jsxs("div",{className:"flex items-center space-x-4",children:[s.jsx("div",{className:"p-3 bg-gradient-to-br from-amber-500 to-orange-600 rounded-xl shadow-lg",children:s.jsx(Ss,{className:"h-6 w-6 text-white"})}),s.jsxs("div",{children:[s.jsx("h3",{className:"text-xl font-bold text-amber-900",children:"Inventory Alerts"}),s.jsx("p",{className:"text-amber-700",children:"Critical stock levels detected"})]})]}),s.jsxs("div",{className:"flex items-center space-x-3",children:[s.jsxs("span",{className:"px-4 py-2 bg-amber-200 text-amber-800 font-bold rounded-full text-sm",children:[n.lowStockCount," items"]}),s.jsxs("a",{href:"/inventory",className:"bg-gradient-to-r from-amber-600 to-orange-600 text-white px-6 py-2 rounded-xl hover:from-amber-700 hover:to-orange-700 transition-all duration-200 flex items-center space-x-2 font-semibold shadow-lg",children:[s.jsx(Ua,{className:"h-4 w-4"}),s.jsx("span",{children:"Review Inventory"}),s.jsx(E_,{className:"h-4 w-4"})]})]})]})})}),s.jsx("footer",{className:"bg-white rounded-2xl shadow-lg border border-gray-100 p-6",children:s.jsxs("div",{className:"flex flex-wrap items-center justify-between gap-4",children:[s.jsxs("div",{className:"flex items-center space-x-6",children:[s.jsxs("div",{className:"flex items-center space-x-2",children:[s.jsx("div",{className:"w-2 h-2 bg-green-500 rounded-full animate-pulse"}),s.jsx("span",{className:"text-sm font-medium text-gray-600",children:"All systems operational"})]}),s.jsxs("div",{className:"flex items-center space-x-2",children:[s.jsx(V_,{className:"h-4 w-4 text-gray-400"}),s.jsx("span",{className:"text-sm text-gray-500",children:"Database: Connected"})]}),s.jsxs("div",{className:"flex items-center space-x-2",children:[s.jsx(n1,{className:"h-4 w-4 text-gray-400"}),s.jsx("span",{className:"text-sm text-gray-500",children:"Support: Available 24/7"})]})]}),s.jsxs("div",{className:"text-xs text-gray-400",children:["Last updated: ",new Date().toLocaleTimeString()]})]})})]})})}const Hu=({icon:n,value:a,label:l,color:i})=>{const c={blue:"bg-blue-600",green:"bg-green-600",purple:"bg-purple-600"};return s.jsxs("div",{className:"text-center p-4 bg-gray-50 rounded-lg border border-gray-100",children:[s.jsx("div",{className:`w-10 h-10 ${c[i]} rounded-lg flex items-center justify-center mx-auto mb-3`,children:s.jsx(n,{className:"h-5 w-5 text-white"})}),s.jsx("div",{className:"text-xl font-bold text-gray-900",children:a}),s.jsx("div",{className:"text-sm text-gray-600",children:l})]})},k2=({sale:n})=>s.jsxs("div",{className:"flex items-center justify-between p-3 bg-gray-50 rounded-lg hover:bg-gray-100 transition-colors border border-gray-100",children:[s.jsxs("div",{className:"flex items-center space-x-3",children:[s.jsx("div",{className:"w-8 h-8 bg-gray-600 rounded-lg flex items-center justify-center",children:s.jsx(Vt,{className:"h-4 w-4 text-white"})}),s.jsxs("div",{children:[s.jsxs("p",{className:"font-medium text-gray-900 text-sm",children:["Sale #",n.id?.toString().slice(-6)]}),s.jsx("p",{className:"text-xs text-gray-500",children:n.customer_name||"Walk-in Customer"})]})]}),s.jsxs("div",{className:"text-right",children:[s.jsx("p",{className:"font-semibold text-gray-900 text-sm",children:re(n.total_amount||0)}),s.jsx("p",{className:"text-xs text-gray-500",children:new Date(n.created_at).toLocaleDateString()})]})]});function C2({title:n,value:a,icon:l,trend:i,trendText:c,color:u,isAlert:h=!1}){const m={green:"bg-green-600",blue:"bg-blue-600",amber:"bg-amber-600",purple:"bg-purple-600"};return s.jsxs("div",{className:`bg-white rounded-xl shadow-sm border p-6 hover:shadow-md transition-shadow ${h?"border-amber-200 bg-amber-50/20":"border-gray-200"}`,children:[s.jsxs("div",{className:"flex items-center justify-between mb-4",children:[s.jsx("div",{className:`p-2 rounded-lg ${m[u]}`,children:s.jsx(l,{className:"h-5 w-5 text-white"})}),i&&s.jsxs("div",{className:`flex items-center space-x-1 px-2 py-1 rounded-full text-xs font-medium ${i>0?"bg-green-100 text-green-700":"bg-red-100 text-red-700"}`,children:[i>0?s.jsx(Gr,{className:"h-3 w-3"}):s.jsx(Dd,{className:"h-3 w-3"}),s.jsxs("span",{children:[Math.abs(i),"%"]})]})]}),s.jsxs("div",{className:"space-y-1",children:[s.jsx("h3",{className:"text-gray-600 text-sm font-medium",children:n}),s.jsx("p",{className:"text-2xl font-bold text-gray-900",children:a}),c&&s.jsx("p",{className:"text-gray-500 text-xs",children:c})]})]})}function E2({icon:n,title:a,description:l,href:i,color:c,badge:u}){const h={blue:"bg-blue-600",green:"bg-green-600",purple:"bg-purple-600",gray:"bg-gray-600"};return s.jsx("a",{href:i,className:"relative block group bg-white hover:bg-gray-50 rounded-lg p-4 border border-gray-200 hover:border-gray-300 transition-all duration-200",children:s.jsxs("div",{className:"flex items-center space-x-3",children:[u&&s.jsx("div",{className:"absolute -top-2 -right-2 bg-blue-600 text-white text-xs font-medium px-2 py-0.5 rounded-full z-10",children:u}),s.jsx("div",{className:`p-2 rounded-lg ${h[c]} group-hover:scale-105 transition-transform duration-200`,children:s.jsx(n,{className:"h-4 w-4 text-white"})}),s.jsxs("div",{className:"flex-1",children:[s.jsx("h4",{className:"font-medium text-gray-900 text-sm",children:a}),s.jsx("p",{className:"text-xs text-gray-500",children:l})]}),s.jsx(P_,{className:"h-4 w-4 text-gray-400 group-hover:text-gray-600 group-hover:translate-x-0.5 transition-all duration-200"})]})})}function A2({product:n,isOpen:a,onClose:l,onAddToCart:i}){const[c,u]=S.useState("piece"),[h,m]=S.useState(1);if(!a||!n)return null;const x={piece:{name:"Piece",icon:Me,price:Number(n.price_per_piece),stock:n.stock_in_pieces,unit:"pc",description:"Individual pieces",multiplier:1},sheet:{name:"Sheet",icon:d1,price:Number(n.price_per_piece)*Number(n.pieces_per_sheet),stock:Math.floor(n.stock_in_pieces/n.pieces_per_sheet),unit:"sheet",description:`${n.pieces_per_sheet} pieces per sheet`,multiplier:n.pieces_per_sheet},box:{name:"Box",icon:R_,price:Number(n.price_per_piece)*Number(n.pieces_per_sheet)*Number(n.sheets_per_box),stock:Math.floor(n.stock_in_pieces/(n.pieces_per_sheet*n.sheets_per_box)),unit:"box",description:`${n.sheets_per_box} sheets per box (${n.pieces_per_sheet*n.sheets_per_box} pieces)`,multiplier:n.pieces_per_sheet*n.sheets_per_box}},g=x[c],p=Math.min(g.stock,9999),v=g.price*h,j=g.multiplier*h,w=g.stock<=0,N=C=>{const O=h+C;O>=1&&O<=p&&m(O)},_=()=>{!w&&h>0&&(console.log("🎯 Variant Modal - Adding to cart:",{product:n.name,quantity:h,selectedVariant:c,currentVariant:g,totalPrice:v,totalPieces:j}),i(n,h,c),l(),m(1),u("piece"))};return s.jsx("div",{className:"fixed inset-0 bg-black/60 backdrop-blur-sm flex items-center justify-center z-50 p-4",children:s.jsxs("div",{className:"bg-white rounded-2xl shadow-2xl max-w-2xl w-full max-h-[90vh] overflow-hidden flex flex-col",children:[s.jsx("div",{className:"bg-white border-b border-gray-200 p-6 flex-shrink-0",children:s.jsxs("div",{className:"flex items-center justify-between",children:[s.jsxs("div",{className:"flex items-center space-x-3",children:[s.jsx("div",{className:"bg-blue-100 p-2 rounded-lg",children:s.jsx(Me,{className:"h-5 w-5 text-blue-600"})}),s.jsxs("div",{children:[s.jsx("h2",{className:"text-lg font-semibold text-gray-900",children:"Select Product Unit"}),s.jsx("p",{className:"text-sm text-gray-600",children:n.name})]})]}),s.jsx("button",{onClick:l,className:"p-2 text-gray-400 hover:text-gray-600 rounded-lg hover:bg-gray-100 transition-colors",title:"Close",children:s.jsx(Yt,{className:"h-5 w-5"})})]})}),s.jsxs("div",{className:"p-6 overflow-y-auto flex-1",children:[s.jsxs("div",{className:"mb-6",children:[s.jsxs("h3",{className:"text-lg font-bold text-gray-900 mb-4 flex items-center",children:[s.jsx("div",{className:"bg-blue-100 p-2 rounded-xl mr-3",children:s.jsx(Od,{className:"h-5 w-5 text-blue-600"})}),"Select Purchase Unit"]}),s.jsx("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-3",children:Object.entries(x).map(([C,O])=>{const q=O.icon,L=c===C,z=O.stock>0;return s.jsxs("button",{onClick:()=>z&&u(C),disabled:!z,className:`relative p-4 border-2 rounded-xl transition-all duration-300 transform hover:scale-105 ${L?"border-blue-500 bg-gradient-to-r from-blue-50 to-indigo-50 shadow-lg scale-105":z?"border-gray-200 hover:border-blue-300 hover:shadow-md":"border-gray-100 bg-gray-50 opacity-50 cursor-not-allowed"}`,children:[L&&s.jsx("div",{className:"absolute -top-2 -right-2 bg-gradient-to-r from-blue-500 to-blue-600 text-white rounded-full p-2 shadow-lg",children:s.jsx("div",{className:"w-3 h-3 bg-white rounded-full"})}),s.jsxs("div",{className:"text-center",children:[s.jsx("div",{className:`mx-auto mb-3 p-3 rounded-xl transition-all duration-300 ${L?"bg-gradient-to-r from-blue-500 to-blue-600 text-white shadow-md":"bg-gray-100 text-gray-600"}`,children:s.jsx(q,{className:"h-6 w-6 mx-auto"})}),s.jsx("h4",{className:`font-bold text-base mb-2 ${L?"text-blue-700":"text-gray-900"}`,children:O.name}),s.jsx("p",{className:"text-sm text-gray-600 mb-3 min-h-[2rem] flex items-center justify-center",children:O.description}),s.jsxs("div",{className:"space-y-2",children:[s.jsx("p",{className:`font-bold text-lg ${L?"text-blue-700":"text-gray-900"}`,children:re(O.price)}),s.jsxs("div",{className:`px-3 py-1 rounded-full text-xs font-semibold ${z?"bg-green-100 text-green-700 border border-green-200":"bg-red-100 text-red-700 border border-red-200"}`,children:["Stock: ",O.stock," ",O.unit]})]}),!z&&s.jsx("div",{className:"absolute inset-0 flex items-center justify-center bg-white bg-opacity-95 rounded-xl",children:s.jsx("span",{className:"text-red-600 font-bold text-sm bg-red-50 px-3 py-2 rounded-full border border-red-200",children:"Out of Stock"})})]})]},C)})})]}),!w&&s.jsxs("div",{className:"mb-6",children:[s.jsxs("h3",{className:"text-lg font-bold text-gray-900 mb-4 flex items-center",children:[s.jsx("div",{className:"bg-green-100 p-2 rounded-xl mr-3",children:s.jsx(Vt,{className:"h-5 w-5 text-green-600"})}),"Select Quantity"]}),s.jsxs("div",{className:"bg-gradient-to-r from-gray-50 to-gray-100 rounded-xl p-4",children:[s.jsxs("div",{className:"flex items-center justify-center space-x-4 mb-4",children:[s.jsx("button",{onClick:()=>N(-1),disabled:h<=1,className:"p-3 bg-white border-2 border-gray-300 rounded-xl hover:bg-gray-50 hover:border-blue-300 disabled:opacity-50 disabled:cursor-not-allowed transition-all duration-200 shadow-md hover:shadow-lg",children:s.jsx(Sx,{className:"h-5 w-5 text-gray-600"})}),s.jsxs("div",{className:"flex flex-col items-center space-y-2",children:[s.jsx("input",{type:"number",value:h,onChange:C=>{const O=parseInt(C.target.value)||1;O>=1&&O<=p&&m(O)},min:"1",max:p,className:"w-24 text-center text-2xl font-bold text-gray-900 border-2 border-gray-300 rounded-xl px-3 py-2 focus:ring-2 focus:ring-blue-500 focus:border-blue-500 transition-all duration-200 shadow-md"}),s.jsx("div",{className:"bg-blue-100 text-blue-700 px-3 py-1 rounded-full text-sm font-bold border border-blue-200",children:g.unit})]}),s.jsx("button",{onClick:()=>N(1),disabled:h>=p,className:"p-3 bg-white border-2 border-gray-300 rounded-xl hover:bg-gray-50 hover:border-blue-300 disabled:opacity-50 disabled:cursor-not-allowed transition-all duration-200 shadow-md hover:shadow-lg",children:s.jsx(il,{className:"h-5 w-5 text-gray-600"})})]}),s.jsxs("div",{className:"text-center space-y-2",children:[s.jsxs("div",{className:"bg-white rounded-xl p-3 border border-gray-200",children:[s.jsx("p",{className:"text-sm text-gray-600 mb-1",children:"Available Stock"}),s.jsxs("p",{className:"text-base font-bold text-gray-900",children:[p," ",g.unit]})]}),j>1&&s.jsx("div",{className:"bg-blue-50 border border-blue-200 rounded-xl p-2",children:s.jsxs("p",{className:"text-sm font-semibold text-blue-800",children:["📊 Total: ",j.toLocaleString()," pieces"]})})]})]})]}),s.jsxs("div",{className:"bg-gradient-to-r from-blue-50 to-indigo-50 rounded-xl p-4 mb-4 border border-blue-200",children:[s.jsxs("h4",{className:"text-base font-bold text-gray-900 mb-3 flex items-center",children:[s.jsx("div",{className:"bg-blue-100 p-2 rounded-xl mr-3",children:s.jsx(Me,{className:"h-4 w-4 text-blue-600"})}),"Order Summary"]}),s.jsxs("div",{className:"space-y-2",children:[s.jsxs("div",{className:"flex justify-between items-center py-1 border-b border-blue-200",children:[s.jsx("span",{className:"text-gray-700 font-medium",children:"Unit Price:"}),s.jsx("span",{className:"font-bold text-gray-900",children:re(g.price)})]}),s.jsxs("div",{className:"flex justify-between items-center py-1 border-b border-blue-200",children:[s.jsx("span",{className:"text-gray-700 font-medium",children:"Quantity:"}),s.jsxs("span",{className:"font-bold text-gray-900",children:[h," ",g.unit]})]}),s.jsxs("div",{className:"flex justify-between items-center pt-2",children:[s.jsx("span",{className:"text-lg font-bold text-gray-900",children:"Total Amount:"}),s.jsx("span",{className:"text-2xl font-bold text-blue-600",children:re(v)})]})]})]})]}),s.jsx("div",{className:"border-t border-gray-200 p-6 bg-gradient-to-r from-gray-50 to-gray-100 flex-shrink-0",children:s.jsxs("div",{className:"flex space-x-4",children:[s.jsx("button",{onClick:l,className:"flex-1 px-6 py-3 border-2 border-gray-300 text-gray-700 rounded-xl hover:bg-white hover:border-gray-400 transition-all duration-200 font-medium text-base shadow-md hover:shadow-lg",children:"Cancel"}),s.jsxs("button",{onClick:_,disabled:w||h===0,className:"flex-1 px-6 py-3 bg-gradient-to-r from-blue-600 to-blue-700 text-white rounded-xl hover:from-blue-700 hover:to-blue-800 disabled:from-gray-300 disabled:to-gray-400 disabled:cursor-not-allowed transition-all duration-200 font-medium text-base flex items-center justify-center space-x-2 shadow-lg hover:shadow-xl",children:[s.jsx(Vt,{className:"h-5 w-5"}),s.jsx("span",{children:w?"Out of Stock":`Add to Cart - ${re(v)}`})]})]})})]})})}function T2({products:n=[],onAddToCart:a,cartItems:l=[],className:i=""}){const[c,u]=S.useState(""),[h,m]=S.useState(n),[x,g]=S.useState(null),[p,v]=S.useState(!1);S.useEffect(()=>{if(!c)m(n);else{const _=c.toLowerCase(),C=n.filter(O=>O.name.toLowerCase().includes(_)||O.brand.toLowerCase().includes(_)||O.category.toLowerCase().includes(_));m(C)}},[c,n]);const j=_=>{_.stock_in_pieces>0&&(g(_),v(!0))},w=(_,C,O)=>{console.log("🔄 ProductSelector - Received:",{product:_.name,quantity:C,selectedVariant:O}),a(_,C,O),v(!1),g(null)},N=_=>_.stock_in_pieces>0;return s.jsxs("div",{className:`bg-white rounded-lg border border-gray-200 ${i}`,children:[s.jsxs("div",{className:"p-6 border-b border-gray-200",children:[s.jsx("h3",{className:"text-xl font-semibold text-gray-900 mb-4",children:"Select Products"}),s.jsxs("div",{className:"relative",children:[s.jsx(Fi,{className:"absolute left-3 top-3 h-5 w-5 text-gray-400"}),s.jsx("input",{type:"text",placeholder:"Search products...",value:c,onChange:_=>u(_.target.value),className:"w-full pl-10 pr-4 py-3 border border-gray-300 rounded-xl focus:ring-2 focus:ring-blue-500 focus:border-transparent transition-colors"})]})]}),s.jsx("div",{className:"max-h-[600px] overflow-y-auto",children:h.length===0?s.jsxs("div",{className:"p-12 text-center text-gray-500",children:[s.jsx(Me,{className:"h-16 w-16 mx-auto mb-4 text-gray-300"}),s.jsx("p",{className:"text-xl font-medium text-gray-400",children:"No products found"}),s.jsx("p",{className:"text-gray-400 mt-2",children:"Try adjusting your search terms"})]}):s.jsx("div",{className:"p-4 space-y-3",children:h.map(_=>{const C=N(_);return s.jsxs("button",{onClick:()=>j(_),onKeyDown:O=>{(O.key==="Enter"||O.key===" ")&&(O.preventDefault(),j(_))},disabled:!C,className:`group p-6 border-2 rounded-2xl transition-all duration-300 text-left w-full transform hover:scale-[1.02] ${C?"border-gray-200 hover:border-blue-400 hover:shadow-xl hover:bg-gradient-to-r hover:from-blue-50 hover:to-indigo-50 cursor-pointer":"opacity-60 cursor-not-allowed border-gray-200"}`,children:[s.jsxs("div",{className:"flex items-center justify-between",children:[s.jsxs("div",{className:"flex items-center space-x-5 flex-1 min-w-0",children:[s.jsx("div",{className:`p-4 rounded-2xl transition-all duration-300 ${C?"bg-gradient-to-r from-blue-500 to-blue-600 text-white shadow-lg group-hover:from-blue-600 group-hover:to-blue-700":"bg-gray-200 text-gray-400"}`,children:s.jsx(Me,{className:"h-7 w-7"})}),s.jsxs("div",{className:"flex-1 min-w-0",children:[s.jsx("h4",{className:"font-bold text-gray-900 truncate text-xl mb-1",children:_.name}),s.jsxs("div",{className:"flex items-center space-x-3 mb-3",children:[s.jsx("span",{className:"bg-blue-100 text-blue-800 px-3 py-1 rounded-full text-sm font-semibold",children:_.brand}),s.jsx("span",{className:"text-gray-500 font-medium",children:_.category})]}),s.jsxs("div",{className:"flex items-center space-x-6",children:[s.jsxs("div",{className:"bg-green-50 px-4 py-2 rounded-xl border border-green-200",children:[s.jsxs("span",{className:"text-green-600 text-sm font-medium",children:["From"," "]}),s.jsx("span",{className:"font-bold text-green-700 text-lg",children:re(_.price_per_piece)}),s.jsx("span",{className:"text-green-600 text-sm font-medium",children:"/piece"})]}),s.jsxs("div",{className:`px-4 py-2 rounded-xl border ${_.stock_in_pieces<=(_.reorder_level||0)?"bg-amber-50 border-amber-200":"bg-gray-50 border-gray-200"}`,children:[s.jsxs("span",{className:"text-gray-600 text-sm font-medium",children:["Stock:"," "]}),s.jsx("span",{className:`font-bold text-lg ${_.stock_in_pieces<=(_.reorder_level||0)?"text-amber-600":"text-gray-800"}`,children:_.stock_in_pieces}),s.jsxs("span",{className:"text-gray-600 text-sm font-medium",children:[" ","pieces"]})]})]})]})]}),s.jsx("div",{className:"flex-shrink-0 ml-6",children:C?s.jsx("div",{className:"bg-gradient-to-r from-blue-600 to-blue-700 text-white p-4 rounded-2xl group-hover:from-blue-700 group-hover:to-blue-800 transition-all duration-300 shadow-lg",children:s.jsx(il,{className:"h-6 w-6"})}):s.jsx("div",{className:"bg-gray-200 text-gray-500 px-6 py-3 rounded-2xl text-sm font-bold border-2 border-gray-300",children:"Out of Stock"})})]}),C&&_.stock_in_pieces<=(_.reorder_level||0)&&s.jsx("div",{className:"mt-4 p-3 bg-gradient-to-r from-amber-50 to-orange-50 border-l-4 border-amber-400 rounded-lg",children:s.jsxs("div",{className:"flex items-center space-x-2",children:[s.jsx("div",{className:"bg-amber-100 p-1 rounded-full",children:s.jsx(Ss,{className:"h-4 w-4 text-amber-600"})}),s.jsxs("p",{className:"text-sm font-semibold text-amber-800",children:["⚠️ Low Stock Alert: Only ",_.stock_in_pieces," ","pieces remaining"]})]})})]},_.id)})})}),l.length>0&&s.jsx("div",{className:"p-4 border-t border-gray-200 bg-gray-50",children:s.jsxs("div",{className:"flex justify-between text-sm",children:[s.jsxs("span",{className:"text-gray-600",children:[l.length," item",l.length!==1?"s":""," in cart"]}),s.jsxs("span",{className:"font-medium text-gray-900",children:["Total:"," ",re(l.reduce((_,C)=>_+C.price*C.quantity,0))]})]})}),s.jsx(A2,{product:x,isOpen:p,onClose:()=>{v(!1),g(null)},onAddToCart:w})]})}function R2({items:n=[],onUpdateQuantity:a,onRemoveItem:l,onClearCart:i,className:c=""}){const u=n.reduce((g,p)=>g+p.totalPrice,0),h=u*.12,m=u+h,x=g=>g.totalPrice;return n.length===0?s.jsx("div",{className:`bg-white rounded-lg border border-gray-200 ${c}`,children:s.jsxs("div",{className:"p-6",children:[s.jsxs("div",{className:"flex items-center space-x-2 mb-4",children:[s.jsx(Vt,{className:"h-5 w-5 text-gray-600"}),s.jsx("h3",{className:"text-lg font-medium text-gray-900",children:"Shopping Cart"})]}),s.jsxs("div",{className:"text-center py-8",children:[s.jsx(Me,{className:"h-16 w-16 mx-auto mb-4 text-gray-300"}),s.jsx("p",{className:"text-lg font-medium text-gray-900 mb-2",children:"Your cart is empty"}),s.jsx("p",{className:"text-gray-500",children:"Add products to start a new transaction"})]})]})}):s.jsxs("div",{className:`bg-white rounded-lg border border-gray-200 ${c}`,children:[s.jsx("div",{className:"p-4 border-b border-gray-200",children:s.jsxs("div",{className:"flex items-center justify-between",children:[s.jsxs("div",{className:"flex items-center space-x-2",children:[s.jsx(Vt,{className:"h-5 w-5 text-gray-600"}),s.jsx("h3",{className:"text-lg font-medium text-gray-900",children:"Shopping Cart"}),s.jsxs("span",{className:"bg-blue-100 text-blue-800 text-xs font-medium px-2 py-1 rounded-full",children:[n.length," item",n.length!==1?"s":""]})]}),n.length>0&&s.jsx("button",{onClick:i,className:"text-sm text-red-600 hover:text-red-800 transition-colors",children:"Clear All"})]})}),s.jsx("div",{className:"max-h-80 overflow-y-auto",children:s.jsx("div",{className:"divide-y divide-gray-200",children:n.map(g=>s.jsxs("div",{className:"p-4",children:[s.jsxs("div",{className:"flex items-start space-x-3",children:[s.jsx("div",{className:"bg-gradient-to-br from-blue-500 to-blue-600 p-2 rounded-lg flex-shrink-0 shadow-sm",children:s.jsx(Me,{className:"h-4 w-4 text-white"})}),s.jsxs("div",{className:"flex-1 min-w-0",children:[s.jsx("h4",{className:"text-sm font-medium text-gray-900 truncate",children:g.name}),s.jsxs("p",{className:"text-xs text-gray-500 truncate",children:[g.product.brand," • ",g.product.category]}),s.jsxs("div",{className:"mt-1 flex items-center space-x-2",children:[s.jsxs("span",{className:"text-sm text-gray-600",children:[re(g.pricePerUnit)," per ",g.unit]}),s.jsxs("span",{className:"text-xs text-gray-500",children:["(",g.quantityInPieces," pieces total)"]})]})]}),s.jsx("button",{onClick:()=>l(g.id),className:"text-gray-400 hover:text-red-600 transition-colors",title:"Remove from cart",children:s.jsx(cl,{className:"h-4 w-4"})})]}),s.jsxs("div",{className:"mt-3 flex items-center justify-between",children:[s.jsxs("div",{className:"flex items-center space-x-2",children:[s.jsx("button",{onClick:()=>a(g.id,g.quantity-1),disabled:g.quantity<=1,className:"p-1 text-gray-400 hover:text-gray-600 transition-colors disabled:opacity-50 disabled:cursor-not-allowed",children:s.jsx(Sx,{className:"h-4 w-4"})}),s.jsxs("div",{className:"flex items-center space-x-2",children:[s.jsx("span",{className:"text-sm font-medium text-gray-900 min-w-[2rem] text-center",children:g.quantity}),s.jsx("span",{className:"text-xs text-gray-500",children:g.unit})]}),s.jsx("button",{onClick:()=>a(g.id,g.quantity+1),className:"p-1 text-gray-400 hover:text-gray-600 transition-colors",children:s.jsx(il,{className:"h-4 w-4"})})]}),s.jsxs("div",{className:"text-right",children:[s.jsx("div",{className:"text-sm font-semibold text-gray-900",children:re(x(g))}),g.quantity>1&&s.jsxs("div",{className:"text-xs text-gray-500",children:[g.quantity," × ",re(g.pricePerUnit)]})]})]}),g.quantityInPieces>g.product.stock_in_pieces*.8&&s.jsx("div",{className:"mt-2 p-2 bg-yellow-50 border border-yellow-200 rounded-md",children:s.jsxs("p",{className:"text-xs text-yellow-800",children:["High quantity: You're ordering ",g.quantityInPieces," ","pieces (",(g.quantityInPieces/g.product.stock_in_pieces*100).toFixed(1),"% of stock)"]})})]},g.id))})}),s.jsx("div",{className:"p-4 border-t border-gray-200 bg-gray-50",children:s.jsxs("div",{className:"space-y-2",children:[s.jsxs("div",{className:"flex justify-between text-sm",children:[s.jsx("span",{className:"text-gray-600",children:"Subtotal:"}),s.jsx("span",{className:"text-gray-900",children:re(u)})]}),s.jsxs("div",{className:"flex justify-between text-sm",children:[s.jsx("span",{className:"text-gray-600",children:"VAT (12%):"}),s.jsx("span",{className:"text-gray-900",children:re(h)})]}),s.jsxs("div",{className:"flex justify-between text-lg font-semibold border-t border-gray-200 pt-2",children:[s.jsx("span",{className:"text-gray-900",children:"Total:"}),s.jsx("span",{className:"text-gray-900",children:re(m)})]}),s.jsxs("div",{className:"text-xs text-gray-500 text-center",children:[n.reduce((g,p)=>g+p.quantity,0)," total items"]})]})})]})}const kg=n=>{let a;const l=new Set,i=(g,p)=>{const v=typeof g=="function"?g(a):g;if(!Object.is(v,a)){const j=a;a=p??(typeof v!="object"||v===null)?v:Object.assign({},a,v),l.forEach(w=>w(a,j))}},c=()=>a,m={setState:i,getState:c,getInitialState:()=>x,subscribe:g=>(l.add(g),()=>l.delete(g))},x=a=n(i,c,m);return m},O2=(n=>n?kg(n):kg),D2=n=>n;function M2(n,a=D2){const l=as.useSyncExternalStore(n.subscribe,as.useCallback(()=>a(n.getState()),[n,a]),as.useCallback(()=>a(n.getInitialState()),[n,a]));return as.useDebugValue(l),l}const Cg=n=>{const a=O2(n),l=i=>M2(a,i);return Object.assign(l,a),l},U2=(n=>n?Cg(n):Cg);function Ex(n,a){let l;try{l=n()}catch{return}return{getItem:c=>{var u;const h=x=>x===null?null:JSON.parse(x,void 0),m=(u=l.getItem(c))!=null?u:null;return m instanceof Promise?m.then(h):h(m)},setItem:(c,u)=>l.setItem(c,JSON.stringify(u,void 0)),removeItem:c=>l.removeItem(c)}}const hd=n=>a=>{try{const l=n(a);return l instanceof Promise?l:{then(i){return hd(i)(l)},catch(i){return this}}}catch(l){return{then(i){return this},catch(i){return hd(i)(l)}}}},P2=(n,a)=>(l,i,c)=>{let u={storage:Ex(()=>localStorage),partialize:_=>_,version:0,merge:(_,C)=>({...C,..._}),...a},h=!1;const m=new Set,x=new Set;let g=u.storage;if(!g)return n((..._)=>{console.warn(`[zustand persist middleware] Unable to update item '${u.name}', the given storage is currently unavailable.`),l(..._)},i,c);const p=()=>{const _=u.partialize({...i()});return g.setItem(u.name,{state:_,version:u.version})},v=c.setState;c.setState=(_,C)=>(v(_,C),p());const j=n((..._)=>(l(..._),p()),i,c);c.getInitialState=()=>j;let w;const N=()=>{var _,C;if(!g)return;h=!1,m.forEach(q=>{var L;return q((L=i())!=null?L:j)});const O=((C=u.onRehydrateStorage)==null?void 0:C.call(u,(_=i())!=null?_:j))||void 0;return hd(g.getItem.bind(g))(u.name).then(q=>{if(q)if(typeof q.version=="number"&&q.version!==u.version){if(u.migrate){const L=u.migrate(q.state,q.version);return L instanceof Promise?L.then(z=>[!0,z]):[!0,L]}console.error("State loaded from storage couldn't be migrated since no migrate function was provided")}else return[!1,q.state];return[!1,void 0]}).then(q=>{var L;const[z,Q]=q;if(w=u.merge(Q,(L=i())!=null?L:j),l(w,!0),z)return p()}).then(()=>{O?.(w,void 0),w=i(),h=!0,x.forEach(q=>q(w))}).catch(q=>{O?.(void 0,q)})};return c.persist={setOptions:_=>{u={...u,..._},_.storage&&(g=_.storage)},clearStorage:()=>{g?.removeItem(u.name)},getOptions:()=>u,rehydrate:()=>N(),hasHydrated:()=>h,onHydrate:_=>(m.add(_),()=>{m.delete(_)}),onFinishHydration:_=>(x.add(_),()=>{x.delete(_)})},u.skipHydration||N(),w||j},L2=P2,q2=U2(L2((n,a)=>({cartItems:[],customer:null,paymentMethod:"cash",amountPaid:0,syncQueue:[],addToCart:(l,i,c)=>{console.log("🛒 POS Store - addToCart called with:",{productName:l.name,quantity:i,unit:c,productData:{pieces_per_sheet:l.pieces_per_sheet,sheets_per_box:l.sheets_per_box,price_per_piece:l.price_per_piece}});const u=a(),h=u.cartItems.findIndex(j=>j.product.id===l.id&&j.unit===c),m=Number(i),x=Eg(m,c,l),g=Number(l.price_per_piece),p=z2(g,c,l),v=p*m;if(console.log("💰 POS Store - Calculated values:",{quantityInPieces:x,pricePerPiece:g,pricePerUnit:p,totalPrice:v,originalQuantity:i,numQuantity:m,unit:c}),h>=0){const j=[...u.cartItems],w=j[h],N=w.quantity+m,_=w.quantityInPieces+x,C=p*N;j[h]={...w,quantity:N,quantityInPieces:_,totalPrice:C},console.log("📝 Updated existing item:",j[h]),n({cartItems:j})}else{const j={id:`${l.id}-${c}`,productId:l.id,name:l.name,quantity:m,quantityInPieces:x,unit:c,pricePerUnit:p,pricePerPiece:g,totalPrice:v,product:{...l}};console.log("✨ Created new cart item:",j),n({cartItems:[...u.cartItems,j]})}},removeFromCart:l=>{const c=a().cartItems.filter(u=>u.id!==l);n({cartItems:c})},updateCartItemQuantity:(l,i,c)=>{const h=a().cartItems.map(m=>{if(m.id===l){const x=Eg(c,m.unit,m.product),g=m.pricePerUnit*c;return{...m,quantity:c,quantityInPieces:x,totalPrice:g}}return m});n({cartItems:h})},clearCart:()=>{n({cartItems:[],customer:null,paymentMethod:"cash",amountPaid:0})},setCustomer:l=>n({customer:l}),setPaymentMethod:l=>n({paymentMethod:l}),setAmountPaid:l=>n({amountPaid:l}),addToSyncQueue:l=>{const i=a();n({syncQueue:[...i.syncQueue,{...l,id:Date.now().toString(),timestamp:new Date().toISOString(),synced:!1}]})},markAsSynced:l=>{const c=a().syncQueue.map(u=>u.id===l?{...u,synced:!0}:u);n({syncQueue:c})},clearSyncedItems:()=>{const i=a().syncQueue.filter(c=>!c.synced);n({syncQueue:i})},getCartTotal:()=>a().cartItems.reduce((i,c)=>i+c.totalPrice,0),getCartItemCount:()=>a().cartItems.reduce((i,c)=>i+c.quantity,0)}),{name:"medcure-pos-storage",storage:Ex(()=>localStorage),partialize:n=>({syncQueue:n.syncQueue,cartItems:n.cartItems,customer:n.customer,paymentMethod:n.paymentMethod})}));function Eg(n,a,l){switch(a){case"piece":return n;case"sheet":return n*(l.pieces_per_sheet||1);case"box":return n*(l.sheets_per_box||1)*(l.pieces_per_sheet||1);default:return n}}function z2(n,a,l){switch(a){case"piece":return n;case"sheet":return n*(l.pieces_per_sheet||1);case"box":return n*(l.sheets_per_box||1)*(l.pieces_per_sheet||1);default:return n}}const Mr={getProducts:async()=>await pt.getProducts(),getActiveProducts:async()=>(await pt.getProducts()).filter(a=>!a.is_archived&&a.is_active!==!1),getAvailableProducts:async()=>(await pt.getProducts()).filter(a=>!a.is_archived&&a.is_active!==!1&&a.stock_in_pieces>0),getProductById:async n=>await pt.getProductById(n),searchProducts:async n=>await pt.searchProducts(n),addProduct:async n=>await pt.addProduct(n),updateProduct:async(n,a)=>await pt.updateProduct(n,a),deleteProduct:async n=>await pt.deleteProduct(n),archiveProduct:async(n,a=null)=>await pt.updateProduct(n,{is_archived:!0,archived_at:new Date().toISOString(),archived_by:a,is_active:!1}),restoreProduct:async n=>await pt.updateProduct(n,{is_archived:!1,archived_at:null,archived_by:null,is_active:!0}),getArchivedProducts:async()=>(await pt.getProducts()).filter(a=>a.is_archived),getLowStockProducts:async()=>await pt.getLowStockProducts(),getExpiringProducts:async(n=30)=>await pt.getExpiringProducts(n)},fd={processSale:async n=>await sa.processSale(n),getSales:async(n=1,a=50)=>await sa.getSales(n,a),getSalesByDateRange:async(n,a)=>await sa.getSalesByDateRange(n,a),voidSale:async(n,a)=>await sa.voidSale(n,a),getDailySalesSummary:async n=>await sa.getDailySalesSummary(n),getSalesAnalytics:async(n,a)=>await sa.getSalesAnalytics(n,a),getTodaysTransactions:async()=>{const n=new Date,a=new Date(n.getFullYear(),n.getMonth(),n.getDate()),l=new Date(n.getFullYear(),n.getMonth(),n.getDate(),23,59,59);console.log("📅 Getting today's transactions:",{startOfDay:a,endOfDay:l});const c=(await sa.getSalesByDateRange(a,l)).map(u=>({...u,items:u.sale_items?.map(h=>({id:h.product_id,product_id:h.product_id,name:h.products?.name||"Unknown Product",quantity:h.quantity,unit_type:h.unit_type,unit_price:h.unit_price,subtotal:h.total_price,total_price:h.total_price}))||[],subtotal:u.total_amount?u.total_amount/1.12:0,tax:u.total_amount?u.total_amount*.12/1.12:0,total:u.total_amount||0}));return console.log("🔄 Transformed transactions:",c),c}};function $2(){const{cartItems:n,addToCart:a,updateCartItemQuantity:l,removeFromCart:i,clearCart:c,getCartItemCount:u,getCartTotal:h}=q2(),[m,x]=S.useState(!1),[g,p]=S.useState(null),[v,j]=S.useState(null),[w,N]=S.useState([]),[_,C]=S.useState(!1),O=S.useCallback(async()=>{C(!0);try{const oe=await Mr.getAvailableProducts();console.log("🏪 [usePOS] Loaded available products for POS:",{availableProducts:oe.length}),N(oe)}catch(oe){console.error("Error loading products:",oe),j("Failed to load products")}finally{C(!1)}},[]);S.useEffect(()=>{O()},[O]);const q=S.useCallback((oe,G=1,X="piece")=>{try{console.log("🎪 usePOS Hook - Received:",{productName:oe.name,quantity:G,unit:X,typeof_quantity:typeof G,typeof_unit:typeof X}),j(null),a(oe,G,X)}catch(R){console.error("❌ Error in handleAddToCart:",R),j(R.message),setTimeout(()=>j(null),3e3)}},[a]),L=S.useCallback((oe,G)=>{try{if(j(null),G<=0){i(oe);return}l(oe,null,G)}catch(X){j(X.message),setTimeout(()=>j(null),3e3)}},[l,i]),z=S.useCallback(oe=>{try{j(null),i(oe)}catch(G){j(G.message),setTimeout(()=>j(null),3e3)}},[i]),Q=S.useCallback(()=>h(),[h]),H=S.useCallback(()=>Q()*.12,[Q]),Y=S.useCallback(()=>Q()+H(),[Q,H]),se=S.useCallback(()=>{try{j(null),c()}catch(oe){j(oe.message),setTimeout(()=>j(null),3e3)}},[c]),K=S.useCallback(async oe=>{x(!0),j(null);try{if(n.length===0)throw new Error("Cart is empty");const G=Y();if(oe.amount<G)throw new Error("Insufficient payment amount");const X={items:n.map(J=>({product_id:J.productId,quantity_in_pieces:J.quantityInPieces,unit_type:J.unit,unit_quantity:J.quantity,price_per_unit:J.pricePerUnit,total_price:J.totalPrice})),total:G,paymentMethod:oe.method,customer:oe.customer||null,cashierId:oe.cashierId||null};console.log("🚀 POS Hook - Sale data being sent:",X),console.log("🛒 POS Hook - Cart items:",n);const W={...await fd.processSale(X),payment:{method:oe.method,amount:oe.amount,change:oe.amount-G},items:n.map(J=>({id:J.productId,name:J.name,unit:J.unit,quantity:J.quantity,quantityInPieces:J.quantityInPieces,pricePerUnit:J.pricePerUnit,totalPrice:J.totalPrice})),subtotal:Q(),tax:H()};return p(W),c(),await O(),W}catch(G){throw console.error("Payment processing error:",G),j(G.message),G}finally{x(!1)}},[n,Y,Q,H,c,O]),ee=S.useCallback(oe=>{const G=Y();return Math.max(0,oe-G)},[Y]),he=S.useCallback(oe=>{const G={};oe.method||(G.method="Payment method is required"),(!oe.amount||oe.amount<=0)&&(G.amount="Payment amount is required");const X=Y();return oe.amount<X&&(G.amount="Insufficient payment amount"),{isValid:Object.keys(G).length===0,errors:G}},[Y]),xe=S.useCallback(()=>({itemCount:u(),subtotal:Q(),tax:H(),total:Y()}),[u,Q,H,Y]);return{cartItems:n,availableProducts:w,lastTransaction:g,isProcessing:m,isLoadingProducts:_,error:v,handleAddToCart:q,handleUpdateQuantity:L,handleRemoveItem:z,handleClearCart:se,processPayment:K,loadAvailableProducts:O,calculateChange:ee,validatePayment:he,getCartSummary:xe,clearError:()=>j(null)}}function la(n,a={}){if(!n)return"";const l={year:"numeric",month:"short",day:"numeric",...a};return new Intl.DateTimeFormat("en-PH",l).format(new Date(n))}function B2(){const{user:n}=Es(),{cartItems:a,availableProducts:l,isProcessing:i,error:c,handleAddToCart:u,handleUpdateQuantity:h,handleRemoveItem:m,handleClearCart:x,processPayment:g,calculateChange:p,getCartSummary:v,clearError:j}=$2(),[w,N]=S.useState(!1),[_,C]=S.useState({method:"cash",amount:0,customer_name:"",customer_phone:""}),[O,q]=S.useState(!1),[L,z]=S.useState(null),[Q,H]=S.useState(!1),[Y,se]=S.useState([]),[K,ee]=S.useState(!1),he=v();S.useEffect(()=>{(async()=>{if(Q){ee(!0);try{console.log("📊 Loading transaction history...");const R=await fd.getTodaysTransactions();console.log("📊 Received transaction history:",R),se(R)}catch(R){console.error("Failed to load transaction history:",R)}finally{ee(!1)}}})()},[Q]);const xe=()=>{a.length!==0&&(C({method:"cash",amount:he.total,customer_name:"",customer_phone:""}),N(!0))},oe=async()=>{try{const X={..._,cashierId:n?.id||null};console.log("💳 POS Page - Processing payment with data:",X);const R=await g(X);if(z(R),N(!1),q(!0),C({method:"cash",amount:0,customer_name:"",customer_phone:""}),Q){console.log("🔄 Refreshing transaction history after payment...");const W=await fd.getTodaysTransactions();console.log("🔄 Updated transaction history:",W),se(W)}}catch(X){console.error("❌ Payment processing error:",X)}},G=()=>{q(!1),z(null)};return s.jsxs("div",{className:"space-y-6",children:[s.jsx("div",{className:"bg-white rounded-xl p-6 shadow-sm border border-gray-200",children:s.jsxs("div",{className:"flex items-center justify-between",children:[s.jsxs("div",{className:"flex items-center space-x-4",children:[s.jsx("div",{className:"bg-emerald-100 p-3 rounded-xl",children:s.jsx(Vt,{className:"h-8 w-8 text-emerald-600"})}),s.jsxs("div",{children:[s.jsxs("h1",{className:"text-2xl font-bold text-gray-900 flex items-center space-x-2",children:[s.jsx("span",{children:"Point of Sale"}),s.jsx("span",{className:"inline-flex items-center px-2.5 py-0.5 rounded-full text-xs font-medium bg-emerald-100 text-emerald-800",children:"Live"})]}),s.jsx("p",{className:"text-gray-600",children:"Process customer transactions securely and efficiently"})]})]}),s.jsx("div",{className:"flex items-center space-x-3",children:s.jsxs("button",{onClick:()=>H(!0),className:"group flex items-center space-x-2 px-4 py-2.5 bg-gray-50 border border-gray-200 text-gray-700 rounded-lg hover:bg-blue-50 hover:border-blue-200 hover:text-blue-700 transition-all duration-200",children:[s.jsx(Bu,{className:"h-4 w-4 group-hover:scale-110 transition-transform duration-200"}),s.jsx("span",{className:"font-medium",children:"Today's Transactions"})]})})]})}),c&&s.jsxs("div",{className:"bg-red-50 border border-red-200 text-red-700 px-4 py-3 rounded-lg flex justify-between items-center",children:[s.jsx("span",{children:c}),s.jsx("button",{onClick:j,className:"text-red-500 hover:text-red-700",children:"×"})]}),s.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-3 gap-6",children:[s.jsx("div",{className:"lg:col-span-2",children:s.jsx(T2,{products:l,onAddToCart:u,cartItems:a})}),s.jsxs("div",{className:"space-y-4",children:[s.jsx(R2,{items:a,onUpdateQuantity:h,onRemoveItem:m,onClearCart:x}),a.length>0&&s.jsxs("button",{onClick:xe,className:"w-full bg-green-600 text-white px-6 py-3 rounded-lg hover:bg-green-700 transition-colors flex items-center justify-center space-x-2 font-medium text-lg shadow-lg hover:shadow-xl",children:[s.jsx($u,{className:"h-5 w-5"}),s.jsxs("span",{children:["Proceed to Checkout - ",re(he.total)]})]})]})]}),w&&s.jsx("div",{className:"fixed inset-0 bg-black/60 backdrop-blur-sm flex items-center justify-center z-50 p-4",children:s.jsxs("div",{className:"bg-white rounded-lg shadow-2xl max-w-md w-full mx-4 border border-gray-200",children:[s.jsx("div",{className:"bg-white border-b border-gray-200 p-6",children:s.jsxs("div",{className:"flex items-center space-x-4",children:[s.jsx("div",{className:"bg-green-100 p-3 rounded-lg",children:s.jsx($u,{className:"h-6 w-6 text-green-600"})}),s.jsxs("div",{children:[s.jsx("h2",{className:"text-xl font-semibold text-gray-900",children:"Process Payment"}),s.jsx("p",{className:"text-gray-600 text-sm",children:"Complete your transaction"})]})]})}),s.jsxs("div",{className:"p-6 space-y-6",children:[s.jsxs("div",{className:"bg-gray-50 rounded-lg p-4 border border-gray-200",children:[s.jsxs("div",{className:"flex items-center justify-between mb-4",children:[s.jsxs("h3",{className:"text-lg font-medium text-gray-900 flex items-center",children:[s.jsx(Di,{className:"h-5 w-5 mr-2 text-gray-600"}),"Order Summary"]}),s.jsxs("span",{className:"bg-gray-200 text-gray-700 px-2 py-1 rounded text-sm font-medium",children:[a.length," item",a.length!==1?"s":""]})]}),s.jsxs("div",{className:"space-y-2 text-sm",children:[s.jsxs("div",{className:"flex justify-between py-1",children:[s.jsx("span",{className:"text-gray-600",children:"Subtotal"}),s.jsx("span",{className:"font-medium",children:re(he.subtotal)})]}),s.jsxs("div",{className:"flex justify-between py-1",children:[s.jsx("span",{className:"text-gray-600",children:"VAT (12%)"}),s.jsx("span",{className:"font-medium",children:re(he.tax)})]}),s.jsxs("div",{className:"flex justify-between py-2 border-t border-gray-300 font-semibold text-base",children:[s.jsx("span",{children:"Total"}),s.jsx("span",{className:"text-green-600",children:re(he.total)})]})]})]}),s.jsxs("div",{children:[s.jsx("h3",{className:"text-lg font-medium text-gray-900 mb-3",children:"Payment Method"}),s.jsxs("div",{className:"grid grid-cols-2 gap-3",children:[s.jsx("button",{onClick:()=>C(X=>({...X,method:"cash"})),className:`p-4 border-2 rounded-lg transition-colors ${_.method==="cash"?"border-green-500 bg-green-50 text-green-700":"border-gray-200 hover:border-gray-300 text-gray-700"}`,children:s.jsxs("div",{className:"flex items-center justify-center space-x-2",children:[s.jsx(ns,{className:"h-5 w-5"}),s.jsx("span",{className:"font-medium",children:"Cash"})]})}),s.jsx("button",{onClick:()=>C(X=>({...X,method:"gcash"})),className:`p-4 border-2 rounded-lg transition-colors ${_.method==="gcash"?"border-green-500 bg-green-50 text-green-700":"border-gray-200 hover:border-gray-300 text-gray-700"}`,children:s.jsxs("div",{className:"flex items-center justify-center space-x-2",children:[s.jsx(Q1,{className:"h-5 w-5"}),s.jsx("span",{className:"font-medium",children:"GCash"})]})})]})]}),s.jsxs("div",{children:[s.jsx("label",{className:"block text-lg font-medium text-gray-900 mb-3",children:"Amount Received"}),s.jsxs("div",{className:"relative",children:[s.jsx("div",{className:"absolute inset-y-0 left-0 pl-3 flex items-center pointer-events-none",children:s.jsx("span",{className:"text-gray-500 text-lg",children:"₱"})}),s.jsx("input",{type:"number",value:_.amount,onChange:X=>C(R=>({...R,amount:parseFloat(X.target.value)||0})),step:"0.01",min:he.total,className:"w-full pl-8 pr-4 py-3 text-lg border border-gray-300 rounded-lg focus:ring-2 focus:ring-green-500 focus:border-green-500",placeholder:"0.00"})]}),_.amount>=he.total&&s.jsx("div",{className:"mt-3 bg-green-50 border border-green-200 rounded-lg p-3",children:s.jsxs("p",{className:"text-green-800 font-medium text-center",children:["Change:"," ",re(p(_.amount))]})})]}),s.jsxs("div",{children:[s.jsx("h4",{className:"text-base font-medium text-gray-900 mb-3",children:"Customer Information (Optional)"}),s.jsxs("div",{className:"grid grid-cols-2 gap-3",children:[s.jsx("input",{type:"text",placeholder:"Customer name",value:_.customer_name,onChange:X=>C(R=>({...R,customer_name:X.target.value})),className:"px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-green-500 focus:border-green-500"}),s.jsx("input",{type:"tel",placeholder:"Phone number",value:_.customer_phone,onChange:X=>C(R=>({...R,customer_phone:X.target.value})),className:"px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-green-500 focus:border-green-500"})]})]})]}),s.jsx("div",{className:"bg-gray-50 px-6 py-4 border-t border-gray-200",children:s.jsxs("div",{className:"flex space-x-3",children:[s.jsx("button",{onClick:()=>N(!1),className:"flex-1 px-4 py-2 border border-gray-300 text-gray-700 rounded-lg hover:bg-gray-100 font-medium transition-colors",children:"Cancel"}),s.jsx("button",{onClick:oe,disabled:i||_.amount<he.total,className:"flex-1 bg-green-600 text-white px-4 py-2 rounded-lg hover:bg-green-700 disabled:bg-gray-400 disabled:cursor-not-allowed font-medium transition-colors flex items-center justify-center space-x-2",children:i?s.jsxs(s.Fragment,{children:[s.jsx("div",{className:"animate-spin rounded-full h-4 w-4 border-b-2 border-white"}),s.jsx("span",{children:"Processing..."})]}):s.jsxs(s.Fragment,{children:[s.jsx($u,{className:"h-4 w-4"}),s.jsx("span",{children:"Complete Payment"})]})})]})})]})}),O&&L&&s.jsx("div",{className:"fixed inset-0 bg-black/60 backdrop-blur-sm flex items-center justify-center z-50 p-4",children:s.jsx("div",{className:"bg-white rounded-lg shadow-xl max-w-md w-full mx-4",children:s.jsxs("div",{className:"p-6",children:[s.jsxs("div",{className:"text-center mb-4",children:[s.jsx(Di,{className:"h-8 w-8 mx-auto mb-2 text-green-600"}),s.jsx("h2",{className:"text-xl font-bold text-gray-900",children:"Transaction Complete"}),s.jsxs("p",{className:"text-gray-600",children:["Receipt #",L.id]})]}),s.jsxs("div",{className:"bg-gray-50 rounded-lg p-4 mb-4 font-mono text-sm",children:[s.jsxs("div",{className:"text-center border-b pb-2 mb-2",children:[s.jsx("h3",{className:"font-bold",children:"MEDCURE PRO"}),s.jsx("p",{className:"text-xs",children:"Pharmacy Management System"})]}),s.jsx("div",{className:"space-y-1 border-b pb-2 mb-2",children:L.items.map(X=>s.jsxs("div",{className:"flex justify-between",children:[s.jsxs("span",{children:[X.name," x",X.quantity]}),s.jsx("span",{children:re(X.subtotal)})]},`${X.id}-${X.quantity}`))}),s.jsxs("div",{className:"space-y-1",children:[s.jsxs("div",{className:"flex justify-between",children:[s.jsx("span",{children:"Subtotal:"}),s.jsx("span",{children:re(L.subtotal)})]}),s.jsxs("div",{className:"flex justify-between",children:[s.jsx("span",{children:"Tax:"}),s.jsx("span",{children:re(L.tax)})]}),s.jsxs("div",{className:"flex justify-between font-bold border-t pt-1",children:[s.jsx("span",{children:"Total:"}),s.jsx("span",{children:re(L.total)})]}),s.jsxs("div",{className:"flex justify-between",children:[s.jsxs("span",{children:["Payment (",L.payment.method,"):"]}),s.jsx("span",{children:re(L.payment.amount)})]}),s.jsxs("div",{className:"flex justify-between",children:[s.jsx("span",{children:"Change:"}),s.jsx("span",{children:re(L.payment.change)})]})]}),s.jsxs("div",{className:"text-center border-t pt-2 mt-2 text-xs",children:[s.jsx("p",{children:L.date?new Date(L.date).toLocaleString():new Date().toLocaleString()}),s.jsx("p",{children:"Thank you for your business!"})]})]}),s.jsx("button",{onClick:G,className:"w-full bg-blue-600 text-white px-4 py-2 rounded-lg hover:bg-blue-700",children:"New Transaction"})]})})}),Q&&s.jsx("div",{className:"fixed inset-0 bg-black/60 backdrop-blur-sm flex items-center justify-center z-50 p-4",children:s.jsxs("div",{className:"bg-white rounded-lg shadow-2xl max-w-6xl w-full mx-4 max-h-[90vh] overflow-hidden border border-gray-200",children:[s.jsx("div",{className:"bg-white border-b border-gray-200 p-6",children:s.jsxs("div",{className:"flex items-center justify-between",children:[s.jsxs("div",{className:"flex items-center space-x-4",children:[s.jsx("div",{className:"bg-blue-100 p-3 rounded-lg",children:s.jsx(Bu,{className:"h-6 w-6 text-blue-600"})}),s.jsxs("div",{children:[s.jsx("h2",{className:"text-xl font-semibold text-gray-900",children:"Transaction History"}),s.jsxs("p",{className:"text-gray-600 text-sm",children:["Sales for ",new Date().toLocaleDateString()]})]})]}),s.jsx("button",{onClick:()=>H(!1),className:"p-2 text-gray-400 hover:text-gray-600 rounded-lg hover:bg-gray-100 transition-colors",title:"Close",children:s.jsx(Yt,{className:"h-6 w-6"})})]})}),s.jsx("div",{className:"p-6 bg-white max-h-[calc(90vh-120px)] overflow-y-auto",children:K?s.jsxs("div",{className:"flex flex-col items-center justify-center py-16",children:[s.jsxs("div",{className:"relative",children:[s.jsx("div",{className:"animate-spin rounded-full h-16 w-16 border-4 border-blue-200 border-b-blue-600"}),s.jsx("div",{className:"absolute inset-0 flex items-center justify-center",children:s.jsx(Bu,{className:"h-6 w-6 text-blue-600"})})]}),s.jsxs("div",{className:"mt-6 text-center",children:[s.jsx("h3",{className:"text-lg font-semibold text-gray-900 mb-2",children:"Loading Transactions"}),s.jsx("p",{className:"text-gray-600",children:"Fetching today's sales data..."})]})]}):s.jsx(s.Fragment,{children:Y.length===0?s.jsxs("div",{className:"text-center py-16",children:[s.jsx("div",{className:"bg-gray-100 rounded-full p-6 w-24 h-24 mx-auto mb-6 flex items-center justify-center",children:s.jsx(Hi,{className:"h-12 w-12 text-gray-400"})}),s.jsx("h3",{className:"text-xl font-bold text-gray-900 mb-3",children:"No Transactions Today"}),s.jsx("p",{className:"text-gray-600 text-lg max-w-md mx-auto",children:"Start processing sales to see transaction history here. Your completed transactions will appear in this view."}),s.jsx("div",{className:"mt-6 bg-blue-50 border border-blue-200 rounded-xl p-4 max-w-sm mx-auto",children:s.jsx("p",{className:"text-sm text-blue-800 font-medium",children:"💡 Tip: Completed sales will automatically appear here with full details."})})]}):s.jsxs(s.Fragment,{children:[s.jsxs("div",{className:"mb-6 grid grid-cols-1 md:grid-cols-3 gap-4",children:[s.jsx("div",{className:"bg-gray-50 border border-gray-200 rounded-lg p-4",children:s.jsxs("div",{className:"flex items-center space-x-3",children:[s.jsx("div",{className:"bg-blue-100 text-blue-600 p-2 rounded-lg",children:s.jsx(Di,{className:"h-5 w-5"})}),s.jsxs("div",{children:[s.jsx("p",{className:"text-sm text-gray-600",children:"Total Transactions"}),s.jsx("p",{className:"text-xl font-semibold text-gray-900",children:Y.length})]})]})}),s.jsx("div",{className:"bg-gray-50 border border-gray-200 rounded-lg p-4",children:s.jsxs("div",{className:"flex items-center space-x-3",children:[s.jsx("div",{className:"bg-green-100 text-green-600 p-2 rounded-lg",children:s.jsx(ns,{className:"h-5 w-5"})}),s.jsxs("div",{children:[s.jsx("p",{className:"text-sm text-gray-600",children:"Total Revenue"}),s.jsx("p",{className:"text-xl font-semibold text-gray-900",children:re(Y.reduce((X,R)=>X+(R.total||0),0))})]})]})}),s.jsx("div",{className:"bg-gray-50 border border-gray-200 rounded-lg p-4",children:s.jsxs("div",{className:"flex items-center space-x-3",children:[s.jsx("div",{className:"bg-gray-100 text-gray-600 p-2 rounded-lg",children:s.jsx(Hi,{className:"h-5 w-5"})}),s.jsxs("div",{children:[s.jsx("p",{className:"text-sm text-gray-600",children:"Latest Sale"}),s.jsx("p",{className:"text-sm font-medium text-gray-900",children:Y[0]?la(Y[0].created_at):"N/A"})]})]})})]}),s.jsx("div",{className:"space-y-3",children:Y.map(X=>s.jsxs("div",{className:"bg-white border border-gray-200 rounded-lg p-4 hover:border-gray-300 transition-colors",children:[s.jsxs("div",{className:"flex items-center justify-between mb-3",children:[s.jsxs("div",{className:"flex items-center space-x-3",children:[s.jsx("div",{className:"bg-green-100 text-green-600 p-2 rounded-lg",children:s.jsx(Di,{className:"h-4 w-4"})}),s.jsxs("div",{children:[s.jsxs("h4",{className:"font-medium text-gray-900",children:["Transaction #",X.id?.slice(-8)||"N/A"]}),s.jsxs("div",{className:"flex items-center space-x-3 text-sm text-gray-600",children:[s.jsxs("span",{className:"flex items-center space-x-1",children:[s.jsx(Hi,{className:"h-3 w-3"}),s.jsx("span",{children:la(X.created_at)})]}),s.jsx("span",{className:"bg-gray-100 text-gray-700 px-2 py-1 rounded text-xs font-medium",children:X.payment_method?.toUpperCase()||"CASH"})]})]})]}),s.jsxs("div",{className:"text-right",children:[s.jsx("p",{className:"font-semibold text-gray-900",children:re(X.total||0)}),s.jsxs("p",{className:"text-sm text-gray-600",children:[X.items?.length||0," item",(X.items?.length||0)!==1?"s":""]})]})]}),X.items&&X.items.length>0&&s.jsx("div",{className:"border-t border-gray-100 pt-3",children:s.jsxs("div",{className:"space-y-1",children:[X.items.slice(0,3).map((R,W)=>s.jsxs("div",{className:"flex justify-between text-sm",children:[s.jsxs("span",{className:"text-gray-600",children:[R.name," x",R.quantity]}),s.jsx("span",{className:"text-gray-900",children:re(R.subtotal||0)})]},W)),X.items.length>3&&s.jsxs("p",{className:"text-xs text-gray-500 italic",children:["+",X.items.length-3," more item",X.items.length-3!==1?"s":""]})]})})]},X.id))})]})})})]})})]})}function Md(n){const{stock_in_pieces:a,reorder_level:l}=n;return a===0?"out_of_stock":a<=l*.5?"critical_stock":a<=l?"low_stock":"in_stock"}function Ud(n){if(!n.expiry_date)return"good";const a=new Date,l=new Date(n.expiry_date),i=Math.ceil((l-a)/(1e3*60*60*24));return i<0?"expired":i<=30?"expiring_soon":i<=90?"expiring_warning":"good"}const Gu=["All Categories","Pain Relief","Antibiotics","Antihistamine","Gastro","Diabetes","Cardiovascular","Respiratory","Dermatology","Vitamins"],H2=["All Brands","Unilab","Pfizer","Teva","Advil","AstraZeneca","Merck","Norvasc","Imodium","GSK","Johnson & Johnson"],G2={in_stock:{label:"In Stock",color:"green",bgColor:"bg-green-100",textColor:"text-green-800",borderColor:"border-green-200"},low_stock:{label:"Low Stock",color:"yellow",bgColor:"bg-yellow-100",textColor:"text-yellow-800",borderColor:"border-yellow-200"},critical_stock:{label:"Critical Stock",color:"orange",bgColor:"bg-orange-100",textColor:"text-orange-800",borderColor:"border-orange-200"},out_of_stock:{label:"Out of Stock",color:"red",bgColor:"bg-red-100",textColor:"text-red-800",borderColor:"border-red-200"}},V2={good:{label:"Good",color:"green",bgColor:"bg-green-100",textColor:"text-green-800",borderColor:"border-green-200"},expiring_warning:{label:"Expiring in 3 months",color:"blue",bgColor:"bg-blue-100",textColor:"text-blue-800",borderColor:"border-blue-200"},expiring_soon:{label:"Expiring Soon",color:"yellow",bgColor:"bg-yellow-100",textColor:"text-yellow-800",borderColor:"border-yellow-200"},expired:{label:"Expired",color:"red",bgColor:"bg-red-100",textColor:"text-red-800",borderColor:"border-red-200"}};function Q2(n){const a=Md(n);return G2[a]}function Y2(n){const a=Ud(n);return V2[a]}function Ax(n,a){const l=a.pieces_per_sheet||1,c=(a.sheets_per_box||1)*l;if(c>1){const u=Math.floor(n/c),h=n%c,m=Math.floor(h/l),x=h%l;return{boxes:u,sheets:m,pieces:x}}else if(l>1){const u=Math.floor(n/l),h=n%l;return{boxes:0,sheets:u,pieces:h}}else return{boxes:0,sheets:0,pieces:n}}function F2({onSearch:n,onFilter:a,categories:l=[],brands:i=[],className:c=""}){const[u,h]=S.useState(""),[m,x]=S.useState({category:"All Categories",brand:"All Brands",stockStatus:"All",expiryStatus:"All"}),[g,p]=S.useState(!1);S.useEffect(()=>{const N=setTimeout(()=>{n(u)},300);return()=>clearTimeout(N)},[u,n]),S.useEffect(()=>{a(m)},[m,a]);const v=(N,_)=>{x(C=>({...C,[N]:_}))},j=()=>{x({category:"All Categories",brand:"All Brands",stockStatus:"All",expiryStatus:"All"})},w=Object.values(m).some(N=>N!=="All Categories"&&N!=="All Brands"&&N!=="All");return s.jsxs("div",{className:`bg-white rounded-lg border border-gray-200 p-4 ${c}`,children:[s.jsxs("div",{className:"flex items-center space-x-3 mb-4",children:[s.jsxs("div",{className:"flex-1 relative",children:[s.jsx(Fi,{className:"absolute left-3 top-3 h-4 w-4 text-gray-400"}),s.jsx("input",{type:"text",placeholder:"Search products by name, category, or brand...",value:u,onChange:N=>h(N.target.value),className:"w-full pl-10 pr-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent"})]}),s.jsxs("button",{onClick:()=>p(!g),className:`flex items-center space-x-2 px-3 py-2 border rounded-lg transition-colors ${g||w?"border-blue-500 bg-blue-50 text-blue-700":"border-gray-300 text-gray-700 hover:bg-gray-50"}`,children:[s.jsx(G1,{className:"h-4 w-4"}),s.jsx("span",{children:"Filters"}),w&&s.jsx("span",{className:"bg-blue-500 text-white text-xs rounded-full px-2 py-0.5 ml-1",children:Object.values(m).filter(N=>N!=="All Categories"&&N!=="All Brands"&&N!=="All").length})]})]}),g&&s.jsxs("div",{className:"border-t border-gray-200 pt-4",children:[s.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-4",children:[s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Category"}),s.jsxs("select",{value:m.category,onChange:N=>v("category",N.target.value),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent",children:[s.jsx("option",{value:"All Categories",children:"All Categories"}),l.map(N=>s.jsx("option",{value:N,children:N},N))]})]}),s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Brand"}),s.jsxs("select",{value:m.brand,onChange:N=>v("brand",N.target.value),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent",children:[s.jsx("option",{value:"All Brands",children:"All Brands"}),i.map(N=>s.jsx("option",{value:N,children:N},N))]})]}),s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Stock Status"}),s.jsxs("select",{value:m.stockStatus,onChange:N=>v("stockStatus",N.target.value),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent",children:[s.jsx("option",{value:"All",children:"All Stock Levels"}),s.jsx("option",{value:"in_stock",children:"In Stock"}),s.jsx("option",{value:"low_stock",children:"Low Stock"}),s.jsx("option",{value:"out_of_stock",children:"Out of Stock"})]})]}),s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Expiry Status"}),s.jsxs("select",{value:m.expiryStatus,onChange:N=>v("expiryStatus",N.target.value),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent",children:[s.jsx("option",{value:"All",children:"All Products"}),s.jsx("option",{value:"expiring_soon",children:"Expiring Soon"}),s.jsx("option",{value:"expired",children:"Expired"}),s.jsx("option",{value:"good",children:"Good Condition"})]})]})]}),w&&s.jsx("div",{className:"mt-4 flex justify-end",children:s.jsxs("button",{onClick:j,className:"flex items-center space-x-2 px-3 py-1 text-sm text-gray-600 hover:text-gray-800 transition-colors",children:[s.jsx(Yt,{className:"h-3 w-3"}),s.jsx("span",{children:"Clear all filters"})]})})]}),w&&!g&&s.jsx("div",{className:"flex flex-wrap gap-2 mt-3",children:Object.entries(m).map(([N,_])=>_==="All Categories"||_==="All Brands"||_==="All"?null:s.jsxs("span",{className:"inline-flex items-center space-x-1 px-2 py-1 bg-blue-100 text-blue-800 text-xs rounded-full",children:[s.jsx("span",{children:_}),s.jsx("button",{onClick:()=>v(N,N==="category"?"All Categories":N==="brand"?"All Brands":"All"),className:"hover:text-blue-600",children:s.jsx(Yt,{className:"h-3 w-3"})})]},N))})]})}function I2({product:n,onEdit:a,onView:l,onDelete:i,showActions:c=!0}){const u=Q2(n),h=Y2(n),m=x=>{if(!x)return"No expiry";const g=new Date,p=new Date(x),v=Math.ceil((p-g)/(1e3*60*60*24));return v<0?"Expired":v===0?"Expires today":v<=30?`Expires in ${v} days`:la(x)};return s.jsxs("div",{className:"bg-white rounded-lg border border-gray-200 shadow-sm hover:shadow-md transition-shadow duration-200 overflow-hidden",children:[s.jsx("div",{className:"p-4 border-b border-gray-100",children:s.jsxs("div",{className:"flex items-start justify-between",children:[s.jsxs("div",{className:"flex-1 min-w-0",children:[s.jsx("div",{className:"flex items-center space-x-2 mb-2",children:n.is_archived&&s.jsxs("span",{className:"inline-flex items-center px-2 py-1 rounded-full text-xs font-medium bg-amber-100 text-amber-800",children:[s.jsx(to,{className:"h-3 w-3 mr-1"}),"Archived"]})}),s.jsx("h3",{className:"font-semibold text-gray-900 text-lg leading-tight truncate",children:n.name}),s.jsxs("div",{className:"mt-2 flex items-center space-x-3",children:[s.jsx("span",{className:"inline-flex items-center px-2 py-1 rounded-full text-xs font-medium bg-blue-100 text-blue-800",children:n.brand}),s.jsx("span",{className:"text-sm text-gray-600",children:n.category})]})]}),c&&s.jsxs("div",{className:"flex items-center space-x-1 ml-3",children:[s.jsx("button",{onClick:()=>l(n),className:"p-2 text-gray-400 hover:text-blue-600 hover:bg-blue-50 rounded-lg transition-colors",title:"View Details",children:s.jsx(Ua,{className:"h-4 w-4"})}),s.jsx("button",{onClick:()=>a(n),className:"p-2 text-gray-400 hover:text-green-600 hover:bg-green-50 rounded-lg transition-colors",title:"Edit Product",children:s.jsx(ol,{className:"h-4 w-4"})}),s.jsx("button",{onClick:()=>i(n),className:"p-2 text-gray-400 hover:text-red-600 hover:bg-red-50 rounded-lg transition-colors",title:"Delete Product",children:s.jsx(cl,{className:"h-4 w-4"})})]})]})}),s.jsxs("div",{className:"p-4 space-y-4",children:[s.jsxs("div",{className:"text-center",children:[s.jsx("div",{className:"text-2xl font-bold text-gray-900",children:re(n.price_per_piece)}),s.jsx("div",{className:"text-sm text-gray-500",children:"per piece"})]}),s.jsxs("div",{className:"grid grid-cols-2 gap-3",children:[s.jsxs("div",{children:[s.jsxs("div",{className:"flex items-center justify-between mb-1",children:[s.jsx("span",{className:"text-xs text-gray-500 uppercase tracking-wider font-medium",children:"Stock"}),s.jsx(Me,{className:"h-3 w-3 text-gray-400"})]}),s.jsxs("div",{className:`text-center py-2 px-3 rounded-lg text-sm font-semibold ${u.bgColor} ${u.textColor} border ${u.borderColor}`,children:[n.stock_in_pieces," pcs"]})]}),s.jsxs("div",{children:[s.jsxs("div",{className:"flex items-center justify-between mb-1",children:[s.jsx("span",{className:"text-xs text-gray-500 uppercase tracking-wider font-medium",children:"Expiry"}),s.jsx(so,{className:"h-3 w-3 text-gray-400"})]}),s.jsx("div",{className:`text-center py-2 px-3 rounded-lg text-xs font-semibold ${h.bgColor} ${h.textColor} border ${h.borderColor}`,children:m(n.expiry_date)})]})]}),s.jsxs("div",{className:"space-y-2 pt-2 border-t border-gray-100",children:[s.jsxs("div",{className:"flex justify-between text-sm",children:[s.jsx("span",{className:"text-gray-500",children:"Category:"}),s.jsx("span",{className:"text-gray-900 font-medium",children:n.category})]}),s.jsxs("div",{className:"flex justify-between text-sm",children:[s.jsx("span",{className:"text-gray-500",children:"Brand:"}),s.jsx("span",{className:"text-gray-900 font-medium",children:n.brand})]}),s.jsxs("div",{className:"flex justify-between text-sm",children:[s.jsx("span",{className:"text-gray-500",children:"Product ID:"}),s.jsxs("span",{className:"text-gray-900 font-mono text-xs",children:["#",n.id.slice(-8)]})]})]}),n.stock_in_pieces<=n.reorder_level&&s.jsxs("div",{className:"flex items-center space-x-2 p-3 bg-amber-50 border border-amber-200 rounded-lg",children:[s.jsx(Ss,{className:"h-4 w-4 text-amber-600 flex-shrink-0"}),s.jsxs("div",{className:"flex-1 min-w-0",children:[s.jsx("div",{className:"text-sm font-medium text-amber-800",children:"Low Stock Alert"}),s.jsxs("div",{className:"text-xs text-amber-700",children:["Reorder level: ",n.reorder_level," pieces"]})]})]})]})]})}function Tx(){const[n,a]=S.useState([]),[l,i]=S.useState(""),[c,u]=S.useState({category:"All Categories",brand:"All Brands",stockStatus:"All",expiryStatus:"All"}),[h,m]=S.useState("name"),[x,g]=S.useState("asc"),[p,v]=S.useState(!1);S.useEffect(()=>{j()},[]);const j=async()=>{v(!0);try{const H=await Mr.getProducts();a(H)}catch(H){console.error("Error loading products:",H)}finally{v(!1)}},w=S.useMemo(()=>{let H=[...n];if(H=H.filter(Y=>!Y.is_archived),l){const Y=l.toLowerCase();H=H.filter(se=>se.name.toLowerCase().includes(Y)||se.brand.toLowerCase().includes(Y)||se.category.toLowerCase().includes(Y)||se.description.toLowerCase().includes(Y))}if(c.category!=="All Categories"&&(H=H.filter(Y=>Y.category===c.category)),c.brand!=="All Brands"&&(H=H.filter(Y=>Y.brand===c.brand)),c.stockStatus!=="All"&&(H=H.filter(Y=>c.stockStatus==="in_stock"?Y.stock_in_pieces>Y.reorder_level:c.stockStatus==="low_stock"?Y.stock_in_pieces>0&&Y.stock_in_pieces<=Y.reorder_level:c.stockStatus==="out_of_stock"?Y.stock_in_pieces<=0:!0)),c.expiryStatus!=="All"){const Y=new Date;H=H.filter(se=>{if(!se.expiry_date)return c.expiryStatus==="good";const K=new Date(se.expiry_date),ee=Math.ceil((K-Y)/(1e3*60*60*24));return c.expiryStatus==="expired"?ee<0:c.expiryStatus==="expiring_soon"?ee>=0&&ee<=30:c.expiryStatus==="good"?ee>30:!0})}return H.sort((Y,se)=>{let K=Y[h],ee=se[h];return h==="stock"?(K=Y.stock_in_pieces,ee=se.stock_in_pieces):h==="price"?(K=Y.price_per_piece,ee=se.price_per_piece):h==="expiry"&&(K=Y.expiry_date?new Date(Y.expiry_date):new Date("9999-12-31"),ee=se.expiry_date?new Date(se.expiry_date):new Date("9999-12-31")),typeof K=="string"&&(K=K.toLowerCase(),ee=ee.toLowerCase()),K<ee?x==="asc"?-1:1:K>ee?x==="asc"?1:-1:0}),H},[n,l,c,h,x]),N=S.useMemo(()=>{const H=n.filter(G=>!G.is_archived),Y=H.length,se=H.filter(G=>G.stock_in_pieces>0&&G.stock_in_pieces<=G.reorder_level).length,K=H.filter(G=>G.stock_in_pieces<=0).length,ee=new Date,he=H.filter(G=>{if(!G.expiry_date)return!1;const X=new Date(G.expiry_date),R=Math.ceil((X-ee)/(1e3*60*60*24));return R>=0&&R<=30}).length,xe=H.filter(G=>G.expiry_date?new Date(G.expiry_date)<ee:!1).length,oe=H.reduce((G,X)=>G+(X.price_per_piece||0)*(X.stock_in_pieces||0),0);return{totalProducts:Y,lowStockProducts:se,outOfStockProducts:K,expiringProducts:he,expiredProducts:xe,totalValue:oe}},[n]);return{products:w,allProducts:n,analytics:N,searchTerm:l,filters:c,sortBy:h,sortOrder:x,isLoading:p,addProduct:async H=>{v(!0);try{const Y=await Mr.addProduct(H);return a(se=>[...se,Y]),Y}catch(Y){throw console.error("Error adding product:",Y),Y}finally{v(!1)}},updateProduct:async(H,Y)=>{v(!0);try{const se=await Mr.updateProduct(H,Y);a(K=>K.map(ee=>ee.id===H?se:ee))}catch(se){throw console.error("Error updating product:",se),se}finally{v(!1)}},deleteProduct:async H=>{v(!0);try{await Mr.deleteProduct(H),a(Y=>Y.filter(se=>se.id!==H))}catch(Y){throw console.error("Error deleting product:",Y),Y}finally{v(!1)}},bulkUpdateStock:async H=>{v(!0);try{for(const Y of H)await Mr.updateProduct(Y.id,{stock_in_pieces:Y.stock});await j()}catch(Y){throw console.error("Error bulk updating stock:",Y),Y}finally{v(!1)}},loadProducts:j,handleSearch:H=>{i(H)},handleFilter:H=>{u(H)},handleSort:H=>{h===H?g(x==="asc"?"desc":"asc"):(m(H),g("asc"))}}}const K2=`
  .modal-scrollbar {
    scrollbar-width: thin;
    scrollbar-color: #cbd5e1 #f1f5f9;
  }
  
  .modal-scrollbar::-webkit-scrollbar {
    width: 8px;
  }
  
  .modal-scrollbar::-webkit-scrollbar-track {
    background: #f1f5f9;
    border-radius: 4px;
  }
  
  .modal-scrollbar::-webkit-scrollbar-thumb {
    background: #cbd5e1;
    border-radius: 4px;
    transition: background-color 0.2s ease;
  }
  
  .modal-scrollbar::-webkit-scrollbar-thumb:hover {
    background: #94a3b8;
  }
`;function X2(){const{products:n,allProducts:a,analytics:l,isLoading:i,addProduct:c,updateProduct:u,handleSearch:h,handleFilter:m,loadProducts:x}=Tx(),{user:g}=Es(),[p,v]=S.useState("grid"),[j,w]=S.useState(!1),[N,_]=S.useState(!1),[C,O]=S.useState(!1),[q,L]=S.useState(!1),[z,Q]=S.useState(!1),[H,Y]=S.useState(null),[se,K]=S.useState(1),[ee]=S.useState(12),[he,xe]=S.useState([]);as.useEffect(()=>{const F=document.createElement("style");return F.textContent=K2,document.head.appendChild(F),()=>{document.head.removeChild(F)}},[]),as.useEffect(()=>{oe()},[]);const oe=async()=>{try{console.log("🏷️ [Inventory] Loading dynamic categories...");const F=await Ur.getActiveCategories();if(F.success){const Z=F.data.map(ie=>ie.name);xe(Z),console.log("✅ [Inventory] Loaded categories:",Z)}else console.warn("⚠️ [Inventory] Using fallback categories:",F.error),xe(Gu.slice(1))}catch(F){console.error("❌ [Inventory] Error loading categories:",F),xe(Gu.slice(1))}},G=()=>he.length>0?he:Gu.slice(1),X=Math.ceil(n.length/ee),R=(se-1)*ee,W=n.slice(R,R+ee),J=F=>({...F,price:F.price_per_piece,stock:F.stock_in_pieces,expiry:F.expiry_date,reorderLevel:F.reorder_level,unit:"pieces"}),ye=F=>{Y(F),O(!0)},E=F=>{Y(F),_(!0)},I=async F=>{if(confirm(`Are you sure you want to archive ${F.name}? Archived products will be moved to the Management section and won't appear in active inventory.`))try{const Z=g?.id||"550e8400-e29b-41d4-a716-446655440001",ie=await Kn.archiveProduct(F.id,Z);ie.success?await x():alert("Error archiving product: "+ie.error)}catch(Z){alert("Error archiving product: "+Z.message)}};return s.jsxs("div",{className:"space-y-6",children:[s.jsx("div",{className:"bg-white rounded-xl p-6 shadow-sm border border-gray-200 mb-6",children:s.jsxs("div",{className:"flex flex-col lg:flex-row lg:items-center lg:justify-between",children:[s.jsxs("div",{className:"flex items-center space-x-4",children:[s.jsx("div",{className:"bg-blue-100 p-3 rounded-xl",children:s.jsx(Me,{className:"h-8 w-8 text-blue-600"})}),s.jsxs("div",{children:[s.jsxs("h1",{className:"text-2xl font-bold text-gray-900 flex items-center space-x-2",children:[s.jsx("span",{children:"Inventory Management"}),s.jsx("span",{className:"inline-flex items-center px-2.5 py-0.5 rounded-full text-xs font-medium bg-green-100 text-green-800",children:"Active"})]}),s.jsx("p",{className:"text-gray-600 mt-1",children:"Manage your pharmacy inventory, track stock levels, and monitor expiry dates"})]})]}),s.jsxs("div",{className:"flex items-center space-x-3 mt-4 lg:mt-0",children:[s.jsxs("button",{onClick:()=>L(!0),className:"group flex items-center space-x-2 px-4 py-2.5 bg-gray-50 border border-gray-200 text-gray-700 rounded-lg hover:bg-green-50 hover:border-green-200 hover:text-green-700 transition-all duration-200",children:[s.jsx(rs,{className:"h-4 w-4 group-hover:scale-110 transition-transform duration-200"}),s.jsx("span",{className:"font-medium",children:"Export"})]}),s.jsxs("button",{onClick:()=>Q(!0),className:"group flex items-center space-x-2 px-4 py-2.5 bg-gray-50 border border-gray-200 text-gray-700 rounded-lg hover:bg-blue-50 hover:border-blue-200 hover:text-blue-700 transition-all duration-200",children:[s.jsx(dd,{className:"h-4 w-4 group-hover:scale-110 transition-transform duration-200"}),s.jsx("span",{className:"font-medium",children:"Import"})]}),s.jsxs("button",{onClick:()=>w(!0),className:"group flex items-center space-x-2 px-5 py-2.5 bg-blue-600 text-white rounded-lg hover:bg-blue-700 transition-all duration-200 shadow-sm hover:shadow-md",children:[s.jsx(il,{className:"h-4 w-4 group-hover:rotate-90 transition-transform duration-200"}),s.jsx("span",{className:"font-semibold",children:"Add Product"})]})]})]})}),s.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-6",children:[s.jsx(Pi,{title:"Total Products",value:ks(l.totalProducts),icon:Me,color:"blue"}),s.jsx(Pi,{title:"Low Stock Items",value:ks(l.lowStockProducts),icon:Dd,color:"yellow",alert:l.lowStockProducts>0}),s.jsx(Pi,{title:"Expiring Soon",value:ks(l.expiringProducts),icon:so,color:"red",alert:l.expiringProducts>0}),s.jsx(Pi,{title:"Total Value",value:re(l.totalValue),icon:Gr,color:"green"})]}),s.jsx(F2,{onSearch:h,onFilter:m,categories:G().slice(1),brands:H2.slice(1)}),s.jsxs("div",{className:"flex items-center justify-between",children:[s.jsxs("p",{className:"text-sm text-gray-600",children:["Showing ",R+1,"-",Math.min(R+ee,n.length)," of"," ",n.length," products"]}),s.jsxs("div",{className:"flex items-center space-x-3",children:[s.jsxs("div",{className:"flex items-center bg-white border-2 border-gray-200 rounded-xl p-1 shadow-sm",children:[s.jsx("button",{onClick:()=>v("grid"),className:`group flex items-center justify-center p-2.5 rounded-lg transition-all duration-200 ${p==="grid"?"bg-gradient-to-r from-blue-500 to-blue-600 text-white shadow-md":"text-gray-500 hover:text-gray-700 hover:bg-gray-50"}`,title:"Grid View",children:s.jsx(a1,{className:`h-4 w-4 ${p==="grid"?"scale-110":"group-hover:scale-110"} transition-transform duration-200`})}),s.jsx("button",{onClick:()=>v("table"),className:`group flex items-center justify-center p-2.5 rounded-lg transition-all duration-200 ${p==="table"?"bg-gradient-to-r from-blue-500 to-blue-600 text-white shadow-md":"text-gray-500 hover:text-gray-700 hover:bg-gray-50"}`,title:"Table View",children:s.jsx(g1,{className:`h-4 w-4 ${p==="table"?"scale-110":"group-hover:scale-110"} transition-transform duration-200`})})]}),s.jsxs("button",{className:"flex items-center space-x-2 px-3 py-2 text-sm text-gray-600 hover:text-gray-800 hover:bg-gray-50 rounded-lg transition-all duration-200",children:[s.jsx(yt,{className:"h-4 w-4"}),s.jsx("span",{children:"Refresh"})]})]})]}),p==="grid"?s.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 xl:grid-cols-4 gap-6",children:W.map(F=>s.jsx(I2,{product:J(F),onEdit:E,onView:ye,onDelete:I},F.id))}):s.jsx("div",{className:"bg-white rounded-lg shadow-sm border border-gray-200 overflow-hidden",children:s.jsx("div",{className:"overflow-x-auto",children:s.jsxs("table",{className:"min-w-full divide-y divide-gray-200",children:[s.jsx("thead",{className:"bg-gray-50",children:s.jsxs("tr",{children:[s.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Product"}),s.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Category"}),s.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Stock"}),s.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Price"}),s.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Expiry"}),s.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Actions"})]})}),s.jsx("tbody",{className:"bg-white divide-y divide-gray-200",children:W.map(F=>s.jsx(Z2,{product:F,onView:()=>ye(F),onEdit:()=>E(F),onDelete:()=>I(F)},F.id))})]})})}),i&&s.jsx("div",{className:"flex items-center justify-center py-8",children:s.jsx("div",{className:"animate-spin rounded-full h-8 w-8 border-b-2 border-blue-600"})}),!i&&n.length===0&&s.jsxs("div",{className:"text-center py-12",children:[s.jsx(Me,{className:"h-16 w-16 mx-auto mb-4 text-gray-300"}),s.jsx("h3",{className:"text-lg font-medium text-gray-900 mb-2",children:"No products found"}),s.jsx("p",{className:"text-gray-500",children:"Try adjusting your search terms or filters."})]}),X>1&&s.jsx("div",{className:"bg-white px-6 py-4 border-2 border-gray-200 rounded-xl shadow-sm",children:s.jsxs("div",{className:"flex items-center justify-between",children:[s.jsxs("div",{className:"text-sm font-medium text-gray-700",children:["Page"," ",s.jsx("span",{className:"text-blue-600 font-semibold",children:se})," ","of"," ",s.jsx("span",{className:"text-blue-600 font-semibold",children:X})]}),s.jsxs("div",{className:"flex space-x-2",children:[s.jsx("button",{onClick:()=>K(Math.max(1,se-1)),disabled:se===1,className:"group flex items-center space-x-1 px-4 py-2 text-sm font-medium border-2 border-gray-200 rounded-lg hover:border-blue-300 hover:bg-blue-50 hover:text-blue-700 disabled:opacity-50 disabled:cursor-not-allowed disabled:hover:border-gray-200 disabled:hover:bg-white disabled:hover:text-gray-500 transition-all duration-200",children:s.jsx("span",{children:"Previous"})}),s.jsx("button",{onClick:()=>K(Math.min(X,se+1)),disabled:se===X,className:"group flex items-center space-x-1 px-4 py-2 text-sm font-medium border-2 border-gray-200 rounded-lg hover:border-blue-300 hover:bg-blue-50 hover:text-blue-700 disabled:opacity-50 disabled:cursor-not-allowed disabled:hover:border-gray-200 disabled:hover:bg-white disabled:hover:text-gray-500 transition-all duration-200",children:s.jsx("span",{children:"Next"})})]})]})}),j&&s.jsx(Ag,{title:"Add New Product",categories:G(),onClose:()=>w(!1),onSave:async F=>{try{await c(F),w(!1)}catch(Z){alert("Error adding product: "+Z.message)}}}),N&&H&&s.jsx(Ag,{title:"Edit Product",product:H,categories:G(),onClose:()=>{_(!1),Y(null)},onSave:async F=>{try{await u(H.id,F),_(!1),Y(null)}catch(Z){alert("Error updating product: "+Z.message)}}}),C&&H&&s.jsx(J2,{product:H,onClose:()=>{O(!1),Y(null)},onEdit:()=>{O(!1),_(!0)}}),s.jsx(b2,{isOpen:q,onClose:()=>L(!1),products:a}),s.jsx(j2,{isOpen:z,onClose:()=>Q(!1),onImport:async F=>{try{for(const Z of F)await c(Z);console.log(`Successfully imported ${F.length} products`)}catch(Z){throw new Error(`Import failed: ${Z.message}`)}}})]})}function Pi({title:n,value:a,icon:l,color:i,alert:c}){const u={blue:"bg-blue-50 text-blue-600",yellow:"bg-yellow-50 text-yellow-600",red:"bg-red-50 text-red-600",green:"bg-green-50 text-green-600"};return s.jsx("div",{className:"bg-white rounded-lg shadow-sm border border-gray-200 p-6",children:s.jsxs("div",{className:"flex items-center justify-between",children:[s.jsxs("div",{children:[s.jsx("p",{className:"text-sm font-medium text-gray-600",children:n}),s.jsx("p",{className:"text-2xl font-bold text-gray-900 mt-2",children:a})]}),s.jsx("div",{className:`p-3 rounded-lg ${u[i]} ${c?"animate-pulse":""}`,children:s.jsx(l,{className:"h-6 w-6"})})]})})}function Z2({product:n,onView:a,onEdit:l,onDelete:i}){const c=Md(n),u=Ud(n),h=Ax(n.stock_in_pieces,n),m=x=>{switch(x){case"critical_stock":case"expired":return"text-red-600 bg-red-50";case"low_stock":case"expiring_soon":return"text-yellow-600 bg-yellow-50";case"expiring_warning":return"text-orange-600 bg-orange-50";default:return"text-green-600 bg-green-50"}};return s.jsxs("tr",{className:"hover:bg-gray-50",children:[s.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:s.jsxs("div",{className:"flex items-center",children:[s.jsx("div",{className:"flex-shrink-0 h-10 w-10",children:s.jsx("div",{className:"h-10 w-10 rounded-lg bg-gray-100 flex items-center justify-center",children:s.jsx(Me,{className:"h-5 w-5 text-gray-400"})})}),s.jsxs("div",{className:"ml-4",children:[s.jsx("div",{className:"text-sm font-medium text-gray-900",children:n.name}),s.jsxs("div",{className:"text-sm text-gray-500 flex items-center space-x-2",children:[s.jsx("span",{children:n.brand}),s.jsx("span",{children:"•"}),s.jsx("span",{children:n.category})]})]})]})}),s.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:s.jsx("span",{className:"inline-flex px-2 py-1 text-xs font-medium bg-gray-100 text-gray-800 rounded-full",children:n.category})}),s.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:s.jsxs("div",{className:"text-sm text-gray-900",children:[s.jsxs("span",{className:`inline-flex px-2 py-1 text-xs font-medium rounded-full ${m(c)}`,children:[n.stock_in_pieces," pcs"]}),s.jsxs("div",{className:"text-xs text-gray-500 mt-1",children:[h.boxes>0&&`${h.boxes} box${h.boxes>1?"es":""} `,h.sheets>0&&`${h.sheets} sheet${h.sheets>1?"s":""} `,h.pieces>0&&`${h.pieces} pc${h.pieces>1?"s":""}`]})]})}),s.jsxs("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-900",children:[s.jsxs("div",{children:[re(n.price_per_piece),"/pc"]}),s.jsxs("div",{className:"text-xs text-gray-500",children:["Value:"," ",re(n.stock_in_pieces*n.price_per_piece)]})]}),s.jsxs("td",{className:"px-6 py-4 whitespace-nowrap",children:[s.jsx("div",{className:"text-sm text-gray-900",children:la(n.expiry_date)}),s.jsx("span",{className:`inline-flex px-2 py-1 text-xs font-medium rounded-full ${m(u)}`,children:u.replace("_"," ")})]}),s.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm font-medium",children:s.jsxs("div",{className:"flex items-center space-x-1",children:[s.jsx("button",{onClick:a,className:"group flex items-center justify-center p-2 text-blue-600 hover:text-blue-800 hover:bg-blue-50 rounded-lg transition-all duration-200",title:"View Details",children:s.jsx(Ua,{className:"h-4 w-4 group-hover:scale-110 transition-transform duration-200"})}),s.jsx("button",{onClick:l,className:"group flex items-center justify-center p-2 text-gray-600 hover:text-gray-800 hover:bg-gray-50 rounded-lg transition-all duration-200",title:"Edit Product",children:s.jsx(ol,{className:"h-4 w-4 group-hover:scale-110 transition-transform duration-200"})}),s.jsx("button",{onClick:i,className:"group flex items-center justify-center p-2 text-orange-600 hover:text-orange-800 hover:bg-orange-50 rounded-lg transition-all duration-200",title:"Archive Product",children:s.jsx(to,{className:"h-4 w-4 group-hover:scale-110 transition-transform duration-200"})})]})})]})}function Ag({title:n,product:a,categories:l,onClose:i,onSave:c}){const[u,h]=S.useState({name:a?.name||"",description:a?.description||"",category:a?.category||"Pain Relief",brand:a?.brand||"",cost_price:a?.cost_price||"",base_price:a?.base_price||"",price_per_piece:a?.price_per_piece||"",margin_percentage:a?.margin_percentage||"",pieces_per_sheet:a?.pieces_per_sheet||1,sheets_per_box:a?.sheets_per_box||1,stock_in_pieces:a?.stock_in_pieces||"",reorder_level:a?.reorder_level||"",supplier:a?.supplier||"",expiry_date:a?.expiry_date?.split("T")[0]||""}),m=(w,N)=>!w||w<=0||!N||N<=0?0:((N-w)/w*100).toFixed(2),x=(w,N)=>!w||w<=0||!N||N<=0?0:(w*(1+N/100)).toFixed(2),g=w=>{const N=parseFloat(w)||0,_=parseFloat(u.price_per_piece)||0;h({...u,cost_price:w,margin_percentage:m(N,_)})},p=w=>{const N=parseFloat(w)||0,_=parseFloat(u.cost_price)||0;h({...u,price_per_piece:w,margin_percentage:m(_,N)})},v=w=>{const N=parseFloat(w)||0,_=parseFloat(u.cost_price)||0;h({...u,margin_percentage:w,price_per_piece:x(_,N)})},j=w=>{w.preventDefault();const N={...u,cost_price:u.cost_price===""?null:parseFloat(u.cost_price)||null,base_price:u.base_price===""?null:parseFloat(u.base_price)||null,price_per_piece:u.price_per_piece===""?0:parseFloat(u.price_per_piece)||0,margin_percentage:u.margin_percentage===""?0:parseFloat(u.margin_percentage)||0,pieces_per_sheet:u.pieces_per_sheet===""?1:parseInt(u.pieces_per_sheet)||1,sheets_per_box:u.sheets_per_box===""?1:parseInt(u.sheets_per_box)||1,stock_in_pieces:u.stock_in_pieces===""?0:parseInt(u.stock_in_pieces)||0,reorder_level:u.reorder_level===""?0:parseInt(u.reorder_level)||0,expiry_date:u.expiry_date===""?null:u.expiry_date};c(N)};return s.jsx("div",{className:"fixed inset-0 bg-black/60 backdrop-blur-sm flex items-start justify-center z-50 p-4 py-8 overflow-y-auto",children:s.jsx("div",{className:"bg-white rounded-2xl shadow-2xl max-w-4xl w-full min-h-[90vh] max-h-fit flex flex-col my-auto",children:s.jsxs("div",{className:"flex flex-col h-full min-h-0",children:[s.jsxs("div",{className:"flex items-center justify-between p-6 border-b border-gray-200 bg-gradient-to-r from-blue-50 to-indigo-50 flex-shrink-0",children:[s.jsxs("div",{className:"flex items-center space-x-3",children:[s.jsx("div",{className:"p-2 bg-blue-100 rounded-xl",children:s.jsx(Me,{className:"h-6 w-6 text-blue-600"})}),s.jsx("h3",{className:"text-xl font-bold text-gray-900",children:n})]}),s.jsx("button",{onClick:i,className:"group p-2 text-gray-400 hover:text-gray-600 hover:bg-gray-100 rounded-xl transition-all duration-200",children:s.jsx(Yt,{className:"h-6 w-6 group-hover:scale-110 transition-transform duration-200"})})]}),s.jsx("div",{className:"flex-1 overflow-y-auto p-6 modal-scrollbar",children:s.jsx("form",{onSubmit:j,className:"space-y-8",children:s.jsxs("div",{className:"space-y-8",children:[s.jsxs("div",{className:"bg-gray-50 rounded-xl p-6",children:[s.jsxs("h4",{className:"text-lg font-semibold text-gray-900 mb-6 flex items-center",children:[s.jsx(Me,{className:"h-5 w-5 mr-2 text-gray-600"}),"Basic Information"]}),s.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-semibold text-gray-700 mb-2",children:"Product Name *"}),s.jsx("input",{type:"text",required:!0,value:u.name,onChange:w=>h({...u,name:w.target.value}),className:"w-full px-4 py-3 border-2 border-gray-200 rounded-xl focus:ring-2 focus:ring-blue-500 focus:border-blue-500 transition-all duration-200 hover:border-gray-300",placeholder:"Enter product name"})]}),s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-semibold text-gray-700 mb-2",children:"Category *"}),s.jsxs("select",{required:!0,value:u.category,onChange:w=>h({...u,category:w.target.value}),className:"w-full px-4 py-3 border-2 border-gray-200 rounded-xl focus:ring-2 focus:ring-blue-500 focus:border-blue-500 transition-all duration-200 hover:border-gray-300",children:[s.jsx("option",{value:"",children:"Select category"}),l.map(w=>s.jsx("option",{value:w,children:w},w))]})]}),s.jsxs("div",{className:"md:col-span-2",children:[s.jsx("label",{className:"block text-sm font-semibold text-gray-700 mb-2",children:"Description"}),s.jsx("textarea",{value:u.description,onChange:w=>h({...u,description:w.target.value}),rows:3,className:"w-full px-4 py-3 border-2 border-gray-200 rounded-xl focus:ring-2 focus:ring-blue-500 focus:border-blue-500 transition-all duration-200 hover:border-gray-300 resize-none",placeholder:"Enter product description"})]}),s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-semibold text-gray-700 mb-2",children:"Brand"}),s.jsx("input",{type:"text",value:u.brand,onChange:w=>h({...u,brand:w.target.value}),className:"w-full px-4 py-3 border-2 border-gray-200 rounded-xl focus:ring-2 focus:ring-blue-500 focus:border-blue-500 transition-all duration-200 hover:border-gray-300",placeholder:"Enter brand name"})]})]})]}),s.jsxs("div",{className:"bg-gradient-to-br from-blue-50 to-indigo-50 rounded-xl p-6 border-2 border-blue-100",children:[s.jsxs("h4",{className:"text-lg font-semibold text-gray-900 mb-6 flex items-center",children:[s.jsx(ns,{className:"h-6 w-6 mr-2 text-blue-600"}),"Enhanced Pricing Structure"]}),s.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-6",children:[s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-semibold text-gray-700 mb-2",children:"Cost Price (₱)"}),s.jsx("input",{type:"number",step:"0.01",value:u.cost_price,onChange:w=>g(w.target.value),className:"w-full px-4 py-3 border-2 border-gray-200 rounded-xl focus:ring-2 focus:ring-blue-500 focus:border-blue-500 transition-all duration-200 hover:border-gray-300",placeholder:"0.00"})]}),s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-semibold text-gray-700 mb-2",children:"Selling Price (₱) *"}),s.jsx("input",{type:"number",step:"0.01",required:!0,value:u.price_per_piece,onChange:w=>p(w.target.value),className:"w-full px-4 py-3 border-2 border-blue-200 rounded-xl focus:ring-2 focus:ring-blue-500 focus:border-blue-500 transition-all duration-200 hover:border-blue-300 bg-white",placeholder:"0.00"})]}),s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-semibold text-gray-700 mb-2",children:"Margin (%)"}),s.jsx("input",{type:"number",step:"0.01",value:u.margin_percentage,onChange:w=>v(w.target.value),className:"w-full px-4 py-3 border-2 border-gray-200 rounded-xl focus:ring-2 focus:ring-blue-500 focus:border-blue-500 transition-all duration-200 hover:border-gray-300",placeholder:"0.00",readOnly:!u.cost_price||u.cost_price<=0})]})]}),u.cost_price&&u.price_per_piece&&s.jsxs("div",{className:"mt-6 p-4 bg-white/70 backdrop-blur-sm rounded-xl border border-blue-200",children:[s.jsx("h5",{className:"text-sm font-semibold text-gray-700 mb-3",children:"Pricing Summary"}),s.jsxs("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-4 text-sm",children:[s.jsxs("div",{className:"text-center p-3 bg-gray-50 rounded-lg",children:[s.jsx("div",{className:"text-xs text-gray-500 uppercase tracking-wide",children:"Cost Price"}),s.jsxs("div",{className:"text-lg font-bold text-gray-900",children:["₱",parseFloat(u.cost_price).toFixed(2)]})]}),s.jsxs("div",{className:"text-center p-3 bg-blue-50 rounded-lg",children:[s.jsx("div",{className:"text-xs text-blue-600 uppercase tracking-wide",children:"Selling Price"}),s.jsxs("div",{className:"text-lg font-bold text-blue-900",children:["₱",parseFloat(u.price_per_piece).toFixed(2)]})]}),s.jsxs("div",{className:"text-center p-3 bg-green-50 rounded-lg",children:[s.jsx("div",{className:"text-xs text-green-600 uppercase tracking-wide",children:"Profit per Unit"}),s.jsxs("div",{className:"text-lg font-bold text-green-700",children:["₱",(parseFloat(u.price_per_piece)-parseFloat(u.cost_price)).toFixed(2)]})]}),s.jsxs("div",{className:"text-center p-3 bg-purple-50 rounded-lg",children:[s.jsx("div",{className:"text-xs text-purple-600 uppercase tracking-wide",children:"Margin"}),s.jsxs("div",{className:"text-lg font-bold text-purple-700",children:[u.margin_percentage,"%"]})]})]})]})]}),s.jsxs("div",{className:"bg-gray-50 rounded-xl p-6",children:[s.jsxs("h4",{className:"text-lg font-semibold text-gray-900 mb-6 flex items-center",children:[s.jsx(Me,{className:"h-5 w-5 mr-2 text-gray-600"}),"Stock Management"]}),s.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-semibold text-gray-700 mb-2",children:"Stock (Pieces) *"}),s.jsx("input",{type:"number",required:!0,value:u.stock_in_pieces,onChange:w=>h({...u,stock_in_pieces:w.target.value}),className:"w-full px-4 py-3 border-2 border-gray-200 rounded-xl focus:ring-2 focus:ring-blue-500 focus:border-blue-500 transition-all duration-200 hover:border-gray-300",placeholder:"Enter stock quantity"})]}),s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-semibold text-gray-700 mb-2",children:"Pieces per Sheet"}),s.jsx("input",{type:"number",min:"1",value:u.pieces_per_sheet,onChange:w=>h({...u,pieces_per_sheet:w.target.value}),className:"w-full px-4 py-3 border-2 border-gray-200 rounded-xl focus:ring-2 focus:ring-blue-500 focus:border-blue-500 transition-all duration-200 hover:border-gray-300",placeholder:"1"})]}),s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-semibold text-gray-700 mb-2",children:"Sheets per Box"}),s.jsx("input",{type:"number",min:"1",value:u.sheets_per_box,onChange:w=>h({...u,sheets_per_box:w.target.value}),className:"w-full px-4 py-3 border-2 border-gray-200 rounded-xl focus:ring-2 focus:ring-blue-500 focus:border-blue-500 transition-all duration-200 hover:border-gray-300",placeholder:"1"})]}),s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-semibold text-gray-700 mb-2",children:"Reorder Level"}),s.jsx("input",{type:"number",value:u.reorder_level,onChange:w=>h({...u,reorder_level:w.target.value}),className:"w-full px-4 py-3 border-2 border-gray-200 rounded-xl focus:ring-2 focus:ring-blue-500 focus:border-blue-500 transition-all duration-200 hover:border-gray-300",placeholder:"0"})]}),s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-semibold text-gray-700 mb-2",children:"Supplier"}),s.jsx("input",{type:"text",value:u.supplier,onChange:w=>h({...u,supplier:w.target.value}),className:"w-full px-4 py-3 border-2 border-gray-200 rounded-xl focus:ring-2 focus:ring-blue-500 focus:border-blue-500 transition-all duration-200 hover:border-gray-300",placeholder:"Enter supplier name"})]}),s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-semibold text-gray-700 mb-2",children:"Expiry Date"}),s.jsx("input",{type:"date",value:u.expiry_date,onChange:w=>h({...u,expiry_date:w.target.value}),className:"w-full px-4 py-3 border-2 border-gray-200 rounded-xl focus:ring-2 focus:ring-blue-500 focus:border-blue-500 transition-all duration-200 hover:border-gray-300"})]})]})]})]})})}),s.jsx("div",{className:"border-t border-gray-200 bg-gray-50 px-6 py-4 flex-shrink-0",children:s.jsxs("div",{className:"flex justify-end space-x-3",children:[s.jsx("button",{type:"button",onClick:i,className:"group px-6 py-2.5 border-2 border-gray-200 text-gray-700 font-medium rounded-xl hover:border-gray-300 hover:bg-gray-50 transition-all duration-200",children:"Cancel"}),s.jsx("button",{type:"submit",onClick:j,className:"group px-6 py-2.5 bg-gradient-to-r from-blue-600 to-blue-700 text-white font-semibold rounded-xl hover:from-blue-700 hover:to-blue-800 shadow-lg hover:shadow-xl transition-all duration-200 hover:scale-105 active:scale-95",children:s.jsx("span",{className:"flex items-center space-x-2",children:s.jsx("span",{children:a?"Update Product":"Add Product"})})})]})})]})})})}function J2({product:n,onClose:a,onEdit:l}){const i=Md(n),c=Ud(n),u=Ax(n.stock_in_pieces,n);return s.jsx("div",{className:"fixed inset-0 bg-black/60 backdrop-blur-sm flex items-start justify-center z-50 p-4 py-8 overflow-y-auto",children:s.jsx("div",{className:"bg-white rounded-2xl shadow-2xl max-w-4xl w-full min-h-[90vh] max-h-fit flex flex-col my-auto",children:s.jsxs("div",{className:"flex flex-col h-full min-h-0",children:[s.jsxs("div",{className:"flex items-center justify-between p-6 border-b border-gray-200 bg-gradient-to-r from-green-50 to-emerald-50 flex-shrink-0",children:[s.jsxs("div",{className:"flex items-center space-x-3",children:[s.jsx("div",{className:"p-2 bg-green-100 rounded-xl",children:s.jsx(Ua,{className:"h-6 w-6 text-green-600"})}),s.jsx("h3",{className:"text-xl font-bold text-gray-900",children:"Product Details"})]}),s.jsxs("div",{className:"flex items-center space-x-2",children:[s.jsxs("button",{onClick:l,className:"group flex items-center space-x-2 px-4 py-2.5 bg-gradient-to-r from-blue-600 to-blue-700 text-white font-semibold rounded-xl hover:from-blue-700 hover:to-blue-800 shadow-lg hover:shadow-xl transition-all duration-200 hover:scale-105 active:scale-95",children:[s.jsx(ol,{className:"h-4 w-4 group-hover:rotate-12 transition-transform duration-200"}),s.jsx("span",{children:"Edit"})]}),s.jsx("button",{onClick:a,className:"group p-2 text-gray-400 hover:text-gray-600 hover:bg-gray-100 rounded-xl transition-all duration-200",children:s.jsx(Yt,{className:"h-6 w-6 group-hover:scale-110 transition-transform duration-200"})})]})]}),s.jsx("div",{className:"flex-1 overflow-y-auto p-6 modal-scrollbar",children:s.jsxs("div",{className:"space-y-8",children:[s.jsxs("div",{className:"bg-gray-50 rounded-xl p-6",children:[s.jsxs("h4",{className:"text-xl font-bold text-gray-900 mb-6 flex items-center",children:[s.jsx(Me,{className:"h-6 w-6 mr-3 text-blue-600"}),"Basic Information"]}),s.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[s.jsxs("div",{className:"bg-white rounded-lg p-4 shadow-sm",children:[s.jsx("span",{className:"text-sm font-semibold text-gray-600 uppercase tracking-wide",children:"Product Name"}),s.jsx("p",{className:"text-lg font-semibold text-gray-900 mt-1",children:n.name})]}),s.jsxs("div",{className:"bg-white rounded-lg p-4 shadow-sm",children:[s.jsx("span",{className:"text-sm font-semibold text-gray-600 uppercase tracking-wide",children:"Brand"}),s.jsx("p",{className:"text-lg font-semibold text-gray-900 mt-1",children:n.brand||"Not specified"})]}),s.jsxs("div",{className:"bg-white rounded-lg p-4 shadow-sm",children:[s.jsx("span",{className:"text-sm font-semibold text-gray-600 uppercase tracking-wide",children:"Category"}),s.jsx("p",{className:"text-lg font-semibold text-gray-900 mt-1",children:s.jsx("span",{className:"inline-flex items-center px-3 py-1 rounded-full text-sm font-medium bg-blue-100 text-blue-800",children:n.category})})]}),s.jsxs("div",{className:"bg-white rounded-lg p-4 shadow-sm md:col-span-1",children:[s.jsx("span",{className:"text-sm font-semibold text-gray-600 uppercase tracking-wide",children:"Status"}),s.jsx("p",{className:"text-lg font-semibold text-gray-900 mt-1",children:s.jsx("span",{className:"inline-flex items-center px-3 py-1 rounded-full text-sm font-medium bg-green-100 text-green-800",children:"Active"})})]}),n.description&&s.jsxs("div",{className:"bg-white rounded-lg p-4 shadow-sm md:col-span-2",children:[s.jsx("span",{className:"text-sm font-semibold text-gray-600 uppercase tracking-wide",children:"Description"}),s.jsx("p",{className:"text-base text-gray-800 mt-2 leading-relaxed",children:n.description})]})]})]}),s.jsxs("div",{className:"bg-gradient-to-br from-blue-50 to-indigo-50 rounded-xl p-6 border border-blue-100",children:[s.jsxs("h4",{className:"text-xl font-bold text-gray-900 mb-6 flex items-center",children:[s.jsx(Me,{className:"h-6 w-6 mr-3 text-indigo-600"}),"Stock Information"]}),s.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[s.jsxs("div",{className:"bg-white rounded-xl p-6 shadow-sm border border-blue-100",children:[s.jsx("span",{className:"text-sm font-semibold text-gray-600 uppercase tracking-wide",children:"Current Stock"}),s.jsxs("div",{className:"mt-3",children:[s.jsxs("p",{className:"text-2xl font-bold text-gray-900",children:[n.stock_in_pieces.toLocaleString()," pieces"]}),s.jsx("span",{className:`mt-2 inline-flex px-4 py-2 text-sm font-bold rounded-xl ${i==="critical_stock"?"bg-red-100 text-red-800 border border-red-200":i==="low_stock"?"bg-yellow-100 text-yellow-800 border border-yellow-200":"bg-green-100 text-green-800 border border-green-200"}`,children:i.replace("_"," ").toUpperCase()})]})]}),s.jsxs("div",{className:"bg-white rounded-xl p-6 shadow-sm border border-blue-100",children:[s.jsx("span",{className:"text-sm font-semibold text-gray-600 uppercase tracking-wide",children:"Stock Breakdown"}),s.jsxs("div",{className:"mt-3 space-y-2",children:[s.jsxs("p",{className:"text-lg font-semibold text-gray-900",children:[u.boxes," boxes, ",u.sheets," ","sheets, ",u.pieces," pieces"]}),s.jsxs("div",{className:"text-sm text-gray-600 space-y-1",children:[s.jsxs("p",{children:["•"," ",s.jsx("span",{className:"font-medium",children:n.pieces_per_sheet})," ","pieces per sheet"]}),s.jsxs("p",{children:["•"," ",s.jsx("span",{className:"font-medium",children:n.sheets_per_box})," ","sheets per box"]})]})]})]}),s.jsxs("div",{className:"bg-white rounded-xl p-6 shadow-sm border border-blue-100",children:[s.jsx("span",{className:"text-sm font-semibold text-gray-600 uppercase tracking-wide",children:"Reorder Level"}),s.jsxs("p",{className:"text-xl font-bold text-gray-900 mt-2",children:[n.reorder_level," pieces"]})]}),s.jsxs("div",{className:"bg-white rounded-xl p-6 shadow-sm border border-blue-100",children:[s.jsx("span",{className:"text-sm font-semibold text-gray-600 uppercase tracking-wide",children:"Stock Status"}),s.jsx("p",{className:"text-lg font-semibold text-gray-900 mt-2",children:n.stock_in_pieces<=n.reorder_level?s.jsx("span",{className:"text-red-600",children:"⚠️ Needs Reorder"}):s.jsx("span",{className:"text-green-600",children:"✅ Adequate Stock"})})]})]})]}),s.jsxs("div",{className:"bg-gradient-to-br from-green-50 to-emerald-50 rounded-xl p-6 border border-green-100",children:[s.jsxs("h4",{className:"text-xl font-bold text-gray-900 mb-6 flex items-center",children:[s.jsx(ns,{className:"h-6 w-6 mr-3 text-green-600"}),"Pricing Information"]}),s.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-6",children:[s.jsxs("div",{className:"bg-white rounded-xl p-6 shadow-sm border border-green-100",children:[s.jsx("span",{className:"text-sm font-semibold text-gray-600 uppercase tracking-wide",children:"Price per Piece"}),s.jsx("p",{className:"text-2xl font-bold text-green-700 mt-2",children:re(n.price_per_piece)})]}),s.jsxs("div",{className:"bg-white rounded-xl p-6 shadow-sm border border-green-100",children:[s.jsx("span",{className:"text-sm font-semibold text-gray-600 uppercase tracking-wide",children:"Price per Sheet"}),s.jsx("p",{className:"text-xl font-bold text-gray-900 mt-2",children:re(n.price_per_piece*n.pieces_per_sheet)})]}),s.jsxs("div",{className:"bg-white rounded-xl p-6 shadow-sm border border-green-100",children:[s.jsx("span",{className:"text-sm font-semibold text-gray-600 uppercase tracking-wide",children:"Price per Box"}),s.jsx("p",{className:"text-xl font-bold text-gray-900 mt-2",children:re(n.price_per_piece*n.pieces_per_sheet*n.sheets_per_box)})]}),s.jsxs("div",{className:"bg-white rounded-xl p-6 shadow-sm border border-green-100",children:[s.jsx("span",{className:"text-sm font-semibold text-gray-600 uppercase tracking-wide",children:"Total Stock Value"}),s.jsx("p",{className:"text-2xl font-bold text-green-700 mt-2",children:re(n.stock_in_pieces*n.price_per_piece)})]})]})]}),s.jsxs("div",{className:"bg-gray-50 rounded-xl p-6",children:[s.jsxs("h4",{className:"text-xl font-bold text-gray-900 mb-6 flex items-center",children:[s.jsx(Me,{className:"h-6 w-6 mr-3 text-purple-600"}),"Additional Information"]}),s.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[s.jsxs("div",{className:"bg-white rounded-lg p-4 shadow-sm",children:[s.jsx("span",{className:"text-sm font-semibold text-gray-600 uppercase tracking-wide",children:"Supplier"}),s.jsx("p",{className:"text-lg font-semibold text-gray-900 mt-1",children:n.supplier||"Not specified"})]}),s.jsxs("div",{className:"bg-white rounded-lg p-4 shadow-sm",children:[s.jsx("span",{className:"text-sm font-semibold text-gray-600 uppercase tracking-wide",children:"Batch Number"}),s.jsx("p",{className:"text-lg font-mono font-bold text-gray-900 mt-1 bg-gray-100 px-2 py-1 rounded",children:n.batch_number})]}),s.jsxs("div",{className:"bg-white rounded-lg p-4 shadow-sm",children:[s.jsx("span",{className:"text-sm font-semibold text-gray-600 uppercase tracking-wide",children:"Expiry Date"}),s.jsxs("div",{className:"mt-2",children:[s.jsx("p",{className:"text-lg font-semibold text-gray-900",children:la(n.expiry_date)}),s.jsx("span",{className:`mt-1 inline-flex px-3 py-1 text-sm font-bold rounded-xl ${c==="expired"?"bg-red-100 text-red-800 border border-red-200":c==="expiring_soon"?"bg-orange-100 text-orange-800 border border-orange-200":c==="expiring_warning"?"bg-yellow-100 text-yellow-800 border border-yellow-200":"bg-green-100 text-green-800 border border-green-200"}`,children:c.replace("_"," ").toUpperCase()})]})]}),s.jsxs("div",{className:"bg-white rounded-lg p-4 shadow-sm",children:[s.jsx("span",{className:"text-sm font-semibold text-gray-600 uppercase tracking-wide",children:"Last Updated"}),s.jsx("p",{className:"text-lg font-semibold text-gray-900 mt-1",children:la(new Date)})]})]})]})]})})]})})})}const Tg={getAuditLogs:async(n={})=>{try{console.log("🔍 [AuditService] Fetching audit logs with filters:",n);const{limit:a=50,offset:l=0,action_type:i="all",user_id:c=null,date_from:u=null,date_to:h=null,search:m=null}=n;let x=ne.from("stock_movements").select(`
          id,
          movement_type,
          quantity,
          reason,
          stock_before,
          stock_after,
          created_at,
          reference_type,
          reference_id,
          products!inner(name, brand, category),
          users!inner(first_name, last_name, email, role)
        `).order("created_at",{ascending:!1});i!=="all"&&(x=x.eq("movement_type",i)),c&&(x=x.eq("user_id",c)),u&&(x=x.gte("created_at",u)),h&&(x=x.lte("created_at",h)),x=x.range(l,l+a-1);const{data:g,error:p}=await x;if(p)return console.error("❌ [AuditService] Error fetching audit logs:",p),{success:!1,error:p.message,data:[]};const v=g.map(j=>({id:j.id,action:W2(j),user:`${j.users.first_name} ${j.users.last_name}`,userRole:j.users.role,userEmail:j.users.email,details:eN(j),timestamp:j.created_at,product:j.products.name,productBrand:j.products.brand,category:j.products.category,quantity:j.quantity,stockBefore:j.stock_before,stockAfter:j.stock_after,referenceType:j.reference_type,referenceId:j.reference_id}));return console.log("✅ [AuditService] Audit logs fetched successfully:",v.length),{success:!0,data:v,total:v.length}}catch(a){return console.error("❌ [AuditService] Error in getAuditLogs:",a),{success:!1,error:a.message,data:[]}}},getAuditSummary:async(n=30)=>{try{console.log("📊 [AuditService] Fetching audit summary for last",n,"days");const a=new Date;a.setDate(a.getDate()-n);const{data:l,error:i}=await ne.from("stock_movements").select("movement_type, created_at, users!inner(id, first_name, last_name)").gte("created_at",a.toISOString());if(i)return console.error("❌ [AuditService] Error fetching audit summary:",i),{success:!1,error:i.message,data:null};const c={totalActions:l.length,stockIn:l.filter(u=>u.movement_type==="in").length,stockOut:l.filter(u=>u.movement_type==="out").length,adjustments:l.filter(u=>u.movement_type==="adjustment").length,uniqueUsers:[...new Set(l.map(u=>u.users.id))].length,dateRange:n,fromDate:a.toISOString(),toDate:new Date().toISOString()};return console.log("✅ [AuditService] Audit summary calculated:",c),{success:!0,data:c}}catch(a){return console.error("❌ [AuditService] Error in getAuditSummary:",a),{success:!1,error:a.message,data:null}}},getUserActivityLogs:async(n,a=20)=>{try{console.log("👤 [AuditService] Fetching user activity logs for user:",n);const{data:l,error:i}=await ne.from("stock_movements").select(`
          id,
          movement_type,
          quantity,
          reason,
          created_at,
          products!inner(name, brand)
        `).eq("user_id",n).order("created_at",{ascending:!1}).limit(a);return i?(console.error("❌ [AuditService] Error fetching user activity:",i),{success:!1,error:i.message,data:[]}):(console.log("✅ [AuditService] User activity logs fetched:",l.length),{success:!0,data:l})}catch(l){return console.error("❌ [AuditService] Error in getUserActivityLogs:",l),{success:!1,error:l.message,data:[]}}}},Li={generateSalesReport:async(n={})=>{try{console.log("📈 [ReportsService] Generating sales report with range:",n);const{startDate:a=new Date(Date.now()-720*60*60*1e3).toISOString(),endDate:l=new Date().toISOString()}=n,{data:i,error:c}=await ne.from("sales").select(`
          id,
          total_amount,
          payment_method,
          status,
          created_at,
          users!inner(first_name, last_name),
          sale_items!inner(
            quantity,
            unit_price,
            total_price,
            products!inner(name, category)
          )
        `).gte("created_at",a).lte("created_at",l).eq("status","completed").order("created_at",{ascending:!1});if(c)return console.error("❌ [ReportsService] Error fetching sales data:",c),{success:!1,error:c.message,data:null};const u={period:{startDate:a,endDate:l,days:Math.ceil((new Date(l)-new Date(a))/(1e3*60*60*24))},summary:{totalSales:i.reduce((h,m)=>h+parseFloat(m.total_amount),0),totalTransactions:i.length,averageTransaction:i.length>0?i.reduce((h,m)=>h+parseFloat(m.total_amount),0)/i.length:0,uniqueCustomers:[...new Set(i.map(h=>h.users.id))].length},paymentMethods:{cash:i.filter(h=>h.payment_method==="cash").reduce((h,m)=>h+parseFloat(m.total_amount),0),card:i.filter(h=>h.payment_method==="card").reduce((h,m)=>h+parseFloat(m.total_amount),0),digital:i.filter(h=>h.payment_method==="digital").reduce((h,m)=>h+parseFloat(m.total_amount),0)},topProducts:tN(i),dailyTrends:sN(i),categoryBreakdown:aN(i)};return console.log("✅ [ReportsService] Sales report generated successfully"),{success:!0,data:u}}catch(a){return console.error("❌ [ReportsService] Error in generateSalesReport:",a),{success:!1,error:a.message,data:null}}},generateInventoryReport:async()=>{try{console.log("📦 [ReportsService] Generating inventory report");const{data:n,error:a}=await ne.from("products").select(`
          id,
          name,
          brand,
          category,
          stock_in_pieces,
          reorder_level,
          price_per_piece,
          cost_price,
          expiry_date,
          is_active,
          is_archived,
          created_at
        `).eq("is_active",!0).eq("is_archived",!1);if(a)return console.error("❌ [ReportsService] Error fetching products:",a),{success:!1,error:a.message,data:null};const l={summary:{totalProducts:n.length,totalStockValue:n.reduce((i,c)=>i+c.stock_in_pieces*c.price_per_piece,0),totalCostValue:n.reduce((i,c)=>i+c.stock_in_pieces*(c.cost_price||0),0),averageStockLevel:n.length>0?n.reduce((i,c)=>i+c.stock_in_pieces,0)/n.length:0},stockLevels:{outOfStock:n.filter(i=>i.stock_in_pieces===0).length,lowStock:n.filter(i=>i.stock_in_pieces>0&&i.stock_in_pieces<=i.reorder_level).length,normalStock:n.filter(i=>i.stock_in_pieces>i.reorder_level).length},expiryAnalysis:rN(n),categoryAnalysis:nN(n),topValueProducts:lN(n),lowStockAlerts:n.filter(i=>i.stock_in_pieces<=i.reorder_level&&i.stock_in_pieces>0)};return console.log("✅ [ReportsService] Inventory report generated successfully"),{success:!0,data:l}}catch(n){return console.error("❌ [ReportsService] Error in generateInventoryReport:",n),{success:!1,error:n.message,data:null}}},generateFinancialReport:async(n={})=>{try{console.log("💰 [ReportsService] Generating financial report");const{startDate:a=new Date(Date.now()-720*60*60*1e3).toISOString(),endDate:l=new Date().toISOString()}=n,[i,c]=await Promise.all([ne.from("sales").select(`
            id,
            total_amount,
            created_at,
            sale_items!inner(
              quantity,
              unit_price,
              total_price,
              products!inner(cost_price, price_per_piece, name)
            )
          `).gte("created_at",a).lte("created_at",l).eq("status","completed"),ne.from("products").select("stock_in_pieces, cost_price, price_per_piece").eq("is_active",!0).eq("is_archived",!1)]);if(i.error||c.error)return console.error("❌ [ReportsService] Error fetching financial data:",i.error||c.error),{success:!1,error:(i.error||c.error).message,data:null};const u=i.data.reduce((v,j)=>v+parseFloat(j.total_amount),0),h=i.data.reduce((v,j)=>v+j.sale_items.reduce((w,N)=>{const _=N.products.cost_price||0;return w+N.quantity*_},0),0),m=u-h,x=u>0?m/u*100:0,g=c.data.reduce((v,j)=>v+j.stock_in_pieces*(j.cost_price||0),0),p={period:{startDate:a,endDate:l,days:Math.ceil((new Date(l)-new Date(a))/(1e3*60*60*24))},revenue:{total:u,average:i.data.length>0?u/i.data.length:0,daily:u/Math.max(1,Math.ceil((new Date(l)-new Date(a))/(1e3*60*60*24)))},costs:{total:h,percentage:u>0?h/u*100:0},profit:{gross:m,margin:x},inventory:{currentValue:g,turnover:g>0?h/g:0}};return console.log("✅ [ReportsService] Financial report generated successfully"),{success:!0,data:p}}catch(a){return console.error("❌ [ReportsService] Error in generateFinancialReport:",a),{success:!1,error:a.message,data:null}}},exportReportToCSV:async(n,a)=>{try{console.log("📄 [ReportsService] Exporting report to CSV:",n);let l="";switch(n){case"sales":l=iN(a);break;case"inventory":l=oN(a);break;case"financial":l=cN(a);break;default:throw new Error("Unsupported report type")}return{success:!0,data:l,filename:`${n}_report_${new Date().toISOString().split("T")[0]}.csv`}}catch(l){return console.error("❌ [ReportsService] Error in exportReportToCSV:",l),{success:!1,error:l.message,data:null}}}};function W2(n){switch(n.movement_type){case"in":return"Stock Added";case"out":return"Stock Removed";case"adjustment":return"Stock Adjusted";default:return"Stock Movement"}}function eN(n){const a=n.products.name,l=Math.abs(n.quantity),i=n.movement_type==="in"?"added to":n.movement_type==="out"?"removed from":"adjusted for";return`${l} units ${i} ${a} (${n.stock_before} → ${n.stock_after})`}function tN(n){const a={};return n.forEach(l=>{l.sale_items.forEach(i=>{const c=i.products.name;a[c]||(a[c]={name:c,quantity:0,revenue:0}),a[c].quantity+=i.quantity,a[c].revenue+=parseFloat(i.total_price)})}),Object.values(a).sort((l,i)=>i.revenue-l.revenue).slice(0,10)}function sN(n){const a={};return n.forEach(l=>{const i=l.created_at.split("T")[0];a[i]||(a[i]={date:i,sales:0,transactions:0}),a[i].sales+=parseFloat(l.total_amount),a[i].transactions+=1}),Object.values(a).sort((l,i)=>new Date(l.date)-new Date(i.date))}function aN(n){const a={};return n.forEach(l=>{l.sale_items.forEach(i=>{const c=i.products.category||"Uncategorized";a[c]||(a[c]={category:c,revenue:0,quantity:0}),a[c].revenue+=parseFloat(i.total_price),a[c].quantity+=i.quantity})}),Object.values(a).sort((l,i)=>i.revenue-l.revenue)}function rN(n){const a=new Date,l={expired:0,expiring30:0,expiring90:0,valid:0};return n.forEach(i=>{if(!i.expiry_date){l.valid++;return}const c=new Date(i.expiry_date),u=Math.ceil((c-a)/(1e3*60*60*24));u<0?l.expired++:u<=30?l.expiring30++:u<=90?l.expiring90++:l.valid++}),l}function nN(n){const a={};return n.forEach(l=>{const i=l.category||"Uncategorized";a[i]||(a[i]={category:i,products:0,totalValue:0,totalStock:0}),a[i].products++,a[i].totalValue+=l.stock_in_pieces*l.price_per_piece,a[i].totalStock+=l.stock_in_pieces}),Object.values(a).sort((l,i)=>i.totalValue-l.totalValue)}function lN(n){return n.map(a=>({...a,totalValue:a.stock_in_pieces*a.price_per_piece})).sort((a,l)=>l.totalValue-a.totalValue).slice(0,10)}function iN(n){let a=`Date,Transaction Count,Total Revenue,Average Transaction,Payment Method Breakdown
`;return n.dailyTrends.forEach(l=>{a+=`${l.date},${l.transactions},${l.sales},${l.sales/l.transactions}
`}),a}function oN(n){let a=`Product Name,Category,Stock Level,Unit Price,Total Value,Status
`;return n.topValueProducts.forEach(l=>{const i=l.stock_in_pieces===0?"Out of Stock":l.stock_in_pieces<=l.reorder_level?"Low Stock":"Normal";a+=`${l.name},${l.category},${l.stock_in_pieces},${l.price_per_piece},${l.totalValue},${i}
`}),a}function cN(n){let a=`Metric,Value
`;return a+=`Total Revenue,${n.revenue.total}
`,a+=`Total Costs,${n.costs.total}
`,a+=`Gross Profit,${n.profit.gross}
`,a+=`Profit Margin,${n.profit.margin}%
`,a+=`Inventory Value,${n.inventory.currentValue}
`,a}function uN(){const[n,a]=S.useState([]),[l,i]=S.useState(!1),c=(m,x)=>{a(g=>[...g,{test:m,result:x,timestamp:new Date().toISOString()}])},u=async()=>{i(!0),a([]);try{const m=localStorage.getItem("medcure-current-user");if(m){const x=JSON.parse(m);c("Current User Check",{success:!0,user:x});const g=await ra.updateLastLogin(x.id);c("Update Last Login",g);const p=await Da.getUsers();c("Get Updated Users",p)}else c("Current User Check",{success:!1,error:"No user logged in"})}catch(m){c("Test Error",{success:!1,error:m.message})}try{const m=await Da.getUsers();c("Database Connection",m)}catch(m){c("Database Connection",{success:!1,error:m.message})}i(!1)},h=async()=>{try{const m=localStorage.getItem("medcure-current-user");if(m){const x=JSON.parse(m),g=new Date().toISOString();x.last_login=g,localStorage.setItem("medcure-current-user",JSON.stringify(x)),c("Manual LocalStorage Update",{success:!0,message:"Updated localStorage last_login",timestamp:g}),setTimeout(()=>window.location.reload(),1e3)}}catch(m){c("Manual Update Error",{success:!1,error:m.message})}};return s.jsxs("div",{className:"bg-white rounded-xl p-6 shadow-sm border border-gray-200",children:[s.jsx("h3",{className:"text-lg font-semibold text-gray-900 mb-4",children:"Login Tracking Test"}),s.jsxs("div",{className:"space-y-4",children:[s.jsxs("div",{className:"flex space-x-3",children:[s.jsx("button",{onClick:u,disabled:l,className:"px-4 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700 disabled:bg-gray-400",children:l?"Running Tests...":"Run Login Tracking Tests"}),s.jsx("button",{onClick:h,className:"px-4 py-2 bg-green-600 text-white rounded-lg hover:bg-green-700",children:"Manually Update Last Login (LocalStorage)"})]}),n.length>0&&s.jsxs("div",{className:"mt-6",children:[s.jsx("h4",{className:"font-medium text-gray-900 mb-3",children:"Test Results:"}),s.jsx("div",{className:"space-y-2 max-h-96 overflow-y-auto",children:n.map((m,x)=>s.jsxs("div",{className:`p-3 rounded-lg border ${m.result.success?"bg-green-50 border-green-200":"bg-red-50 border-red-200"}`,children:[s.jsxs("div",{className:"flex justify-between items-start",children:[s.jsx("span",{className:"font-medium text-gray-900",children:m.test}),s.jsx("span",{className:"text-xs text-gray-500",children:new Date(m.timestamp).toLocaleTimeString()})]}),s.jsx("pre",{className:"text-xs text-gray-600 mt-1 whitespace-pre-wrap",children:JSON.stringify(m.result,null,2)})]},x))})]}),s.jsxs("div",{className:"mt-6 p-4 bg-blue-50 border border-blue-200 rounded-lg",children:[s.jsx("h4",{className:"font-medium text-blue-900 mb-2",children:"Debug Instructions:"}),s.jsxs("ol",{className:"text-sm text-blue-800 space-y-1 list-decimal list-inside",children:[s.jsx("li",{children:"Run the login tracking tests to see what's happening"}),s.jsx("li",{children:"Check the browser console for detailed error messages"}),s.jsx("li",{children:'Use "Manually Update Last Login" to force update for testing'}),s.jsx("li",{children:"Refresh the Management page to see if changes appear"}),s.jsx("li",{children:"Check if the database tables exist in Supabase"})]})]})]})]})}async function Rg(){console.log("🔍 Testing database connection...");try{const{data:n,error:a}=await ne.from("users").select("count(*)").limit(1);if(a)return console.error("❌ Database connection failed:",a),{success:!1,error:a.message};console.log("✅ Database connection successful");const[l,i,c]=await Promise.all([ne.from("users").select("*",{count:"exact",head:!0}),ne.from("products").select("*",{count:"exact",head:!0}),ne.from("sales").select("*",{count:"exact",head:!0})]),u={users:l.count||0,products:i.count||0,sales:c.count||0};return console.log("📊 Database counts:",u),{success:!0,counts:u}}catch(n){return console.error("❌ Database test failed:",n),{success:!1,error:n.message}}}async function Og(){console.log("🌱 Seeding sample data...");try{const{data:n}=await ne.from("users").select("id").limit(1);if(n&&n.length>0)return console.log("ℹ️ Data already exists, skipping seed"),{success:!0,message:"Data already exists"};const{data:a,error:l}=await ne.from("users").insert([{first_name:"John",last_name:"Admin",email:"admin@medcure.com",role:"admin",is_active:!0},{first_name:"Sarah",last_name:"Pharmacist",email:"sarah@medcure.com",role:"pharmacist",is_active:!0}]).select();if(l)throw l;console.log(`✅ Created ${a.length} users`);const{data:i,error:c}=await ne.from("products").insert([{name:"Paracetamol 500mg",brand:"Generic",category:"Pain Relief",stock_in_pieces:500,price_per_piece:2.5,reorder_level:50,is_active:!0},{name:"Vitamin C 1000mg",brand:"VitaMax",category:"Vitamins",stock_in_pieces:300,price_per_piece:8,reorder_level:40,is_active:!0},{name:"Cough Syrup",brand:"CoughAway",category:"Cold & Flu",stock_in_pieces:15,price_per_piece:45,reorder_level:20,is_active:!0}]).select();if(c)throw c;console.log(`✅ Created ${i.length} products`);const{data:u,error:h}=await ne.from("sales").insert([{user_id:a[0].id,total_amount:125.5,payment_method:"cash",customer_name:"Walk-in Customer",status:"completed"},{user_id:a[1].id,total_amount:67,payment_method:"card",customer_name:"John Doe",status:"completed"}]).select();if(h)throw h;console.log(`✅ Created ${u.length} sales`);const m=u.reduce((x,g)=>x+g.total_amount,0);return console.log(`🎉 Sample data created! Total sales value: ₱${m.toFixed(2)}`),{success:!0,counts:{users:a.length,products:i.length,sales:u.length},totalSales:m}}catch(n){return console.error("❌ Sample data creation failed:",n),{success:!1,error:n.message}}}typeof window<"u"&&(window.dbDebug={test:Rg,seed:Og,both:async()=>{const n=await Rg();return n.success&&n.counts.users===0?await Og():n}},console.log(`
🛠️ DATABASE DEBUG TOOLS LOADED

Available in browser console:
- dbDebug.test()  - Test database connection and count data
- dbDebug.seed()  - Create sample data if database is empty  
- dbDebug.both()  - Test and seed if needed

Run: await dbDebug.both()
  `));function dN(){const[n,a]=S.useState("users"),[l,i]=S.useState({totalUsers:0,activeUsers:0,totalProducts:0,lowStockItems:0,todaySales:0,systemUptime:"99.9%",storageUsed:"0 GB",storageTotal:"10 GB"}),[c,u]=S.useState(!0),h=[{id:"users",label:"User Management",icon:sl},{id:"categories",label:"Categories",icon:ao},{id:"archived",label:"Archived Products",icon:to},{id:"settings",label:"System Settings",icon:qr},{id:"reports",label:"Reports",icon:Lr},{id:"audit",label:"Audit Logs",icon:cd},{id:"backup",label:"Backup & Security",icon:Ii},{id:"debug",label:"Login Debug",icon:Oa}];S.useEffect(()=>{m(),typeof window<"u"&&(window.debugManagement={refreshData:m,checkServices:async()=>{console.log("🔍 Testing all services...");try{const x=await od.getDashboardData(),g=await Da.getUsers(),p=await Ur.getAllCategories(),v=await Kn.getArchivedProducts();console.log("📊 Service Status:",{dashboard:{success:x.success,dataKeys:x.data?Object.keys(x.data):[]},users:{success:g.success,count:g.data?.length||0},categories:{success:p.success,count:p.data?.length||0},archived:{success:v.success,count:v.data?.length||0}})}catch(x){console.error("❌ Service test failed:",x)}}})},[]);const m=async()=>{try{u(!0),console.log("🔍 [Management] Loading system stats...");const x=await od.getDashboardData();if(console.log("📊 [Management] Dashboard response:",{success:x.success,hasData:!!x.data,dataKeys:x.data?Object.keys(x.data):[]}),x.success){const g=x.data;console.log("✅ [Management] Setting system stats:",{totalUsers:g.totalUsers||0,activeUsers:g.activeUsers||0,totalProducts:g.totalProducts||0,lowStockItems:g.lowStockItems||0,todaySales:g.todaySales||0}),i({totalUsers:g.totalUsers||0,activeUsers:g.activeUsers||0,totalProducts:g.totalProducts||0,lowStockItems:g.lowStockItems||0,todaySales:g.todaySales||0,systemUptime:"99.9%",storageUsed:"2.3 GB",storageTotal:"10 GB"})}else console.error("❌ [Management] Dashboard data failed:",x.error),i({totalUsers:0,activeUsers:0,totalProducts:0,lowStockItems:0,todaySales:0,systemUptime:"99.9%",storageUsed:"2.3 GB",storageTotal:"10 GB"})}catch(x){console.error("❌ [Management] Error loading system stats:",x),i({totalUsers:0,activeUsers:0,totalProducts:0,lowStockItems:0,todaySales:0,systemUptime:"99.9%",storageUsed:"2.3 GB",storageTotal:"10 GB"})}finally{u(!1)}};return s.jsxs("div",{className:"space-y-6",children:[s.jsx("div",{className:"bg-white rounded-xl p-6 shadow-sm border border-gray-200",children:s.jsxs("div",{className:"flex justify-between items-center",children:[s.jsxs("div",{className:"flex items-center space-x-4",children:[s.jsx("div",{className:"bg-orange-100 p-3 rounded-xl",children:s.jsx(qr,{className:"h-8 w-8 text-orange-600"})}),s.jsxs("div",{children:[s.jsxs("h1",{className:"text-2xl font-bold text-gray-900 flex items-center space-x-2",children:[s.jsx("span",{children:"System Management"}),s.jsx("span",{className:"inline-flex items-center px-2.5 py-0.5 rounded-full text-xs font-medium bg-orange-100 text-orange-800",children:"Admin"})]}),s.jsx("p",{className:"text-gray-600 mt-1",children:"Manage users, settings, and system configuration with full administrative control"})]})]}),s.jsxs("div",{className:"flex space-x-3",children:[s.jsxs("button",{className:"group flex items-center space-x-2 px-4 py-2.5 bg-gray-50 border border-gray-200 text-gray-700 rounded-lg hover:bg-gray-100 hover:border-gray-300 transition-all duration-200",children:[s.jsx(rs,{className:"h-4 w-4 group-hover:scale-110 transition-transform duration-200"}),s.jsx("span",{className:"font-medium",children:"Export Data"})]}),s.jsxs("button",{className:"group flex items-center space-x-2 px-4 py-2.5 bg-orange-600 text-white rounded-lg hover:bg-orange-700 transition-all duration-200 shadow-sm hover:shadow-md",children:[s.jsx(yt,{className:"h-4 w-4 group-hover:rotate-180 transition-transform duration-300"}),s.jsx("span",{className:"font-medium",children:"Refresh"})]})]})]})}),s.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-6",children:[s.jsxs("div",{className:"bg-white p-6 rounded-lg shadow-sm border border-gray-200",children:[s.jsxs("div",{className:"flex items-center justify-between",children:[s.jsxs("div",{children:[s.jsx("p",{className:"text-sm font-medium text-gray-600",children:"Total Users"}),s.jsx("p",{className:"text-2xl font-bold text-gray-900",children:c?"...":l.totalUsers})]}),s.jsx("div",{className:"h-12 w-12 bg-blue-100 rounded-lg flex items-center justify-center",children:s.jsx(sl,{className:"h-6 w-6 text-blue-600"})})]}),s.jsxs("p",{className:"text-xs text-green-600 mt-2",children:[l.activeUsers," active users"]})]}),s.jsxs("div",{className:"bg-white p-6 rounded-lg shadow-sm border border-gray-200",children:[s.jsxs("div",{className:"flex items-center justify-between",children:[s.jsxs("div",{children:[s.jsx("p",{className:"text-sm font-medium text-gray-600",children:"Products"}),s.jsx("p",{className:"text-2xl font-bold text-gray-900",children:c?"...":ks(l.totalProducts)})]}),s.jsx("div",{className:"h-12 w-12 bg-green-100 rounded-lg flex items-center justify-center",children:s.jsx(Me,{className:"h-6 w-6 text-green-600"})})]}),s.jsxs("p",{className:"text-xs text-red-600 mt-2",children:[l.lowStockItems," low stock items"]})]}),s.jsxs("div",{className:"bg-white p-6 rounded-lg shadow-sm border border-gray-200",children:[s.jsxs("div",{className:"flex items-center justify-between",children:[s.jsxs("div",{children:[s.jsx("p",{className:"text-sm font-medium text-gray-600",children:"Today's Sales"}),s.jsx("p",{className:"text-2xl font-bold text-gray-900",children:c?"...":re(l.todaySales)})]}),s.jsx("div",{className:"h-12 w-12 bg-yellow-100 rounded-lg flex items-center justify-center",children:s.jsx(ns,{className:"h-6 w-6 text-yellow-600"})})]}),s.jsx("p",{className:"text-xs text-green-600 mt-2",children:"↗ System active"})]}),s.jsxs("div",{className:"bg-white p-6 rounded-lg shadow-sm border border-gray-200",children:[s.jsxs("div",{className:"flex items-center justify-between",children:[s.jsxs("div",{children:[s.jsx("p",{className:"text-sm font-medium text-gray-600",children:"System Status"}),s.jsx("p",{className:"text-2xl font-bold text-gray-900",children:l.systemUptime})]}),s.jsx("div",{className:"h-12 w-12 bg-green-100 rounded-lg flex items-center justify-center",children:s.jsx(Oa,{className:"h-6 w-6 text-green-600"})})]}),s.jsxs("p",{className:"text-xs text-gray-600 mt-2",children:[l.storageUsed," / ",l.storageTotal," used"]})]})]}),s.jsxs("div",{className:"bg-white rounded-lg shadow-sm border border-gray-200",children:[s.jsx("div",{className:"border-b border-gray-200",children:s.jsx("nav",{className:"flex space-x-8 px-6",children:h.map(x=>{const g=x.icon;return s.jsxs("button",{onClick:()=>a(x.id),className:`flex items-center space-x-2 py-4 px-1 border-b-2 font-medium text-sm ${n===x.id?"border-blue-500 text-blue-600":"border-transparent text-gray-500 hover:text-gray-700 hover:border-gray-300"}`,children:[s.jsx(g,{className:"h-4 w-4"}),s.jsx("span",{children:x.label})]},x.id)})})}),s.jsxs("div",{className:"p-6",children:[n==="users"&&s.jsx(hN,{}),n==="categories"&&s.jsx(fN,{}),n==="archived"&&s.jsx(mN,{}),n==="settings"&&s.jsx(gN,{}),n==="reports"&&s.jsx(xN,{}),n==="audit"&&s.jsx(pN,{}),n==="backup"&&s.jsx(vN,{}),n==="debug"&&s.jsx(uN,{})]})]})]})}function hN(){const[n,a]=S.useState([]),[l,i]=S.useState(!0);S.useEffect(()=>{c()},[]);const c=async()=>{try{i(!0),console.log("👥 [UserManagement] Loading users with real login data...");const u=await Da.getUsers();if(console.log("📊 [UserManagement] User service response:",{success:u.success,dataCount:u.data?u.data.length:0,hasError:!!u.error}),u.success&&u.data){const h=await Promise.all(u.data.map(async m=>{try{const x=await ra.getLoginHistory(m.id,1);let g=m.last_login;if(x.success&&x.data.length>0){const p=x.data[0];p.action_type==="login"&&p.metadata?.timestamp&&(g=p.metadata.timestamp)}return{...m,last_login:g,is_online:ra.isUserOnline(g),formatted_last_login:ra.formatLastLogin(g)}}catch(x){return console.warn(`⚠️ [UserManagement] Failed to get login data for user ${m.id}:`,x),{...m,is_online:!1,formatted_last_login:m.last_login?ra.formatLastLogin(m.last_login):"Never"}}}));console.log("✅ [UserManagement] Enhanced users with login data:",h),a(h)}else console.warn("⚠️ [UserManagement] Using fallback data:",u.error),a(u.data.map(h=>({...h,is_online:!1,formatted_last_login:h.last_login?ra.formatLastLogin(h.last_login):"Never"})))}catch(u){console.error("❌ [UserManagement] Error loading users:",u),a([{id:1,first_name:"John",last_name:"Admin",email:"admin@medcure.com",role:"admin",is_active:!0,last_login:"2024-01-15T10:30:00Z",is_online:!1,formatted_last_login:"5 days ago"},{id:2,first_name:"Sarah",last_name:"Pharmacist",email:"sarah@medcure.com",role:"manager",is_active:!0,last_login:"2024-01-15T09:15:00Z",is_online:!1,formatted_last_login:"5 days ago"}])}finally{i(!1)}};return s.jsxs("div",{children:[s.jsxs("div",{className:"flex justify-between items-center mb-6",children:[s.jsx("h3",{className:"text-lg font-medium text-gray-900",children:"User Management"}),s.jsxs("div",{className:"flex space-x-2",children:[s.jsxs("button",{onClick:c,className:"bg-gray-100 text-gray-700 px-3 py-2 rounded-lg hover:bg-gray-200 flex items-center space-x-2 text-sm",children:[s.jsx(yt,{className:"h-4 w-4"}),s.jsx("span",{children:"Refresh"})]}),s.jsxs("button",{className:"bg-blue-600 text-white px-4 py-2 rounded-lg hover:bg-blue-700 flex items-center space-x-2",children:[s.jsx(r2,{className:"h-4 w-4"}),s.jsx("span",{children:"Add User"})]})]})]}),l?s.jsx("div",{className:"flex items-center justify-center py-8",children:s.jsx("div",{className:"animate-spin rounded-full h-8 w-8 border-b-2 border-blue-600"})}):s.jsx("div",{className:"overflow-x-auto",children:s.jsxs("table",{className:"min-w-full divide-y divide-gray-200",children:[s.jsx("thead",{className:"bg-gray-50",children:s.jsxs("tr",{children:[s.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"User"}),s.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Role"}),s.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Status"}),s.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Last Login"}),s.jsx("th",{className:"px-6 py-3 text-right text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Actions"})]})}),s.jsx("tbody",{className:"bg-white divide-y divide-gray-200",children:n.map(u=>s.jsxs("tr",{children:[s.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:s.jsxs("div",{children:[s.jsxs("div",{className:"text-sm font-medium text-gray-900",children:[u.first_name," ",u.last_name]}),s.jsx("div",{className:"text-sm text-gray-500",children:u.email})]})}),s.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:s.jsx("span",{className:"px-2 py-1 text-xs font-medium bg-blue-100 text-blue-800 rounded-full",children:u.role})}),s.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:s.jsxs("div",{className:"flex items-center space-x-2",children:[s.jsx("span",{className:`px-2 py-1 text-xs font-medium rounded-full ${u.is_active?"bg-green-100 text-green-800":"bg-red-100 text-red-800"}`,children:u.is_active?"Active":"Inactive"}),u.is_online&&s.jsxs("span",{className:"inline-flex items-center px-2 py-1 text-xs font-medium bg-green-100 text-green-800 rounded-full",children:[s.jsx("div",{className:"w-1.5 h-1.5 bg-green-400 rounded-full mr-1 animate-pulse"}),"Online"]})]})}),s.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-900",children:s.jsxs("div",{className:"flex items-center space-x-2",children:[s.jsx("span",{className:u.is_online?"text-green-600 font-medium":"",children:u.formatted_last_login||"Never"}),u.is_online&&s.jsx("div",{className:"w-2 h-2 bg-green-400 rounded-full animate-pulse"})]})}),s.jsxs("td",{className:"px-6 py-4 whitespace-nowrap text-right text-sm font-medium space-x-2",children:[s.jsx("button",{className:"text-blue-600 hover:text-blue-900",children:s.jsx(ol,{className:"h-4 w-4"})}),s.jsx("button",{className:"text-red-600 hover:text-red-900",children:s.jsx(cl,{className:"h-4 w-4"})})]})]},u.id))})]})})]})}function fN(){const[n,a]=S.useState([]),[l,i]=S.useState(!0),[c,u]=S.useState(!1),[h,m]=S.useState(!1),[x,g]=S.useState(null),[p,v]=S.useState(null),[j,w]=S.useState(!1);S.useEffect(()=>{N(),_()},[]);const N=async()=>{try{i(!0),console.log("🏷️ [CategoryManagement] Loading categories with real-time stats...");const z=await Ur.getAllCategories();if(console.log("📊 [CategoryManagement] Category service response:",{success:z.success,dataCount:z.data?z.data.length:0,hasError:!!z.error}),z.success){const Q=await Promise.all(z.data.map(async H=>{const Y=await na.calculateCategoryStats(H.id);return{...H,stats:Y}}));console.log("✅ [CategoryManagement] Setting categories with real-time stats:",Q),a(Q)}else console.error("❌ [CategoryManagement] Categories failed to load:",z.error),a([])}catch(z){console.error("❌ [CategoryManagement] Error loading categories:",z),a([])}finally{i(!1)}},_=async()=>{try{console.log("📈 [CategoryManagement] Loading category insights...");const z=await na.getCategoryInsights();z.success&&(v(z.data),console.log("✅ [CategoryManagement] Category insights loaded:",z.data))}catch(z){console.error("❌ [CategoryManagement] Error loading insights:",z)}},C=async z=>{const Q=await Ur.createCategory(z);Q.success?(await N(),await _(),u(!1)):alert("Error creating category: "+Q.error)},O=async z=>{const Q=await Ur.updateCategory(x.id,z);Q.success?(await N(),await _(),m(!1),g(null)):alert("Error updating category: "+Q.error)},q=async z=>{if(confirm(`Are you sure you want to delete the category "${z.name}"? This action cannot be undone if there are no products associated with it.`)){const Q=await Ur.deleteCategory(z.id);Q.success?(await N(),await _()):alert("Error deleting category: "+Q.error)}},L=async()=>{try{w(!0),console.log("🔄 [CategoryManagement] Updating all category statistics...");const z=await na.updateAllCategoryStats();z.success?(await N(),await _(),alert(`✅ Successfully updated ${z.updated} category statistics!`)):alert("Error updating statistics: "+z.error)}catch(z){console.error("❌ Error updating category stats:",z),alert("Error updating statistics: "+z.message)}finally{w(!1)}};return s.jsxs("div",{children:[s.jsxs("div",{className:"flex justify-between items-center mb-6",children:[s.jsxs("div",{children:[s.jsx("h3",{className:"text-lg font-medium text-gray-900",children:"Professional Category Management"}),s.jsx("p",{className:"text-sm text-gray-600",children:"Intelligent category system with real-time calculations and auto-creation"})]}),s.jsxs("div",{className:"flex space-x-2",children:[s.jsxs("button",{onClick:L,disabled:j,className:"bg-green-600 text-white px-4 py-2 rounded-lg hover:bg-green-700 flex items-center space-x-2 disabled:opacity-50",children:[s.jsx(yt,{className:`h-4 w-4 ${j?"animate-spin":""}`}),s.jsx("span",{children:j?"Updating...":"Refresh Stats"})]}),s.jsxs("button",{onClick:()=>u(!0),className:"bg-blue-600 text-white px-4 py-2 rounded-lg hover:bg-blue-700 flex items-center space-x-2",children:[s.jsx(W_,{className:"h-4 w-4"}),s.jsx("span",{children:"Add Category"})]})]})]}),p&&s.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-4 mb-6",children:[s.jsxs("div",{className:"bg-gradient-to-r from-blue-500 to-blue-600 p-4 rounded-lg text-white",children:[s.jsxs("div",{className:"flex items-center justify-between",children:[s.jsxs("div",{children:[s.jsx("p",{className:"text-blue-100 text-sm",children:"Total Categories"}),s.jsx("p",{className:"text-2xl font-bold",children:p.total_categories})]}),s.jsx(ao,{className:"h-8 w-8 text-blue-200"})]}),s.jsxs("p",{className:"text-xs text-blue-200 mt-2",children:[p.auto_created_categories.length," auto-created"]})]}),s.jsxs("div",{className:"bg-gradient-to-r from-green-500 to-green-600 p-4 rounded-lg text-white",children:[s.jsxs("div",{className:"flex items-center justify-between",children:[s.jsxs("div",{children:[s.jsx("p",{className:"text-green-100 text-sm",children:"Total Value"}),s.jsx("p",{className:"text-2xl font-bold",children:re(p.total_value)})]}),s.jsx(ns,{className:"h-8 w-8 text-green-200"})]}),s.jsxs("p",{className:"text-xs text-green-200 mt-2",children:[p.total_products," total products"]})]}),s.jsxs("div",{className:"bg-gradient-to-r from-yellow-500 to-yellow-600 p-4 rounded-lg text-white",children:[s.jsxs("div",{className:"flex items-center justify-between",children:[s.jsxs("div",{children:[s.jsx("p",{className:"text-yellow-100 text-sm",children:"Needs Attention"}),s.jsx("p",{className:"text-2xl font-bold",children:p.categories_needing_attention.length})]}),s.jsx(TrendingDown,{className:"h-8 w-8 text-yellow-200"})]}),s.jsxs("p",{className:"text-xs text-yellow-200 mt-2",children:[p.total_low_stock," low stock items"]})]}),s.jsxs("div",{className:"bg-gradient-to-r from-purple-500 to-purple-600 p-4 rounded-lg text-white",children:[s.jsxs("div",{className:"flex items-center justify-between",children:[s.jsxs("div",{children:[s.jsx("p",{className:"text-purple-100 text-sm",children:"Low Performing"}),s.jsx("p",{className:"text-2xl font-bold",children:p.low_performing_categories.length})]}),s.jsx(Lr,{className:"h-8 w-8 text-purple-200"})]}),s.jsx("p",{className:"text-xs text-purple-200 mt-2",children:"Categories under ₱1,000"})]})]}),l?s.jsx("div",{className:"flex items-center justify-center py-8",children:s.jsx("div",{className:"animate-spin rounded-full h-8 w-8 border-b-2 border-blue-600"})}):s.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6",children:n.map(z=>s.jsx(yN,{category:z,onEdit:Q=>{g(Q),m(!0)},onDelete:q},z.id))}),c&&s.jsx(Dg,{title:"Add New Category",onClose:()=>u(!1),onSave:C}),h&&x&&s.jsx(Dg,{title:"Edit Category",category:x,onClose:()=>{m(!1),g(null)},onSave:O})]})}function mN(){const[n,a]=S.useState([]),[l,i]=S.useState(!0);S.useEffect(()=>{c()},[]);const c=async()=>{try{i(!0),console.log("📦 [ArchivedProducts] Loading archived products...");const m=await Kn.getArchivedProducts();console.log("📊 [ArchivedProducts] Archive service response:",{success:m.success,dataCount:m.data?m.data.length:0,hasError:!!m.error}),m.success?(console.log("✅ [ArchivedProducts] Setting archived products:",m.data),a(m.data)):(console.error("❌ [ArchivedProducts] Failed to load:",m.error),a([]))}catch(m){console.error("❌ [ArchivedProducts] Error loading archived products:",m),a([])}finally{i(!1)}},u=async m=>{if(confirm(`Are you sure you want to restore "${m.name}"?`)){const x=await Kn.restoreProduct(m.id);x.success?await c():alert("Error restoring product: "+x.error)}},h=async m=>{if(confirm(`PERMANENT DELETE: Are you sure you want to permanently delete "${m.name}"? This action cannot be undone!`)){const x=await Kn.permanentlyDeleteProduct(m.id);x.success?await c():alert("Error permanently deleting product: "+x.error)}};return s.jsxs("div",{children:[s.jsxs("div",{className:"flex justify-between items-center mb-6",children:[s.jsxs("div",{children:[s.jsx("h3",{className:"text-lg font-medium text-gray-900",children:"Archived Products"}),s.jsx("p",{className:"text-sm text-gray-600",children:"Manage archived products and restore when needed"})]}),s.jsxs("div",{className:"text-sm text-gray-600",children:[n.length," archived products"]})]}),l?s.jsx("div",{className:"flex items-center justify-center py-8",children:s.jsx("div",{className:"animate-spin rounded-full h-8 w-8 border-b-2 border-blue-600"})}):n.length===0?s.jsxs("div",{className:"text-center py-12",children:[s.jsx(to,{className:"h-16 w-16 mx-auto mb-4 text-gray-300"}),s.jsx("h3",{className:"text-lg font-medium text-gray-900 mb-2",children:"No Archived Products"}),s.jsx("p",{className:"text-gray-500",children:"Products that are archived will appear here."})]}):s.jsx("div",{className:"bg-white border border-gray-200 rounded-lg overflow-hidden",children:s.jsx("div",{className:"overflow-x-auto",children:s.jsxs("table",{className:"min-w-full divide-y divide-gray-200",children:[s.jsx("thead",{className:"bg-gray-50",children:s.jsxs("tr",{children:[s.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Product"}),s.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Category"}),s.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Archived Date"}),s.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Archived By"}),s.jsx("th",{className:"px-6 py-3 text-right text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Actions"})]})}),s.jsx("tbody",{className:"bg-white divide-y divide-gray-200",children:n.map(m=>s.jsxs("tr",{className:"hover:bg-gray-50",children:[s.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:s.jsxs("div",{className:"flex items-center",children:[s.jsx("div",{className:"flex-shrink-0 h-10 w-10",children:s.jsx("div",{className:"h-10 w-10 rounded-lg bg-gray-100 flex items-center justify-center",children:s.jsx(Me,{className:"h-5 w-5 text-gray-400"})})}),s.jsxs("div",{className:"ml-4",children:[s.jsx("div",{className:"text-sm font-medium text-gray-900",children:m.name}),s.jsx("div",{className:"text-sm text-gray-500",children:m.brand})]})]})}),s.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:s.jsx("span",{className:"inline-flex px-2 py-1 text-xs font-medium bg-gray-100 text-gray-800 rounded-full",children:m.category_name||m.category})}),s.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-900",children:la(m.archived_at)}),s.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-900",children:m.archived_by_name||"System"}),s.jsxs("td",{className:"px-6 py-4 whitespace-nowrap text-right text-sm font-medium space-x-2",children:[s.jsx("button",{onClick:()=>u(m),className:"text-green-600 hover:text-green-900",title:"Restore Product",children:s.jsx(P1,{className:"h-4 w-4"})}),s.jsx("button",{onClick:()=>h(m),className:"text-red-600 hover:text-red-900",title:"Permanently Delete",children:s.jsx(cl,{className:"h-4 w-4"})})]})]},m.id))})]})})})]})}function gN(){return s.jsxs("div",{className:"space-y-6",children:[s.jsx("h3",{className:"text-lg font-medium text-gray-900",children:"System Settings"}),s.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-6",children:[s.jsxs("div",{className:"bg-gray-50 p-6 rounded-lg",children:[s.jsx("h4",{className:"text-base font-medium text-gray-900 mb-4",children:"General Settings"}),s.jsxs("div",{className:"space-y-4",children:[s.jsxs("div",{children:[s.jsx("label",{htmlFor:"pharmacy-name",className:"block text-sm font-medium text-gray-700 mb-2",children:"Pharmacy Name"}),s.jsx("input",{id:"pharmacy-name",type:"text",defaultValue:"MedCure Pharmacy",className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent"})]}),s.jsxs("div",{children:[s.jsx("label",{htmlFor:"tax-rate",className:"block text-sm font-medium text-gray-700 mb-2",children:"Tax Rate (%)"}),s.jsx("input",{id:"tax-rate",type:"number",defaultValue:"12",className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent"})]}),s.jsxs("div",{children:[s.jsx("label",{htmlFor:"currency",className:"block text-sm font-medium text-gray-700 mb-2",children:"Currency"}),s.jsxs("select",{id:"currency",className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent",children:[s.jsx("option",{value:"PHP",children:"Philippine Peso (₱)"}),s.jsx("option",{value:"USD",children:"US Dollar ($)"})]})]})]})]}),s.jsxs("div",{className:"bg-gray-50 p-6 rounded-lg",children:[s.jsx("h4",{className:"text-base font-medium text-gray-900 mb-4",children:"Notifications"}),s.jsxs("div",{className:"space-y-4",children:[s.jsxs("div",{className:"flex items-center justify-between",children:[s.jsxs("div",{children:[s.jsx("p",{className:"text-sm font-medium text-gray-900",children:"Low Stock Alerts"}),s.jsx("p",{className:"text-xs text-gray-500",children:"Get notified when products are running low"})]}),s.jsx("input",{type:"checkbox",defaultChecked:!0,className:"h-4 w-4 text-blue-600"})]}),s.jsxs("div",{className:"flex items-center justify-between",children:[s.jsxs("div",{children:[s.jsx("p",{className:"text-sm font-medium text-gray-900",children:"Expiry Alerts"}),s.jsx("p",{className:"text-xs text-gray-500",children:"Get notified about expiring products"})]}),s.jsx("input",{type:"checkbox",defaultChecked:!0,className:"h-4 w-4 text-blue-600"})]}),s.jsxs("div",{className:"flex items-center justify-between",children:[s.jsxs("div",{children:[s.jsx("p",{className:"text-sm font-medium text-gray-900",children:"Sales Reports"}),s.jsx("p",{className:"text-xs text-gray-500",children:"Daily sales summary notifications"})]}),s.jsx("input",{type:"checkbox",className:"h-4 w-4 text-blue-600"})]})]})]})]}),s.jsx("div",{className:"flex justify-end",children:s.jsxs("button",{className:"bg-blue-600 text-white px-6 py-2 rounded-lg hover:bg-blue-700 flex items-center space-x-2",children:[s.jsx(ud,{className:"h-4 w-4"}),s.jsx("span",{children:"Save Settings"})]})})]})}function xN(){const[n,a]=S.useState("sales"),[l,i]=S.useState("30"),[c,u]=S.useState(!1),[h,m]=S.useState(null),x=async p=>{try{u(!0),console.log("📊 [Reports] Generating report:",p);const v=new Date().toISOString(),j=new Date(Date.now()-parseInt(l)*24*60*60*1e3).toISOString();let w;switch(p){case"sales":w=await Li.generateSalesReport({startDate:j,endDate:v});break;case"inventory":w=await Li.generateInventoryReport();break;case"financial":w=await Li.generateFinancialReport({startDate:j,endDate:v});break;default:throw new Error("Unknown report type")}w.success?(m(w.data),console.log("✅ [Reports] Report generated successfully:",w.data)):(console.error("❌ [Reports] Report generation failed:",w.error),alert("Error generating report: "+w.error))}catch(v){console.error("❌ [Reports] Error generating report:",v),alert("Error generating report: "+v.message)}finally{u(!1)}},g=async p=>{if(!h){alert("Please generate a report first");return}try{console.log("📄 [Reports] Exporting report:",p);const v=await Li.exportReportToCSV(p,h);if(v.success){const j=new Blob([v.data],{type:"text/csv"}),w=window.URL.createObjectURL(j),N=document.createElement("a");N.href=w,N.download=v.filename,N.click(),window.URL.revokeObjectURL(w),console.log("✅ [Reports] Report exported successfully")}else alert("Error exporting report: "+v.error)}catch(v){console.error("❌ [Reports] Error exporting report:",v),alert("Error exporting report: "+v.message)}};return s.jsxs("div",{className:"space-y-6",children:[s.jsx("h3",{className:"text-lg font-medium text-gray-900",children:"Reports & Analytics"}),s.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6",children:[s.jsxs("div",{className:"bg-gradient-to-r from-blue-500 to-blue-600 p-6 rounded-lg text-white",children:[s.jsxs("div",{className:"flex items-center justify-between",children:[s.jsxs("div",{children:[s.jsx("h4",{className:"text-lg font-medium",children:"Sales Report"}),s.jsx("p",{className:"text-blue-100",children:"Generate sales analytics"})]}),s.jsx(Gr,{className:"h-8 w-8 text-blue-200"})]}),s.jsxs("button",{onClick:()=>x("sales"),disabled:c,className:"mt-4 bg-white text-blue-600 px-4 py-2 rounded-lg hover:bg-blue-50 flex items-center space-x-2 disabled:opacity-50",children:[s.jsx(rs,{className:"h-4 w-4"}),s.jsx("span",{children:c&&n==="sales"?"Generating...":"Generate"})]})]}),s.jsxs("div",{className:"bg-gradient-to-r from-green-500 to-green-600 p-6 rounded-lg text-white",children:[s.jsxs("div",{className:"flex items-center justify-between",children:[s.jsxs("div",{children:[s.jsx("h4",{className:"text-lg font-medium",children:"Inventory Report"}),s.jsx("p",{className:"text-green-100",children:"Stock levels and movement"})]}),s.jsx(Me,{className:"h-8 w-8 text-green-200"})]}),s.jsxs("button",{onClick:()=>x("inventory"),disabled:c,className:"mt-4 bg-white text-green-600 px-4 py-2 rounded-lg hover:bg-green-50 flex items-center space-x-2 disabled:opacity-50",children:[s.jsx(rs,{className:"h-4 w-4"}),s.jsx("span",{children:c&&n==="inventory"?"Generating...":"Generate"})]})]}),s.jsxs("div",{className:"bg-gradient-to-r from-yellow-500 to-yellow-600 p-6 rounded-lg text-white",children:[s.jsxs("div",{className:"flex items-center justify-between",children:[s.jsxs("div",{children:[s.jsx("h4",{className:"text-lg font-medium",children:"Financial Report"}),s.jsx("p",{className:"text-yellow-100",children:"Revenue and profit analysis"})]}),s.jsx(ns,{className:"h-8 w-8 text-yellow-200"})]}),s.jsxs("button",{onClick:()=>x("financial"),disabled:c,className:"mt-4 bg-white text-yellow-600 px-4 py-2 rounded-lg hover:bg-yellow-50 flex items-center space-x-2 disabled:opacity-50",children:[s.jsx(rs,{className:"h-4 w-4"}),s.jsx("span",{children:c&&n==="financial"?"Generating...":"Generate"})]})]})]}),s.jsxs("div",{className:"bg-gray-50 p-6 rounded-lg",children:[s.jsx("h4",{className:"text-base font-medium text-gray-900 mb-4",children:"Report Filters"}),s.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:[s.jsxs("div",{children:[s.jsx("label",{htmlFor:"date-range",className:"block text-sm font-medium text-gray-700 mb-2",children:"Date Range"}),s.jsxs("select",{id:"date-range",value:l,onChange:p=>i(p.target.value),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent",children:[s.jsx("option",{value:"1",children:"Today"}),s.jsx("option",{value:"7",children:"This Week"}),s.jsx("option",{value:"30",children:"This Month"}),s.jsx("option",{value:"90",children:"This Quarter"}),s.jsx("option",{value:"365",children:"This Year"})]})]}),s.jsxs("div",{children:[s.jsx("label",{htmlFor:"report-type",className:"block text-sm font-medium text-gray-700 mb-2",children:"Report Type"}),s.jsxs("select",{id:"report-type",value:n,onChange:p=>a(p.target.value),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent",children:[s.jsx("option",{value:"sales",children:"Sales Report"}),s.jsx("option",{value:"inventory",children:"Inventory Report"}),s.jsx("option",{value:"financial",children:"Financial Report"})]})]}),s.jsxs("div",{children:[s.jsx("label",{htmlFor:"format",className:"block text-sm font-medium text-gray-700 mb-2",children:"Export Format"}),s.jsx("button",{onClick:()=>g(n),disabled:!h||c,className:"w-full px-3 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700 disabled:opacity-50 disabled:cursor-not-allowed",children:"Export as CSV"})]})]})]}),h&&s.jsxs("div",{className:"bg-white border border-gray-200 rounded-lg p-6",children:[s.jsx("h4",{className:"text-lg font-medium text-gray-900 mb-4",children:"Report Results"}),s.jsx(bN,{data:h,type:n})]})]})}function pN(){const[n,a]=S.useState([]),[l,i]=S.useState(!0),[c,u]=S.useState({action_type:"all",search:"",limit:50}),[h,m]=S.useState(null);S.useEffect(()=>{const g=async()=>{try{i(!0),console.log("📋 [AuditLogs] Loading audit logs with filters:",c);const v=await Tg.getAuditLogs(c);console.log("📊 [AuditLogs] Audit service response:",{success:v.success,dataCount:v.data?v.data.length:0,hasError:!!v.error}),v.success?(console.log("✅ [AuditLogs] Setting audit logs:",v.data),a(v.data)):(console.error("❌ [AuditLogs] Failed to load audit logs:",v.error),a([{id:1,action:"Product Updated",user:"Sarah Pharmacist",details:"Updated stock for Paracetamol 500mg",timestamp:"2024-01-15T11:30:00Z"},{id:2,action:"Sale Completed",user:"Mike Cashier",details:"Sale #INV-001234 - Total: ₱2,450.00",timestamp:"2024-01-15T11:25:00Z"},{id:3,action:"User Login",user:"John Admin",details:"Administrator logged in from 192.168.1.100",timestamp:"2024-01-15T10:30:00Z"}]))}catch(v){console.error("❌ [AuditLogs] Error loading audit logs:",v),a([])}finally{i(!1)}},p=async()=>{try{console.log("📊 [AuditLogs] Loading audit summary...");const v=await Tg.getAuditSummary(30);v.success&&(console.log("✅ [AuditLogs] Audit summary loaded:",v.data),m(v.data))}catch(v){console.error("❌ [AuditLogs] Error loading audit summary:",v)}};g(),p()},[c]);const x=(g,p)=>{u(v=>({...v,[g]:p}))};return s.jsxs("div",{className:"space-y-6",children:[s.jsxs("div",{className:"flex justify-between items-center",children:[s.jsxs("div",{children:[s.jsx("h3",{className:"text-lg font-medium text-gray-900",children:"Audit Logs"}),h&&s.jsxs("p",{className:"text-sm text-gray-600",children:[h.totalActions," actions in the last"," ",h.dateRange," days"]})]}),s.jsxs("div",{className:"flex space-x-3",children:[s.jsx("input",{type:"text",placeholder:"Search logs...",value:c.search,onChange:g=>x("search",g.target.value),className:"px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent"}),s.jsxs("select",{value:c.action_type,onChange:g=>x("action_type",g.target.value),className:"px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent",children:[s.jsx("option",{value:"all",children:"All Actions"}),s.jsx("option",{value:"in",children:"Stock Added"}),s.jsx("option",{value:"out",children:"Stock Removed"}),s.jsx("option",{value:"adjustment",children:"Adjustments"})]})]})]}),h&&s.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-4",children:[s.jsxs("div",{className:"bg-blue-50 p-4 rounded-lg",children:[s.jsx("div",{className:"text-2xl font-bold text-blue-600",children:h.totalActions}),s.jsx("div",{className:"text-sm text-blue-700",children:"Total Actions"})]}),s.jsxs("div",{className:"bg-green-50 p-4 rounded-lg",children:[s.jsx("div",{className:"text-2xl font-bold text-green-600",children:h.stockIn}),s.jsx("div",{className:"text-sm text-green-700",children:"Stock Added"})]}),s.jsxs("div",{className:"bg-red-50 p-4 rounded-lg",children:[s.jsx("div",{className:"text-2xl font-bold text-red-600",children:h.stockOut}),s.jsx("div",{className:"text-sm text-red-700",children:"Stock Removed"})]}),s.jsxs("div",{className:"bg-yellow-50 p-4 rounded-lg",children:[s.jsx("div",{className:"text-2xl font-bold text-yellow-600",children:h.adjustments}),s.jsx("div",{className:"text-sm text-yellow-700",children:"Adjustments"})]})]}),s.jsx("div",{className:"bg-white border border-gray-200 rounded-lg overflow-hidden",children:s.jsx("div",{className:"divide-y divide-gray-200",children:l?s.jsx("div",{className:"flex items-center justify-center py-8",children:s.jsx("div",{className:"animate-spin rounded-full h-8 w-8 border-b-2 border-blue-600"})}):n.length===0?s.jsxs("div",{className:"text-center py-8",children:[s.jsx(Oa,{className:"h-16 w-16 mx-auto mb-4 text-gray-300"}),s.jsx("h3",{className:"text-lg font-medium text-gray-900 mb-2",children:"No Audit Logs"}),s.jsx("p",{className:"text-gray-500",children:"No activity logs found matching your criteria."})]}):n.map(g=>s.jsx("div",{className:"p-4 hover:bg-gray-50",children:s.jsxs("div",{className:"flex items-center justify-between",children:[s.jsxs("div",{className:"flex items-center space-x-3",children:[s.jsx("div",{className:"h-8 w-8 bg-blue-100 rounded-full flex items-center justify-center",children:s.jsx(Oa,{className:"h-4 w-4 text-blue-600"})}),s.jsxs("div",{children:[s.jsx("p",{className:"text-sm font-medium text-gray-900",children:g.action}),s.jsx("p",{className:"text-sm text-gray-500",children:g.details}),g.product&&s.jsxs("p",{className:"text-xs text-gray-400",children:["Product: ",g.product," | Category: ",g.category]})]})]}),s.jsxs("div",{className:"text-right",children:[s.jsx("p",{className:"text-sm font-medium text-gray-900",children:g.user}),g.userRole&&s.jsx("p",{className:"text-xs text-gray-500 capitalize",children:g.userRole}),s.jsx("p",{className:"text-xs text-gray-500",children:la(g.timestamp)})]})]})},g.id))})})]})}function yN({category:n,onEdit:a,onDelete:l}){const i=n.stats||{total_products:0,active_products:0,total_value:0,total_profit_potential:0,low_stock_count:0,out_of_stock_count:0,average_price:0},c=i.total_value>0?(i.total_profit_potential/i.total_value*100).toFixed(1):0,h=i.total_value>5e4?"green":i.total_value>1e4?"blue":i.total_value>1e3?"yellow":"red",m={green:"border-green-200 bg-green-50",blue:"border-blue-200 bg-blue-50",yellow:"border-yellow-200 bg-yellow-50",red:"border-red-200 bg-red-50"};return s.jsxs("div",{className:`bg-white rounded-lg border-2 p-6 hover:shadow-lg transition-all duration-200 ${m[h]}`,children:[s.jsxs("div",{className:"flex items-center justify-between mb-4",children:[s.jsxs("div",{className:"flex items-center space-x-3",children:[s.jsx("div",{className:"h-12 w-12 rounded-lg flex items-center justify-center",style:{backgroundColor:n.color+"20",color:n.color},children:s.jsx(ao,{className:"h-6 w-6"})}),s.jsxs("div",{children:[s.jsxs("h4",{className:"text-lg font-medium text-gray-900 flex items-center space-x-2",children:[s.jsx("span",{children:n.name}),n.metadata?.auto_created&&s.jsx("span",{className:"inline-flex items-center px-2 py-0.5 text-xs font-medium bg-purple-100 text-purple-700 rounded-full",children:"Auto"})]}),s.jsx("p",{className:"text-sm text-gray-500",children:n.description})]})]}),s.jsxs("div",{className:"flex items-center space-x-1",children:[s.jsx("button",{onClick:()=>a(n),className:"text-gray-400 hover:text-gray-600 p-1 rounded transition-colors",children:s.jsx(ol,{className:"h-4 w-4"})}),s.jsx("button",{onClick:()=>l(n),className:"text-gray-400 hover:text-red-600 p-1 rounded transition-colors",children:s.jsx(cl,{className:"h-4 w-4"})})]})]}),s.jsxs("div",{className:"mb-4 p-3 bg-white rounded-lg border border-gray-200",children:[s.jsxs("h5",{className:"text-sm font-semibold text-gray-700 mb-2 flex items-center",children:[s.jsx(ns,{className:"h-4 w-4 mr-1 text-green-600"}),"Financial Overview"]}),s.jsxs("div",{className:"grid grid-cols-2 gap-3",children:[s.jsxs("div",{children:[s.jsx("p",{className:"text-xs text-gray-500",children:"Total Value"}),s.jsx("p",{className:"text-lg font-bold text-green-600",children:re(i.total_value)})]}),s.jsxs("div",{children:[s.jsx("p",{className:"text-xs text-gray-500",children:"Profit Potential"}),s.jsx("p",{className:"text-lg font-bold text-blue-600",children:re(i.total_profit_potential)})]}),s.jsxs("div",{children:[s.jsx("p",{className:"text-xs text-gray-500",children:"Avg. Price"}),s.jsx("p",{className:"text-sm font-medium text-gray-700",children:re(i.average_price)})]}),s.jsxs("div",{children:[s.jsx("p",{className:"text-xs text-gray-500",children:"Margin"}),s.jsxs("p",{className:`text-sm font-medium ${c>20?"text-green-600":c>10?"text-yellow-600":"text-red-600"}`,children:[c,"%"]})]})]})]}),s.jsxs("div",{className:"grid grid-cols-2 gap-4 mb-4",children:[s.jsxs("div",{className:"text-center p-2 bg-gray-50 rounded-lg",children:[s.jsx("p",{className:"text-sm font-medium text-gray-600",children:"Products"}),s.jsx("p",{className:"text-xl font-bold text-gray-900",children:i.active_products}),s.jsxs("p",{className:"text-xs text-gray-500",children:[i.total_products," total"]})]}),s.jsxs("div",{className:"text-center p-2 bg-gray-50 rounded-lg",children:[s.jsx("p",{className:"text-sm font-medium text-gray-600",children:"Issues"}),s.jsx("p",{className:`text-xl font-bold ${i.low_stock_count>0?"text-red-600":"text-green-600"}`,children:i.low_stock_count}),s.jsx("p",{className:"text-xs text-gray-500",children:"low stock"})]})]}),s.jsxs("div",{className:"flex items-center justify-between",children:[s.jsxs("div",{className:"flex items-center space-x-2",children:[s.jsx("span",{className:`inline-flex px-2 py-1 text-xs font-medium rounded-full ${n.is_active?"bg-green-100 text-green-800":"bg-gray-100 text-gray-800"}`,children:n.is_active?"Active":"Inactive"}),i.out_of_stock_count>0&&s.jsxs("span",{className:"inline-flex px-2 py-1 text-xs font-medium bg-red-100 text-red-800 rounded-full",children:[i.out_of_stock_count," out of stock"]})]}),s.jsx("div",{className:`text-xs font-medium ${h==="green"?"text-green-600":h==="blue"?"text-blue-600":h==="yellow"?"text-yellow-600":"text-red-600"}`,children:h==="green"?"🔥 High Value":h==="blue"?"📈 Good":h==="yellow"?"⚠️ Moderate":"🔻 Low Value"})]})]})}function Dg({title:n,category:a,onClose:l,onSave:i}){const[c,u]=S.useState({name:a?.name||"",description:a?.description||"",color:a?.color||"#3B82F6",icon:a?.icon||"Package",sort_order:a?.sort_order||0,is_active:a?.is_active??!0}),h=g=>{g.preventDefault(),i(c)},m=["Package","Heart","Shield","Zap","Thermometer","Stomach","Droplets","Cross","Baby","FileText"],x=["#EF4444","#F59E0B","#10B981","#3B82F6","#6366F1","#8B5CF6","#EC4899","#F97316","#84CC16","#6B7280"];return s.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50",children:s.jsx("div",{className:"bg-white rounded-lg shadow-xl max-w-md w-full mx-4",children:s.jsxs("div",{className:"p-6",children:[s.jsxs("div",{className:"flex items-center justify-between mb-6",children:[s.jsx("h3",{className:"text-xl font-semibold text-gray-900",children:n}),s.jsx("button",{onClick:l,className:"text-gray-400 hover:text-gray-600",children:s.jsx(Yt,{className:"h-6 w-6"})})]}),s.jsxs("form",{onSubmit:h,className:"space-y-4",children:[s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Category Name *"}),s.jsx("input",{type:"text",required:!0,value:c.name,onChange:g=>u({...c,name:g.target.value}),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent"})]}),s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Description"}),s.jsx("textarea",{value:c.description,onChange:g=>u({...c,description:g.target.value}),rows:3,className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent"})]}),s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Color"}),s.jsx("div",{className:"flex space-x-2",children:x.map(g=>s.jsx("button",{type:"button",onClick:()=>u({...c,color:g}),className:`h-8 w-8 rounded border-2 ${c.color===g?"border-gray-900":"border-gray-300"}`,style:{backgroundColor:g}},g))})]}),s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Icon"}),s.jsx("select",{value:c.icon,onChange:g=>u({...c,icon:g.target.value}),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent",children:m.map(g=>s.jsx("option",{value:g,children:g},g))})]}),s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Sort Order"}),s.jsx("input",{type:"number",value:c.sort_order,onChange:g=>u({...c,sort_order:parseInt(g.target.value)||0}),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent"})]}),s.jsxs("div",{className:"flex items-center",children:[s.jsx("input",{type:"checkbox",id:"is_active",checked:c.is_active,onChange:g=>u({...c,is_active:g.target.checked}),className:"h-4 w-4 text-blue-600 rounded"}),s.jsx("label",{htmlFor:"is_active",className:"ml-2 text-sm text-gray-700",children:"Active"})]}),s.jsxs("div",{className:"flex justify-end space-x-3 pt-6 border-t",children:[s.jsx("button",{type:"button",onClick:l,className:"px-4 py-2 border border-gray-300 text-gray-700 rounded-lg hover:bg-gray-50",children:"Cancel"}),s.jsx("button",{type:"submit",className:"px-4 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700",children:a?"Update Category":"Create Category"})]})]})]})})})}function vN(){return s.jsxs("div",{className:"space-y-6",children:[s.jsx("h3",{className:"text-lg font-medium text-gray-900",children:"Backup & Security"}),s.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-6",children:[s.jsxs("div",{className:"bg-gray-50 p-6 rounded-lg",children:[s.jsx("h4",{className:"text-base font-medium text-gray-900 mb-4",children:"Data Backup"}),s.jsxs("div",{className:"space-y-4",children:[s.jsxs("div",{className:"flex items-center justify-between",children:[s.jsxs("div",{children:[s.jsx("p",{className:"text-sm font-medium text-gray-900",children:"Auto Backup"}),s.jsx("p",{className:"text-xs text-gray-500",children:"Last backup: Today at 3:00 AM"})]}),s.jsx("input",{type:"checkbox",defaultChecked:!0,className:"h-4 w-4 text-blue-600"})]}),s.jsxs("div",{children:[s.jsx("label",{htmlFor:"backup-frequency",className:"block text-sm font-medium text-gray-700 mb-2",children:"Backup Frequency"}),s.jsxs("select",{id:"backup-frequency",className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent",children:[s.jsx("option",{value:"daily",children:"Daily"}),s.jsx("option",{value:"weekly",children:"Weekly"}),s.jsx("option",{value:"monthly",children:"Monthly"})]})]}),s.jsxs("button",{className:"w-full bg-blue-600 text-white px-4 py-2 rounded-lg hover:bg-blue-700 flex items-center justify-center space-x-2",children:[s.jsx(rs,{className:"h-4 w-4"}),s.jsx("span",{children:"Create Backup Now"})]})]})]}),s.jsxs("div",{className:"bg-gray-50 p-6 rounded-lg",children:[s.jsx("h4",{className:"text-base font-medium text-gray-900 mb-4",children:"Security"}),s.jsxs("div",{className:"space-y-4",children:[s.jsxs("div",{className:"flex items-center justify-between",children:[s.jsxs("div",{children:[s.jsx("p",{className:"text-sm font-medium text-gray-900",children:"Two-Factor Authentication"}),s.jsx("p",{className:"text-xs text-gray-500",children:"Add extra security to accounts"})]}),s.jsx("input",{type:"checkbox",className:"h-4 w-4 text-blue-600"})]}),s.jsxs("div",{className:"flex items-center justify-between",children:[s.jsxs("div",{children:[s.jsx("p",{className:"text-sm font-medium text-gray-900",children:"Session Timeout"}),s.jsx("p",{className:"text-xs text-gray-500",children:"Auto logout after inactivity"})]}),s.jsxs("select",{className:"px-2 py-1 border border-gray-300 rounded text-sm",children:[s.jsx("option",{value:"30",children:"30 min"}),s.jsx("option",{value:"60",children:"1 hour"}),s.jsx("option",{value:"120",children:"2 hours"})]})]}),s.jsxs("div",{className:"flex items-center justify-between",children:[s.jsxs("div",{children:[s.jsx("p",{className:"text-sm font-medium text-gray-900",children:"Password Policy"}),s.jsx("p",{className:"text-xs text-gray-500",children:"Enforce strong passwords"})]}),s.jsx("input",{type:"checkbox",defaultChecked:!0,className:"h-4 w-4 text-blue-600"})]})]})]})]}),s.jsx("div",{className:"bg-green-50 border border-green-200 p-4 rounded-lg",children:s.jsxs("div",{className:"flex items-center space-x-3",children:[s.jsx("div",{className:"h-8 w-8 bg-green-100 rounded-full flex items-center justify-center",children:s.jsx(Ii,{className:"h-4 w-4 text-green-600"})}),s.jsxs("div",{children:[s.jsx("p",{className:"text-sm font-medium text-green-900",children:"System Status: Secure"}),s.jsx("p",{className:"text-xs text-green-700",children:"All security measures are active and functioning properly"})]})]})})]})}function bN({data:n,type:a}){if(!n)return null;switch(a){case"sales":return s.jsx(jN,{data:n});case"inventory":return s.jsx(wN,{data:n});case"financial":return s.jsx(_N,{data:n});default:return s.jsx("div",{children:"Unknown report type"})}}function jN({data:n}){return s.jsxs("div",{className:"space-y-6",children:[s.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:[s.jsxs("div",{className:"bg-blue-50 p-4 rounded-lg",children:[s.jsx("div",{className:"text-2xl font-bold text-blue-600",children:re(n.summary.totalSales)}),s.jsx("div",{className:"text-sm text-blue-700",children:"Total Sales"})]}),s.jsxs("div",{className:"bg-green-50 p-4 rounded-lg",children:[s.jsx("div",{className:"text-2xl font-bold text-green-600",children:n.summary.totalTransactions}),s.jsx("div",{className:"text-sm text-green-700",children:"Transactions"})]}),s.jsxs("div",{className:"bg-yellow-50 p-4 rounded-lg",children:[s.jsx("div",{className:"text-2xl font-bold text-yellow-600",children:re(n.summary.averageTransaction)}),s.jsx("div",{className:"text-sm text-yellow-700",children:"Average Transaction"})]})]}),s.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[s.jsxs("div",{children:[s.jsx("h5",{className:"text-base font-medium text-gray-900 mb-3",children:"Payment Methods"}),s.jsxs("div",{className:"space-y-2",children:[s.jsxs("div",{className:"flex justify-between",children:[s.jsx("span",{className:"text-sm text-gray-600",children:"Cash"}),s.jsx("span",{className:"text-sm font-medium",children:re(n.paymentMethods.cash)})]}),s.jsxs("div",{className:"flex justify-between",children:[s.jsx("span",{className:"text-sm text-gray-600",children:"Card"}),s.jsx("span",{className:"text-sm font-medium",children:re(n.paymentMethods.card)})]}),s.jsxs("div",{className:"flex justify-between",children:[s.jsx("span",{className:"text-sm text-gray-600",children:"Digital"}),s.jsx("span",{className:"text-sm font-medium",children:re(n.paymentMethods.digital)})]})]})]}),s.jsxs("div",{children:[s.jsx("h5",{className:"text-base font-medium text-gray-900 mb-3",children:"Top Products"}),s.jsx("div",{className:"space-y-2",children:n.topProducts.slice(0,5).map((a,l)=>s.jsxs("div",{className:"flex justify-between",children:[s.jsx("span",{className:"text-sm text-gray-600 truncate",children:a.name}),s.jsx("span",{className:"text-sm font-medium",children:re(a.revenue)})]},l))})]})]})]})}function wN({data:n}){return s.jsxs("div",{className:"space-y-6",children:[s.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-4",children:[s.jsxs("div",{className:"bg-blue-50 p-4 rounded-lg",children:[s.jsx("div",{className:"text-2xl font-bold text-blue-600",children:n.summary.totalProducts}),s.jsx("div",{className:"text-sm text-blue-700",children:"Total Products"})]}),s.jsxs("div",{className:"bg-green-50 p-4 rounded-lg",children:[s.jsx("div",{className:"text-2xl font-bold text-green-600",children:re(n.summary.totalStockValue)}),s.jsx("div",{className:"text-sm text-green-700",children:"Stock Value"})]}),s.jsxs("div",{className:"bg-red-50 p-4 rounded-lg",children:[s.jsx("div",{className:"text-2xl font-bold text-red-600",children:n.stockLevels.lowStock}),s.jsx("div",{className:"text-sm text-red-700",children:"Low Stock Items"})]}),s.jsxs("div",{className:"bg-yellow-50 p-4 rounded-lg",children:[s.jsx("div",{className:"text-2xl font-bold text-yellow-600",children:n.stockLevels.outOfStock}),s.jsx("div",{className:"text-sm text-yellow-700",children:"Out of Stock"})]})]}),s.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[s.jsxs("div",{children:[s.jsx("h5",{className:"text-base font-medium text-gray-900 mb-3",children:"Expiry Analysis"}),s.jsxs("div",{className:"space-y-2",children:[s.jsxs("div",{className:"flex justify-between",children:[s.jsx("span",{className:"text-sm text-gray-600",children:"Expired"}),s.jsx("span",{className:"text-sm font-medium text-red-600",children:n.expiryAnalysis.expired})]}),s.jsxs("div",{className:"flex justify-between",children:[s.jsx("span",{className:"text-sm text-gray-600",children:"Expiring (30 days)"}),s.jsx("span",{className:"text-sm font-medium text-yellow-600",children:n.expiryAnalysis.expiring30})]}),s.jsxs("div",{className:"flex justify-between",children:[s.jsx("span",{className:"text-sm text-gray-600",children:"Expiring (90 days)"}),s.jsx("span",{className:"text-sm font-medium text-orange-600",children:n.expiryAnalysis.expiring90})]})]})]}),s.jsxs("div",{children:[s.jsx("h5",{className:"text-base font-medium text-gray-900 mb-3",children:"Top Value Products"}),s.jsx("div",{className:"space-y-2",children:n.topValueProducts.slice(0,5).map((a,l)=>s.jsxs("div",{className:"flex justify-between",children:[s.jsx("span",{className:"text-sm text-gray-600 truncate",children:a.name}),s.jsx("span",{className:"text-sm font-medium",children:re(a.totalValue)})]},l))})]})]})]})}function _N({data:n}){return s.jsxs("div",{className:"space-y-6",children:[s.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-4",children:[s.jsxs("div",{className:"bg-green-50 p-4 rounded-lg",children:[s.jsx("div",{className:"text-2xl font-bold text-green-600",children:re(n.revenue.total)}),s.jsx("div",{className:"text-sm text-green-700",children:"Total Revenue"})]}),s.jsxs("div",{className:"bg-red-50 p-4 rounded-lg",children:[s.jsx("div",{className:"text-2xl font-bold text-red-600",children:re(n.costs.total)}),s.jsx("div",{className:"text-sm text-red-700",children:"Total Costs"})]}),s.jsxs("div",{className:"bg-blue-50 p-4 rounded-lg",children:[s.jsx("div",{className:"text-2xl font-bold text-blue-600",children:re(n.profit.gross)}),s.jsx("div",{className:"text-sm text-blue-700",children:"Gross Profit"})]}),s.jsxs("div",{className:"bg-yellow-50 p-4 rounded-lg",children:[s.jsxs("div",{className:"text-2xl font-bold text-yellow-600",children:[n.profit.margin.toFixed(1),"%"]}),s.jsx("div",{className:"text-sm text-yellow-700",children:"Profit Margin"})]})]}),s.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[s.jsxs("div",{children:[s.jsx("h5",{className:"text-base font-medium text-gray-900 mb-3",children:"Revenue Breakdown"}),s.jsxs("div",{className:"space-y-2",children:[s.jsxs("div",{className:"flex justify-between",children:[s.jsx("span",{className:"text-sm text-gray-600",children:"Daily Average"}),s.jsx("span",{className:"text-sm font-medium",children:re(n.revenue.daily)})]}),s.jsxs("div",{className:"flex justify-between",children:[s.jsx("span",{className:"text-sm text-gray-600",children:"Per Transaction"}),s.jsx("span",{className:"text-sm font-medium",children:re(n.revenue.average)})]})]})]}),s.jsxs("div",{children:[s.jsx("h5",{className:"text-base font-medium text-gray-900 mb-3",children:"Inventory Metrics"}),s.jsxs("div",{className:"space-y-2",children:[s.jsxs("div",{className:"flex justify-between",children:[s.jsx("span",{className:"text-sm text-gray-600",children:"Current Value"}),s.jsx("span",{className:"text-sm font-medium",children:re(n.inventory.currentValue)})]}),s.jsxs("div",{className:"flex justify-between",children:[s.jsx("span",{className:"text-sm text-gray-600",children:"Turnover Ratio"}),s.jsx("span",{className:"text-sm font-medium",children:n.inventory.turnover.toFixed(2)})]})]})]})]})]})}function NN(){const{allProducts:n,analytics:a,isLoading:l}=Tx(),[i,c]=S.useState("30");console.log("🔍 [AnalyticsPage] Debug Info:",{allProductsCount:n?.length||0,analyticsData:a,isLoading:l,firstProduct:n?.[0]});const u=S.useMemo(()=>{if(console.log("📊 [AnalyticsPage] Debug Info:",{allProductsCount:n?.length||0,analyticsFromHook:a,isLoading:l}),!n||!n.length)return console.log("⚠️ [AnalyticsPage] No products available for analytics"),{categoryStats:[],stockLevels:{outOfStock:0,lowStock:0,normalStock:0},expiryAnalysis:{expired:0,expiring30:0,expiring90:0},topProducts:[]};const h=n.filter(C=>!C.is_archived);console.log("📊 Active products for analytics:",h.length);const x=[...new Set(h.map(C=>C.category||"Uncategorized"))].map(C=>{const O=h.filter(z=>(z.category||"Uncategorized")===C),q=O.reduce((z,Q)=>z+(Q.stock_in_pieces||0)*(Q.price_per_piece||0),0),L=O.reduce((z,Q)=>z+(Q.stock_in_pieces||0),0);return{category:C,products:O.length,totalValue:q,totalStock:L,avgPrice:O.length>0?O.reduce((z,Q)=>z+(Q.price_per_piece||0),0)/O.length:0}}),g={outOfStock:h.filter(C=>(C.stock_in_pieces||0)===0).length,lowStock:h.filter(C=>(C.stock_in_pieces||0)>0&&(C.stock_in_pieces||0)<=(C.reorder_level||10)).length,normalStock:h.filter(C=>(C.stock_in_pieces||0)>(C.reorder_level||10)).length},p=new Date,v=h.filter(C=>C.expiry_date?new Date(C.expiry_date)<p:!1).length,j=h.filter(C=>{if(!C.expiry_date)return!1;const O=new Date(C.expiry_date),q=Math.ceil((O-p)/(1e3*60*60*24));return q>=0&&q<=30}).length,w=h.filter(C=>{if(!C.expiry_date)return!1;const O=new Date(C.expiry_date),q=Math.ceil((O-p)/(1e3*60*60*24));return q>30&&q<=90}).length,N=[...h].sort((C,O)=>(O.stock_in_pieces||0)*(O.price_per_piece||0)-(C.stock_in_pieces||0)*(C.price_per_piece||0)).slice(0,10),_={categoryStats:x,stockLevels:g,expiryAnalysis:{expired:v,expiring30:j,expiring90:w},topProducts:N};return console.log("📊 [AnalyticsPage] Analytics calculated:",_),_},[n]);return l?s.jsx("div",{className:"flex items-center justify-center py-12",children:s.jsx("div",{className:"animate-spin rounded-full h-8 w-8 border-b-2 border-blue-600"})}):!u||!n?.length?s.jsxs("div",{className:"space-y-6",children:[s.jsx("div",{className:"flex flex-col lg:flex-row lg:items-center lg:justify-between",children:s.jsxs("div",{children:[s.jsx("h1",{className:"text-3xl font-bold text-gray-900",children:"Analytics Dashboard"}),s.jsx("p",{className:"text-gray-600 mt-1",children:"Comprehensive insights into your pharmacy operations and inventory performance."})]})}),s.jsxs("div",{className:"bg-yellow-50 border border-yellow-200 rounded-lg p-6 text-center",children:[s.jsx(Me,{className:"mx-auto h-12 w-12 text-yellow-400 mb-4"}),s.jsx("h3",{className:"text-lg font-medium text-yellow-800 mb-2",children:"No Data Available"}),s.jsx("p",{className:"text-yellow-700",children:"No products found in the inventory. Add some products to see analytics data."})]})]}):s.jsxs("div",{className:"space-y-6",children:[s.jsx("div",{className:"bg-white rounded-xl p-6 shadow-sm border border-gray-200",children:s.jsxs("div",{className:"flex flex-col lg:flex-row lg:items-center lg:justify-between",children:[s.jsxs("div",{className:"flex items-center space-x-4",children:[s.jsx("div",{className:"bg-purple-100 p-3 rounded-xl",children:s.jsx(Lr,{className:"h-8 w-8 text-purple-600"})}),s.jsxs("div",{children:[s.jsxs("h1",{className:"text-2xl font-bold text-gray-900 flex items-center space-x-2",children:[s.jsx("span",{children:"Analytics Dashboard"}),s.jsx("span",{className:"inline-flex items-center px-2.5 py-0.5 rounded-full text-xs font-medium bg-purple-100 text-purple-800",children:"Real-time"})]}),s.jsx("p",{className:"text-gray-600 mt-1",children:"Comprehensive insights into your pharmacy operations and inventory performance"})]})]}),s.jsxs("div",{className:"flex items-center space-x-3 mt-4 lg:mt-0",children:[s.jsxs("select",{value:i,onChange:h=>c(h.target.value),className:"px-4 py-2.5 bg-gray-50 border border-gray-200 rounded-lg focus:ring-2 focus:ring-purple-500 focus:border-purple-500 text-gray-700 font-medium transition-all duration-200",children:[s.jsx("option",{value:"7",children:"Last 7 days"}),s.jsx("option",{value:"30",children:"Last 30 days"}),s.jsx("option",{value:"90",children:"Last 90 days"}),s.jsx("option",{value:"365",children:"Last year"})]}),s.jsxs("button",{className:"group flex items-center space-x-2 px-4 py-2.5 bg-gray-50 border border-gray-200 text-gray-700 rounded-lg hover:bg-gray-100 hover:border-gray-300 transition-all duration-200",children:[s.jsx(t1,{className:"h-4 w-4 group-hover:scale-110 transition-transform duration-200"}),s.jsx("span",{className:"font-medium",children:"Filters"})]}),s.jsxs("button",{className:"group flex items-center space-x-2 px-4 py-2.5 bg-purple-600 text-white rounded-lg hover:bg-purple-700 transition-all duration-200 shadow-sm hover:shadow-md",children:[s.jsx(rs,{className:"h-4 w-4 group-hover:scale-110 transition-transform duration-200"}),s.jsx("span",{className:"font-medium",children:"Export Report"})]})]})]})}),s.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-6",children:[s.jsx(qi,{title:"Total Revenue",value:re(a.totalValue),change:"+12.5%",trend:"up",icon:ns,color:"green"}),s.jsx(qi,{title:"Total Products",value:ks(a.totalProducts),change:"+5.2%",trend:"up",icon:Me,color:"blue"}),s.jsx(qi,{title:"Low Stock Items",value:ks(a.lowStockProducts),change:"-2.1%",trend:"down",icon:Ss,color:a.lowStockProducts>0?"yellow":"green"}),s.jsx(qi,{title:"Avg. Product Value",value:a.totalProducts>0?re(a.totalValue/a.totalProducts):re(0),change:"+3.8%",trend:"up",icon:Gr,color:"purple"})]}),s.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-6",children:[s.jsxs("div",{className:"bg-white rounded-lg shadow-sm border border-gray-200 p-6",children:[s.jsxs("div",{className:"flex items-center justify-between mb-6",children:[s.jsx("h3",{className:"text-lg font-semibold text-gray-900",children:"Category Distribution"}),s.jsx(yt,{className:"h-5 w-5 text-gray-400"})]}),u&&s.jsx("div",{className:"space-y-4",children:u.categoryStats.map((h,m)=>s.jsxs("div",{className:"flex items-center justify-between",children:[s.jsxs("div",{className:"flex items-center space-x-3",children:[s.jsx("div",{className:`w-4 h-4 rounded ${m%6===0?"bg-blue-500":m%6===1?"bg-green-500":m%6===2?"bg-yellow-500":m%6===3?"bg-red-500":m%6===4?"bg-purple-500":"bg-pink-500"}`}),s.jsx("span",{className:"text-sm font-medium text-gray-900",children:h.category})]}),s.jsxs("div",{className:"text-right",children:[s.jsxs("div",{className:"text-sm font-semibold text-gray-900",children:[h.products," products"]}),s.jsx("div",{className:"text-xs text-gray-500",children:re(h.totalValue)})]})]},h.category))})]}),s.jsxs("div",{className:"bg-white rounded-lg shadow-sm border border-gray-200 p-6",children:[s.jsxs("div",{className:"flex items-center justify-between mb-6",children:[s.jsx("h3",{className:"text-lg font-semibold text-gray-900",children:"Stock Level Analysis"}),s.jsx(yt,{className:"h-5 w-5 text-gray-400"})]}),u&&s.jsxs("div",{className:"space-y-4",children:[s.jsxs("div",{className:"flex items-center justify-between p-4 bg-green-50 rounded-lg",children:[s.jsxs("div",{className:"flex items-center space-x-3",children:[s.jsx("div",{className:"w-3 h-3 bg-green-500 rounded-full"}),s.jsx("span",{className:"text-sm font-medium text-gray-900",children:"Normal Stock"})]}),s.jsx("span",{className:"text-lg font-bold text-green-600",children:u.stockLevels.normalStock})]}),s.jsxs("div",{className:"flex items-center justify-between p-4 bg-yellow-50 rounded-lg",children:[s.jsxs("div",{className:"flex items-center space-x-3",children:[s.jsx("div",{className:"w-3 h-3 bg-yellow-500 rounded-full"}),s.jsx("span",{className:"text-sm font-medium text-gray-900",children:"Low Stock"})]}),s.jsx("span",{className:"text-lg font-bold text-yellow-600",children:u.stockLevels.lowStock})]}),s.jsxs("div",{className:"flex items-center justify-between p-4 bg-red-50 rounded-lg",children:[s.jsxs("div",{className:"flex items-center space-x-3",children:[s.jsx("div",{className:"w-3 h-3 bg-red-500 rounded-full"}),s.jsx("span",{className:"text-sm font-medium text-gray-900",children:"Out of Stock"})]}),s.jsx("span",{className:"text-lg font-bold text-red-600",children:u.stockLevels.outOfStock})]})]})]})]}),s.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-6",children:[s.jsxs("div",{className:"bg-white rounded-lg shadow-sm border border-gray-200 p-6",children:[s.jsxs("div",{className:"flex items-center justify-between mb-6",children:[s.jsx("h3",{className:"text-lg font-semibold text-gray-900",children:"Expiry Analysis"}),s.jsx(so,{className:"h-5 w-5 text-gray-400"})]}),u&&s.jsxs("div",{className:"space-y-4",children:[s.jsxs("div",{className:"flex items-center justify-between p-4 bg-red-50 rounded-lg",children:[s.jsxs("div",{children:[s.jsx("div",{className:"text-sm font-medium text-gray-900",children:"Expired Products"}),s.jsx("div",{className:"text-xs text-gray-500",children:"Already expired"})]}),s.jsx("span",{className:"text-xl font-bold text-red-600",children:u.expiryAnalysis.expired})]}),s.jsxs("div",{className:"flex items-center justify-between p-4 bg-orange-50 rounded-lg",children:[s.jsxs("div",{children:[s.jsx("div",{className:"text-sm font-medium text-gray-900",children:"Expiring in 30 Days"}),s.jsx("div",{className:"text-xs text-gray-500",children:"Immediate attention needed"})]}),s.jsx("span",{className:"text-xl font-bold text-orange-600",children:u.expiryAnalysis.expiring30})]}),s.jsxs("div",{className:"flex items-center justify-between p-4 bg-yellow-50 rounded-lg",children:[s.jsxs("div",{children:[s.jsx("div",{className:"text-sm font-medium text-gray-900",children:"Expiring in 90 Days"}),s.jsx("div",{className:"text-xs text-gray-500",children:"Plan for clearance"})]}),s.jsx("span",{className:"text-xl font-bold text-yellow-600",children:u.expiryAnalysis.expiring90})]})]})]}),s.jsxs("div",{className:"bg-white rounded-lg shadow-sm border border-gray-200 p-6",children:[s.jsxs("div",{className:"flex items-center justify-between mb-6",children:[s.jsx("h3",{className:"text-lg font-semibold text-gray-900",children:"Top Products by Value"}),s.jsx(Lr,{className:"h-5 w-5 text-gray-400"})]}),u&&s.jsx("div",{className:"space-y-3",children:u.topProducts.slice(0,5).map((h,m)=>s.jsxs("div",{className:"flex items-center space-x-3",children:[s.jsx("div",{className:"flex-shrink-0 w-8 h-8 bg-blue-100 rounded-full flex items-center justify-center",children:s.jsx("span",{className:"text-sm font-semibold text-blue-600",children:m+1})}),s.jsxs("div",{className:"flex-1 min-w-0",children:[s.jsx("div",{className:"text-sm font-medium text-gray-900 truncate",children:h.name}),s.jsxs("div",{className:"text-xs text-gray-500",children:[h.category," • ",h.stock_in_pieces," units"]})]}),s.jsxs("div",{className:"text-right",children:[s.jsx("div",{className:"text-sm font-semibold text-gray-900",children:re(h.stock_in_pieces*h.price_per_piece)}),s.jsxs("div",{className:"text-xs text-gray-500",children:[re(h.price_per_piece),"/unit"]})]})]},h.id))})]})]}),s.jsxs("div",{className:"bg-white rounded-lg shadow-sm border border-gray-200 p-6",children:[s.jsxs("div",{className:"flex items-center justify-between mb-6",children:[s.jsx("h3",{className:"text-lg font-semibold text-gray-900",children:"Recent Activity"}),s.jsx(yt,{className:"h-5 w-5 text-gray-400"})]}),s.jsxs("div",{className:"space-y-4",children:[s.jsx(zi,{title:"Product sold",description:"Paracetamol 500mg - 2 units",time:"2 minutes ago",icon:Vt,color:"green"}),s.jsx(zi,{title:"Stock updated",description:"Amoxicillin 250mg - Added 100 units",time:"15 minutes ago",icon:Me,color:"blue"}),s.jsx(zi,{title:"Low stock alert",description:"Aspirin 325mg below reorder level",time:"1 hour ago",icon:Ss,color:"yellow"}),s.jsx(zi,{title:"New user registered",description:"Dr. Sarah Johnson added as manager",time:"2 hours ago",icon:sl,color:"purple"})]})]})]})}function qi({title:n,value:a,change:l,trend:i,icon:c,color:u}){const h={green:"bg-green-50 text-green-600",blue:"bg-blue-50 text-blue-600",yellow:"bg-yellow-50 text-yellow-600",red:"bg-red-50 text-red-600",purple:"bg-purple-50 text-purple-600"},m=i==="up"?Gr:Dd,x=i==="up"?"text-green-600":"text-red-600",g=m;return s.jsx("div",{className:"bg-white rounded-lg shadow-sm border border-gray-200 p-6",children:s.jsxs("div",{className:"flex items-center justify-between",children:[s.jsxs("div",{children:[s.jsx("p",{className:"text-sm font-medium text-gray-600",children:n}),s.jsx("p",{className:"text-2xl font-bold text-gray-900 mt-2",children:a}),s.jsxs("div",{className:"flex items-center mt-2",children:[s.jsx(g,{className:`h-4 w-4 ${x} mr-1`}),s.jsx("span",{className:`text-sm font-medium ${x}`,children:l}),s.jsx("span",{className:"text-sm text-gray-500 ml-1",children:"vs last period"})]})]}),s.jsx("div",{className:`p-3 rounded-lg ${h[u]}`,children:s.jsx(c,{className:"h-6 w-6"})})]})})}function zi({title:n,description:a,time:l,icon:i,color:c}){const u={green:"bg-green-100 text-green-600",blue:"bg-blue-100 text-blue-600",yellow:"bg-yellow-100 text-yellow-600",red:"bg-red-100 text-red-600",purple:"bg-purple-100 text-purple-600"};return s.jsxs("div",{className:"flex items-start space-x-3 p-4 bg-gray-50 rounded-lg",children:[s.jsx("div",{className:`p-2 rounded-lg ${u[c]}`,children:s.jsx(i,{className:"h-4 w-4"})}),s.jsxs("div",{className:"flex-1 min-w-0",children:[s.jsx("div",{className:"text-sm font-medium text-gray-900",children:n}),s.jsx("div",{className:"text-sm text-gray-600",children:a})]}),s.jsx("div",{className:"text-xs text-gray-400",children:l})]})}function SN(){const{user:n}=Es(),[a,l]=S.useState("profile"),[i,c]=S.useState(!1),[u,h]=S.useState(!1),[m,x]=S.useState({firstName:n?.firstName||"",lastName:n?.lastName||"",email:n?.email||"",phone:""}),[g,p]=S.useState({lowStockAlerts:!0,expiryWarnings:!0,dailyReports:!1,systemUpdates:!0}),[v,j]=S.useState({currentPassword:"",newPassword:"",confirmPassword:""}),w=async _=>{c(!0);try{await new Promise(C=>setTimeout(C,1e3)),console.log(`Saving ${_} settings...`)}catch(C){console.error("Error saving settings:",C)}finally{c(!1)}},N=[{id:"profile",label:"Profile",icon:kx},{id:"notifications",label:"Notifications",icon:Td},{id:"security",label:"Security",icon:Ii}];return s.jsxs("div",{className:"space-y-6",children:[s.jsx("div",{className:"bg-white rounded-xl p-6 shadow-sm border border-gray-200",children:s.jsxs("div",{className:"flex items-center space-x-4",children:[s.jsx("div",{className:"bg-gray-100 p-3 rounded-xl",children:s.jsx(qr,{className:"h-8 w-8 text-gray-600"})}),s.jsxs("div",{children:[s.jsxs("h1",{className:"text-2xl font-bold text-gray-900 flex items-center space-x-2",children:[s.jsx("span",{children:"Settings"}),s.jsx("span",{className:"inline-flex items-center px-2.5 py-0.5 rounded-full text-xs font-medium bg-gray-100 text-gray-800",children:"Personal"})]}),s.jsx("p",{className:"text-gray-600 mt-1",children:"Manage your account preferences and security settings"})]})]})}),s.jsx("div",{className:"bg-white rounded-lg shadow-sm border border-gray-200 overflow-hidden",children:s.jsxs("div",{className:"flex flex-col md:flex-row",children:[s.jsx("div",{className:"md:w-64 bg-gray-50 border-r border-gray-200",children:s.jsx("nav",{className:"p-4 space-y-2",children:N.map(_=>{const C=_.icon;return s.jsxs("button",{onClick:()=>l(_.id),className:`w-full flex items-center space-x-3 px-3 py-2 rounded-lg text-sm font-medium transition-colors ${a===_.id?"bg-blue-100 text-blue-700":"text-gray-600 hover:bg-gray-100 hover:text-gray-900"}`,children:[s.jsx(C,{className:"h-4 w-4"}),s.jsx("span",{children:_.label})]},_.id)})})}),s.jsxs("div",{className:"flex-1 p-6",children:[a==="profile"&&s.jsx("div",{className:"space-y-6",children:s.jsxs("div",{children:[s.jsx("h3",{className:"text-lg font-semibold text-gray-900 mb-4",children:"Profile Information"}),s.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"First Name"}),s.jsx("input",{type:"text",value:m.firstName,onChange:_=>x({...m,firstName:_.target.value}),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent"})]}),s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Last Name"}),s.jsx("input",{type:"text",value:m.lastName,onChange:_=>x({...m,lastName:_.target.value}),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent"})]}),s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Email Address"}),s.jsxs("div",{className:"relative",children:[s.jsx(_1,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 h-4 w-4 text-gray-400"}),s.jsx("input",{type:"email",value:m.email,onChange:_=>x({...m,email:_.target.value}),className:"w-full pl-10 pr-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent"})]})]}),s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Phone Number"}),s.jsxs("div",{className:"relative",children:[s.jsx(A1,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 h-4 w-4 text-gray-400"}),s.jsx("input",{type:"tel",value:m.phone,onChange:_=>x({...m,phone:_.target.value}),className:"w-full pl-10 pr-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent"})]})]})]}),s.jsx("div",{className:"flex justify-end mt-6",children:s.jsxs("button",{onClick:()=>w("profile"),disabled:i,className:"flex items-center space-x-2 px-4 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700 disabled:opacity-50 transition-colors",children:[i?s.jsx(yt,{className:"h-4 w-4 animate-spin"}):s.jsx(ud,{className:"h-4 w-4"}),s.jsx("span",{children:"Save Changes"})]})})]})}),a==="notifications"&&s.jsx("div",{className:"space-y-6",children:s.jsxs("div",{children:[s.jsx("h3",{className:"text-lg font-semibold text-gray-900 mb-4",children:"Notification Preferences"}),s.jsx("div",{className:"space-y-4",children:[{key:"lowStockAlerts",label:"Low Stock Alerts",description:"Get notified when products are running low"},{key:"expiryWarnings",label:"Expiry Warnings",description:"Alerts for products nearing expiration"},{key:"dailyReports",label:"Daily Reports",description:"Receive daily sales and inventory summaries"},{key:"systemUpdates",label:"System Updates",description:"Important system notifications and updates"}].map(_=>s.jsxs("div",{className:"flex items-center justify-between p-4 bg-gray-50 rounded-lg",children:[s.jsxs("div",{children:[s.jsx("div",{className:"text-sm font-medium text-gray-900",children:_.label}),s.jsx("div",{className:"text-sm text-gray-500",children:_.description})]}),s.jsxs("label",{className:"relative inline-flex items-center cursor-pointer",children:[s.jsx("input",{type:"checkbox",checked:g[_.key],onChange:C=>p({...g,[_.key]:C.target.checked}),className:"sr-only peer"}),s.jsx("div",{className:"w-11 h-6 bg-gray-200 peer-focus:outline-none peer-focus:ring-4 peer-focus:ring-blue-300 rounded-full peer peer-checked:after:translate-x-full peer-checked:after:border-white after:content-[''] after:absolute after:top-[2px] after:left-[2px] after:bg-white after:rounded-full after:h-5 after:w-5 after:transition-all peer-checked:bg-blue-600"})]})]},_.key))}),s.jsx("div",{className:"flex justify-end mt-6",children:s.jsxs("button",{onClick:()=>w("notifications"),disabled:i,className:"flex items-center space-x-2 px-4 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700 disabled:opacity-50 transition-colors",children:[i?s.jsx(yt,{className:"h-4 w-4 animate-spin"}):s.jsx(ud,{className:"h-4 w-4"}),s.jsx("span",{children:"Save Changes"})]})})]})}),a==="security"&&s.jsx("div",{className:"space-y-6",children:s.jsxs("div",{children:[s.jsx("h3",{className:"text-lg font-semibold text-gray-900 mb-4",children:"Security Settings"}),s.jsxs("div",{className:"bg-gray-50 rounded-lg p-6",children:[s.jsx("h4",{className:"text-sm font-medium text-gray-900 mb-4",children:"Change Password"}),s.jsxs("div",{className:"space-y-4",children:[s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Current Password"}),s.jsxs("div",{className:"relative",children:[s.jsx(Oi,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 h-4 w-4 text-gray-400"}),s.jsx("input",{type:u?"text":"password",value:v.currentPassword,onChange:_=>j({...v,currentPassword:_.target.value}),className:"w-full pl-10 pr-10 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent"}),s.jsx("button",{type:"button",onClick:()=>h(!u),className:"absolute right-3 top-1/2 transform -translate-y-1/2 text-gray-400 hover:text-gray-600",children:u?s.jsx(Rd,{className:"h-4 w-4"}):s.jsx(Ua,{className:"h-4 w-4"})})]})]}),s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"New Password"}),s.jsxs("div",{className:"relative",children:[s.jsx(Oi,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 h-4 w-4 text-gray-400"}),s.jsx("input",{type:u?"text":"password",value:v.newPassword,onChange:_=>j({...v,newPassword:_.target.value}),className:"w-full pl-10 pr-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent"})]})]}),s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Confirm New Password"}),s.jsxs("div",{className:"relative",children:[s.jsx(Oi,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 h-4 w-4 text-gray-400"}),s.jsx("input",{type:u?"text":"password",value:v.confirmPassword,onChange:_=>j({...v,confirmPassword:_.target.value}),className:"w-full pl-10 pr-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent"})]})]})]}),s.jsx("div",{className:"flex justify-end mt-4",children:s.jsxs("button",{onClick:()=>w("password"),disabled:i,className:"flex items-center space-x-2 px-4 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700 disabled:opacity-50 transition-colors",children:[i?s.jsx(yt,{className:"h-4 w-4 animate-spin"}):s.jsx(Oi,{className:"h-4 w-4"}),s.jsx("span",{children:"Update Password"})]})})]}),s.jsx("div",{className:"bg-yellow-50 border border-yellow-200 rounded-lg p-4",children:s.jsxs("div",{className:"flex items-start space-x-3",children:[s.jsx(Ii,{className:"h-5 w-5 text-yellow-600 mt-0.5"}),s.jsxs("div",{children:[s.jsx("h4",{className:"text-sm font-medium text-yellow-900",children:"Security Tips"}),s.jsxs("ul",{className:"text-sm text-yellow-700 mt-1 space-y-1",children:[s.jsx("li",{children:"• Use a strong password with at least 8 characters"}),s.jsx("li",{children:"• Include uppercase, lowercase, numbers, and symbols"}),s.jsx("li",{children:"• Don't reuse passwords from other accounts"}),s.jsx("li",{children:"• Log out when using shared computers"})]})]})]})})]})})]})]})})]})}function kN(){return s.jsx("div",{className:"min-h-screen bg-gray-50 flex items-center justify-center p-4",children:s.jsxs("div",{className:"text-center",children:[s.jsx("div",{className:"w-24 h-24 bg-red-100 rounded-full flex items-center justify-center mx-auto mb-6",children:s.jsx("svg",{className:"w-12 h-12 text-red-600",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:s.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 9v2m0 4h.01m-6.938 4h13.856c1.54 0 2.502-1.667 1.732-2.5L13.732 4c-.77-.833-1.964-.833-2.732 0L3.732 16.5c-.77.833.192 2.5 1.732 2.5z"})})}),s.jsx("h1",{className:"text-4xl font-bold text-gray-900 mb-4",children:"Access Denied"}),s.jsx("p",{className:"text-gray-600 text-lg mb-8",children:"You don't have permission to access this page."}),s.jsx(Jn,{to:"/dashboard",className:"bg-blue-600 text-white px-6 py-3 rounded-lg hover:bg-blue-700 transition-colors",children:"Go to Dashboard"})]})})}const CN=new aj({defaultOptions:{queries:{staleTime:1e3*60*5,cacheTime:1e3*60*10,retry:(n,a)=>a.status===404?!1:n<2}}});function EN(){const{isLoadingAuth:n,user:a}=Es();return n?s.jsx(p_,{}):s.jsxs(Wv,{children:[s.jsx(ts,{path:"/login",element:s.jsx(Ea,{title:"Login Error",children:a?s.jsx(Zn,{to:"/dashboard",replace:!0}):s.jsx(N2,{})})}),s.jsx(ts,{path:"/dashboard",element:s.jsx(Ea,{title:"Dashboard Error",children:s.jsx(Ta,{children:s.jsx(S2,{})})})}),s.jsx(ts,{path:"/pos",element:s.jsx(Ea,{title:"POS System Error",children:s.jsx(Ta,{children:s.jsx(B2,{})})})}),s.jsx(ts,{path:"/inventory",element:s.jsx(Ea,{title:"Inventory Error",children:s.jsx(Ta,{children:s.jsx(X2,{})})})}),s.jsx(ts,{path:"/management",element:s.jsx(Ea,{title:"Management Error",children:s.jsx(Ta,{requiredRole:"admin",children:s.jsx(dN,{})})})}),s.jsx(ts,{path:"/analytics",element:s.jsx(Ea,{title:"Analytics Error",children:s.jsx(Ta,{requiredRole:["admin","manager"],children:s.jsx(NN,{})})})}),s.jsx(ts,{path:"/settings",element:s.jsx(Ea,{title:"Settings Error",children:s.jsx(Ta,{children:s.jsx(SN,{})})})}),s.jsx(ts,{path:"/unauthorized",element:s.jsx(kN,{})}),s.jsx(ts,{path:"/",element:s.jsx(Zn,{to:"/dashboard",replace:!0})})]})}function AN(){return s.jsx(Cx,{title:"Application Error",message:"The pharmacy management system encountered an unexpected error. Please refresh the page or contact support if the problem persists.",onError:(n,a)=>{console.error("Global application error:",n,a)},children:s.jsxs(nj,{client:CN,children:[s.jsx(bx,{children:s.jsx(m2,{children:s.jsx(wb,{children:s.jsx("div",{className:"App",children:s.jsx(EN,{})})})})}),s.jsx(oj,{initialIsOpen:!1})]})})}cv.createRoot(document.getElementById("root")).render(s.jsx(S.StrictMode,{children:s.jsx(AN,{})}));
